{"version":3,"file":"index-b685fa53.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/axios/lib/helpers/bind.js","../../node_modules/axios/lib/utils.js","../../node_modules/axios/lib/core/AxiosError.js","../../node_modules/axios/lib/helpers/null.js","../../node_modules/axios/lib/helpers/toFormData.js","../../node_modules/axios/lib/helpers/AxiosURLSearchParams.js","../../node_modules/axios/lib/helpers/buildURL.js","../../node_modules/axios/lib/core/InterceptorManager.js","../../node_modules/axios/lib/defaults/transitional.js","../../node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","../../node_modules/axios/lib/platform/browser/classes/FormData.js","../../node_modules/axios/lib/platform/browser/classes/Blob.js","../../node_modules/axios/lib/platform/browser/index.js","../../node_modules/axios/lib/platform/common/utils.js","../../node_modules/axios/lib/platform/index.js","../../node_modules/axios/lib/helpers/toURLEncodedForm.js","../../node_modules/axios/lib/helpers/formDataToJSON.js","../../node_modules/axios/lib/defaults/index.js","../../node_modules/axios/lib/helpers/parseHeaders.js","../../node_modules/axios/lib/core/AxiosHeaders.js","../../node_modules/axios/lib/core/transformData.js","../../node_modules/axios/lib/cancel/isCancel.js","../../node_modules/axios/lib/cancel/CanceledError.js","../../node_modules/axios/lib/core/settle.js","../../node_modules/axios/lib/helpers/parseProtocol.js","../../node_modules/axios/lib/helpers/speedometer.js","../../node_modules/axios/lib/helpers/throttle.js","../../node_modules/axios/lib/helpers/progressEventReducer.js","../../node_modules/axios/lib/helpers/isURLSameOrigin.js","../../node_modules/axios/lib/helpers/cookies.js","../../node_modules/axios/lib/helpers/isAbsoluteURL.js","../../node_modules/axios/lib/helpers/combineURLs.js","../../node_modules/axios/lib/core/buildFullPath.js","../../node_modules/axios/lib/core/mergeConfig.js","../../node_modules/axios/lib/helpers/resolveConfig.js","../../node_modules/axios/lib/adapters/xhr.js","../../node_modules/axios/lib/helpers/composeSignals.js","../../node_modules/axios/lib/helpers/trackStream.js","../../node_modules/axios/lib/adapters/fetch.js","../../node_modules/axios/lib/adapters/adapters.js","../../node_modules/axios/lib/core/dispatchRequest.js","../../node_modules/axios/lib/env/data.js","../../node_modules/axios/lib/helpers/validator.js","../../node_modules/axios/lib/core/Axios.js","../../node_modules/axios/lib/cancel/CancelToken.js","../../node_modules/axios/lib/helpers/spread.js","../../node_modules/axios/lib/helpers/isAxiosError.js","../../node_modules/axios/lib/helpers/HttpStatusCode.js","../../node_modules/axios/lib/axios.js","../../node_modules/js-cookie/dist/js.cookie.mjs","../../src/services/api.js","../../src/services/authService.js","../../src/services/userService.js","../../src/contexts/AuthContext.jsx","../../src/services/gameService.js","../../src/contexts/GameContext.jsx","../../src/services/cartService.js","../../src/contexts/CartContext.jsx","../../src/hooks/useApi.js","../../src/hooks/useDebounce.js","../../src/components/Layout/Header.jsx","../../src/components/Layout/Footer.jsx","../../src/components/Layout/Layout.jsx","../../src/services/adService.js","../../src/components/Common/LoadingSpinner.jsx","../../src/pages/Home/Home.jsx","../../node_modules/clsx/dist/clsx.mjs","../../src/components/Common/Button.jsx","../../src/pages/Games/Games.jsx","../../src/services/favoritesService.js","../../src/services/orderService.js","../../src/services/supportService.js","../../src/pages/Games/GameDetails.jsx","../../src/pages/Auth/Login.jsx","../../src/pages/Auth/Register.jsx","../../src/services/questionsService.js","../../src/components/Common/Badge.jsx","../../src/components/Dashboard/MyQuestions.jsx","../../src/pages/Dashboard/Dashboard.jsx","../../src/components/Common/Modal.jsx","../../src/components/Common/ProfileImageUpload.jsx","../../src/pages/Profile/Profile.jsx","../../src/components/Common/ImageUpload.jsx","../../src/pages/Ads/CreateAd.jsx","../../src/pages/Ads/EditAd.jsx","../../src/components/Common/AddToCartButton.jsx","../../src/utils/imageUtils.js","../../src/components/Common/SafeImage.jsx","../../src/components/Ad/AdQuestions.jsx","../../src/pages/Ads/AdDetails.jsx","../../src/pages/Users/UserProfile.jsx","../../src/components/Common/EmptyState.jsx","../../src/pages/Favorites/Favorites.jsx","../../src/pages/Cart/Cart.jsx","../../src/pages/Cart/Checkout.jsx","../../src/pages/Orders/Orders.jsx","../../src/services/chatService.js","../../src/components/Chat/ChatRoom.jsx","../../src/components/Common/Alert.jsx","../../src/components/Common/Card.jsx","../../src/components/Common/Pagination.jsx","../../src/components/Common/RatingModal.jsx","../../src/pages/Orders/OrderDetails.jsx","../../src/components/Admin/GamesManagement.jsx","../../src/components/Admin/TicketsManagement.jsx","../../src/components/Admin/UserEditModal.jsx","../../src/components/Admin/UsersManagement.jsx","../../src/components/Admin/OrdersManagement.jsx","../../src/components/Admin/AdsManagement.jsx","../../src/components/Admin/AuditLogs.jsx","../../src/components/Admin/ReportsManagement.jsx","../../src/pages/Admin/AdminDashboard.jsx","../../src/pages/Admin/AdminSupport.jsx","../../src/pages/Support/Support.jsx","../../src/pages/Support/TicketDetails.jsx","../../src/pages/Notifications/Notifications.jsx","../../src/components/Auth/ProtectedRoute.jsx","../../src/App.jsx","../../src/main.jsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\nconst {iterator, toStringTag} = Symbol;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(toStringTag in val) && !(iterator in val);\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\nconst [isReadableStream, isRequest, isResponse, isHeaders] = ['ReadableStream', 'Request', 'Response', 'Headers'].map(kindOfTest);\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[iterator];\n\n  const _iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = _iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  return value != null && Number.isFinite(value = +value) ? value : defaultValue;\n}\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[toStringTag] === 'FormData' && thing[iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\n// original code\n// https://github.com/DigitalBrainJS/AxiosPromise/blob/16deab13710ec09779922131f3fa5954320f83ab/lib/utils.js#L11-L34\n\nconst _setImmediate = ((setImmediateSupported, postMessageSupported) => {\n  if (setImmediateSupported) {\n    return setImmediate;\n  }\n\n  return postMessageSupported ? ((token, callbacks) => {\n    _global.addEventListener(\"message\", ({source, data}) => {\n      if (source === _global && data === token) {\n        callbacks.length && callbacks.shift()();\n      }\n    }, false);\n\n    return (cb) => {\n      callbacks.push(cb);\n      _global.postMessage(token, \"*\");\n    }\n  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);\n})(\n  typeof setImmediate === 'function',\n  isFunction(_global.postMessage)\n);\n\nconst asap = typeof queueMicrotask !== 'undefined' ?\n  queueMicrotask.bind(_global) : ( typeof process !== 'undefined' && process.nextTick || _setImmediate);\n\n// *********************\n\n\nconst isIterable = (thing) => thing != null && isFunction(thing[iterator]);\n\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isReadableStream,\n  isRequest,\n  isResponse,\n  isHeaders,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable,\n  setImmediate: _setImmediate,\n  asap,\n  isIterable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  if (response) {\n    this.response = response;\n    this.status = response.status ? response.status : null;\n  }\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.status\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  AxiosError.call(axiosError, error.message, code, config, request, response);\n\n  axiosError.cause = error;\n\n  axiosError.name = error.name;\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?(object|Function)} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  if (utils.isFunction(options)) {\n    options = {\n      serialize: options\n    };\n  } \n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst _navigator = typeof navigator === 'object' && navigator || undefined;\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = hasBrowserEnv &&\n  (!_navigator || ['ReactNative', 'NativeScript', 'NS'].indexOf(_navigator.product) < 0);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nconst origin = hasBrowserEnv && window.location.href || 'http://localhost';\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv,\n  _navigator as navigator,\n  origin\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    }\n  }, options));\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n\n    if (name === '__proto__') return true;\n\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http', 'fetch'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data) ||\n      utils.isReadableStream(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (utils.isResponse(data) || utils.isReadableStream(data)) {\n      return data;\n    }\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else if (utils.isObject(header) && utils.isIterable(header)) {\n      let obj = {}, dest, key;\n      for (const entry of header) {\n        if (!utils.isArray(entry)) {\n          throw TypeError('Object iterator must return a key-value pair');\n        }\n\n        obj[key = entry[0]] = (dest = obj[key]) ?\n          (utils.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]]) : entry[1];\n      }\n\n      setHeaders(obj, valueOrRewrite)\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  getSetCookie() {\n    return this.get(\"set-cookie\") || [];\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","/**\n * Throttle decorator\n * @param {Function} fn\n * @param {Number} freq\n * @return {Function}\n */\nfunction throttle(fn, freq) {\n  let timestamp = 0;\n  let threshold = 1000 / freq;\n  let lastArgs;\n  let timer;\n\n  const invoke = (args, now = Date.now()) => {\n    timestamp = now;\n    lastArgs = null;\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n    fn.apply(null, args);\n  }\n\n  const throttled = (...args) => {\n    const now = Date.now();\n    const passed = now - timestamp;\n    if ( passed >= threshold) {\n      invoke(args, now);\n    } else {\n      lastArgs = args;\n      if (!timer) {\n        timer = setTimeout(() => {\n          timer = null;\n          invoke(lastArgs)\n        }, threshold - passed);\n      }\n    }\n  }\n\n  const flush = () => lastArgs && invoke(lastArgs);\n\n  return [throttled, flush];\n}\n\nexport default throttle;\n","import speedometer from \"./speedometer.js\";\nimport throttle from \"./throttle.js\";\nimport utils from \"../utils.js\";\n\nexport const progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return throttle(e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null,\n      [isDownloadStream ? 'download' : 'upload']: true\n    };\n\n    listener(data);\n  }, freq);\n}\n\nexport const progressEventDecorator = (total, throttled) => {\n  const lengthComputable = total != null;\n\n  return [(loaded) => throttled[0]({\n    lengthComputable,\n    total,\n    loaded\n  }), throttled[1]];\n}\n\nexport const asyncDecorator = (fn) => (...args) => utils.asap(() => fn(...args));\n","import platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ? ((origin, isMSIE) => (url) => {\n  url = new URL(url, platform.origin);\n\n  return (\n    origin.protocol === url.protocol &&\n    origin.host === url.host &&\n    (isMSIE || origin.port === url.port)\n  );\n})(\n  new URL(platform.origin),\n  platform.navigator && /(msie|trident)/i.test(platform.navigator.userAgent)\n) : () => true;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/?\\/$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {\n  let isRelativeUrl = !isAbsoluteURL(requestedURL);\n  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? { ...thing } : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, prop, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, prop , caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, prop , caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, prop , caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b , prop) => mergeDeepProperties(headersToObject(a), headersToObject(b),prop, true)\n  };\n\n  utils.forEach(Object.keys(Object.assign({}, config1, config2)), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport isURLSameOrigin from \"./isURLSameOrigin.js\";\nimport cookies from \"./cookies.js\";\nimport buildFullPath from \"../core/buildFullPath.js\";\nimport mergeConfig from \"../core/mergeConfig.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport buildURL from \"./buildURL.js\";\n\nexport default (config) => {\n  const newConfig = mergeConfig({}, config);\n\n  let {data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth} = newConfig;\n\n  newConfig.headers = headers = AxiosHeaders.from(headers);\n\n  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);\n\n  // HTTP basic authentication\n  if (auth) {\n    headers.set('Authorization', 'Basic ' +\n      btoa((auth.username || '') + ':' + (auth.password ? unescape(encodeURIComponent(auth.password)) : ''))\n    );\n  }\n\n  let contentType;\n\n  if (utils.isFormData(data)) {\n    if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n      headers.setContentType(undefined); // Let the browser set it\n    } else if ((contentType = headers.getContentType()) !== false) {\n      // fix semicolon duplication issue for ReactNative FormData implementation\n      const [type, ...tokens] = contentType ? contentType.split(';').map(token => token.trim()).filter(Boolean) : [];\n      headers.setContentType([type || 'multipart/form-data', ...tokens].join('; '));\n    }\n  }\n\n  // Add xsrf header\n  // This is only done if running in a standard browser environment.\n  // Specifically not if we're in a web worker, or react-native.\n\n  if (platform.hasStandardBrowserEnv) {\n    withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));\n\n    if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(newConfig.url))) {\n      // Add xsrf header\n      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies.read(xsrfCookieName);\n\n      if (xsrfValue) {\n        headers.set(xsrfHeaderName, xsrfValue);\n      }\n    }\n  }\n\n  return newConfig;\n}\n\n","import utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport {progressEventReducer} from '../helpers/progressEventReducer.js';\nimport resolveConfig from \"../helpers/resolveConfig.js\";\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    const _config = resolveConfig(config);\n    let requestData = _config.data;\n    const requestHeaders = AxiosHeaders.from(_config.headers).normalize();\n    let {responseType, onUploadProgress, onDownloadProgress} = _config;\n    let onCanceled;\n    let uploadThrottled, downloadThrottled;\n    let flushUpload, flushDownload;\n\n    function done() {\n      flushUpload && flushUpload(); // flush events\n      flushDownload && flushDownload(); // flush events\n\n      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);\n\n      _config.signal && _config.signal.removeEventListener('abort', onCanceled);\n    }\n\n    let request = new XMLHttpRequest();\n\n    request.open(_config.method.toUpperCase(), _config.url, true);\n\n    // Set the request timeout in MS\n    request.timeout = _config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = _config.timeout ? 'timeout of ' + _config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = _config.transitional || transitionalDefaults;\n      if (_config.timeoutErrorMessage) {\n        timeoutErrorMessage = _config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(_config.withCredentials)) {\n      request.withCredentials = !!_config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = _config.responseType;\n    }\n\n    // Handle progress if needed\n    if (onDownloadProgress) {\n      ([downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true));\n      request.addEventListener('progress', downloadThrottled);\n    }\n\n    // Not all browsers support upload events\n    if (onUploadProgress && request.upload) {\n      ([uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress));\n\n      request.upload.addEventListener('progress', uploadThrottled);\n\n      request.upload.addEventListener('loadend', flushUpload);\n    }\n\n    if (_config.cancelToken || _config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);\n      if (_config.signal) {\n        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(_config.url);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import CanceledError from \"../cancel/CanceledError.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport utils from '../utils.js';\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    }\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT))\n    }, timeout)\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    }\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils.asap(unsubscribe);\n\n    return signal;\n  }\n}\n\nexport default composeSignals;\n","\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n}\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  }\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport composeSignals from \"../helpers/composeSignals.js\";\nimport {trackStream} from \"../helpers/trackStream.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport {progressEventReducer, progressEventDecorator, asyncDecorator} from \"../helpers/progressEventReducer.js\";\nimport resolveConfig from \"../helpers/resolveConfig.js\";\nimport settle from \"../core/settle.js\";\n\nconst isFetchSupported = typeof fetch === 'function' && typeof Request === 'function' && typeof Response === 'function';\nconst isReadableStreamSupported = isFetchSupported && typeof ReadableStream === 'function';\n\n// used only inside the fetch adapter\nconst encodeText = isFetchSupported && (typeof TextEncoder === 'function' ?\n    ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) :\n    async (str) => new Uint8Array(await new Response(str).arrayBuffer())\n);\n\nconst test = (fn, ...args) => {\n  try {\n    return !!fn(...args);\n  } catch (e) {\n    return false\n  }\n}\n\nconst supportsRequestStream = isReadableStreamSupported && test(() => {\n  let duplexAccessed = false;\n\n  const hasContentType = new Request(platform.origin, {\n    body: new ReadableStream(),\n    method: 'POST',\n    get duplex() {\n      duplexAccessed = true;\n      return 'half';\n    },\n  }).headers.has('Content-Type');\n\n  return duplexAccessed && !hasContentType;\n});\n\nconst DEFAULT_CHUNK_SIZE = 64 * 1024;\n\nconst supportsResponseStream = isReadableStreamSupported &&\n  test(() => utils.isReadableStream(new Response('').body));\n\n\nconst resolvers = {\n  stream: supportsResponseStream && ((res) => res.body)\n};\n\nisFetchSupported && (((res) => {\n  ['text', 'arrayBuffer', 'blob', 'formData', 'stream'].forEach(type => {\n    !resolvers[type] && (resolvers[type] = utils.isFunction(res[type]) ? (res) => res[type]() :\n      (_, config) => {\n        throw new AxiosError(`Response type '${type}' is not supported`, AxiosError.ERR_NOT_SUPPORT, config);\n      })\n  });\n})(new Response));\n\nconst getBodyLength = async (body) => {\n  if (body == null) {\n    return 0;\n  }\n\n  if(utils.isBlob(body)) {\n    return body.size;\n  }\n\n  if(utils.isSpecCompliantForm(body)) {\n    const _request = new Request(platform.origin, {\n      method: 'POST',\n      body,\n    });\n    return (await _request.arrayBuffer()).byteLength;\n  }\n\n  if(utils.isArrayBufferView(body) || utils.isArrayBuffer(body)) {\n    return body.byteLength;\n  }\n\n  if(utils.isURLSearchParams(body)) {\n    body = body + '';\n  }\n\n  if(utils.isString(body)) {\n    return (await encodeText(body)).byteLength;\n  }\n}\n\nconst resolveBodyLength = async (headers, body) => {\n  const length = utils.toFiniteNumber(headers.getContentLength());\n\n  return length == null ? getBodyLength(body) : length;\n}\n\nexport default isFetchSupported && (async (config) => {\n  let {\n    url,\n    method,\n    data,\n    signal,\n    cancelToken,\n    timeout,\n    onDownloadProgress,\n    onUploadProgress,\n    responseType,\n    headers,\n    withCredentials = 'same-origin',\n    fetchOptions\n  } = resolveConfig(config);\n\n  responseType = responseType ? (responseType + '').toLowerCase() : 'text';\n\n  let composedSignal = composeSignals([signal, cancelToken && cancelToken.toAbortSignal()], timeout);\n\n  let request;\n\n  const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {\n      composedSignal.unsubscribe();\n  });\n\n  let requestContentLength;\n\n  try {\n    if (\n      onUploadProgress && supportsRequestStream && method !== 'get' && method !== 'head' &&\n      (requestContentLength = await resolveBodyLength(headers, data)) !== 0\n    ) {\n      let _request = new Request(url, {\n        method: 'POST',\n        body: data,\n        duplex: \"half\"\n      });\n\n      let contentTypeHeader;\n\n      if (utils.isFormData(data) && (contentTypeHeader = _request.headers.get('content-type'))) {\n        headers.setContentType(contentTypeHeader)\n      }\n\n      if (_request.body) {\n        const [onProgress, flush] = progressEventDecorator(\n          requestContentLength,\n          progressEventReducer(asyncDecorator(onUploadProgress))\n        );\n\n        data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);\n      }\n    }\n\n    if (!utils.isString(withCredentials)) {\n      withCredentials = withCredentials ? 'include' : 'omit';\n    }\n\n    // Cloudflare Workers throws when credentials are defined\n    // see https://github.com/cloudflare/workerd/issues/902\n    const isCredentialsSupported = \"credentials\" in Request.prototype;\n    request = new Request(url, {\n      ...fetchOptions,\n      signal: composedSignal,\n      method: method.toUpperCase(),\n      headers: headers.normalize().toJSON(),\n      body: data,\n      duplex: \"half\",\n      credentials: isCredentialsSupported ? withCredentials : undefined\n    });\n\n    let response = await fetch(request);\n\n    const isStreamResponse = supportsResponseStream && (responseType === 'stream' || responseType === 'response');\n\n    if (supportsResponseStream && (onDownloadProgress || (isStreamResponse && unsubscribe))) {\n      const options = {};\n\n      ['status', 'statusText', 'headers'].forEach(prop => {\n        options[prop] = response[prop];\n      });\n\n      const responseContentLength = utils.toFiniteNumber(response.headers.get('content-length'));\n\n      const [onProgress, flush] = onDownloadProgress && progressEventDecorator(\n        responseContentLength,\n        progressEventReducer(asyncDecorator(onDownloadProgress), true)\n      ) || [];\n\n      response = new Response(\n        trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {\n          flush && flush();\n          unsubscribe && unsubscribe();\n        }),\n        options\n      );\n    }\n\n    responseType = responseType || 'text';\n\n    let responseData = await resolvers[utils.findKey(resolvers, responseType) || 'text'](response, config);\n\n    !isStreamResponse && unsubscribe && unsubscribe();\n\n    return await new Promise((resolve, reject) => {\n      settle(resolve, reject, {\n        data: responseData,\n        headers: AxiosHeaders.from(response.headers),\n        status: response.status,\n        statusText: response.statusText,\n        config,\n        request\n      })\n    })\n  } catch (err) {\n    unsubscribe && unsubscribe();\n\n    if (err && err.name === 'TypeError' && /Load failed|fetch/i.test(err.message)) {\n      throw Object.assign(\n        new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request),\n        {\n          cause: err.cause || err\n        }\n      )\n    }\n\n    throw AxiosError.from(err, err && err.code, config, request);\n  }\n});\n\n\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport fetchAdapter from './fetch.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter,\n  fetch: fetchAdapter\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","export const VERSION = \"1.9.0\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\nvalidators.spelling = function spelling(correctSpelling) {\n  return (value, opt) => {\n    // eslint-disable-next-line no-console\n    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);\n    return true;\n  }\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig || {};\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  async request(configOrUrl, config) {\n    try {\n      return await this._request(configOrUrl, config);\n    } catch (err) {\n      if (err instanceof Error) {\n        let dummy = {};\n\n        Error.captureStackTrace ? Error.captureStackTrace(dummy) : (dummy = new Error());\n\n        // slice off the Error: ... line\n        const stack = dummy.stack ? dummy.stack.replace(/^.+\\n/, '') : '';\n        try {\n          if (!err.stack) {\n            err.stack = stack;\n            // match without the 2 top stack lines\n          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\\n.+\\n/, ''))) {\n            err.stack += '\\n' + stack\n          }\n        } catch (e) {\n          // ignore the case where \"stack\" is an un-writable property\n        }\n      }\n\n      throw err;\n    }\n  }\n\n  _request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.allowAbsoluteUrls\n    if (config.allowAbsoluteUrls !== undefined) {\n      // do nothing\n    } else if (this.defaults.allowAbsoluteUrls !== undefined) {\n      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;\n    } else {\n      config.allowAbsoluteUrls = true;\n    }\n\n    validator.assertOptions(config, {\n      baseUrl: validators.spelling('baseURL'),\n      withXsrfToken: validators.spelling('withXSRFToken')\n    }, true);\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift.apply(chain, requestInterceptorChain);\n      chain.push.apply(chain, responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    i = 0;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n","import axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { toast } from 'react-toastify';\r\n\r\n// Dynamic base URL based on environment\r\nconst getApiBaseUrl = () => {\r\n  // Check for environment variable first\r\n  if (import.meta.env.VITE_API_BASE_URL) {\r\n    return import.meta.env.VITE_API_BASE_URL;\r\n  }\r\n  \r\n  // In development, use localhost\r\n  if (import.meta.env.DEV || window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\r\n    return 'http://127.0.0.1:5000/api';\r\n  }\r\n  \r\n  // In production, try using relative URL with Vite proxy first\r\n  if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\r\n    // In development with Vite proxy\r\n    return '/api';\r\n  }\r\n  \r\n  // In production, construct URL from current location\r\n  const protocol = window.location.protocol;\r\n  const hostname = window.location.hostname;\r\n  \r\n  // For production, assume API is on port 5000 or same domain with /api path\r\n  return `${protocol}//${hostname}:5000/api`;\r\n};\r\n\r\nconst API_BASE_URL = getApiBaseUrl();\r\n\r\n// Criar instância do axios\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  timeout: 10000,\r\n  withCredentials: false, // Importante para CORS\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nlet isRefreshing = false;\r\nlet failedQueue = [];\r\n\r\nconst processQueue = (error, token = null) => {\r\n  failedQueue.forEach(prom => {\r\n    if (error) {\r\n      prom.reject(error);\r\n    } else {\r\n      prom.resolve(token);\r\n    }\r\n  });\r\n\r\n  failedQueue = [];\r\n};\r\n\r\n// Função para limpar sessão de forma segura\r\nconst clearSession = () => {\r\n  Cookies.remove('access_token');\r\n  Cookies.remove('refresh_token');\r\n\r\n  // Disparar evento para informar outras abas sobre logout\r\n  try {\r\n    localStorage.setItem('auth_event', JSON.stringify({\r\n      type: 'logout',\r\n      timestamp: Date.now()\r\n    }));\r\n\r\n    // Remover o evento imediatamente para não interferir\r\n    setTimeout(() => {\r\n      localStorage.removeItem('auth_event');\r\n    }, 100);\r\n  } catch (error) {\r\n    console.warn('Erro ao comunicar logout para outras abas:', error);\r\n  }\r\n};\r\n\r\n// Função para validar token no localStorage/cookies\r\nconst isTokenValid = () => {\r\n  const token = Cookies.get('access_token');\r\n  if (!token) return false;\r\n\r\n  try {\r\n    // Verificar se o token não está expirado (verificação básica)\r\n    const payload = JSON.parse(atob(token.split('.')[1]));\r\n    const now = Date.now() / 1000;\r\n\r\n    // Se o token expira em menos de 30 segundos, considerá-lo inválido\r\n    return payload.exp > (now + 30);\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n};\r\n\r\n// Interceptor para adicionar token\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = Cookies.get('access_token');\r\n\r\n    // Adicionar token se existir\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n\r\n\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Interceptor para lidar com respostas\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  async (error) => {\r\n    const originalRequest = error.config;\r\n\r\n    // Se é erro 401 e não é uma tentativa de retry\r\n    if (error.response?.status === 401 && !originalRequest._retry) {\r\n      // Se já está fazendo refresh, adicionar à fila\r\n      if (isRefreshing) {\r\n        return new Promise((resolve, reject) => {\r\n          failedQueue.push({ resolve, reject });\r\n        }).then(token => {\r\n          if (token) {\r\n            originalRequest.headers.Authorization = `Bearer ${token}`;\r\n            return api(originalRequest);\r\n          }\r\n          return Promise.reject(error);\r\n        }).catch(err => {\r\n          return Promise.reject(err);\r\n        });\r\n      }\r\n\r\n      // Marcar que está fazendo refresh\r\n      originalRequest._retry = true;\r\n      isRefreshing = true;\r\n\r\n      try {\r\n        const refreshToken = Cookies.get('refresh_token');\r\n\r\n        if (!refreshToken) {\r\n          throw new Error('No refresh token available');\r\n        }\r\n\r\n        // Tentar fazer refresh do token\r\n        const response = await axios.post(`${API_BASE_URL}/auth/refresh`, {}, {\r\n          headers: {\r\n            Authorization: `Bearer ${refreshToken}`,\r\n          },\r\n          timeout: 5000, // Timeout menor para refresh\r\n        });\r\n\r\n        if (response.data.success) {\r\n          const { access_token } = response.data.data;\r\n\r\n          // Salvar novo token\r\n          Cookies.set('access_token', access_token, { expires: 1 });\r\n\r\n          // Processar fila de requisições que falharam\r\n          processQueue(null, access_token);\r\n\r\n          // Retry da requisição original\r\n          originalRequest.headers.Authorization = `Bearer ${access_token}`;\r\n          return api(originalRequest);\r\n        } else {\r\n          throw new Error('Refresh failed');\r\n        }\r\n      } catch (refreshError) {\r\n        console.warn('Refresh token failed:', refreshError.message);\r\n\r\n        // Limpar sessão e processar fila de erros\r\n        processQueue(refreshError, null);\r\n        clearSession();\r\n\r\n        // Só redirecionar se não estamos já na página de login\r\n        if (!window.location.pathname.includes('/login')) {\r\n          // Usar timeout para evitar problemas de estado\r\n          setTimeout(() => {\r\n            window.location.href = '/login';\r\n          }, 100);\r\n        }\r\n\r\n        return Promise.reject(refreshError);\r\n      } finally {\r\n        isRefreshing = false;\r\n      }\r\n    }\r\n\r\n    // Para outros erros, mostrar toast apenas se não for um retry e não for erro de autenticação já tratado\r\n    if (error.response?.status !== 401 && !originalRequest._retry) {\r\n      const message = error.response?.data?.message || 'Erro interno do servidor';\r\n\r\n      // Evitar toasts duplicados\r\n      const errorKey = `${error.config?.url}-${error.response?.status}-${message}`;\r\n      const lastErrorTime = window.lastErrorToast?.[errorKey] || 0;\r\n      const now = Date.now();\r\n\r\n      if (now - lastErrorTime > 3000) { // 3 segundos entre toasts iguais\r\n        toast.error(message);\r\n\r\n        if (!window.lastErrorToast) window.lastErrorToast = {};\r\n        window.lastErrorToast[errorKey] = now;\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Listener para eventos de storage (comunicação entre abas)\r\nif (typeof window !== 'undefined') {\r\n  window.addEventListener('storage', (e) => {\r\n    if (e.key === 'auth_event' && e.newValue) {\r\n      try {\r\n        const event = JSON.parse(e.newValue);\r\n\r\n        if (event.type === 'logout') {\r\n          // Outra aba fez logout, limpar esta aba também\r\n          Cookies.remove('access_token');\r\n          Cookies.remove('refresh_token');\r\n\r\n          // Só redirecionar se não estamos já na página de login\r\n          if (!window.location.pathname.includes('/login')) {\r\n            window.location.href = '/login';\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.warn('Erro ao processar evento de auth:', error);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport default api;","import api from './api';\r\nimport Cookies from 'js-cookie';\r\n\r\nexport const authService = {\r\n  async login(email, password) {\r\n    try {\r\n      const response = await api.post('/auth/login', { email, password });\r\n      const { access_token, refresh_token, user } = response.data.data;\r\n      \r\n      // Armazenar tokens\r\n      Cookies.set('access_token', access_token, { expires: 1 }); // 1 dia\r\n      Cookies.set('refresh_token', refresh_token, { expires: 7 }); // 7 dias\r\n      \r\n      return { success: true, user, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao fazer login'\r\n      };\r\n    }\r\n  },\r\n\r\n  async register(userData) {\r\n    try {\r\n      const response = await api.post('/auth/register', userData);\r\n      return { success: true, user: response.data.data.user, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao registrar usuário'\r\n      };\r\n    }\r\n  },\r\n\r\n  logout() {\r\n    Cookies.remove('access_token');\r\n    Cookies.remove('refresh_token');\r\n    window.location.href = '/login';\r\n  },\r\n\r\n  isAuthenticated() {\r\n    return !!Cookies.get('access_token');\r\n  },\r\n\r\n  async requestPasswordReset(email) {\r\n    try {\r\n      const response = await api.post('/auth/password/reset-request', { email });\r\n      return { success: true, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao solicitar reset de senha'\r\n      };\r\n    }\r\n  },\r\n\r\n  async resetPassword(token, password) {\r\n    try {\r\n      const response = await api.post('/auth/password/reset', { token, password });\r\n      return { success: true, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao redefinir senha'\r\n      };\r\n    }\r\n  }\r\n};","// front/src/services/userService.js\r\nimport api from './api';\r\n\r\nexport const userService = {\r\n  async getProfile() {\r\n    try {\r\n      const response = await api.get('/users/profile');\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar perfil'\r\n      };\r\n    }\r\n  },\r\n\r\n  async updateProfile(userData) {\r\n    try {\r\n      const response = await api.put('/users/profile', userData);\r\n      return { success: true, data: response.data.data, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao atualizar perfil'\r\n      };\r\n    }\r\n  },\r\n\r\n  async changePassword(passwordData) {\r\n    try {\r\n      const response = await api.post('/users/change-password', passwordData);\r\n      return { success: true, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao alterar senha'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getDashboardData() {\r\n    try {\r\n      const response = await api.get('/users/dashboard');\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar dados do dashboard'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getUserPublicProfile(userId) {\r\n    try {\r\n      const response = await api.get(`/users/${userId}`);\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar perfil público'\r\n      };\r\n    }\r\n  }\r\n};","import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { authService } from '../services/authService';\r\nimport { userService } from '../services/userService';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth deve ser usado dentro de um AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [lastAuthCheck, setLastAuthCheck] = useState(0);\r\n\r\n  // Cache da verificação de autenticação (5 minutos)\r\n  const AUTH_CACHE_DURATION = 5 * 60 * 1000;\r\n\r\n  // Função para verificar se o usuário está autenticado\r\n  const checkAuth = async (force = false) => {\r\n    const now = Date.now();\r\n\r\n    // OTIMIZAÇÃO: Usar cache se não for forçado e estiver dentro do tempo\r\n    if (!force && (now - lastAuthCheck) < AUTH_CACHE_DURATION && user) {\r\n      return;\r\n    }\r\n\r\n    const token = Cookies.get('access_token');\r\n\r\n    if (!token) {\r\n      setUser(null);\r\n      setIsAuthenticated(false);\r\n      setLoading(false);\r\n      setLastAuthCheck(now);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Buscar dados do usuário usando o token\r\n      const result = await userService.getProfile();\r\n\r\n      if (result.success) {\r\n        setUser(result.data.user);\r\n        setIsAuthenticated(true);\r\n        setLastAuthCheck(now);\r\n      } else {\r\n        // Token inválido, remover cookies\r\n        Cookies.remove('access_token');\r\n        Cookies.remove('refresh_token');\r\n        setUser(null);\r\n        setIsAuthenticated(false);\r\n        setLastAuthCheck(now);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao verificar autenticação:', error);\r\n      // Em caso de erro, limpar dados\r\n      Cookies.remove('access_token');\r\n      Cookies.remove('refresh_token');\r\n      setUser(null);\r\n      setIsAuthenticated(false);\r\n      setLastAuthCheck(now);\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkAuth();\r\n\r\n    // OTIMIZAÇÃO: Reduzir listeners desnecessários\r\n    const handleStorageChange = (e) => {\r\n      if (e.key === 'access_token' || e.key === 'refresh_token') {\r\n        checkAuth(true); // Forçar verificação apenas se tokens mudaram\r\n      }\r\n    };\r\n\r\n    // OTIMIZAÇÃO: Verificar apenas quando a janela ganha foco E passou tempo suficiente\r\n    const handleVisibilityChange = () => {\r\n      if (!document.hidden) {\r\n        const now = Date.now();\r\n        if ((now - lastAuthCheck) > AUTH_CACHE_DURATION) {\r\n          checkAuth();\r\n        }\r\n      }\r\n    };\r\n\r\n    // Adicionar listeners\r\n    window.addEventListener('storage', handleStorageChange);\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n\r\n    // OTIMIZAÇÃO: Verificar autenticação apenas a cada 10 minutos (não 5)\r\n    const authCheckInterval = setInterval(() => {\r\n      if (isAuthenticated) {\r\n        checkAuth();\r\n      }\r\n    }, 10 * 60 * 1000);\r\n\r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange);\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n      clearInterval(authCheckInterval);\r\n    };\r\n  }, [lastAuthCheck, isAuthenticated]);\r\n\r\n  const login = async (email, password) => {\r\n    try {\r\n      const result = await authService.login(email, password);\r\n\r\n      if (result.success) {\r\n        setUser(result.user);\r\n        setIsAuthenticated(true);\r\n        setLastAuthCheck(Date.now());\r\n\r\n        // Disparar evento personalizado para notificar outras abas\r\n        window.dispatchEvent(new StorageEvent('storage', {\r\n          key: 'auth_status',\r\n          newValue: 'logged_in',\r\n          url: window.location.href\r\n        }));\r\n      }\r\n\r\n      return result;\r\n    } catch (error) {\r\n      console.error('Erro no login:', error);\r\n      return { success: false, message: 'Erro interno no login' };\r\n    }\r\n  };\r\n\r\n  const register = async (userData) => {\r\n    try {\r\n      const result = await authService.register(userData);\r\n      return result;\r\n    } catch (error) {\r\n      console.error('Erro no registro:', error);\r\n      return { success: false, message: 'Erro interno no registro' };\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    // Limpar estado local\r\n    setUser(null);\r\n    setIsAuthenticated(false);\r\n    setLastAuthCheck(0);\r\n\r\n    // Remover cookies\r\n    Cookies.remove('access_token');\r\n    Cookies.remove('refresh_token');\r\n\r\n    // Disparar evento para outras abas\r\n    window.dispatchEvent(new StorageEvent('storage', {\r\n      key: 'auth_status',\r\n      newValue: 'logged_out',\r\n      url: window.location.href\r\n    }));\r\n\r\n    // Redirecionar\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  // Função para atualizar dados do usuário após mudanças no perfil\r\n  const updateUser = (updatedUserData) => {\r\n    setUser(prevUser => ({\r\n      ...prevUser,\r\n      ...updatedUserData\r\n    }));\r\n    // Atualizar timestamp do cache\r\n    setLastAuthCheck(Date.now());\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    login,\r\n    register,\r\n    logout,\r\n    updateUser,\r\n    loading,\r\n    isAuthenticated,\r\n    checkAuth: () => checkAuth(true) // Expor função para revalidação manual forçada\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};","import api from './api';\r\n\r\nexport const gameService = {\r\n  async getGames(params = {}) {\r\n    try {\r\n      const response = await api.get('/games', { params });\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar jogos'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getGame(gameId) {\r\n    try {\r\n      const response = await api.get(`/games/${gameId}`);\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar jogo'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getFeaturedGames() {\r\n    try {\r\n      const response = await api.get('/games/featured');\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar jogos em destaque'\r\n      };\r\n    }\r\n  }\r\n};","import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { gameService } from '../services/gameService';\r\n\r\nconst GameContext = createContext();\r\n\r\nexport const useGames = () => {\r\n  const context = useContext(GameContext);\r\n  if (!context) {\r\n    throw new Error('useGames deve ser usado dentro de um GameProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const GameProvider = ({ children }) => {\r\n  const [games, setGames] = useState([]);\r\n  const [featuredGames, setFeaturedGames] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const fetchGames = async (params = {}) => {\r\n    setLoading(true);\r\n    const result = await gameService.getGames(params);\r\n    if (result.success) {\r\n      setGames(result.data.games);\r\n    }\r\n    setLoading(false);\r\n    return result;\r\n  };\r\n\r\n  const fetchFeaturedGames = async () => {\r\n    const result = await gameService.getFeaturedGames();\r\n    if (result.success) {\r\n      setFeaturedGames(result.data.featured_games);\r\n    }\r\n    return result;\r\n  };\r\n\r\n  // Busca inicial de jogos\r\n  useEffect(() => {\r\n    fetchGames();\r\n    fetchFeaturedGames();\r\n  }, []);\r\n\r\n  const value = {\r\n    games,\r\n    featuredGames,\r\n    loading,\r\n    fetchGames,\r\n    fetchFeaturedGames\r\n  };\r\n\r\n  return (\r\n    <GameContext.Provider value={value}>\r\n      {children}\r\n    </GameContext.Provider>\r\n  );\r\n};","import api from './api';\r\n\r\nexport const cartService = {\r\n  // Buscar carrinho do usuário\r\n  getCart: async () => {\r\n    try {\r\n      const response = await api.get('/cart');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Erro ao buscar carrinho:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar carrinho'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Adicionar item ao carrinho\r\n  addToCart: async (adId, quantity = 1) => {\r\n    try {\r\n      const response = await api.post('/cart/add', {\r\n        ad_id: adId,\r\n        quantity\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Erro ao adicionar ao carrinho:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao adicionar ao carrinho'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Atualizar quantidade do item\r\n  updateCartItem: async (adId, quantity) => {\r\n    try {\r\n      const response = await api.put(`/cart/update/${adId}`, {\r\n        quantity\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Erro ao atualizar item:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao atualizar item'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Remover item do carrinho\r\n  removeFromCart: async (adId) => {\r\n    try {\r\n      const response = await api.delete(`/cart/remove/${adId}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Erro ao remover item:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao remover item'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Limpar carrinho\r\n  clearCart: async () => {\r\n    try {\r\n      const response = await api.delete('/cart/clear');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Erro ao limpar carrinho:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao limpar carrinho'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Validar carrinho\r\n  validateCart: async () => {\r\n    try {\r\n      const response = await api.get('/cart/validate');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Erro ao validar carrinho:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao validar carrinho'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Contar itens do carrinho\r\n  getCartCount: async () => {\r\n    try {\r\n      const response = await api.get('/cart/count');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Erro ao contar itens:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao contar itens'\r\n      };\r\n    }\r\n  }\r\n};","// front/src/contexts/CartContext.jsx - VERSÃO CORRIGIDA PARA is_in_cart\r\nimport React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { cartService } from '../services/cartService';\r\nimport { useAuth } from './AuthContext';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const useCart = () => {\r\n  const context = useContext(CartContext);\r\n  if (!context) {\r\n    throw new Error('useCart deve ser usado dentro de um CartProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const { isAuthenticated, user } = useAuth();\r\n  const [cart, setCart] = useState({ items: [], total_items: 0, total_price: 0 });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Cache local para melhor performance\r\n  const [cartCache, setCartCache] = useState(new Set());\r\n\r\n  // Carregar carrinho quando usuário logar\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      console.log('🔄 Usuário logado, carregando carrinho...');\r\n      loadCart();\r\n    } else {\r\n      console.log('❌ Usuário não logado, limpando carrinho...');\r\n      setCart({ items: [], total_items: 0, total_price: 0 });\r\n      setCartCache(new Set());\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  const loadCart = async () => {\r\n    if (!isAuthenticated) {\r\n      console.log('⚠️ Tentativa de carregar carrinho sem autenticação');\r\n      setCart({ items: [], total_items: 0, total_price: 0 });\r\n      setCartCache(new Set());\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      console.log('📡 Fazendo requisição para buscar carrinho...');\r\n\r\n      const result = await cartService.getCart();\r\n\r\n      console.log('📦 Resposta do carrinho (raw):', result);\r\n\r\n      if (result.success) {\r\n        const cartData = result.data || {};\r\n\r\n        console.log('📋 Dados do carrinho extraídos:', cartData);\r\n\r\n        // CORREÇÃO: Verificar diferentes estruturas possíveis\r\n        let items = [];\r\n\r\n        if (cartData.cart && Array.isArray(cartData.cart.items)) {\r\n          items = cartData.cart.items;\r\n          console.log('✅ Estrutura encontrada: data.cart.items');\r\n        } else if (cartData.items && Array.isArray(cartData.items)) {\r\n          items = cartData.items;\r\n          console.log('✅ Estrutura encontrada: data.items');\r\n        } else if (Array.isArray(cartData)) {\r\n          items = cartData;\r\n          console.log('✅ Estrutura encontrada: data como array');\r\n        } else {\r\n          console.log('⚠️ Estrutura não reconhecida, assumindo carrinho vazio');\r\n          items = [];\r\n        }\r\n\r\n        console.log(`📊 Total de itens encontrados: ${items.length}`);\r\n\r\n        // Garantir que cada item tem a estrutura correta\r\n        const normalizedItems = items.map((item, index) => {\r\n          console.log(`🔍 Processando item ${index + 1}:`, item);\r\n\r\n          const normalizedItem = {\r\n            _id: item._id || item.id || `temp_${index}`,\r\n            ad_id: item.ad_id || item.adId,\r\n            quantity: parseInt(item.quantity) || 1,\r\n            price_snapshot: parseFloat(item.price_snapshot || item.price || 0),\r\n            created_at: item.created_at || new Date().toISOString(),\r\n            updated_at: item.updated_at || new Date().toISOString(),\r\n            expires_at: item.expires_at,\r\n\r\n            // Snapshot do anúncio normalizado\r\n            ad_snapshot: {\r\n              title: item.ad_snapshot?.title ||\r\n                  item.title ||\r\n                  item.ad?.title ||\r\n                  'Item sem título',\r\n\r\n              game_name: item.ad_snapshot?.game_name ||\r\n                  item.game_name ||\r\n                  item.ad?.game?.name ||\r\n                  item.game?.name ||\r\n                  'Jogo não identificado',\r\n\r\n              platform: item.ad_snapshot?.platform ||\r\n                  item.platform ||\r\n                  item.ad?.platform ||\r\n                  'Plataforma não informada',\r\n\r\n              condition: item.ad_snapshot?.condition ||\r\n                  item.condition ||\r\n                  item.ad?.condition ||\r\n                  'usado',\r\n\r\n              image_url: item.ad_snapshot?.image_url ||\r\n                  item.image_url ||\r\n                  item.ad?.image_url ||\r\n                  item.ad?.game?.image_url ||\r\n                  null,\r\n\r\n              seller_username: item.ad_snapshot?.seller_username ||\r\n                  item.seller_username ||\r\n                  item.ad?.user?.username ||\r\n                  item.seller?.username ||\r\n                  'Vendedor',\r\n\r\n              seller_id: item.ad_snapshot?.seller_id ||\r\n                  item.seller_id ||\r\n                  item.ad?.user_id ||\r\n                  item.ad?.user?._id,\r\n\r\n              description: item.ad_snapshot?.description ||\r\n                  item.description ||\r\n                  item.ad?.description ||\r\n                  ''\r\n            }\r\n          };\r\n\r\n          console.log(`✅ Item ${index + 1} normalizado:`, normalizedItem);\r\n          return normalizedItem;\r\n        });\r\n\r\n        // Calcular totais\r\n        const total_items = normalizedItems.reduce((sum, item) => sum + item.quantity, 0);\r\n        const total_price = normalizedItems.reduce((sum, item) => {\r\n          return sum + (item.price_snapshot * item.quantity);\r\n        }, 0);\r\n\r\n        const normalizedCart = {\r\n          items: normalizedItems,\r\n          total_items,\r\n          total_price\r\n        };\r\n\r\n        console.log('🎯 Carrinho final normalizado:', normalizedCart);\r\n        setCart(normalizedCart);\r\n\r\n        // CORREÇÃO: Atualizar cache local para is_in_cart\r\n        const adIds = new Set(normalizedItems.map(item => item.ad_id));\r\n        setCartCache(adIds);\r\n        console.log('💾 Cache do carrinho atualizado:', Array.from(adIds));\r\n\r\n        // Notificar outras partes do app\r\n        window.dispatchEvent(new CustomEvent('cart-updated', {\r\n          detail: normalizedCart\r\n        }));\r\n      } else {\r\n        console.error('❌ Erro ao carregar carrinho:', result.message);\r\n        setCart({ items: [], total_items: 0, total_price: 0 });\r\n        setCartCache(new Set());\r\n\r\n        // Só mostrar toast se não for erro de \"carrinho vazio\"\r\n        if (!result.message?.toLowerCase().includes('vazio')) {\r\n          toast.error(result.message);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('💥 Erro ao carregar carrinho:', error);\r\n      setCart({ items: [], total_items: 0, total_price: 0 });\r\n      setCartCache(new Set());\r\n      toast.error('Erro ao carregar carrinho');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const addToCart = async (ad, quantity = 1) => {\r\n    if (!isAuthenticated) {\r\n      toast.info('Faça login para adicionar itens ao carrinho');\r\n      return { success: false, message: 'Login necessário' };\r\n    }\r\n\r\n    console.log('➕ Adicionando ao carrinho:', { ad: ad._id, quantity });\r\n\r\n    try {\r\n      const result = await cartService.addToCart(ad._id, quantity);\r\n\r\n      console.log('📥 Resposta de adicionar:', result);\r\n\r\n      if (result.success) {\r\n        // CORREÇÃO: Atualizar cache imediatamente\r\n        setCartCache(prev => new Set([...prev, ad._id]));\r\n\r\n        // Recarregar carrinho após adicionar\r\n        await loadCart();\r\n        toast.success(result.message || 'Item adicionado ao carrinho');\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n\r\n      return result;\r\n    } catch (error) {\r\n      console.error('💥 Erro ao adicionar ao carrinho:', error);\r\n      toast.error('Erro ao adicionar ao carrinho');\r\n      return { success: false, message: 'Erro interno' };\r\n    }\r\n  };\r\n\r\n  const updateCartItem = async (adId, quantity) => {\r\n    console.log('🔄 Atualizando item do carrinho:', { adId, quantity });\r\n\r\n    try {\r\n      const result = await cartService.updateCartItem(adId, quantity);\r\n\r\n      if (result.success) {\r\n        // Se quantidade for 0, remover do cache\r\n        if (quantity === 0) {\r\n          setCartCache(prev => {\r\n            const newCache = new Set(prev);\r\n            newCache.delete(adId);\r\n            return newCache;\r\n          });\r\n        }\r\n\r\n        await loadCart(); // Recarregar carrinho\r\n        toast.success(result.message || 'Quantidade atualizada');\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n\r\n      return result;\r\n    } catch (error) {\r\n      console.error('💥 Erro ao atualizar item:', error);\r\n      toast.error('Erro ao atualizar item');\r\n      return { success: false, message: 'Erro interno' };\r\n    }\r\n  };\r\n\r\n  const removeFromCart = async (adId) => {\r\n    console.log('➖ Removendo do carrinho:', adId);\r\n\r\n    try {\r\n      const result = await cartService.removeFromCart(adId);\r\n\r\n      if (result.success) {\r\n        // CORREÇÃO: Atualizar cache imediatamente\r\n        setCartCache(prev => {\r\n          const newCache = new Set(prev);\r\n          newCache.delete(adId);\r\n          return newCache;\r\n        });\r\n\r\n        await loadCart(); // Recarregar carrinho\r\n        toast.success(result.message || 'Item removido');\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n\r\n      return result;\r\n    } catch (error) {\r\n      console.error('💥 Erro ao remover item:', error);\r\n      toast.error('Erro ao remover item');\r\n      return { success: false, message: 'Erro interno' };\r\n    }\r\n  };\r\n\r\n  const clearCart = async () => {\r\n    console.log('🧹 Limpando carrinho...');\r\n\r\n    try {\r\n      const result = await cartService.clearCart();\r\n\r\n      if (result.success) {\r\n        setCart({ items: [], total_items: 0, total_price: 0 });\r\n        setCartCache(new Set());\r\n        toast.success(result.message || 'Carrinho limpo');\r\n\r\n        // Notificar atualização\r\n        window.dispatchEvent(new CustomEvent('cart-updated', {\r\n          detail: { items: [], total_items: 0, total_price: 0 }\r\n        }));\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n\r\n      return result;\r\n    } catch (error) {\r\n      console.error('💥 Erro ao limpar carrinho:', error);\r\n      toast.error('Erro ao limpar carrinho');\r\n      return { success: false, message: 'Erro interno' };\r\n    }\r\n  };\r\n\r\n  const validateCart = async () => {\r\n    console.log('🔍 Validando carrinho...');\r\n\r\n    try {\r\n      const result = await cartService.validateCart();\r\n\r\n      if (result.success) {\r\n        if (result.data?.total_invalid > 0) {\r\n          toast.warning(`${result.data.total_invalid} item(s) removido(s) do carrinho (não disponível)`);\r\n          await loadCart(); // Recarregar após limpeza\r\n        }\r\n      }\r\n\r\n      return result;\r\n    } catch (error) {\r\n      console.error('💥 Erro ao validar carrinho:', error);\r\n      return { success: false, message: 'Erro ao validar carrinho' };\r\n    }\r\n  };\r\n\r\n  // CORREÇÃO: Usar cache para melhor performance\r\n  const isInCart = (adId) => {\r\n    if (!adId) return false;\r\n\r\n    // Primeiro verificar cache local\r\n    if (cartCache.has(adId)) {\r\n      return true;\r\n    }\r\n\r\n    // Fallback: verificar no carrinho atual\r\n    if (!cart.items || !Array.isArray(cart.items)) return false;\r\n    const inCart = cart.items.some(item => item.ad_id === adId);\r\n\r\n    // Atualizar cache se encontrado\r\n    if (inCart) {\r\n      setCartCache(prev => new Set([...prev, adId]));\r\n    }\r\n\r\n    return inCart;\r\n  };\r\n\r\n  const getCartItemQuantity = (adId) => {\r\n    if (!cart.items || !Array.isArray(cart.items)) return 0;\r\n    const item = cart.items.find(item => item.ad_id === adId);\r\n    return item ? item.quantity : 0;\r\n  };\r\n\r\n  // Função para checkout\r\n  const getCartForCheckout = () => {\r\n    if (!cart.items || !Array.isArray(cart.items)) {\r\n      return {\r\n        items: [],\r\n        total_items: 0,\r\n        total_price: 0,\r\n        sellers: []\r\n      };\r\n    }\r\n\r\n    // Preparar dados especificamente para checkout\r\n    const checkoutItems = cart.items.map(item => ({\r\n      ad_id: item.ad_id,\r\n      quantity: item.quantity,\r\n      price: item.price_snapshot,\r\n      title: item.ad_snapshot.title,\r\n      game_name: item.ad_snapshot.game_name,\r\n      seller_id: item.ad_snapshot.seller_id,\r\n      seller_name: item.ad_snapshot.seller_username,\r\n      image_url: item.ad_snapshot.image_url\r\n    }));\r\n\r\n    // Identificar vendedores únicos\r\n    const uniqueSellers = [...new Set(checkoutItems.map(item => item.seller_id))].filter(Boolean);\r\n\r\n    return {\r\n      items: checkoutItems,\r\n      total_items: cart.total_items,\r\n      total_price: cart.total_price,\r\n      sellers: uniqueSellers,\r\n      seller_count: uniqueSellers.length\r\n    };\r\n  };\r\n\r\n  // Debug: Log do estado atual do carrinho\r\n  useEffect(() => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log('🛒 Estado atual do carrinho:', {\r\n        items: cart.items?.length || 0,\r\n        total_items: cart.total_items,\r\n        total_price: cart.total_price,\r\n        cache_size: cartCache.size,\r\n        cache_items: Array.from(cartCache),\r\n        loading,\r\n        isAuthenticated\r\n      });\r\n    }\r\n  }, [cart, cartCache, loading, isAuthenticated]);\r\n\r\n  const value = {\r\n    cart,\r\n    loading,\r\n    loadCart,\r\n    addToCart,\r\n    updateCartItem,\r\n    removeFromCart,\r\n    clearCart,\r\n    validateCart,\r\n    isInCart,\r\n    getCartItemQuantity,\r\n    getCartForCheckout\r\n  };\r\n\r\n  return (\r\n      <CartContext.Provider value={value}>\r\n        {children}\r\n      </CartContext.Provider>\r\n  );\r\n};","import { useState, useEffect } from 'react';\r\nimport api from '../services/api';\r\n\r\n// Hook for data fetching with API function\r\nexport const useApiData = (apiFunction, dependencies = []) => {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let isCancelled = false;\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const result = await apiFunction();\r\n        \r\n        if (!isCancelled) {\r\n          if (result.success) {\r\n            setData(result.data);\r\n          } else {\r\n            setError(result.message || 'Erro ao carregar dados');\r\n          }\r\n        }\r\n      } catch (err) {\r\n        if (!isCancelled) {\r\n          setError(err.message || 'Erro inesperado');\r\n        }\r\n      } finally {\r\n        if (!isCancelled) {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      isCancelled = true;\r\n    };\r\n  }, dependencies);\r\n\r\n  const refetch = () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    // Re-trigger the effect\r\n  };\r\n\r\n  return { data, loading, error, refetch };\r\n};\r\n\r\n// Hook that returns API client for making requests\r\nexport const useApi = () => {\r\n  return {\r\n    get: async (url, config = {}) => {\r\n      try {\r\n        const response = await api.get(url, config);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('API GET Error:', error.response?.data || error.message);\r\n        throw error;\r\n      }\r\n    },\r\n    post: async (url, data = {}, config = {}) => {\r\n      try {\r\n        const response = await api.post(url, data, config);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('API POST Error:', error.response?.data || error.message);\r\n        throw error;\r\n      }\r\n    },\r\n    put: async (url, data = {}, config = {}) => {\r\n      try {\r\n        const response = await api.put(url, data, config);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('API PUT Error:', error.response?.data || error.message);\r\n        throw error;\r\n      }\r\n    },\r\n    delete: async (url, config = {}) => {\r\n      try {\r\n        const response = await api.delete(url, config);\r\n        return response.data;\r\n      } catch (error) {\r\n        console.error('API DELETE Error:', error.response?.data || error.message);\r\n        throw error;\r\n      }\r\n    }\r\n  };\r\n};","import { useState, useEffect } from 'react';\r\n\r\nexport const useDebounce = (value, delay) => {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const handler = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    return () => {\r\n      clearTimeout(handler);\r\n    };\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n};","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useCart } from '../../contexts/CartContext'; // ADICIONAR IMPORT\r\nimport { useGames } from '../../contexts/GameContext';\r\nimport { useDebounce } from '../../hooks';\r\nimport {\r\n  User,\r\n  LogOut,\r\n  Plus,\r\n  Search,\r\n  Menu,\r\n  X,\r\n  ShoppingCart,\r\n  Settings,\r\n  BarChart3,\r\n  ShoppingBag,\r\n  Heart,\r\n  Bell,\r\n  ChevronDown\r\n} from 'lucide-react';\r\n\r\nconst Header = () => {\r\n  const { user, logout, isAuthenticated } = useAuth();\r\n  const { cart } = useCart(); // USAR CONTEXTO DO CARRINHO\r\n  const { fetchGames } = useGames();\r\n  const navigate = useNavigate();\r\n\r\n  // Estados\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);\r\n  const [isNotificationOpen, setIsNotificationOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [showSearchResults, setShowSearchResults] = useState(false);\r\n  const [searchLoading, setSearchLoading] = useState(false);\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  // Refs\r\n  const searchRef = useRef(null);\r\n  const userMenuRef = useRef(null);\r\n  const notificationRef = useRef(null);\r\n  const debouncedSearch = useDebounce(searchTerm, 300);\r\n\r\n  // Effects\r\n  useEffect(() => {\r\n    if (debouncedSearch.length >= 2) {\r\n      handleSearch(debouncedSearch);\r\n    } else {\r\n      setSearchResults([]);\r\n      setShowSearchResults(false);\r\n    }\r\n  }, [debouncedSearch]);\r\n\r\n  // Carregar notificações quando autenticado\r\n  useEffect(() => {\r\n    if (isAuthenticated && user) {\r\n      loadNotifications();\r\n      // Simular atualização periódica das notificações\r\n      const interval = setInterval(loadNotifications, 30000); // 30 segundos\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [isAuthenticated, user]);\r\n\r\n  // Fechar dropdowns quando clicar fora\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (searchRef.current && !searchRef.current.contains(event.target)) {\r\n        setShowSearchResults(false);\r\n      }\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\r\n        setIsUserMenuOpen(false);\r\n      }\r\n      if (notificationRef.current && !notificationRef.current.contains(event.target)) {\r\n        setIsNotificationOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  // Funções\r\n  const handleSearch = async (term) => {\r\n    setSearchLoading(true);\r\n    try {\r\n      const result = await fetchGames({ search: term, limit: 5 });\r\n      if (result.success) {\r\n        setSearchResults(result.data.games || []);\r\n        setShowSearchResults(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro na busca:', error);\r\n    } finally {\r\n      setSearchLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    setIsUserMenuOpen(false);\r\n    setIsMenuOpen(false);\r\n    navigate('/');\r\n  };\r\n\r\n  const handleSearchSelect = (gameId) => {\r\n    setSearchTerm('');\r\n    setShowSearchResults(false);\r\n    setIsMenuOpen(false);\r\n    navigate(`/games/${gameId}`);\r\n  };\r\n\r\n  const closeAllMenus = () => {\r\n    setIsMenuOpen(false);\r\n    setIsUserMenuOpen(false);\r\n    setIsNotificationOpen(false);\r\n  };\r\n\r\n  // Função para carregar notificações (simulada)\r\n  const loadNotifications = async () => {\r\n    try {\r\n      // Simular dados de notificação - você pode implementar a API depois\r\n      const mockNotifications = [\r\n        {\r\n          id: 1,\r\n          type: 'order',\r\n          title: 'Novo pedido recebido',\r\n          message: 'Você recebeu um novo pedido para \"Counter-Strike 2\"',\r\n          timestamp: new Date(Date.now() - 5 * 60000), // 5 minutos atrás\r\n          read: false,\r\n          link: '/orders'\r\n        },\r\n        {\r\n          id: 2,\r\n          type: 'message',\r\n          title: 'Nova mensagem',\r\n          message: 'João enviou uma pergunta sobre seu anúncio',\r\n          timestamp: new Date(Date.now() - 15 * 60000), // 15 minutos atrás\r\n          read: false,\r\n          link: '/dashboard'\r\n        },\r\n        {\r\n          id: 3,\r\n          type: 'favorite',\r\n          title: 'Anúncio favoritado',\r\n          message: 'Seu anúncio \"Valorant\" foi favoritado',\r\n          timestamp: new Date(Date.now() - 2 * 60 * 60000), // 2 horas atrás\r\n          read: true,\r\n          link: '/dashboard'\r\n        }\r\n      ];\r\n\r\n      setNotifications(mockNotifications);\r\n      setUnreadCount(mockNotifications.filter(n => !n.read).length);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar notificações:', error);\r\n    }\r\n  };\r\n\r\n  const markAsRead = (notificationId) => {\r\n    setNotifications(prev => \r\n      prev.map(n => \r\n        n.id === notificationId ? { ...n, read: true } : n\r\n      )\r\n    );\r\n    setUnreadCount(prev => Math.max(0, prev - 1));\r\n  };\r\n\r\n  const markAllAsRead = () => {\r\n    setNotifications(prev => prev.map(n => ({ ...n, read: true })));\r\n    setUnreadCount(0);\r\n  };\r\n\r\n  const formatNotificationTime = (timestamp) => {\r\n    const now = new Date();\r\n    const diff = now - timestamp;\r\n    const minutes = Math.floor(diff / 60000);\r\n    const hours = Math.floor(minutes / 60);\r\n    const days = Math.floor(hours / 24);\r\n\r\n    if (days > 0) return `${days}d`;\r\n    if (hours > 0) return `${hours}h`;\r\n    if (minutes > 0) return `${minutes}m`;\r\n    return 'agora';\r\n  };\r\n\r\n  // CORRIGIDO: Usar dados do contexto do carrinho\r\n  const cartItemCount = cart?.total_items || 0;\r\n\r\n  return (\r\n    <header className=\"bg-white shadow-md sticky top-0 z-50\">\r\n      <div className=\"container mx-auto px-4\">\r\n        <div className=\"flex items-center justify-between h-16\">\r\n          {/* Logo */}\r\n          <Link\r\n            to=\"/\"\r\n            className=\"text-2xl font-bold text-blue-600 hover:text-blue-700 transition-colors\"\r\n            onClick={closeAllMenus}\r\n          >\r\n            GameUnite\r\n          </Link>\r\n\r\n          {/* Search Bar - Desktop */}\r\n          <div className=\"hidden lg:flex flex-1 max-w-md mx-8\" ref={searchRef}>\r\n            <div className=\"relative w-full\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Buscar jogos...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                onFocus={() => {\r\n                  if (searchResults.length > 0) {\r\n                    setShowSearchResults(true);\r\n                  }\r\n                }}\r\n              />\r\n\r\n              {/* Search Results Dropdown */}\r\n              {showSearchResults && (\r\n                <div className=\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-64 overflow-y-auto z-50\">\r\n                  {searchLoading ? (\r\n                    <div className=\"p-4 text-center text-gray-500\">Buscando...</div>\r\n                  ) : searchResults.length > 0 ? (\r\n                    searchResults.map((game) => (\r\n                      <button\r\n                        key={game._id}\r\n                        className=\"w-full p-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 focus:outline-none focus:bg-gray-50\"\r\n                        onClick={() => handleSearchSelect(game._id)}\r\n                      >\r\n                        <div className=\"flex items-center\">\r\n                          {game.image_url && (\r\n                            <img\r\n                              src={game.image_url}\r\n                              alt={game.name}\r\n                              className=\"w-10 h-10 rounded object-cover mr-3\"\r\n                            />\r\n                          )}\r\n                          <div>\r\n                            <div className=\"font-medium text-gray-800\">{game.name}</div>\r\n                            {game.description && (\r\n                              <div className=\"text-sm text-gray-600 truncate\">\r\n                                {game.description}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n                    ))\r\n                  ) : (\r\n                    <div className=\"p-4 text-center text-gray-500\">\r\n                      Nenhum jogo encontrado\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Navigation - Desktop */}\r\n          <nav className=\"hidden lg:flex items-center space-x-6\">\r\n            {/* Public Links */}\r\n            <Link\r\n              to=\"/games\"\r\n              className=\"text-gray-700 hover:text-blue-600 transition-colors\"\r\n            >\r\n              Jogos\r\n            </Link>\r\n\r\n            {isAuthenticated ? (\r\n              <>\r\n                {/* Create Ad Button */}\r\n                <Link\r\n                  to=\"/create-ad\"\r\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center\"\r\n                >\r\n                  <Plus className=\"w-4 h-4 mr-2\" />\r\n                  Anunciar\r\n                </Link>\r\n\r\n                {/* Cart - CORRIGIDO */}\r\n                <Link\r\n                  to=\"/cart\"\r\n                  className=\"relative p-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n                >\r\n                  <ShoppingCart className=\"w-6 h-6\" />\r\n                  {cartItemCount > 0 && (\r\n                    <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\r\n                      {cartItemCount > 9 ? '9+' : cartItemCount}\r\n                    </span>\r\n                  )}\r\n                </Link>\r\n\r\n                {/* Notifications */}\r\n                <div className=\"relative\" ref={notificationRef}>\r\n                  <button \r\n                    onClick={() => setIsNotificationOpen(!isNotificationOpen)}\r\n                    className=\"relative p-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n                  >\r\n                    <Bell className=\"w-6 h-6\" />\r\n                    {unreadCount > 0 && (\r\n                      <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[20px] h-5 flex items-center justify-center\">\r\n                        {unreadCount > 9 ? '9+' : unreadCount}\r\n                      </span>\r\n                    )}\r\n                  </button>\r\n\r\n                  {/* Notifications Dropdown */}\r\n                  {isNotificationOpen && (\r\n                    <div className=\"absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-[24rem] overflow-hidden\">\r\n                      {/* Header */}\r\n                      <div className=\"px-4 py-3 border-b border-gray-200 flex items-center justify-between\">\r\n                        <h3 className=\"font-semibold text-gray-800\">Notificações</h3>\r\n                        {unreadCount > 0 && (\r\n                          <button\r\n                            onClick={markAllAsRead}\r\n                            className=\"text-sm text-blue-600 hover:text-blue-800 transition-colors\"\r\n                          >\r\n                            Marcar todas como lidas\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Notifications List */}\r\n                      <div className=\"max-h-72 overflow-y-auto\">\r\n                        {notifications.length > 0 ? (\r\n                          notifications.map((notification) => (\r\n                            <div\r\n                              key={notification.id}\r\n                              className={`p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors cursor-pointer ${\r\n                                !notification.read ? 'bg-blue-50' : ''\r\n                              }`}\r\n                              onClick={() => {\r\n                                if (!notification.read) {\r\n                                  markAsRead(notification.id);\r\n                                }\r\n                                navigate(notification.link);\r\n                                setIsNotificationOpen(false);\r\n                              }}\r\n                            >\r\n                              <div className=\"flex items-start space-x-3\">\r\n                                <div className={`p-2 rounded-full ${\r\n                                  notification.type === 'order' ? 'bg-green-100 text-green-600' :\r\n                                  notification.type === 'message' ? 'bg-blue-100 text-blue-600' :\r\n                                  'bg-red-100 text-red-600'\r\n                                }`}>\r\n                                  {notification.type === 'order' ? '🛒' :\r\n                                   notification.type === 'message' ? '💬' : '❤️'}\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                  <div className=\"flex items-center justify-between\">\r\n                                    <p className=\"text-sm font-medium text-gray-800 truncate\">\r\n                                      {notification.title}\r\n                                    </p>\r\n                                    <span className=\"text-xs text-gray-500\">\r\n                                      {formatNotificationTime(notification.timestamp)}\r\n                                    </span>\r\n                                  </div>\r\n                                  <p className=\"text-sm text-gray-600 mt-1 line-clamp-2\">\r\n                                    {notification.message}\r\n                                  </p>\r\n                                  {!notification.read && (\r\n                                    <div className=\"w-2 h-2 bg-blue-500 rounded-full mt-2\"></div>\r\n                                  )}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          ))\r\n                        ) : (\r\n                          <div className=\"p-6 text-center text-gray-500\">\r\n                            <Bell className=\"w-12 h-12 mx-auto mb-3 text-gray-300\" />\r\n                            <p>Nenhuma notificação</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Footer */}\r\n                      {notifications.length > 0 && (\r\n                        <div className=\"p-3 border-t border-gray-200 text-center\">\r\n                          <Link\r\n                            to=\"/notifications\"\r\n                            className=\"text-sm text-blue-600 hover:text-blue-800 transition-colors\"\r\n                            onClick={() => setIsNotificationOpen(false)}\r\n                          >\r\n                            Ver todas as notificações\r\n                          </Link>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* User Menu */}\r\n                <div className=\"relative\" ref={userMenuRef}>\r\n                  <button\r\n                    onClick={() => setIsUserMenuOpen(!isUserMenuOpen)}\r\n                    className=\"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors\"\r\n                  >\r\n                    <div className=\"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center\">\r\n                      {user?.profile_pic ? (\r\n                        <img\r\n                          src={user.profile_pic}\r\n                          alt=\"Profile\"\r\n                          className=\"w-8 h-8 rounded-full object-cover\"\r\n                        />\r\n                      ) : (\r\n                        <User className=\"w-5 h-5 text-gray-600\" />\r\n                      )}\r\n                    </div>\r\n                    <ChevronDown className=\"w-4 h-4 text-gray-600\" />\r\n                  </button>\r\n\r\n                  {/* User Dropdown */}\r\n                  {isUserMenuOpen && (\r\n                    <div className=\"absolute right-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg py-2 z-50\">\r\n                      {/* User Info */}\r\n                      <div className=\"px-4 py-3 border-b border-gray-200\">\r\n                        <div className=\"font-medium text-gray-900\">\r\n                          {user?.first_name} {user?.last_name}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-600\">@{user?.username}</div>\r\n                      </div>\r\n\r\n                      {/* Menu Items */}\r\n                      <Link\r\n                        to=\"/dashboard\"\r\n                        className=\"flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors\"\r\n                        onClick={closeAllMenus}\r\n                      >\r\n                        <BarChart3 className=\"w-5 h-5 mr-3\" />\r\n                        Dashboard\r\n                      </Link>\r\n\r\n                      <Link\r\n                        to=\"/profile\"\r\n                        className=\"flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors\"\r\n                        onClick={closeAllMenus}\r\n                      >\r\n                        <User className=\"w-5 h-5 mr-3\" />\r\n                        Meu Perfil\r\n                      </Link>\r\n\r\n                      <Link\r\n                        to=\"/orders\"\r\n                        className=\"flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors\"\r\n                        onClick={closeAllMenus}\r\n                      >\r\n                        <ShoppingBag className=\"w-5 h-5 mr-3\" />\r\n                        Meus Pedidos\r\n                      </Link>\r\n\r\n                      <Link\r\n                        to=\"/favorites\"\r\n                        className=\"flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors\"\r\n                        onClick={closeAllMenus}\r\n                      >\r\n                        <Heart className=\"w-5 h-5 mr-3\" />\r\n                        Favoritos\r\n                      </Link>\r\n\r\n                      <Link\r\n                        to=\"/support\"\r\n                        className=\"flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors\"\r\n                        onClick={closeAllMenus}\r\n                      >\r\n                        <Bell className=\"w-5 h-5 mr-3\" />\r\n                        Suporte\r\n                      </Link>\r\n\r\n                      {user?.role === 'admin' && (\r\n                        <Link\r\n                          to=\"/admin\"\r\n                          className=\"flex items-center px-4 py-3 text-gray-700 hover:bg-gray-100 transition-colors\"\r\n                          onClick={closeAllMenus}\r\n                        >\r\n                          <Settings className=\"w-5 h-5 mr-3\" />\r\n                          Administração\r\n                        </Link>\r\n                      )}\r\n\r\n                      <div className=\"border-t border-gray-200 mt-2 pt-2\">\r\n                        <button\r\n                          onClick={handleLogout}\r\n                          className=\"flex items-center w-full px-4 py-3 text-red-600 hover:bg-red-50 transition-colors\"\r\n                        >\r\n                          <LogOut className=\"w-5 h-5 mr-3\" />\r\n                          Sair\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </>\r\n            ) : (\r\n              /* Auth Links */\r\n              <div className=\"flex items-center space-x-4\">\r\n                <Link\r\n                  to=\"/login\"\r\n                  className=\"text-gray-700 hover:text-blue-600 transition-colors\"\r\n                >\r\n                  Entrar\r\n                </Link>\r\n                <Link\r\n                  to=\"/register\"\r\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  Cadastrar\r\n                </Link>\r\n              </div>\r\n            )}\r\n          </nav>\r\n\r\n          {/* Mobile Menu Button */}\r\n          <button\r\n            onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n            className=\"lg:hidden p-2 text-gray-700 hover:text-blue-600 transition-colors\"\r\n          >\r\n            {isMenuOpen ? <X className=\"w-6 h-6\" /> : <Menu className=\"w-6 h-6\" />}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Mobile Menu */}\r\n        {isMenuOpen && (\r\n          <div className=\"lg:hidden border-t border-gray-200 py-4\">\r\n            {/* Mobile Search */}\r\n            <div className=\"mb-4\" ref={searchRef}>\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Buscar jogos...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Mobile Search Results */}\r\n              {showSearchResults && searchResults.length > 0 && (\r\n                <div className=\"mt-2 bg-white border border-gray-200 rounded-lg shadow-lg max-h-40 overflow-y-auto\">\r\n                  {searchResults.map((game) => (\r\n                    <button\r\n                      key={game._id}\r\n                      className=\"w-full p-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0\"\r\n                      onClick={() => handleSearchSelect(game._id)}\r\n                    >\r\n                      <div className=\"font-medium text-gray-800\">{game.name}</div>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Mobile Navigation */}\r\n            <nav className=\"space-y-2\">\r\n              <Link\r\n                to=\"/games\"\r\n                className=\"block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                onClick={closeAllMenus}\r\n              >\r\n                Jogos\r\n              </Link>\r\n\r\n              {isAuthenticated ? (\r\n                <>\r\n                  <Link\r\n                    to=\"/create-ad\"\r\n                    className=\"block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    onClick={closeAllMenus}\r\n                  >\r\n                    <Plus className=\"w-4 h-4 inline mr-2\" />\r\n                    Criar Anúncio\r\n                  </Link>\r\n\r\n                  {/* Cart Mobile - CORRIGIDO */}\r\n                  <Link\r\n                    to=\"/cart\"\r\n                    className=\"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    onClick={closeAllMenus}\r\n                  >\r\n                    <ShoppingCart className=\"w-4 h-4 mr-2\" />\r\n                    Carrinho\r\n                    {cartItemCount > 0 && (\r\n                      <span className=\"ml-auto bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\r\n                        {cartItemCount}\r\n                      </span>\r\n                    )}\r\n                  </Link>\r\n\r\n                  <Link\r\n                    to=\"/dashboard\"\r\n                    className=\"block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    onClick={closeAllMenus}\r\n                  >\r\n                    <BarChart3 className=\"w-4 h-4 inline mr-2\" />\r\n                    Dashboard\r\n                  </Link>\r\n\r\n                  <Link\r\n                    to=\"/orders\"\r\n                    className=\"block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    onClick={closeAllMenus}\r\n                  >\r\n                    <ShoppingBag className=\"w-4 h-4 inline mr-2\" />\r\n                    Meus Pedidos\r\n                  </Link>\r\n\r\n                  <Link\r\n                    to=\"/favorites\"\r\n                    className=\"block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    onClick={closeAllMenus}\r\n                  >\r\n                    <Heart className=\"w-4 h-4 inline mr-2\" />\r\n                    Favoritos\r\n                  </Link>\r\n\r\n                  <Link\r\n                    to=\"/support\"\r\n                    className=\"block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    onClick={closeAllMenus}\r\n                  >\r\n                    <Bell className=\"w-4 h-4 inline mr-2\" />\r\n                    Suporte\r\n                  </Link>\r\n\r\n                  {user?.role === 'admin' && (\r\n                    <Link\r\n                      to=\"/admin\"\r\n                      className=\"block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                      onClick={closeAllMenus}\r\n                    >\r\n                      <Settings className=\"w-4 h-4 inline mr-2\" />\r\n                      Administração\r\n                    </Link>\r\n                  )}\r\n\r\n                  <Link\r\n                    to=\"/profile\"\r\n                    className=\"block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    onClick={closeAllMenus}\r\n                  >\r\n                    <User className=\"w-4 h-4 inline mr-2\" />\r\n                    Perfil\r\n                  </Link>\r\n\r\n                  <button\r\n                    onClick={handleLogout}\r\n                    className=\"block w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                  >\r\n                    <LogOut className=\"w-4 h-4 inline mr-2\" />\r\n                    Sair\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Link\r\n                    to=\"/login\"\r\n                    className=\"block px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\r\n                    onClick={closeAllMenus}\r\n                  >\r\n                    Entrar\r\n                  </Link>\r\n                  <Link\r\n                    to=\"/register\"\r\n                    className=\"block px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg transition-colors\"\r\n                    onClick={closeAllMenus}\r\n                  >\r\n                    Cadastrar\r\n                  </Link>\r\n                </>\r\n              )}\r\n            </nav>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className=\"bg-gray-800 text-white\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\r\n          <div>\r\n            <h3 className=\"text-xl font-bold mb-4\">GameUnite</h3>\r\n            <p className=\"text-gray-400\">\r\n              A plataforma que conecta gamers para compra, venda e troca de jogos.\r\n            </p>\r\n          </div>\r\n          \r\n          <div>\r\n            <h4 className=\"font-semibold mb-4\">Links Rápidos</h4>\r\n            <ul className=\"space-y-2\">\r\n              <li><Link to=\"/games\" className=\"text-gray-400 hover:text-white\">Jogos</Link></li>\r\n              <li><Link to=\"/create-ad\" className=\"text-gray-400 hover:text-white\">Criar Anúncio</Link></li>\r\n              <li><Link to=\"/dashboard\" className=\"text-gray-400 hover:text-white\">Dashboard</Link></li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <div>\r\n            <h4 className=\"font-semibold mb-4\">Suporte</h4>\r\n            <ul className=\"space-y-2\">\r\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Central de Ajuda</a></li>\r\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Contato</a></li>\r\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Termos de Uso</a></li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <div>\r\n            <h4 className=\"font-semibold mb-4\">Redes Sociais</h4>\r\n            <ul className=\"space-y-2\">\r\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Facebook</a></li>\r\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Twitter</a></li>\r\n              <li><a href=\"#\" className=\"text-gray-400 hover:text-white\">Instagram</a></li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"border-t border-gray-700 mt-8 pt-8 text-center\">\r\n          <p className=\"text-gray-400\">\r\n            © 2025 GameUnite. Todos os direitos reservados.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;","import React from 'react';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\n\r\nconst Layout = ({ children }) => {\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col\">\r\n      <Header />\r\n      <main className=\"flex-1\">\r\n        {children}\r\n      </main>\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;","// front/src/services/adService.js\r\nimport api from './api';\r\n\r\nexport const adService = {\r\n  async getAds(params = {}) {\r\n    try {\r\n      const response = await api.get('/ads', { params });\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar anúncios'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getBoostedAds(params = {}) {\r\n    try {\r\n      const response = await api.get('/ads/boosted', { params });\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar anúncios em destaque'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getAd(adId) {\r\n    try {\r\n      const response = await api.get(`/ads/${adId}`);\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar anúncio'\r\n      };\r\n    }\r\n  },\r\n\r\n  async createAd(adData) {\r\n    try {\r\n      const response = await api.post('/ads', adData);\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao criar anúncio'\r\n      };\r\n    }\r\n  },\r\n\r\n  async updateAd(adId, adData) {\r\n    try {\r\n      const response = await api.put(`/ads/${adId}`, adData);\r\n      return { success: true, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao atualizar anúncio'\r\n      };\r\n    }\r\n  },\r\n\r\n  async deleteAd(adId) {\r\n    try {\r\n      const response = await api.delete(`/ads/${adId}`);\r\n      return { success: true, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao deletar anúncio'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getMyAds(params = {}) {\r\n    try {\r\n      const response = await api.get('/ads/my-ads', { params });\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar seus anúncios'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getUserAds(userId, params = {}) {\r\n    try {\r\n      const response = await api.get(`/ads/user/${userId}`, { params });\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar anúncios do usuário'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Novas funções para curtir\r\n  async likeAd(adId) {\r\n    try {\r\n      const response = await api.post(`/ads/${adId}/like`);\r\n      return { success: true, data: response.data.data, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao curtir anúncio'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getAdLikes(adId) {\r\n    try {\r\n      const response = await api.get(`/ads/${adId}/likes`);\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar curtidas'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Função para buscar anúncio para edição\r\n  async getAdForEdit(adId) {\r\n    try {\r\n      const response = await api.get(`/ads/${adId}/edit`);\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar anúncio para edição'\r\n      };\r\n    }\r\n  }\r\n};","import React from 'react';\r\n\r\nconst LoadingSpinner = ({ size = 'md' }) => {\r\n  const sizeClasses = {\r\n    sm: 'h-4 w-4',\r\n    md: 'h-8 w-8',\r\n    lg: 'h-16 w-16'\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex justify-center items-center\">\r\n      <div className={`animate-spin rounded-full border-b-2 border-blue-500 ${sizeClasses[size]}`}></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner;","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useGames } from '../../contexts/GameContext';\r\nimport { adService } from '../../services/adService';\r\nimport { Gamepad, Star, TrendingUp } from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\n\r\nconst Home = () => {\r\n  const { featuredGames, loading: gamesLoading } = useGames();\r\n  const [boostedAds, setBoostedAds] = useState([]);\r\n  const [adsLoading, setAdsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchBoostedAds = async () => {\r\n      setAdsLoading(true);\r\n      const result = await adService.getBoostedAds({ limit: 6 });\r\n      if (result.success) {\r\n        setBoostedAds(result.data.boosted_ads);\r\n      }\r\n      setAdsLoading(false);\r\n    };\r\n\r\n    fetchBoostedAds();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen\">\r\n      {/* Hero Section */}\r\n      <section className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white py-20\">\r\n        <div className=\"container mx-auto px-4 text-center\">\r\n          <h1 className=\"text-5xl font-bold mb-6\">\r\n            Bem-vindo ao GameUnite\r\n          </h1>\r\n          <p className=\"text-xl mb-8 max-w-2xl mx-auto\">\r\n            A plataforma que conecta gamers para compra, venda e troca de jogos. \r\n            Encontre os melhores preços e faça parte da maior comunidade gamer do Brasil.\r\n          </p>\r\n          <div className=\"space-x-4\">\r\n            <Link\r\n              to=\"/games\"\r\n              className=\"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors inline-block\"\r\n            >\r\n              Explorar Jogos\r\n            </Link>\r\n            <Link\r\n              to=\"/register\"\r\n              className=\"border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors inline-block\"\r\n            >\r\n              Começar Agora\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Featured Games */}\r\n      <section className=\"py-16 bg-gray-50\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <div className=\"text-center mb-12\">\r\n            <h2 className=\"text-3xl font-bold text-gray-800 mb-4\">\r\n              <Star className=\"inline w-8 h-8 mr-2 text-yellow-500\" />\r\n              Jogos em Destaque\r\n            </h2>\r\n            <p className=\"text-gray-600\">Os jogos mais populares da nossa plataforma</p>\r\n          </div>\r\n\r\n          {gamesLoading ? (\r\n            <LoadingSpinner size=\"lg\" />\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {featuredGames.map((game) => (\r\n                <Link\r\n                  key={game._id}\r\n                  to={`/games/${game._id}`}\r\n                  className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow\"\r\n                >\r\n                  <div className=\"h-48 bg-gray-200 flex items-center justify-center\">\r\n                    {game.image_url ? (\r\n                      <img\r\n                        src={game.image_url}\r\n                        alt={game.name}\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                    ) : (\r\n                        <Gamepad className=\"w-16 h-16 text-gray-400\" />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"p-4\">\r\n                    <h3 className=\"font-semibold text-lg mb-2\">{game.name}</h3>\r\n                    <p className=\"text-gray-600 text-sm\">{game.description}</p>\r\n                  </div>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </section>\r\n\r\n      {/* Boosted Ads */}\r\n      <section className=\"py-16\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <div className=\"text-center mb-12\">\r\n            <h2 className=\"text-3xl font-bold text-gray-800 mb-4\">\r\n              <TrendingUp className=\"inline w-8 h-8 mr-2 text-green-500\" />\r\n              Anúncios em Destaque\r\n            </h2>\r\n            <p className=\"text-gray-600\">As melhores ofertas da semana</p>\r\n          </div>\r\n\r\n          {adsLoading ? (\r\n            <LoadingSpinner size=\"lg\" />\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {boostedAds.map((ad) => (\r\n                <Link\r\n                  key={ad._id}\r\n                  to={`/ads/${ad._id}`}\r\n                  className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow border-2 border-yellow-400\"\r\n                >\r\n                  <div className=\"bg-yellow-400 text-yellow-800 px-3 py-1 text-sm font-semibold\">\r\n                    ⭐ DESTAQUE\r\n                  </div>\r\n                  <div className=\"p-4\">\r\n                    <h3 className=\"font-semibold text-lg mb-2\">{ad.title}</h3>\r\n                    <p className=\"text-gray-600 text-sm mb-3\">{ad.description}</p>\r\n                    <div className=\"flex justify-between items-center\">\r\n                      <span className=\"text-2xl font-bold text-green-600\">\r\n                        R$ {ad.price}\r\n                      </span>\r\n                      <span className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm\">\r\n                        {ad.ad_type}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </section>\r\n\r\n      {/* Call to Action */}\r\n      <section className=\"bg-blue-600 text-white py-16\">\r\n        <div className=\"container mx-auto px-4 text-center\">\r\n          <h2 className=\"text-3xl font-bold mb-4\">\r\n            Pronto para começar?\r\n          </h2>\r\n          <p className=\"text-xl mb-8\">\r\n            Junte-se a milhares de gamers e encontre os melhores jogos!\r\n          </p>\r\n          <Link\r\n            to=\"/register\"\r\n            className=\"bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors inline-block\"\r\n          >\r\n            Criar Conta Grátis\r\n          </Link>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nconst Button = ({\r\n  children,\r\n  variant = 'primary',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  className = '',\r\n  ...props\r\n}) => {\r\n  const baseClasses = 'font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 inline-flex items-center justify-center';\r\n\r\n  const variants = {\r\n    primary: 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500',\r\n    secondary: 'bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500',\r\n    outline: 'border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-blue-500',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500'\r\n  };\r\n\r\n  const sizes = {\r\n    sm: 'px-3 py-1.5 text-sm',\r\n    md: 'px-4 py-2',\r\n    lg: 'px-6 py-3 text-lg'\r\n  };\r\n\r\n  return (\r\n    <button\r\n      className={clsx(\r\n        baseClasses,\r\n        variants[variant],\r\n        sizes[size],\r\n        {\r\n          'opacity-50 cursor-not-allowed': disabled || loading,\r\n        },\r\n        className\r\n      )}\r\n      disabled={disabled || loading}\r\n      {...props}\r\n    >\r\n      {loading ? (\r\n        <div className=\"inline-flex items-center\">\r\n          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\r\n          Carregando...\r\n        </div>\r\n      ) : (\r\n        children\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useGames } from '../../contexts/GameContext';\r\nimport { Search, Filter, Gamepad } from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\n\r\nconst Games = () => {\r\n  const { games, loading, fetchGames } = useGames();\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filteredGames, setFilteredGames] = useState([]);\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (games.length === 0) {\r\n      fetchGames();\r\n    }\r\n  }, [games, fetchGames]);\r\n\r\n  useEffect(() => {\r\n    const filtered = games.filter(game =>\r\n      game.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n    setFilteredGames(filtered);\r\n  }, [games, searchTerm]);\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    fetchGames({ search: searchTerm });\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-4\">\r\n            Catálogo de Jogos\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Explore nossa biblioteca de jogos e encontre anúncios de compra, venda e troca\r\n          </p>\r\n        </div>\r\n\r\n        {/* Search and Filters */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\r\n          <form onSubmit={handleSearch} className=\"flex flex-col md:flex-row gap-4\">\r\n            <div className=\"flex-1 relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Buscar jogos...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n            <Button type=\"submit\">\r\n              Buscar\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => setShowFilters(!showFilters)}\r\n            >\r\n              <Filter className=\"w-4 h-4 mr-2\" />\r\n              Filtros\r\n            </Button>\r\n          </form>\r\n\r\n          {/* Filters Panel */}\r\n          {showFilters && (\r\n            <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Gênero\r\n                  </label>\r\n                  <select className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\">\r\n                    <option value=\"\">Todos os gêneros</option>\r\n                    <option value=\"action\">Ação</option>\r\n                    <option value=\"adventure\">Aventura</option>\r\n                    <option value=\"rpg\">RPG</option>\r\n                    <option value=\"sports\">Esportes</option>\r\n                    <option value=\"racing\">Corrida</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Plataforma\r\n                  </label>\r\n                  <select className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\">\r\n                    <option value=\"\">Todas as plataformas</option>\r\n                    <option value=\"pc\">PC</option>\r\n                    <option value=\"ps5\">PlayStation 5</option>\r\n                    <option value=\"ps4\">PlayStation 4</option>\r\n                    <option value=\"xbox\">Xbox</option>\r\n                    <option value=\"switch\">Nintendo Switch</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Ordenar por\r\n                  </label>\r\n                  <select className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\">\r\n                    <option value=\"name\">Nome</option>\r\n                    <option value=\"popularity\">Popularidade</option>\r\n                    <option value=\"newest\">Mais recentes</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Games Grid */}\r\n        {loading ? (\r\n          <div className=\"flex justify-center items-center py-12\">\r\n            <LoadingSpinner size=\"lg\" />\r\n          </div>\r\n        ) : filteredGames.length === 0 ? (\r\n          <div className=\"text-center py-12\">\r\n            <Gamepad className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n              Nenhum jogo encontrado\r\n            </h3>\r\n            <p className=\"text-gray-600\">\r\n              Tente ajustar os filtros ou termo de busca\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n            {filteredGames.map((game) => (\r\n              <Link\r\n                key={game._id}\r\n                to={`/games/${game._id}`}\r\n                className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow\"\r\n              >\r\n                <div className=\"h-48 bg-gray-200 flex items-center justify-center\">\r\n                  {game.image_url ? (\r\n                    <img\r\n                      src={game.image_url}\r\n                      alt={game.name}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <Gamepad className=\"w-16 h-16 text-gray-400\" />\r\n                  )}\r\n                </div>\r\n                <div className=\"p-4\">\r\n                  <h3 className=\"font-semibold text-lg mb-2 text-gray-800\">\r\n                    {game.name}\r\n                  </h3>\r\n                  {game.description && (\r\n                    <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">\r\n                      {game.description}\r\n                    </p>\r\n                  )}\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-sm text-blue-600 font-medium\">\r\n                      Ver anúncios\r\n                    </span>\r\n                    {game.is_featured && (\r\n                      <span className=\"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full\">\r\n                        ⭐ Destaque\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Pagination */}\r\n        {filteredGames.length > 0 && (\r\n          <div className=\"flex justify-center mt-8\">\r\n            <div className=\"flex space-x-2\">\r\n              <Button variant=\"outline\" disabled>\r\n                Anterior\r\n              </Button>\r\n              <Button>1</Button>\r\n              <Button variant=\"outline\">2</Button>\r\n              <Button variant=\"outline\">3</Button>\r\n              <Button variant=\"outline\">\r\n                Próximo\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Games;","import api from './api';\r\n\r\nexport const favoritesService = {\r\n  async getFavorites(params = {}) {\r\n    try {\r\n      const response = await api.get('/favorites', { params });\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar favoritos'\r\n      };\r\n    }\r\n  },\r\n\r\n  async addToFavorites(adId) {\r\n    try {\r\n      const response = await api.post(`/favorites/${adId}`);\r\n      return { success: true, data: response.data.data, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao adicionar aos favoritos'\r\n      };\r\n    }\r\n  },\r\n\r\n  async removeFromFavorites(adId) {\r\n    try {\r\n      const response = await api.delete(`/favorites/${adId}`);\r\n      return { success: true, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao remover dos favoritos'\r\n      };\r\n    }\r\n  },\r\n\r\n  async toggleFavorite(adId) {\r\n    try {\r\n      const response = await api.post(`/favorites/${adId}/toggle`);\r\n      return {\r\n        success: true,\r\n        data: response.data.data,\r\n        message: response.data.message\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao alterar favorito'\r\n      };\r\n    }\r\n  },\r\n\r\n  // NOVA FUNÇÃO: Verificar se um anúncio está favoritado\r\n  async checkIsFavorite(adId) {\r\n    try {\r\n      const response = await api.get(`/favorites/${adId}/check`);\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      // Se não conseguir verificar (ex: usuário não logado), retornar false\r\n      if (error.response?.status === 401) {\r\n        return { success: true, data: { is_favorited: false } };\r\n      }\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao verificar favorito'\r\n      };\r\n    }\r\n  }\r\n};","import api from './api';\r\n\r\nexport const orderService = {\r\n  async createOrder(orderData) {\r\n    try {\r\n      const response = await api.post('/orders', orderData);\r\n      return { success: true, data: response.data.data, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao criar pedido'\r\n      };\r\n    }\r\n  },\r\n\r\n  // CORRIGIDO: Função renomeada para processCheckout\r\n  async processCheckout(checkoutData) {\r\n    try {\r\n      const response = await api.post('/orders/checkout', checkoutData);\r\n      return { success: true, data: response.data.data, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro no checkout'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Mantendo a função original também para compatibilidade\r\n  async checkout(checkoutData) {\r\n    return this.processCheckout(checkoutData);\r\n  },\r\n\r\n  async getOrders(params = {}) {\r\n    try {\r\n      const response = await api.get('/orders', { params });\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar pedidos'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getOrder(orderId) {\r\n    try {\r\n      const response = await api.get(`/orders/${orderId}`);\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar pedido'\r\n      };\r\n    }\r\n  },\r\n\r\n  async updateOrderStatus(orderId, status, role = null) {\r\n    try {\r\n      const response = await api.put(`/orders/${orderId}/status`, { status, role });\r\n      return { success: true, message: response.data.message };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao atualizar status'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getOrderStats() {\r\n    try {\r\n      const response = await api.get('/orders/stats');\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar estatísticas'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getSales(params = {}) {\r\n    try {\r\n      const response = await api.get('/orders/sales', { params });\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar vendas'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getPurchases(params = {}) {\r\n    try {\r\n      const response = await api.get('/orders/purchases', { params });\r\n      return { success: true, data: response.data.data };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar compras'\r\n      };\r\n    }\r\n  }\r\n};","import api from './api';\r\n\r\nexport const supportService = {\r\n  // Tickets\r\n  async createTicket(data) {\r\n    try {\r\n      const response = await api.post('/support/tickets', data);\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Ticket criado com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error creating ticket:', error);\r\n      \r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao criar ticket'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getUserTickets(params = {}) {\r\n    try {\r\n      const response = await api.get('/support/tickets', { params });\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Tickets carregados com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error fetching tickets:', error);\r\n      \r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao carregar tickets',\r\n        data: { tickets: [] }\r\n      };\r\n    }\r\n  },\r\n\r\n  async getTicketByProtocol(protocolNumber) {\r\n    try {\r\n      const response = await api.get(`/support/tickets/protocol/${protocolNumber}`);\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data,\r\n        message: 'Ticket encontrado'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error finding ticket:', error);\r\n      \r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Ticket não encontrado'\r\n      };\r\n    }\r\n  },\r\n\r\n  async getTicketById(ticketId) {\r\n    try {\r\n      const response = await api.get(`/support/tickets/${ticketId}`);\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data.data || response.data,\r\n        message: 'Ticket encontrado'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error fetching ticket:', error);\r\n      \r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Ticket não encontrado'\r\n      };\r\n    }\r\n  },\r\n\r\n  async addTicketReply(ticketId, message) {\r\n    try {\r\n      const response = await api.post(`/support/tickets/${ticketId}/reply`, { message });\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data.data || response.data,\r\n        message: 'Mensagem adicionada com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error adding reply:', error);\r\n      \r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao adicionar mensagem'\r\n      };\r\n    }\r\n  },\r\n\r\n  async updateTicketStatus(ticketId, status) {\r\n    try {\r\n      const response = await api.patch(`/support/tickets/${ticketId}/status`, { status });\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data,\r\n        message: 'Status atualizado com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error updating ticket status:', error);\r\n      \r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao atualizar status'\r\n      };\r\n    }\r\n  },\r\n  \r\n  // Admin - Tickets\r\n  async getAllTickets(params = {}) {\r\n    try {\r\n      const response = await api.get('/support/admin/tickets', { params });\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Tickets carregados com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error fetching admin tickets:', error);\r\n      \r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao carregar tickets',\r\n        data: { tickets: [] }\r\n      };\r\n    }\r\n  },\r\n\r\n  async updateTicket(ticketId, data) {\r\n    try {\r\n      const response = await api.put(`/support/admin/tickets/${ticketId}`, data);\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Ticket atualizado com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error updating admin ticket:', error);\r\n      \r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao atualizar ticket'\r\n      };\r\n    }\r\n  },\r\n  \r\n  // Admin - Games\r\n  createGame: (data) => api.post('/support/admin/games', data),\r\n  updateGame: (gameId, data) => api.put(`/support/admin/games/${gameId}`, data),\r\n  deleteGame: (gameId) => api.delete(`/support/admin/games/${gameId}`),\r\n  \r\n  // Admin - Categories\r\n  getCategories: () => api.get('/support/admin/categories'),\r\n  createCategory: (data) => api.post('/support/admin/categories', data),\r\n  updateCategory: (categoryId, data) => api.put(`/support/admin/categories/${categoryId}`, data),\r\n  deleteCategory: (categoryId) => api.delete(`/support/admin/categories/${categoryId}`),\r\n  \r\n  // Ratings\r\n  submitRating: (orderId, data) => api.post(`/support/ratings/${orderId}`, data),\r\n  \r\n  // Admin Stats\r\n  async getAdminStats() {\r\n    try {\r\n      const response = await api.get('/support/admin/stats');\r\n      \r\n      return {\r\n        success: true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Estatísticas carregadas com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error fetching admin stats:', error);\r\n      \r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao carregar estatísticas',\r\n        data: {}\r\n      };\r\n    }\r\n  },\r\n\r\n  // Validation helpers\r\n  validateTicketData(data) {\r\n    const errors = [];\r\n    \r\n    if (!data.subject || data.subject.trim().length < 5) {\r\n      errors.push('Assunto deve ter pelo menos 5 caracteres');\r\n    }\r\n    \r\n    if (!data.message || data.message.trim().length < 10) {\r\n      errors.push('Mensagem deve ter pelo menos 10 caracteres');\r\n    }\r\n    \r\n    if (!['general', 'technical', 'billing', 'account'].includes(data.category)) {\r\n      errors.push('Categoria inválida');\r\n    }\r\n    \r\n    if (!['low', 'medium', 'high', 'urgent'].includes(data.priority)) {\r\n      errors.push('Prioridade inválida');\r\n    }\r\n    \r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors,\r\n      data: {\r\n        subject: data.subject?.trim(),\r\n        message: data.message?.trim(),\r\n        category: data.category,\r\n        priority: data.priority\r\n      }\r\n    };\r\n  }\r\n};\r\n\r\nexport default supportService;","import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { gameService, adService } from '../../services';\r\nimport { Gamepad, Star, Plus, Filter } from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\n\r\nconst GameDetails = () => {\r\n  const { gameId } = useParams();\r\n  const [game, setGame] = useState(null);\r\n  const [ads, setAds] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [adsLoading, setAdsLoading] = useState(false);\r\n  const [adTypeFilter, setAdTypeFilter] = useState('all');\r\n  const [priceSort, setPriceSort] = useState('asc');\r\n\r\n  useEffect(() => {\r\n    const fetchGameDetails = async () => {\r\n      setLoading(true);\r\n\r\n      const gameResult = await gameService.getGame(gameId);\r\n      if (gameResult.success) {\r\n        setGame(gameResult.data.game);\r\n      } else {\r\n        toast.error(gameResult.message);\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n\r\n    const fetchGameAds = async () => {\r\n      setAdsLoading(true);\r\n\r\n      const adsResult = await adService.getAds({ game_id: gameId });\r\n      if (adsResult.success) {\r\n        setAds(adsResult.data.ads);\r\n      } else {\r\n        toast.error(adsResult.message);\r\n      }\r\n\r\n      setAdsLoading(false);\r\n    };\r\n\r\n    fetchGameDetails();\r\n    fetchGameAds();\r\n  }, [gameId]);\r\n\r\n  const filteredAndSortedAds = ads\r\n    .filter(ad => adTypeFilter === 'all' || ad.ad_type === adTypeFilter)\r\n    .sort((a, b) => {\r\n      if (priceSort === 'asc') {\r\n        return (a.price || 0) - (b.price || 0);\r\n      } else {\r\n        return (b.price || 0) - (a.price || 0);\r\n      }\r\n    });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!game) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Jogo não encontrado</h2>\r\n          <Link to=\"/games\" className=\"text-blue-600 hover:text-blue-800\">\r\n            Voltar para catálogo\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4\">\r\n        {/* Game Header */}\r\n        <div className=\"bg-white rounded-lg shadow-md overflow-hidden mb-8\">\r\n          <div className=\"md:flex\">\r\n            <div className=\"md:flex-shrink-0\">\r\n              <div className=\"h-48 w-full md:h-full md:w-48 bg-gray-200 flex items-center justify-center\">\r\n                {game.image_url ? (\r\n                  <img\r\n                    src={game.image_url}\r\n                    alt={game.name}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                ) : (\r\n                  <Gamepad className=\"w-16 h-16 text-gray-400\" />\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"p-8\">\r\n              <div className=\"flex items-center mb-4\">\r\n                <h1 className=\"text-3xl font-bold text-gray-800 mr-4\">\r\n                  {game.name}\r\n                </h1>\r\n                {game.is_featured && (\r\n                  <span className=\"bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm flex items-center\">\r\n                    <Star className=\"w-4 h-4 mr-1 fill-current\" />\r\n                    Destaque\r\n                  </span>\r\n                )}\r\n              </div>\r\n\r\n              {game.description && (\r\n                <p className=\"text-gray-700 mb-6 leading-relaxed\">\r\n                  {game.description}\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"flex flex-wrap gap-4\">\r\n                <Link to={`/create-ad?game=${gameId}`}>\r\n                  <Button>\r\n                    <Plus className=\"w-4 h-4 mr-2\" />\r\n                    Criar Anúncio para este Jogo\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Ads Section */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <h2 className=\"text-2xl font-bold text-gray-800\">\r\n              Anúncios para {game.name} ({filteredAndSortedAds.length})\r\n            </h2>\r\n            <div className=\"flex space-x-4\">\r\n              <select\r\n                value={adTypeFilter}\r\n                onChange={(e) => setAdTypeFilter(e.target.value)}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"all\">Todos os tipos</option>\r\n                <option value=\"venda\">Venda</option>\r\n                <option value=\"troca\">Troca</option>\r\n                <option value=\"procura\">Procura</option>\r\n              </select>\r\n              <select\r\n                value={priceSort}\r\n                onChange={(e) => setPriceSort(e.target.value)}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              >\r\n                <option value=\"asc\">Menor preço</option>\r\n                <option value=\"desc\">Maior preço</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {adsLoading ? (\r\n            <div className=\"flex justify-center py-8\">\r\n              <LoadingSpinner />\r\n            </div>\r\n          ) : filteredAndSortedAds.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"mb-4\">\r\n                <Gamepad className=\"w-16 h-16 text-gray-300 mx-auto\" />\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n                Nenhum anúncio encontrado\r\n              </h3>\r\n              <p className=\"text-gray-600 mb-4\">\r\n                {ads.length === 0\r\n                  ? 'Seja o primeiro a criar um anúncio para este jogo!'\r\n                  : 'Nenhum anúncio corresponde aos filtros selecionados.'\r\n                }\r\n              </p>\r\n              <Link to={`/create-ad?game=${gameId}`}>\r\n                <Button>\r\n                  <Plus className=\"w-4 h-4 mr-2\" />\r\n                  Criar Anúncio\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {filteredAndSortedAds.map((ad) => (\r\n                <Link\r\n                  key={ad._id}\r\n                  to={`/ads/${ad._id}`}\r\n                  className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\r\n                >\r\n                  {ad.image_url && (\r\n                    <div className=\"mb-3\">\r\n                      <img\r\n                        src={ad.image_url}\r\n                        alt={ad.title}\r\n                        className=\"w-full h-32 object-cover rounded\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex justify-between items-start mb-3\">\r\n                    <h3 className=\"font-semibold text-lg text-gray-800 line-clamp-2 flex-1 mr-2\">\r\n                      {ad.title}\r\n                    </h3>\r\n                    <div className=\"flex flex-col items-end space-y-1\">\r\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                        ad.ad_type === 'venda' \r\n                          ? 'bg-green-100 text-green-800'\r\n                          : ad.ad_type === 'troca'\r\n                          ? 'bg-blue-100 text-blue-800'\r\n                          : 'bg-purple-100 text-purple-800'\r\n                      }`}>\r\n                        {ad.ad_type}\r\n                      </span>\r\n                      {ad.is_boosted && (\r\n                        <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\r\n                          ⭐\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">\r\n                    {ad.description}\r\n                  </p>\r\n\r\n                  <div className=\"flex justify-between items-center text-sm\">\r\n                    <div className=\"flex flex-col\">\r\n                      {ad.price && (\r\n                        <span className=\"text-xl font-bold text-green-600\">\r\n                          R$ {ad.price}\r\n                        </span>\r\n                      )}\r\n                      <span className=\"text-gray-500\">{ad.platform}</span>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-end\">\r\n                      <span className=\"text-gray-500\">\r\n                        {new Date(ad.created_at).toLocaleDateString('pt-BR')}\r\n                      </span>\r\n                      <span className=\"text-gray-400 text-xs\">\r\n                        {ad.view_count} views\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameDetails;","import React, { useState } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { Eye, EyeOff, Mail, Lock } from 'lucide-react';\r\nimport Button from '../../components/Common/Button';\r\n\r\nconst Login = () => {\r\n  const { login } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors }\r\n  } = useForm();\r\n\r\n  const onSubmit = async (data) => {\r\n    setIsLoading(true);\r\n    \r\n    const result = await login(data.email, data.password);\r\n    \r\n    if (result.success) {\r\n      toast.success('Login realizado com sucesso!');\r\n      const from = location.state?.from?.pathname || '/dashboard';\r\n      navigate(from, { replace: true });\r\n    } else {\r\n      toast.error(result.message);\r\n    }\r\n    \r\n    setIsLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        <div>\r\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n            Entrar na sua conta\r\n          </h2>\r\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n            Ou{' '}\r\n            <Link\r\n              to=\"/register\"\r\n              className=\"font-medium text-blue-600 hover:text-blue-500\"\r\n            >\r\n              crie uma conta gratuita\r\n            </Link>\r\n          </p>\r\n        </div>\r\n\r\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit(onSubmit)}>\r\n          <div className=\"space-y-4\">\r\n            {/* Email */}\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                Email\r\n              </label>\r\n              <div className=\"mt-1 relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Mail className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  {...register('email', {\r\n                    required: 'Email é obrigatório',\r\n                    pattern: {\r\n                      value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                      message: 'Email inválido'\r\n                    }\r\n                  })}\r\n                  type=\"email\"\r\n                  className={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.email ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"seu@email.com\"\r\n                />\r\n              </div>\r\n              {errors.email && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.email.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Password */}\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\r\n                Senha\r\n              </label>\r\n              <div className=\"mt-1 relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Lock className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  {...register('password', {\r\n                    required: 'Senha é obrigatória',\r\n                    minLength: {\r\n                      value: 6,\r\n                      message: 'Senha deve ter pelo menos 6 caracteres'\r\n                    }\r\n                  })}\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  className={`block w-full pl-10 pr-10 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.password ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"Sua senha\"\r\n                />\r\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    className=\"text-gray-400 hover:text-gray-600\"\r\n                  >\r\n                    {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              {errors.password && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.password.message}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"text-sm\">\r\n              <Link\r\n                to=\"/forgot-password\"\r\n                className=\"font-medium text-blue-600 hover:text-blue-500\"\r\n              >\r\n                Esqueceu sua senha?\r\n              </Link>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <Button\r\n              type=\"submit\"\r\n              loading={isLoading}\r\n              className=\"w-full\"\r\n              size=\"lg\"\r\n            >\r\n              Entrar\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { Eye, EyeOff, Mail, Lock, User } from 'lucide-react';\r\nimport Button from '../../components/Common/Button';\r\n\r\nconst Register = () => {\r\n  const { register: registerUser } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    watch,\r\n    formState: { errors }\r\n  } = useForm();\r\n\r\n  const password = watch('password');\r\n\r\n  const onSubmit = async (data) => {\r\n    setIsLoading(true);\r\n    \r\n    const result = await registerUser({\r\n      username: data.username,\r\n      email: data.email,\r\n      password: data.password,\r\n      first_name: data.first_name,\r\n      last_name: data.last_name\r\n    });\r\n    \r\n    if (result.success) {\r\n      toast.success('Conta criada com sucesso! Faça login para continuar.');\r\n      navigate('/login');\r\n    } else {\r\n      toast.error(result.message);\r\n    }\r\n    \r\n    setIsLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-md w-full space-y-8\">\r\n        <div>\r\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\r\n            Criar nova conta\r\n          </h2>\r\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n            Ou{' '}\r\n            <Link\r\n              to=\"/login\"\r\n              className=\"font-medium text-blue-600 hover:text-blue-500\"\r\n            >\r\n              faça login na sua conta existente\r\n            </Link>\r\n          </p>\r\n        </div>\r\n\r\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit(onSubmit)}>\r\n          <div className=\"space-y-4\">\r\n            {/* Nome */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label htmlFor=\"first_name\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Nome\r\n                </label>\r\n                <input\r\n                  {...register('first_name', {\r\n                    required: 'Nome é obrigatório'\r\n                  })}\r\n                  type=\"text\"\r\n                  className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.first_name ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"Nome\"\r\n                />\r\n                {errors.first_name && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.first_name.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"last_name\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Sobrenome\r\n                </label>\r\n                <input\r\n                  {...register('last_name', {\r\n                    required: 'Sobrenome é obrigatório'\r\n                  })}\r\n                  type=\"text\"\r\n                  className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.last_name ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"Sobrenome\"\r\n                />\r\n                {errors.last_name && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.last_name.message}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Username */}\r\n            <div>\r\n              <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-700\">\r\n                Nome de usuário\r\n              </label>\r\n              <div className=\"mt-1 relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <User className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  {...register('username', {\r\n                    required: 'Nome de usuário é obrigatório',\r\n                    minLength: {\r\n                      value: 3,\r\n                      message: 'Nome de usuário deve ter pelo menos 3 caracteres'\r\n                    }\r\n                  })}\r\n                  type=\"text\"\r\n                  className={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.username ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"seunomeusuario\"\r\n                />\r\n              </div>\r\n              {errors.username && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.username.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Email */}\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                Email\r\n              </label>\r\n              <div className=\"mt-1 relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Mail className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  {...register('email', {\r\n                    required: 'Email é obrigatório',\r\n                    pattern: {\r\n                      value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                      message: 'Email inválido'\r\n                    }\r\n                  })}\r\n                  type=\"email\"\r\n                  className={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.email ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"seu@email.com\"\r\n                />\r\n              </div>\r\n              {errors.email && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.email.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Password */}\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\r\n                Senha\r\n              </label>\r\n              <div className=\"mt-1 relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Lock className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  {...register('password', {\r\n                    required: 'Senha é obrigatória',\r\n                    minLength: {\r\n                      value: 6,\r\n                      message: 'Senha deve ter pelo menos 6 caracteres'\r\n                    }\r\n                  })}\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  className={`block w-full pl-10 pr-10 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.password ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"Sua senha\"\r\n                />\r\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    className=\"text-gray-400 hover:text-gray-600\"\r\n                  >\r\n                    {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              {errors.password && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.password.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Confirm Password */}\r\n            <div>\r\n              <label htmlFor=\"confirmPassword\" className=\"block text-sm font-medium text-gray-700\">\r\n                Confirmar Senha\r\n              </label>\r\n              <div className=\"mt-1 relative\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Lock className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  {...register('confirmPassword', {\r\n                    required: 'Confirmação de senha é obrigatória',\r\n                    validate: value => value === password || 'Senhas não coincidem'\r\n                  })}\r\n                  type={showConfirmPassword ? 'text' : 'password'}\r\n                  className={`block w-full pl-10 pr-10 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.confirmPassword ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"Confirme sua senha\"\r\n                />\r\n                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                    className=\"text-gray-400 hover:text-gray-600\"\r\n                  >\r\n                    {showConfirmPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              {errors.confirmPassword && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.confirmPassword.message}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <Button\r\n              type=\"submit\"\r\n              loading={isLoading}\r\n              className=\"w-full\"\r\n              size=\"lg\"\r\n            >\r\n              Criar Conta\r\n            </Button>\r\n          </div>\r\n\r\n          <div className=\"text-xs text-gray-500 text-center\">\r\n            Ao criar uma conta, você concorda com nossos{' '}\r\n            <Link to=\"/terms\" className=\"text-blue-600 hover:text-blue-500\">\r\n              Termos de Uso\r\n            </Link>{' '}\r\n            e{' '}\r\n            <Link to=\"/privacy\" className=\"text-blue-600 hover:text-blue-500\">\r\n              Política de Privacidade\r\n            </Link>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;","// front/src/services/questionsService.js - CORREÇÃO E MELHORIAS\r\nimport api from './api';\r\n\r\nexport const questionsService = {\r\n  // Buscar perguntas de um anúncio\r\n  async getAdQuestions(adId) {\r\n    try {\r\n      console.log('🔍 Buscando perguntas para anúncio:', adId);\r\n\r\n      if (!adId) {\r\n        throw new Error('ID do anúncio é obrigatório');\r\n      }\r\n\r\n      const response = await api.get(`/ad-questions/ad/${adId}/questions`);\r\n\r\n      console.log('📥 Resposta das perguntas:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Perguntas carregadas'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao buscar perguntas:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao carregar perguntas',\r\n        data: { questions: [] }\r\n      };\r\n    }\r\n  },\r\n\r\n  // Fazer uma pergunta\r\n  async askQuestion(adId, question, isPublic = true) {\r\n    try {\r\n      console.log('📤 Enviando pergunta:', { adId, question, isPublic });\r\n\r\n      if (!adId || !question) {\r\n        throw new Error('ID do anúncio e pergunta são obrigatórios');\r\n      }\r\n\r\n      if (question.trim().length < 10) {\r\n        throw new Error('Pergunta deve ter pelo menos 10 caracteres');\r\n      }\r\n\r\n      const requestData = {\r\n        question: question.trim(),\r\n        is_public: isPublic\r\n      };\r\n\r\n      console.log('📦 Dados da requisição:', requestData);\r\n\r\n      const response = await api.post(`/ad-questions/ad/${adId}/question`, requestData);\r\n\r\n      console.log('📥 Resposta do envio:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Pergunta enviada com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao enviar pergunta:', error);\r\n\r\n      // Log detalhado do erro\r\n      if (error.response) {\r\n        console.error('Dados da resposta de erro:', error.response.data);\r\n        console.error('Status do erro:', error.response.status);\r\n      }\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao enviar pergunta'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Responder uma pergunta\r\n  async answerQuestion(questionId, answer) {\r\n    try {\r\n      console.log('📤 Enviando resposta:', { questionId, answer });\r\n\r\n      if (!questionId || !answer) {\r\n        throw new Error('ID da pergunta e resposta são obrigatórios');\r\n      }\r\n\r\n      if (answer.trim().length < 5) {\r\n        throw new Error('Resposta deve ter pelo menos 5 caracteres');\r\n      }\r\n\r\n      const requestData = {\r\n        answer: answer.trim()\r\n      };\r\n\r\n      const response = await api.post(`/ad-questions/question/${questionId}/answer`, requestData);\r\n\r\n      console.log('📥 Resposta do envio da resposta:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Resposta enviada com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao enviar resposta:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao enviar resposta'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Deletar uma pergunta\r\n  async deleteQuestion(questionId) {\r\n    try {\r\n      console.log('🗑️ Deletando pergunta:', questionId);\r\n\r\n      if (!questionId) {\r\n        throw new Error('ID da pergunta é obrigatório');\r\n      }\r\n\r\n      const response = await api.delete(`/ad-questions/question/${questionId}`);\r\n\r\n      console.log('📥 Resposta da deleção:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        message: response.data.message || 'Pergunta deletada com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao deletar pergunta:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao deletar pergunta'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Alterar visibilidade da pergunta\r\n  async toggleQuestionVisibility(questionId) {\r\n    try {\r\n      console.log('👁️ Alterando visibilidade:', questionId);\r\n\r\n      if (!questionId) {\r\n        throw new Error('ID da pergunta é obrigatório');\r\n      }\r\n\r\n      const response = await api.put(`/ad-questions/question/${questionId}/visibility`);\r\n\r\n      console.log('📥 Resposta da alteração:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Visibilidade alterada com sucesso'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao alterar visibilidade:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao alterar visibilidade'\r\n      };\r\n    }\r\n  },\r\n\r\n  // Buscar perguntas do usuário\r\n  async getUserQuestions(type = 'asked') {\r\n    try {\r\n      console.log('🔍 Buscando perguntas do usuário:', type);\r\n\r\n      if (!['asked', 'answered'].includes(type)) {\r\n        throw new Error('Tipo deve ser \"asked\" ou \"answered\"');\r\n      }\r\n\r\n      const response = await api.get(`/ad-questions/user/questions?type=${type}`);\r\n\r\n      console.log('📥 Perguntas do usuário:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Perguntas carregadas'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao buscar perguntas do usuário:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao carregar perguntas',\r\n        data: { questions: [] }\r\n      };\r\n    }\r\n  },\r\n\r\n  // Buscar perguntas dos meus anúncios\r\n  async getMyAdQuestions(params = {}) {\r\n    try {\r\n      console.log('🔍 Buscando perguntas dos meus anúncios:', params);\r\n\r\n      const response = await api.get('/ad-questions/my-questions', { params });\r\n\r\n      console.log('📥 Perguntas dos meus anúncios:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Perguntas carregadas'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao buscar perguntas dos meus anúncios:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || error.message || 'Erro ao carregar perguntas',\r\n        data: { questions: [] }\r\n      };\r\n    }\r\n  },\r\n\r\n  // Função de debug para verificar conectividade\r\n  async debugConnection() {\r\n    try {\r\n      console.log('🔧 Testando conexão com API de perguntas...');\r\n\r\n      // Fazer uma requisição simples para testar\r\n      const response = await api.get('/health');\r\n\r\n      console.log('✅ Conexão OK:', response.data);\r\n\r\n      return {\r\n        success: true,\r\n        message: 'Conexão estabelecida',\r\n        data: response.data\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Falha na conexão:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: 'Falha na conexão com a API',\r\n        error: error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  // Validar dados antes de enviar\r\n  validateQuestionData(question, isPublic) {\r\n    const errors = [];\r\n\r\n    if (!question || typeof question !== 'string') {\r\n      errors.push('Pergunta deve ser um texto válido');\r\n    } else {\r\n      const trimmed = question.trim();\r\n      if (trimmed.length < 10) {\r\n        errors.push('Pergunta deve ter pelo menos 10 caracteres');\r\n      }\r\n      if (trimmed.length > 500) {\r\n        errors.push('Pergunta não pode ter mais de 500 caracteres');\r\n      }\r\n    }\r\n\r\n    if (typeof isPublic !== 'boolean') {\r\n      errors.push('Visibilidade deve ser verdadeiro ou falso');\r\n    }\r\n\r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors,\r\n      data: {\r\n        question: question?.trim(),\r\n        is_public: isPublic\r\n      }\r\n    };\r\n  },\r\n\r\n  // Validar dados da resposta\r\n  validateAnswerData(answer) {\r\n    const errors = [];\r\n\r\n    if (!answer || typeof answer !== 'string') {\r\n      errors.push('Resposta deve ser um texto válido');\r\n    } else {\r\n      const trimmed = answer.trim();\r\n      if (trimmed.length < 5) {\r\n        errors.push('Resposta deve ter pelo menos 5 caracteres');\r\n      }\r\n      if (trimmed.length > 1000) {\r\n        errors.push('Resposta não pode ter mais de 1000 caracteres');\r\n      }\r\n    }\r\n\r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors,\r\n      data: {\r\n        answer: answer?.trim()\r\n      }\r\n    };\r\n  }\r\n};","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nconst Badge = ({ \r\n  children, \r\n  variant = 'default',\r\n  size = 'default',\r\n  className = '',\r\n  ...props \r\n}) => {\r\n  const variantClasses = {\r\n    default: 'bg-gray-100 text-gray-800',\r\n    primary: 'bg-blue-100 text-blue-800',\r\n    secondary: 'bg-gray-100 text-gray-800',\r\n    success: 'bg-green-100 text-green-800',\r\n    warning: 'bg-yellow-100 text-yellow-800',\r\n    danger: 'bg-red-100 text-red-800',\r\n    info: 'bg-blue-100 text-blue-800'\r\n  };\r\n\r\n  const sizeClasses = {\r\n    sm: 'px-2 py-1 text-xs',\r\n    default: 'px-2.5 py-0.5 text-sm',\r\n    lg: 'px-3 py-1 text-base'\r\n  };\r\n\r\n  return (\r\n    <span\r\n      className={clsx(\r\n        'inline-flex items-center font-medium rounded-full',\r\n        variantClasses[variant],\r\n        sizeClasses[size],\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default Badge;","import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { questionsService } from '../../services/questionsService';\r\nimport { \r\n  MessageCircle, \r\n  Send, \r\n  Clock, \r\n  CheckCircle, \r\n  AlertCircle,\r\n  Eye,\r\n  User,\r\n  Calendar\r\n} from 'lucide-react';\r\nimport LoadingSpinner from '../Common/LoadingSpinner';\r\nimport Button from '../Common/Button';\r\nimport Badge from '../Common/Badge';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst MyQuestions = () => {\r\n  const { user } = useAuth();\r\n  const [questions, setQuestions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState('all'); // all, pending, answered\r\n  const [selectedQuestion, setSelectedQuestion] = useState(null);\r\n  const [answerText, setAnswerText] = useState('');\r\n  const [submittingAnswer, setSubmittingAnswer] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadQuestions();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadQuestions();\r\n  }, [filter]);\r\n\r\n  const loadQuestions = async () => {\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const result = await questionsService.getMyAdQuestions({\r\n        limit: 50,\r\n        skip: 0,\r\n        status: filter === 'all' ? undefined : filter\r\n      });\r\n\r\n      if (result.success) {\r\n        setQuestions(result.data.questions || []);\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar perguntas:', error);\r\n      toast.error('Erro ao carregar perguntas');\r\n    }\r\n    \r\n    setLoading(false);\r\n  };\r\n\r\n  const handleAnswerQuestion = async (questionId) => {\r\n    if (!answerText.trim()) {\r\n      toast.error('Digite uma resposta');\r\n      return;\r\n    }\r\n\r\n    setSubmittingAnswer(true);\r\n    \r\n    try {\r\n      const result = await questionsService.answerQuestion(questionId, answerText);\r\n      \r\n      if (result.success) {\r\n        setQuestions(prev => \r\n          prev.map(q => \r\n            q._id === questionId \r\n              ? {\r\n                  ...q,\r\n                  answer: answerText,\r\n                  status: 'answered',\r\n                  answered_at: new Date().toISOString(),\r\n                  updated_at: new Date().toISOString()\r\n                }\r\n              : q\r\n          )\r\n        );\r\n        \r\n        toast.success('Resposta enviada com sucesso!');\r\n        setSelectedQuestion(null);\r\n        setAnswerText('');\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Erro ao enviar resposta');\r\n    }\r\n    \r\n    setSubmittingAnswer(false);\r\n  };\r\n\r\n  const formatTime = (timestamp) => {\r\n    const date = new Date(timestamp);\r\n    const now = new Date();\r\n    const diff = now - date;\r\n    const minutes = Math.floor(diff / 60000);\r\n    const hours = Math.floor(minutes / 60);\r\n    const days = Math.floor(hours / 24);\r\n\r\n    if (days > 0) return `${days} dia${days > 1 ? 's' : ''} atrás`;\r\n    if (hours > 0) return `${hours} hora${hours > 1 ? 's' : ''} atrás`;\r\n    if (minutes > 0) return `${minutes} minuto${minutes > 1 ? 's' : ''} atrás`;\r\n    return 'Agora mesmo';\r\n  };\r\n\r\n  const filteredQuestions = questions.filter(question => {\r\n    if (filter === 'pending') return question.status === 'pending';\r\n    if (filter === 'answered') return question.status === 'answered';\r\n    return true;\r\n  });\r\n\r\n  const getFilterCounts = () => {\r\n    return {\r\n      all: questions.length,\r\n      pending: questions.filter(q => q.status === 'pending').length,\r\n      answered: questions.filter(q => q.status === 'answered').length\r\n    };\r\n  };\r\n\r\n  const counts = getFilterCounts();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <MessageCircle className=\"w-6 h-6 text-blue-600\" />\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-800\">\r\n              Perguntas dos Anúncios\r\n            </h2>\r\n            <p className=\"text-gray-600\">\r\n              {counts.pending} pendente{counts.pending !== 1 ? 's' : ''} de {counts.all} total\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        {[\r\n          { key: 'all', label: 'Todas', count: counts.all },\r\n          { key: 'pending', label: 'Pendentes', count: counts.pending },\r\n          { key: 'answered', label: 'Respondidas', count: counts.answered }\r\n        ].map(filterOption => (\r\n          <button\r\n            key={filterOption.key}\r\n            onClick={() => setFilter(filterOption.key)}\r\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n              filter === filterOption.key\r\n                ? 'bg-blue-600 text-white'\r\n                : 'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200'\r\n            }`}\r\n          >\r\n            {filterOption.label} ({filterOption.count})\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Questions List */}\r\n      <div className=\"space-y-4\">\r\n        {filteredQuestions.length > 0 ? (\r\n          filteredQuestions.map((question) => (\r\n            <div\r\n              key={question._id}\r\n              className=\"bg-white rounded-lg shadow-md p-6 border-l-4 border-l-blue-500\"\r\n            >\r\n              {/* Question Header */}\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center space-x-3 mb-2\">\r\n                    <div className=\"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center\">\r\n                      {question.user.profile_pic ? (\r\n                        <img\r\n                          src={question.user.profile_pic}\r\n                          alt={question.user.username}\r\n                          className=\"w-10 h-10 rounded-full object-cover\"\r\n                        />\r\n                      ) : (\r\n                        <User className=\"w-5 h-5 text-gray-600\" />\r\n                      )}\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"font-medium text-gray-900\">\r\n                        {question.user.first_name} {question.user.last_name}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        @{question.user.username}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"mb-2\">\r\n                    <span className=\"text-sm text-gray-500\">Pergunta sobre:</span>\r\n                    <h3 className=\"font-semibold text-gray-800\">\r\n                      {question.ad_title}\r\n                    </h3>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Badge variant={question.status === 'pending' ? 'warning' : 'success'}>\r\n                    {question.status === 'pending' ? (\r\n                      <>\r\n                        <Clock className=\"w-3 h-3 mr-1\" />\r\n                        Pendente\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <CheckCircle className=\"w-3 h-3 mr-1\" />\r\n                        Respondida\r\n                      </>\r\n                    )}\r\n                  </Badge>\r\n                  \r\n                  <div className=\"text-sm text-gray-500 flex items-center\">\r\n                    <Calendar className=\"w-4 h-4 mr-1\" />\r\n                    {formatTime(question.created_at)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Question Content */}\r\n              <div className=\"mb-4\">\r\n                <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                  <p className=\"text-gray-800\">{question.question}</p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Answer Section */}\r\n              {question.status === 'answered' ? (\r\n                <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\r\n                  <div className=\"flex items-start space-x-3\">\r\n                    <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                      <User className=\"w-4 h-4 text-white\" />\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"text-sm text-blue-600 font-medium mb-1\">\r\n                        Sua resposta • {formatTime(question.answered_at)}\r\n                      </div>\r\n                      <p className=\"text-gray-800\">{question.answer}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"border-t border-gray-200 pt-4\">\r\n                  {selectedQuestion === question._id ? (\r\n                    <div className=\"space-y-3\">\r\n                      <textarea\r\n                        value={answerText}\r\n                        onChange={(e) => setAnswerText(e.target.value)}\r\n                        placeholder=\"Digite sua resposta...\"\r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        rows=\"3\"\r\n                      />\r\n                      <div className=\"flex space-x-2\">\r\n                        <Button\r\n                          onClick={() => handleAnswerQuestion(question._id)}\r\n                          disabled={submittingAnswer || !answerText.trim()}\r\n                          size=\"sm\"\r\n                        >\r\n                          <Send className=\"w-4 h-4 mr-2\" />\r\n                          {submittingAnswer ? 'Enviando...' : 'Enviar Resposta'}\r\n                        </Button>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          onClick={() => {\r\n                            setSelectedQuestion(null);\r\n                            setAnswerText('');\r\n                          }}\r\n                          size=\"sm\"\r\n                        >\r\n                          Cancelar\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    <Button\r\n                      onClick={() => setSelectedQuestion(question._id)}\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                    >\r\n                      <MessageCircle className=\"w-4 h-4 mr-2\" />\r\n                      Responder\r\n                    </Button>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-center py-12\">\r\n            <MessageCircle className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-gray-800 mb-2\">\r\n              {filter === 'pending' ? 'Nenhuma pergunta pendente' :\r\n               filter === 'answered' ? 'Nenhuma pergunta respondida' :\r\n               'Nenhuma pergunta encontrada'}\r\n            </h3>\r\n            <p className=\"text-gray-600\">\r\n              {filter === 'all' \r\n                ? 'Ainda não há perguntas nos seus anúncios'\r\n                : 'Altere o filtro para ver outras perguntas'\r\n              }\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyQuestions;","// front/src/pages/Dashboard/Dashboard.jsx - VERSÃO COMPLETA\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { userService, adService, orderService } from '../../services';\r\nimport {\r\n  Plus,\r\n  Eye,\r\n  Edit,\r\n  Trash2,\r\n  TrendingUp,\r\n  DollarSign,\r\n  ShoppingBag,\r\n  Users,\r\n  Star,\r\n  Package,\r\n  Clock,\r\n  CheckCircle,\r\n  XCircle,\r\n  MessageCircle\r\n} from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\nimport MyQuestions from '../../components/Dashboard/MyQuestions';\r\n\r\nconst Dashboard = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n  const [dashboardData, setDashboardData] = useState(null);\r\n  const [userAds, setUserAds] = useState([]);\r\n  const [orders, setOrders] = useState([]);\r\n  const [orderStats, setOrderStats] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [adsLoading, setAdsLoading] = useState(false);\r\n  const [ordersLoading, setOrdersLoading] = useState(false);\r\n\r\n  // Tabs disponíveis\r\n  const tabs = [\r\n    { id: 'overview', label: 'Visão Geral', icon: TrendingUp },\r\n    { id: 'ads', label: 'Meus Anúncios', icon: Package },\r\n    { id: 'questions', label: 'Perguntas', icon: MessageCircle },\r\n    { id: 'sales', label: 'Vendas', icon: DollarSign },\r\n    { id: 'purchases', label: 'Compras', icon: ShoppingBag },\r\n    { id: 'profile', label: 'Perfil', icon: Users }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    // Verificar se há uma tab específica na URL\r\n    const urlParams = new URLSearchParams(location.search);\r\n    const tab = urlParams.get('tab');\r\n    if (tab && tabs.some(t => t.id === tab)) {\r\n      setActiveTab(tab);\r\n    }\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'ads') {\r\n      fetchUserAds();\r\n    } else if (activeTab === 'sales' || activeTab === 'purchases') {\r\n      fetchOrders();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  const fetchDashboardData = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Buscar dados do dashboard\r\n      const dashboardResult = await userService.getDashboardData();\r\n      if (dashboardResult.success) {\r\n        setDashboardData(dashboardResult.data);\r\n      }\r\n\r\n      // Buscar estatísticas de pedidos\r\n      const statsResult = await orderService.getOrderStats();\r\n      if (statsResult.success) {\r\n        setOrderStats(statsResult.data);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Erro ao carregar dados do dashboard');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const fetchUserAds = async () => {\r\n    setAdsLoading(true);\r\n    const result = await adService.getMyAds();\r\n    if (result.success) {\r\n      setUserAds(result.data.ads);\r\n    }\r\n    setAdsLoading(false);\r\n  };\r\n\r\n  const fetchOrders = async () => {\r\n    setOrdersLoading(true);\r\n\r\n    try {\r\n      let result;\r\n      if (activeTab === 'sales') {\r\n        result = await orderService.getSales();\r\n      } else {\r\n        result = await orderService.getPurchases();\r\n      }\r\n\r\n      if (result.success) {\r\n        setOrders(result.data.sales || result.data.purchases || []);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Erro ao carregar pedidos');\r\n    }\r\n\r\n    setOrdersLoading(false);\r\n  };\r\n\r\n  const handleEditAd = (adId) => {\r\n    navigate(`/ads/${adId}/edit`);\r\n  };\r\n\r\n  const handleDeleteAd = async (adId) => {\r\n    if (window.confirm('Tem certeza que deseja excluir este anúncio?')) {\r\n      setAdsLoading(true);\r\n\r\n      const result = await adService.deleteAd(adId);\r\n      if (result.success) {\r\n        toast.success('Anúncio excluído com sucesso!');\r\n        setUserAds(userAds.filter(ad => ad._id !== adId));\r\n        fetchDashboardData(); // Atualizar estatísticas\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n\r\n      setAdsLoading(false);\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    const colors = {\r\n      pending: 'bg-yellow-100 text-yellow-800',\r\n      paid: 'bg-blue-100 text-blue-800',\r\n      shipped: 'bg-purple-100 text-purple-800',\r\n      delivered: 'bg-green-100 text-green-800',\r\n      cancelled: 'bg-red-100 text-red-800'\r\n    };\r\n    return colors[status] || 'bg-gray-100 text-gray-800';\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    const icons = {\r\n      pending: Clock,\r\n      paid: CheckCircle,\r\n      shipped: Package,\r\n      delivered: CheckCircle,\r\n      cancelled: XCircle\r\n    };\r\n    const Icon = icons[status] || Clock;\r\n    return <Icon className=\"w-4 h-4\" />;\r\n  };\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case 'overview':\r\n        return (\r\n          <div className=\"space-y-8\">\r\n            {/* Cards de estatísticas */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"p-3 rounded-full bg-blue-100\">\r\n                    <Package className=\"w-6 h-6 text-blue-600\" />\r\n                  </div>\r\n                  <div className=\"ml-4\">\r\n                    <p className=\"text-sm font-medium text-gray-600\">Anúncios Ativos</p>\r\n                    <p className=\"text-2xl font-bold text-gray-900\">\r\n                      {dashboardData?.stats?.active_ads || 0}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"p-3 rounded-full bg-green-100\">\r\n                    <DollarSign className=\"w-6 h-6 text-green-600\" />\r\n                  </div>\r\n                  <div className=\"ml-4\">\r\n                    <p className=\"text-sm font-medium text-gray-600\">Vendas</p>\r\n                    <p className=\"text-2xl font-bold text-gray-900\">\r\n                      {orderStats?.seller_stats?.delivered || 0}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"p-3 rounded-full bg-purple-100\">\r\n                    <ShoppingBag className=\"w-6 h-6 text-purple-600\" />\r\n                  </div>\r\n                  <div className=\"ml-4\">\r\n                    <p className=\"text-sm font-medium text-gray-600\">Compras</p>\r\n                    <p className=\"text-2xl font-bold text-gray-900\">\r\n                      {orderStats?.buyer_stats?.delivered || 0}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <div className=\"flex items-center\">\r\n                  <div className=\"p-3 rounded-full bg-yellow-100\">\r\n                    <Eye className=\"w-6 h-6 text-yellow-600\" />\r\n                  </div>\r\n                  <div className=\"ml-4\">\r\n                    <p className=\"text-sm font-medium text-gray-600\">Visualizações</p>\r\n                    <p className=\"text-2xl font-bold text-gray-900\">\r\n                      {dashboardData?.stats?.total_views || 0}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Ações rápidas */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">Ações Rápidas</h2>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <Link to=\"/create-ad\">\r\n                  <Button className=\"w-full flex items-center justify-center\">\r\n                    <Plus className=\"w-4 h-4 mr-2\" />\r\n                    Criar Novo Anúncio\r\n                  </Button>\r\n                </Link>\r\n                <Link to=\"/orders\">\r\n                  <Button variant=\"outline\" className=\"w-full flex items-center justify-center\">\r\n                    <ShoppingBag className=\"w-4 h-4 mr-2\" />\r\n                    Ver Todos os Pedidos\r\n                  </Button>\r\n                </Link>\r\n                <Link to=\"/profile\">\r\n                  <Button variant=\"outline\" className=\"w-full flex items-center justify-center\">\r\n                    <Users className=\"w-4 h-4 mr-2\" />\r\n                    Editar Perfil\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Resumo financeiro */}\r\n            {orderStats && (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\r\n                    💰 Como Vendedor\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Total de Vendas:</span>\r\n                      <span className=\"font-medium\">R$ {orderStats.total_revenue?.toFixed(2) || '0.00'}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Pedidos Pendentes:</span>\r\n                      <span className=\"font-medium\">{orderStats.seller_stats?.pending || 0}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Pedidos Entregues:</span>\r\n                      <span className=\"font-medium\">{orderStats.seller_stats?.delivered || 0}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\r\n                    🛒 Como Comprador\r\n                  </h3>\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Total Gasto:</span>\r\n                      <span className=\"font-medium\">R$ {orderStats.total_spent?.toFixed(2) || '0.00'}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Pedidos Pendentes:</span>\r\n                      <span className=\"font-medium\">{orderStats.buyer_stats?.pending || 0}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between\">\r\n                      <span className=\"text-gray-600\">Pedidos Recebidos:</span>\r\n                      <span className=\"font-medium\">{orderStats.buyer_stats?.delivered || 0}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'ads':\r\n        return (\r\n          <div className=\"bg-white rounded-lg shadow-md\">\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <h2 className=\"text-xl font-semibold text-gray-800\">Meus Anúncios</h2>\r\n                <Link to=\"/create-ad\">\r\n                  <Button size=\"sm\">\r\n                    <Plus className=\"w-4 h-4 mr-2\" />\r\n                    Novo Anúncio\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n\r\n            {adsLoading ? (\r\n              <div className=\"flex justify-center py-8\">\r\n                <LoadingSpinner />\r\n              </div>\r\n            ) : userAds.length === 0 ? (\r\n              <div className=\"text-center py-12\">\r\n                <Package className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n                  Nenhum anúncio encontrado\r\n                </h3>\r\n                <p className=\"text-gray-600 mb-4\">\r\n                  Comece criando seu primeiro anúncio para vender jogos.\r\n                </p>\r\n                <Link to=\"/create-ad\">\r\n                  <Button>\r\n                    <Plus className=\"w-4 h-4 mr-2\" />\r\n                    Criar Primeiro Anúncio\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                  <thead className=\"bg-gray-50\">\r\n                    <tr>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Anúncio\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Tipo\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Preço\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Status\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Views\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Ações\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {userAds.map((ad) => (\r\n                      <tr key={ad._id}>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div className=\"flex items-center\">\r\n                            {ad.image_url && (\r\n                              <img\r\n                                src={ad.image_url}\r\n                                alt={ad.title}\r\n                                className=\"w-12 h-12 rounded object-cover mr-3\"\r\n                              />\r\n                            )}\r\n                            <div>\r\n                              <div className=\"text-sm font-medium text-gray-900\">\r\n                                {ad.title}\r\n                              </div>\r\n                              <div className=\"text-sm text-gray-500\">\r\n                                {ad.game?.name} • {ad.platform}\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                            ad.ad_type === 'venda' \r\n                              ? 'bg-green-100 text-green-800'\r\n                              : ad.ad_type === 'troca'\r\n                              ? 'bg-blue-100 text-blue-800'\r\n                              : 'bg-purple-100 text-purple-800'\r\n                          }`}>\r\n                            {ad.ad_type.charAt(0).toUpperCase() + ad.ad_type.slice(1)}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                          {ad.price ? `R$ ${ad.price}` : '-'}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                            ad.status === 'active' \r\n                              ? 'bg-green-100 text-green-800' \r\n                              : 'bg-red-100 text-red-800'\r\n                          }`}>\r\n                            {ad.status === 'active' ? 'Ativo' : 'Inativo'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                          {ad.view_count || 0}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                          <div className=\"flex space-x-2\">\r\n                            <Link\r\n                              to={`/ads/${ad._id}`}\r\n                              className=\"text-blue-600 hover:text-blue-900\"\r\n                              title=\"Ver anúncio\"\r\n                            >\r\n                              <Eye className=\"w-4 h-4\" />\r\n                            </Link>\r\n                            <button\r\n                              className=\"text-yellow-600 hover:text-yellow-900\"\r\n                              title=\"Editar anúncio\"\r\n                              onClick={() => handleEditAd(ad._id)}\r\n                              disabled={adsLoading}\r\n                            >\r\n                              <Edit className=\"w-4 h-4\" />\r\n                            </button>\r\n                            <button\r\n                              className=\"text-red-600 hover:text-red-900\"\r\n                              title=\"Excluir anúncio\"\r\n                              onClick={() => handleDeleteAd(ad._id)}\r\n                              disabled={adsLoading}\r\n                            >\r\n                              <Trash2 className=\"w-4 h-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'sales':\r\n      case 'purchases':\r\n        const isSellerView = activeTab === 'sales';\r\n        return (\r\n          <div className=\"bg-white rounded-lg shadow-md\">\r\n            <div className=\"p-6 border-b border-gray-200\">\r\n              <h2 className=\"text-xl font-semibold text-gray-800\">\r\n                {isSellerView ? 'Minhas Vendas' : 'Minhas Compras'}\r\n              </h2>\r\n              <p className=\"text-gray-600 mt-1\">\r\n                {isSellerView\r\n                  ? 'Pedidos onde você é o vendedor'\r\n                  : 'Pedidos onde você é o comprador'\r\n                }\r\n              </p>\r\n            </div>\r\n\r\n            {ordersLoading ? (\r\n              <div className=\"flex justify-center py-8\">\r\n                <LoadingSpinner />\r\n              </div>\r\n            ) : orders.length === 0 ? (\r\n              <div className=\"text-center py-12\">\r\n                <ShoppingBag className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n                  Nenhum {isSellerView ? 'venda' : 'compra'} encontrada\r\n                </h3>\r\n                <p className=\"text-gray-600\">\r\n                  {isSellerView\r\n                    ? 'Quando alguém comprar seus anúncios, eles aparecerão aqui.'\r\n                    : 'Quando você fizer uma compra, ela aparecerá aqui.'\r\n                  }\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                  <thead className=\"bg-gray-50\">\r\n                    <tr>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Pedido\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        {isSellerView ? 'Comprador' : 'Vendedor'}\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Total\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Status\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Data\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Ações\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {orders.map((order) => (\r\n                      <tr key={order._id}>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div>\r\n                            <div className=\"text-sm font-medium text-gray-900\">\r\n                              {order.ad_snapshot?.title}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500\">\r\n                              {order.ad_snapshot?.game_name} • Qtd: {order.quantity}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div className=\"text-sm text-gray-900\">\r\n                            {order.other_user?.first_name} {order.other_user?.last_name}\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-500\">\r\n                            @{order.other_user?.username}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                          R$ {order.total_price?.toFixed(2)}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(order.status)}`}>\r\n                            {getStatusIcon(order.status)}\r\n                            <span className=\"ml-1\">{order.status}</span>\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                          {new Date(order.created_at).toLocaleDateString('pt-BR')}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                          <Link\r\n                            to={`/orders/${order._id}`}\r\n                            className=\"text-blue-600 hover:text-blue-900\"\r\n                          >\r\n                            Ver Detalhes\r\n                          </Link>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n\r\n      case 'questions':\r\n        return <MyQuestions />;\r\n\r\n      case 'profile':\r\n        return (\r\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n            <h2 className=\"text-xl font-semibold text-gray-800 mb-6\">Configurações do Perfil</h2>\r\n            <div className=\"text-center\">\r\n              <p className=\"text-gray-600 mb-4\">\r\n                Configure suas informações pessoais e preferências.\r\n              </p>\r\n              <Link to=\"/profile\">\r\n                <Button>\r\n                  <Users className=\"w-4 h-4 mr-2\" />\r\n                  Ir para Perfil Completo\r\n                </Button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return <div>Tab não encontrada</div>;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">\r\n            Dashboard\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Olá, {dashboardData?.user?.first_name || user?.username}! Gerencie seus anúncios e pedidos\r\n          </p>\r\n        </div>\r\n\r\n        {/* Tabs Navigation */}\r\n        <div className=\"bg-white rounded-lg shadow-md mb-6\">\r\n          <div className=\"border-b border-gray-200\">\r\n            <nav className=\"-mb-px flex space-x-8 px-6 overflow-x-auto\">\r\n              {tabs.map((tab) => {\r\n                const Icon = tab.icon;\r\n                return (\r\n                  <button\r\n                    key={tab.id}\r\n                    onClick={() => setActiveTab(tab.id)}\r\n                    className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 whitespace-nowrap ${\r\n                      activeTab === tab.id\r\n                        ? 'border-blue-500 text-blue-600'\r\n                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                    }`}\r\n                  >\r\n                    <Icon className=\"w-4 h-4\" />\r\n                    <span>{tab.label}</span>\r\n                  </button>\r\n                );\r\n              })}\r\n            </nav>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tab Content */}\r\n        {renderTabContent()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;","import React from 'react';\r\nimport { X } from 'lucide-react';\r\nimport Button from './Button';\r\n\r\nconst Modal = ({ \r\n  isOpen, \r\n  onClose, \r\n  title, \r\n  children, \r\n  footer,\r\n  size = 'md',\r\n  closeOnBackdrop = true \r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  const sizeClasses = {\r\n    sm: 'max-w-md',\r\n    md: 'max-w-lg', \r\n    lg: 'max-w-2xl',\r\n    xl: 'max-w-4xl',\r\n    full: 'max-w-full mx-4'\r\n  };\r\n\r\n  const handleBackdropClick = (e) => {\r\n    if (closeOnBackdrop && e.target === e.currentTarget) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className=\"fixed inset-0 z-50 flex items-start justify-center pt-8 p-4 bg-black bg-opacity-50\"\r\n      onClick={handleBackdropClick}\r\n    >\r\n      <div className={`bg-white rounded-lg shadow-xl w-full ${sizeClasses[size]} max-h-full overflow-y-auto`}>\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800\">{title}</h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6\">\r\n          {children}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        {footer && (\r\n          <div className=\"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50\">\r\n            {footer}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;","import React, { useState } from 'react';\r\nimport { Camera, User, Upload } from 'lucide-react';\r\nimport { toast } from 'react-toastify';\r\nimport api from '../../services/api';\r\n\r\nconst ProfileImageUpload = ({\r\n  currentImage,\r\n  onImageUpdated,\r\n  size = 'lg',\r\n  className = ''\r\n}) => {\r\n  const [uploading, setUploading] = useState(false);\r\n  const [previewImage, setPreviewImage] = useState(currentImage);\r\n\r\n  const sizeClasses = {\r\n    sm: 'w-16 h-16',\r\n    md: 'w-24 h-24',\r\n    lg: 'w-32 h-32',\r\n    xl: 'w-40 h-40'\r\n  };\r\n\r\n  const handleFileUpload = async (file) => {\r\n    // Validações\r\n    const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg', 'image/gif', 'image/webp'];\r\n    if (!allowedTypes.includes(file.type)) {\r\n      toast.error('Tipo de arquivo não suportado');\r\n      return;\r\n    }\r\n\r\n    const maxSize = 5 * 1024 * 1024; // 5MB\r\n    if (file.size > maxSize) {\r\n      toast.error('Arquivo muito grande (máximo 5MB)');\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('image', file);\r\n\r\n      // Se há imagem existente, incluir para substituição\r\n      if (previewImage) {\r\n        const existingFilename = previewImage.split('/').pop();\r\n        formData.append('replace_existing', existingFilename);\r\n      }\r\n\r\n      const response = await api.post('/upload/profile-image', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n\r\n      if (response.data.success) {\r\n        const imageData = response.data.data;\r\n        setPreviewImage(imageData.main_url);\r\n\r\n        if (onImageUpdated) {\r\n          onImageUpdated(imageData.main_url);\r\n        }\r\n\r\n        toast.success('Foto de perfil atualizada com sucesso!');\r\n      } else {\r\n        toast.error(response.data.message || 'Erro no upload');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro no upload:', error);\r\n      toast.error(error.response?.data?.message || 'Erro ao enviar imagem');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      handleFileUpload(file);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`relative inline-block ${className}`}>\r\n      {/* Input oculto */}\r\n      <input\r\n        type=\"file\"\r\n        accept=\"image/png,image/jpeg,image/jpg,image/gif,image/webp\"\r\n        onChange={handleFileSelect}\r\n        className=\"hidden\"\r\n        id=\"profile-image-upload\"\r\n      />\r\n\r\n      {/* Imagem de perfil */}\r\n      <div className={`${sizeClasses[size]} rounded-full bg-gray-200 flex items-center justify-center overflow-hidden relative group cursor-pointer`}>\r\n        {previewImage ? (\r\n          <img\r\n            src={previewImage}\r\n            alt=\"Foto de perfil\"\r\n            className=\"w-full h-full object-cover\"\r\n          />\r\n        ) : (\r\n          <User className=\"w-1/2 h-1/2 text-gray-400\" />\r\n        )}\r\n\r\n        {/* Overlay de upload */}\r\n        <label\r\n          htmlFor=\"profile-image-upload\"\r\n          className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-center justify-center cursor-pointer\"\r\n        >\r\n          {uploading ? (\r\n            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"></div>\r\n          ) : (\r\n            <Camera className=\"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\r\n          )}\r\n        </label>\r\n      </div>\r\n\r\n      {/* Botão de upload alternativo */}\r\n      <label\r\n        htmlFor=\"profile-image-upload\"\r\n        className=\"absolute -bottom-2 -right-2 bg-blue-600 text-white rounded-full p-2 cursor-pointer hover:bg-blue-700 transition-colors shadow-lg\"\r\n      >\r\n        <Camera className=\"w-4 h-4\" />\r\n      </label>\r\n\r\n      {/* Loading indicator */}\r\n      {uploading && (\r\n        <div className=\"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center\">\r\n          <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"></div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileImageUpload;","import React, { useState, useEffect } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { userService } from '../../services';\r\nimport { useForm } from 'react-hook-form';\r\nimport { User, Mail, Phone, MapPin, Edit, Save, X, Lock, Camera } from 'lucide-react';\r\nimport Button from '../../components/Common/Button';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Modal from '../../components/Common/Modal';\r\nimport ProfileImageUpload from '../../components/Common/ProfileImageUpload';\r\n\r\nconst Profile = () => {\r\n  const { user: authUser } = useAuth();\r\n  const [userData, setUserData] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showPasswordModal, setShowPasswordModal] = useState(false);\r\n  const [profileImageUrl, setProfileImageUrl] = useState(null);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    reset,\r\n    formState: { errors }\r\n  } = useForm();\r\n\r\n  const {\r\n    register: registerPassword,\r\n    handleSubmit: handlePasswordSubmit,\r\n    reset: resetPassword,\r\n    watch,\r\n    formState: { errors: passwordErrors }\r\n  } = useForm();\r\n\r\n  const newPassword = watch('new_password');\r\n\r\n  useEffect(() => {\r\n    const fetchUserProfile = async () => {\r\n      setLoading(true);\r\n\r\n      const result = await userService.getProfile();\r\n      if (result.success) {\r\n        setUserData(result.data.user);\r\n        setProfileImageUrl(result.data.user.profile_pic);\r\n        reset({\r\n          first_name: result.data.user.first_name || '',\r\n          last_name: result.data.user.last_name || '',\r\n          email: result.data.user.email || '',\r\n          phone: result.data.user.phone || '',\r\n          location: result.data.user.location || '',\r\n          bio: result.data.user.bio || ''\r\n        });\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchUserProfile();\r\n  }, [reset]);\r\n\r\n  const handleProfileImageUpdate = (newImageUrl) => {\r\n    setProfileImageUrl(newImageUrl);\r\n    // Atualizar userData também para refletir a mudança imediatamente\r\n    if (userData) {\r\n      setUserData({\r\n        ...userData,\r\n        profile_pic: newImageUrl\r\n      });\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (data) => {\r\n    setIsLoading(true);\r\n\r\n    const result = await userService.updateProfile(data);\r\n    if (result.success) {\r\n      setUserData(result.data.user);\r\n      toast.success(result.message);\r\n      setIsEditing(false);\r\n    } else {\r\n      toast.error(result.message);\r\n    }\r\n\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const onPasswordSubmit = async (data) => {\r\n    setIsLoading(true);\r\n\r\n    const result = await userService.changePassword({\r\n      current_password: data.current_password,\r\n      new_password: data.new_password\r\n    });\r\n\r\n    if (result.success) {\r\n      toast.success(result.message);\r\n      setShowPasswordModal(false);\r\n      resetPassword();\r\n    } else {\r\n      toast.error(result.message);\r\n    }\r\n\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    if (userData) {\r\n      reset({\r\n        first_name: userData.first_name || '',\r\n        last_name: userData.last_name || '',\r\n        email: userData.email || '',\r\n        phone: userData.phone || '',\r\n        location: userData.location || '',\r\n        bio: userData.bio || ''\r\n      });\r\n    }\r\n    setIsEditing(false);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!userData) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Erro ao carregar perfil</h2>\r\n          <p className=\"text-gray-600\">Não foi possível carregar os dados do seu perfil.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4 max-w-4xl\">\r\n        <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n          {/* Header */}\r\n          <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-8\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center\">\r\n                {/* COMPONENTE DE UPLOAD DE FOTO DE PERFIL */}\r\n                <div className=\"mr-6\">\r\n                  <ProfileImageUpload\r\n                    currentImage={profileImageUrl}\r\n                    onImageUpdated={handleProfileImageUpdate}\r\n                    size=\"xl\"\r\n                  />\r\n                </div>\r\n                <div className=\"text-white\">\r\n                  <h1 className=\"text-2xl font-bold\">\r\n                    {userData.first_name} {userData.last_name}\r\n                  </h1>\r\n                  <p className=\"text-blue-100\">@{userData.username}</p>\r\n                  <p className=\"text-blue-100\">\r\n                    Membro desde {new Date(userData.created_at).toLocaleDateString('pt-BR', {\r\n                      month: 'long',\r\n                      year: 'numeric'\r\n                    })}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <div className=\"text-right text-white\">\r\n                <div className=\"text-sm\">\r\n                  <div>⭐ {userData.seller_rating?.toFixed(1) || '0.0'}/5 - Vendedor</div>\r\n                  <div>⭐ {userData.buyer_rating?.toFixed(1) || '0.0'}/5 - Comprador</div>\r\n                  <div>{userData.total_ads || 0} anúncios publicados</div>\r\n                  <div>{userData.active_ads || 0} anúncios ativos</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Profile Form */}\r\n          <div className=\"p-6\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n              <h2 className=\"text-xl font-semibold text-gray-800\">\r\n                Informações Pessoais\r\n              </h2>\r\n              {!isEditing ? (\r\n                <Button\r\n                  onClick={() => setIsEditing(true)}\r\n                  variant=\"outline\"\r\n                >\r\n                  <Edit className=\"w-4 h-4 mr-2\" />\r\n                  Editar Perfil\r\n                </Button>\r\n              ) : (\r\n                <div className=\"flex space-x-2\">\r\n                  <Button\r\n                    onClick={handleSubmit(onSubmit)}\r\n                    loading={isLoading}\r\n                    size=\"sm\"\r\n                  >\r\n                    <Save className=\"w-4 h-4 mr-2\" />\r\n                    Salvar\r\n                  </Button>\r\n                  <Button\r\n                    onClick={handleCancel}\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                  >\r\n                    <X className=\"w-4 h-4 mr-2\" />\r\n                    Cancelar\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n              {/* Nome */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Nome\r\n                  </label>\r\n                  <input\r\n                    {...register('first_name', { required: 'Nome é obrigatório' })}\r\n                    type=\"text\"\r\n                    disabled={!isEditing}\r\n                    className={`w-full px-3 py-2 border rounded-md ${\r\n                      isEditing \r\n                        ? 'border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500' \r\n                        : 'border-gray-200 bg-gray-50'\r\n                    }`}\r\n                  />\r\n                  {errors.first_name && (\r\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.first_name.message}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Sobrenome\r\n                  </label>\r\n                  <input\r\n                    {...register('last_name', { required: 'Sobrenome é obrigatório' })}\r\n                    type=\"text\"\r\n                    disabled={!isEditing}\r\n                    className={`w-full px-3 py-2 border rounded-md ${\r\n                      isEditing \r\n                        ? 'border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500' \r\n                        : 'border-gray-200 bg-gray-50'\r\n                    }`}\r\n                  />\r\n                  {errors.last_name && (\r\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.last_name.message}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Email */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Email\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                  <input\r\n                    {...register('email', {\r\n                      required: 'Email é obrigatório',\r\n                      pattern: {\r\n                        value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                        message: 'Email inválido'\r\n                      }\r\n                    })}\r\n                    type=\"email\"\r\n                    disabled={true} // Email não pode ser editado\r\n                    className=\"w-full pl-10 pr-3 py-2 border border-gray-200 bg-gray-50 rounded-md\"\r\n                  />\r\n                </div>\r\n                <p className=\"mt-1 text-sm text-gray-500\">O email não pode ser alterado</p>\r\n              </div>\r\n\r\n              {/* Phone */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Telefone\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <Phone className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                  <input\r\n                    {...register('phone')}\r\n                    type=\"tel\"\r\n                    disabled={!isEditing}\r\n                    className={`w-full pl-10 pr-3 py-2 border rounded-md ${\r\n                      isEditing \r\n                        ? 'border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500' \r\n                        : 'border-gray-200 bg-gray-50'\r\n                    }`}\r\n                    placeholder=\"(11) 99999-9999\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Location */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Localização\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <MapPin className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                  <input\r\n                    {...register('location')}\r\n                    type=\"text\"\r\n                    disabled={!isEditing}\r\n                    className={`w-full pl-10 pr-3 py-2 border rounded-md ${\r\n                      isEditing \r\n                        ? 'border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500' \r\n                        : 'border-gray-200 bg-gray-50'\r\n                    }`}\r\n                    placeholder=\"Cidade, Estado\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Bio */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Sobre mim\r\n                </label>\r\n                <textarea\r\n                  {...register('bio')}\r\n                  rows={4}\r\n                  disabled={!isEditing}\r\n                  className={`w-full px-3 py-2 border rounded-md ${\r\n                    isEditing \r\n                      ? 'border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500' \r\n                      : 'border-gray-200 bg-gray-50'\r\n                  }`}\r\n                  placeholder=\"Conte um pouco sobre você e seus interesses em jogos...\"\r\n                />\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Account Settings */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-6 mt-6\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-6\">\r\n            Configurações da Conta\r\n          </h2>\r\n\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex justify-between items-center py-3 border-b border-gray-200\">\r\n              <div>\r\n                <h3 className=\"font-medium text-gray-800\">Alterar Senha</h3>\r\n                <p className=\"text-sm text-gray-600\">Atualize sua senha para manter sua conta segura</p>\r\n              </div>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => setShowPasswordModal(true)}\r\n              >\r\n                <Lock className=\"w-4 h-4 mr-2\" />\r\n                Alterar\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"flex justify-between items-center py-3 border-b border-gray-200\">\r\n              <div>\r\n                <h3 className=\"font-medium text-gray-800\">Foto de Perfil</h3>\r\n                <p className=\"text-sm text-gray-600\">Clique na sua foto acima para alterá-la</p>\r\n              </div>\r\n              <div className=\"text-sm text-blue-600\">\r\n                {profileImageUrl ? 'Foto definida' : 'Sem foto'}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex justify-between items-center py-3 border-b border-gray-200\">\r\n              <div>\r\n                <h3 className=\"font-medium text-gray-800\">Notificações por Email</h3>\r\n                <p className=\"text-sm text-gray-600\">Receba atualizações sobre seus anúncios</p>\r\n              </div>\r\n              <label className=\"relative inline-flex items-center cursor-pointer\">\r\n                <input type=\"checkbox\" className=\"sr-only peer\" defaultChecked />\r\n                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"flex justify-between items-center py-3\">\r\n              <div>\r\n                <h3 className=\"font-medium text-red-600\">Excluir Conta</h3>\r\n                <p className=\"text-sm text-gray-600\">Remova permanentemente sua conta e todos os dados</p>\r\n              </div>\r\n              <Button\r\n                variant=\"danger\"\r\n                size=\"sm\"\r\n                onClick={() => toast.info('Funcionalidade em desenvolvimento')}\r\n              >\r\n                Excluir\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Password Change Modal */}\r\n      <Modal\r\n        isOpen={showPasswordModal}\r\n        onClose={() => setShowPasswordModal(false)}\r\n        title=\"Alterar Senha\"\r\n        footer={\r\n          <>\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowPasswordModal(false)}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              onClick={handlePasswordSubmit(onPasswordSubmit)}\r\n              loading={isLoading}\r\n            >\r\n              Alterar Senha\r\n            </Button>\r\n          </>\r\n        }\r\n      >\r\n        <form onSubmit={handlePasswordSubmit(onPasswordSubmit)} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Senha Atual\r\n            </label>\r\n            <input\r\n              {...registerPassword('current_password', { required: 'Senha atual é obrigatória' })}\r\n              type=\"password\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n            {passwordErrors.current_password && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{passwordErrors.current_password.message}</p>\r\n            )}\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Nova Senha\r\n            </label>\r\n            <input\r\n              {...registerPassword('new_password', {\r\n                required: 'Nova senha é obrigatória',\r\n                minLength: {\r\n                  value: 6,\r\n                  message: 'Nova senha deve ter pelo menos 6 caracteres'\r\n                }\r\n              })}\r\n              type=\"password\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n            {passwordErrors.new_password && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{passwordErrors.new_password.message}</p>\r\n            )}\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Confirmar Nova Senha\r\n            </label>\r\n            <input\r\n              {...registerPassword('confirm_password', {\r\n                required: 'Confirmação é obrigatória',\r\n                validate: value => value === newPassword || 'Senhas não coincidem'\r\n              })}\r\n              type=\"password\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n            {passwordErrors.confirm_password && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{passwordErrors.confirm_password.message}</p>\r\n            )}\r\n          </div>\r\n        </form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;","import React, { useState, useRef } from 'react';\r\nimport { Upload, X, FileImage, Camera, Trash2 } from 'lucide-react';\r\nimport { toast } from 'react-toastify';\r\nimport api from '../../services/api';\r\n\r\nconst ImageUpload = ({\r\n  onImageUploaded,\r\n  currentImage = null,\r\n  category = 'ads',\r\n  className = '',\r\n  maxSize = 10,\r\n  acceptedTypes = ['image/png', 'image/jpeg', 'image/jpg', 'image/gif', 'image/webp'],\r\n  placeholder = 'Clique para fazer upload ou arraste uma imagem',\r\n  allowRemove = true\r\n}) => {\r\n  const [uploading, setUploading] = useState(false);\r\n  const [previewImage, setPreviewImage] = useState(currentImage);\r\n  const [dragOver, setDragOver] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n\r\n  const validateFile = (file) => {\r\n    // Verificar tipo\r\n    if (!acceptedTypes.includes(file.type)) {\r\n      toast.error('Tipo de arquivo não suportado. Use PNG, JPG, GIF ou WebP.');\r\n      return false;\r\n    }\r\n\r\n    // Verificar tamanho (em MB)\r\n    const fileSizeMB = file.size / (1024 * 1024);\r\n    if (fileSizeMB > maxSize) {\r\n      toast.error(`Arquivo muito grande. Máximo ${maxSize}MB.`);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleFileUpload = async (file) => {\r\n    if (!validateFile(file)) return;\r\n\r\n    setUploading(true);\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('image', file);\r\n\r\n      // Se há imagem existente, incluir para substituição\r\n      if (previewImage) {\r\n        // Extrair filename da URL existente\r\n        const existingFilename = previewImage.split('/').pop();\r\n        formData.append('replace_existing', existingFilename);\r\n      }\r\n\r\n      const endpoint = category === 'profiles' ? '/upload/profile-image' : '/upload/ad-image';\r\n      const response = await api.post(endpoint, formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n\r\n      if (response.data.success) {\r\n        const imageData = response.data.data;\r\n        setPreviewImage(imageData.main_url);\r\n\r\n        if (onImageUploaded) {\r\n          onImageUploaded(imageData);\r\n        }\r\n\r\n        toast.success(response.data.message || 'Imagem enviada com sucesso!');\r\n      } else {\r\n        toast.error(response.data.message || 'Erro no upload');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro no upload:', error);\r\n      toast.error(error.response?.data?.message || 'Erro ao enviar imagem');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const handleFileSelect = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      handleFileUpload(file);\r\n    }\r\n  };\r\n\r\n  const handleDrop = (event) => {\r\n    event.preventDefault();\r\n    setDragOver(false);\r\n\r\n    const files = event.dataTransfer.files;\r\n    if (files.length > 0) {\r\n      handleFileUpload(files[0]);\r\n    }\r\n  };\r\n\r\n  const handleDragOver = (event) => {\r\n    event.preventDefault();\r\n    setDragOver(true);\r\n  };\r\n\r\n  const handleDragLeave = (event) => {\r\n    event.preventDefault();\r\n    setDragOver(false);\r\n  };\r\n\r\n  const removeImage = () => {\r\n    setPreviewImage(null);\r\n    if (onImageUploaded) {\r\n      onImageUploaded(null);\r\n    }\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const triggerFileInput = () => {\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.click();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`relative ${className}`}>\r\n      {/* Input File Oculto */}\r\n      <input\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        accept={acceptedTypes.join(',')}\r\n        onChange={handleFileSelect}\r\n        className=\"hidden\"\r\n      />\r\n\r\n      {/* Área de Upload */}\r\n      <div\r\n        onClick={triggerFileInput}\r\n        onDrop={handleDrop}\r\n        onDragOver={handleDragOver}\r\n        onDragLeave={handleDragLeave}\r\n        className={`\r\n          relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-all duration-300\r\n          ${dragOver \r\n            ? 'border-blue-400 bg-blue-50' \r\n            : 'border-gray-300 hover:border-gray-400'\r\n          }\r\n          ${uploading ? 'pointer-events-none opacity-50' : ''}\r\n        `}\r\n      >\r\n        {previewImage ? (\r\n          // Preview da Imagem\r\n          <div className=\"relative\">\r\n            <img\r\n              src={previewImage}\r\n              alt=\"Preview\"\r\n              className=\"w-full h-48 object-cover rounded-lg\"\r\n            />\r\n\r\n            {/* Botões de Ação */}\r\n            <div className=\"absolute top-2 right-2 flex space-x-1\">\r\n              {allowRemove && (\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    removeImage();\r\n                  }}\r\n                  className=\"bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors\"\r\n                  title=\"Remover imagem\"\r\n                >\r\n                  <Trash2 className=\"w-4 h-4\" />\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  triggerFileInput();\r\n                }}\r\n                className=\"bg-blue-500 text-white rounded-full p-1 hover:bg-blue-600 transition-colors\"\r\n                title=\"Trocar imagem\"\r\n              >\r\n                <Camera className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Overlay para Trocar */}\r\n            <div className=\"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-50 transition-all duration-300 rounded-lg flex items-center justify-center\">\r\n              <div className=\"text-white opacity-0 hover:opacity-100 transition-opacity duration-300\">\r\n                <Camera className=\"w-8 h-8 mx-auto mb-2\" />\r\n                <p className=\"text-sm\">Clique para trocar</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          // Estado Vazio\r\n          <div className=\"py-8\">\r\n            {uploading ? (\r\n              <div className=\"flex flex-col items-center\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4\"></div>\r\n                <p className=\"text-sm text-gray-600\">Enviando imagem...</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"flex flex-col items-center\">\r\n                <div className=\"mb-4\">\r\n                  <FileImage className=\"w-12 h-12 text-gray-400\" />\r\n                </div>\r\n                <p className=\"text-sm text-gray-600 mb-2\">\r\n                  {placeholder}\r\n                </p>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  PNG, JPG, GIF ou WebP até {maxSize}MB\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Indicador de Drag Over */}\r\n        {dragOver && (\r\n          <div className=\"absolute inset-0 bg-blue-100 bg-opacity-75 rounded-lg flex items-center justify-center\">\r\n            <div className=\"text-blue-600\">\r\n              <Upload className=\"w-8 h-8 mx-auto mb-2\" />\r\n              <p className=\"text-sm font-medium\">Solte a imagem aqui</p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Instruções */}\r\n      {!previewImage && (\r\n        <p className=\"text-xs text-gray-500 mt-2 text-center\">\r\n          Recomendamos imagens com resolução mínima de 800x600 pixels\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageUpload;","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\nimport { useGames } from '../../contexts/GameContext';\r\nimport { adService } from '../../services/adService';\r\nimport { DollarSign, Gamepad } from 'lucide-react';\r\nimport Button from '../../components/Common/Button';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport ImageUpload from '../../components/Common/ImageUpload';\r\n\r\nconst CreateAd = () => {\r\n  const navigate = useNavigate();\r\n  const { games, fetchGames } = useGames();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [uploadedImage, setUploadedImage] = useState(null);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    watch,\r\n    formState: { errors }\r\n  } = useForm();\r\n\r\n  const adType = watch('ad_type');\r\n\r\n  useEffect(() => {\r\n    if (games.length === 0) {\r\n      fetchGames();\r\n    }\r\n  }, [games, fetchGames]);\r\n\r\n  const onSubmit = async (data) => {\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      // Incluir URL da imagem se foi feito upload\r\n      const adData = {\r\n        ...data,\r\n        image_url: uploadedImage?.main_url || null\r\n      };\r\n\r\n      const result = await adService.createAd(adData);\r\n\r\n      if (result.success) {\r\n        toast.success('Anúncio criado com sucesso!');\r\n        navigate('/dashboard');\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Erro ao criar anúncio');\r\n    }\r\n\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const handleImageUploaded = (imageData) => {\r\n    setUploadedImage(imageData);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4 max-w-2xl\">\r\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n          <div className=\"mb-6\">\r\n            <h1 className=\"text-2xl font-bold text-gray-800 mb-2\">\r\n              Criar Novo Anúncio\r\n            </h1>\r\n            <p className=\"text-gray-600\">\r\n              Preencha as informações do seu jogo para criar um anúncio\r\n            </p>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n            {/* Tipo de Anúncio */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Tipo de Anúncio\r\n              </label>\r\n              <div className=\"grid grid-cols-3 gap-4\">\r\n                <label className=\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50\">\r\n                  <input\r\n                    {...register('ad_type', { required: 'Selecione o tipo de anúncio' })}\r\n                    type=\"radio\"\r\n                    value=\"venda\"\r\n                    className=\"mr-3\"\r\n                  />\r\n                  <div>\r\n                    <div className=\"font-medium\">Venda</div>\r\n                    <div className=\"text-sm text-gray-500\">Vender o jogo</div>\r\n                  </div>\r\n                </label>\r\n\r\n                <label className=\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50\">\r\n                  <input\r\n                    {...register('ad_type', { required: 'Selecione o tipo de anúncio' })}\r\n                    type=\"radio\"\r\n                    value=\"troca\"\r\n                    className=\"mr-3\"\r\n                  />\r\n                  <div>\r\n                    <div className=\"font-medium\">Troca</div>\r\n                    <div className=\"text-sm text-gray-500\">Trocar por outro</div>\r\n                  </div>\r\n                </label>\r\n\r\n                <label className=\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50\">\r\n                  <input\r\n                    {...register('ad_type', { required: 'Selecione o tipo de anúncio' })}\r\n                    type=\"radio\"\r\n                    value=\"procura\"\r\n                    className=\"mr-3\"\r\n                  />\r\n                  <div>\r\n                    <div className=\"font-medium\">Procura</div>\r\n                    <div className=\"text-sm text-gray-500\">Procurar para comprar</div>\r\n                  </div>\r\n                </label>\r\n              </div>\r\n              {errors.ad_type && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.ad_type.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Jogo */}\r\n            <div>\r\n              <label htmlFor=\"game_id\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Jogo\r\n              </label>\r\n              <div className=\"relative\">\r\n                <Gamepad className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                <select\r\n                  {...register('game_id', { required: 'Selecione um jogo' })}\r\n                  className={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.game_id ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                >\r\n                  <option value=\"\">Selecione um jogo</option>\r\n                  {games.map((game) => (\r\n                    <option key={game._id} value={game._id}>\r\n                      {game.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              {errors.game_id && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.game_id.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Título */}\r\n            <div>\r\n              <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Título do Anúncio\r\n              </label>\r\n              <input\r\n                {...register('title', {\r\n                  required: 'Título é obrigatório',\r\n                  minLength: {\r\n                    value: 10,\r\n                    message: 'Título deve ter pelo menos 10 caracteres'\r\n                  }\r\n                })}\r\n                type=\"text\"\r\n                className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                  errors.title ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"Ex: FIFA 24 - PlayStation 5 em perfeito estado\"\r\n              />\r\n              {errors.title && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.title.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Descrição */}\r\n            <div>\r\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Descrição\r\n              </label>\r\n              <textarea\r\n                {...register('description', {\r\n                  required: 'Descrição é obrigatória',\r\n                  minLength: {\r\n                    value: 20,\r\n                    message: 'Descrição deve ter pelo menos 20 caracteres'\r\n                  }\r\n                })}\r\n                rows={4}\r\n                className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                  errors.description ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"Descreva o estado do jogo, se possui DLCs, se foi pouco usado, etc.\"\r\n              />\r\n              {errors.description && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.description.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Upload de Imagem */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Imagens do Jogo\r\n              </label>\r\n              <ImageUpload\r\n                onImageUploaded={handleImageUploaded}\r\n                category=\"ads\"\r\n                placeholder=\"Adicione fotos do seu jogo para atrair mais compradores\"\r\n                className=\"w-full\"\r\n              />\r\n              <p className=\"mt-2 text-sm text-gray-500\">\r\n                💡 Anúncios com fotos recebem até 5x mais visualizações!\r\n              </p>\r\n            </div>\r\n\r\n            {/* Preço (apenas para venda) */}\r\n            {adType === 'venda' && (\r\n              <div>\r\n                <label htmlFor=\"price\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Preço (R$)\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <DollarSign className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                  <input\r\n                    {...register('price', {\r\n                      required: adType === 'venda' ? 'Preço é obrigatório para vendas' : false,\r\n                      min: {\r\n                        value: 1,\r\n                        message: 'Preço deve ser maior que zero'\r\n                      }\r\n                    })}\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    className={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                      errors.price ? 'border-red-300' : 'border-gray-300'\r\n                    }`}\r\n                    placeholder=\"0,00\"\r\n                  />\r\n                </div>\r\n                {errors.price && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.price.message}</p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Jogos desejados (apenas para troca) */}\r\n            {adType === 'troca' && (\r\n              <div>\r\n                <label htmlFor=\"desired_games\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Jogos Desejados para Troca\r\n                </label>\r\n                <textarea\r\n                  {...register('desired_games', {\r\n                    required: adType === 'troca' ? 'Informe os jogos desejados para troca' : false\r\n                  })}\r\n                  rows={3}\r\n                  className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.desired_games ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"Liste os jogos que você gostaria de receber em troca\"\r\n                />\r\n                {errors.desired_games && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.desired_games.message}</p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Plataforma */}\r\n            <div>\r\n              <label htmlFor=\"platform\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Plataforma\r\n              </label>\r\n              <select\r\n                {...register('platform', { required: 'Selecione a plataforma' })}\r\n                className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                  errors.platform ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n              >\r\n                <option value=\"\">Selecione a plataforma</option>\r\n                <option value=\"PC\">PC</option>\r\n                <option value=\"PlayStation 5\">PlayStation 5</option>\r\n                <option value=\"PlayStation 4\">PlayStation 4</option>\r\n                <option value=\"Xbox Series X/S\">Xbox Series X/S</option>\r\n                <option value=\"Xbox One\">Xbox One</option>\r\n                <option value=\"Nintendo Switch\">Nintendo Switch</option>\r\n              </select>\r\n              {errors.platform && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.platform.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Estado do Jogo */}\r\n            <div>\r\n              <label htmlFor=\"condition\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Estado do Jogo\r\n              </label>\r\n              <select\r\n                {...register('condition', { required: 'Selecione o estado do jogo' })}\r\n                className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                  errors.condition ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n              >\r\n                <option value=\"\">Selecione o estado</option>\r\n                <option value=\"novo\">Novo (lacrado)</option>\r\n                <option value=\"seminovo\">Seminovo (excelente estado)</option>\r\n                <option value=\"usado\">Usado (bom estado)</option>\r\n                <option value=\"regular\">Regular (com sinais de uso)</option>\r\n              </select>\r\n              {errors.condition && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.condition.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Botões */}\r\n            <div className=\"flex justify-end space-x-4 pt-6\">\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                onClick={() => navigate('/dashboard')}\r\n              >\r\n                Cancelar\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                loading={isLoading}\r\n              >\r\n                Criar Anúncio\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateAd;","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\nimport { useGames } from '../../contexts/GameContext';\r\nimport { adService } from '../../services';\r\nimport { DollarSign, Gamepad } from 'lucide-react';\r\nimport Button from '../../components/Common/Button';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport ImageUpload from '../../components/Common/ImageUpload';\r\n\r\nconst EditAd = () => {\r\n  const { adId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { games, fetchGames } = useGames();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [pageLoading, setPageLoading] = useState(true);\r\n  const [uploadedImage, setUploadedImage] = useState(null);\r\n  const [currentImageUrl, setCurrentImageUrl] = useState(null);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    watch,\r\n    reset,\r\n    formState: { errors }\r\n  } = useForm();\r\n\r\n  const adType = watch('ad_type');\r\n\r\n  useEffect(() => {\r\n    const loadAdData = async () => {\r\n      setPageLoading(true);\r\n\r\n      try {\r\n        // Carregar dados do anúncio\r\n        const result = await adService.getAdForEdit(adId);\r\n        if (result.success) {\r\n          const ad = result.data.ad;\r\n\r\n          // Preencher formulário com dados existentes\r\n          reset({\r\n            game_id: ad.game_id,\r\n            title: ad.title,\r\n            description: ad.description,\r\n            ad_type: ad.ad_type,\r\n            platform: ad.platform,\r\n            condition: ad.condition,\r\n            price: ad.price || '',\r\n            desired_games: ad.desired_games || ''\r\n          });\r\n\r\n          // Definir imagem atual\r\n          if (ad.image_url) {\r\n            setCurrentImageUrl(ad.image_url);\r\n          }\r\n        } else {\r\n          toast.error(result.message);\r\n          navigate('/dashboard');\r\n        }\r\n      } catch (error) {\r\n        toast.error('Erro ao carregar anúncio');\r\n        navigate('/dashboard');\r\n      }\r\n\r\n      setPageLoading(false);\r\n    };\r\n\r\n    if (games.length === 0) {\r\n      fetchGames();\r\n    }\r\n\r\n    loadAdData();\r\n  }, [adId, games, fetchGames, reset, navigate]);\r\n\r\n  const handleImageUploaded = (imageData) => {\r\n    setUploadedImage(imageData);\r\n    if (imageData) {\r\n      setCurrentImageUrl(imageData.main_url);\r\n    } else {\r\n      setCurrentImageUrl(null);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (data) => {\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      // Incluir URL da imagem no envio\r\n      const updateData = {\r\n        ...data,\r\n        image_url: uploadedImage?.main_url || currentImageUrl || null\r\n      };\r\n\r\n      const result = await adService.updateAd(adId, updateData);\r\n\r\n      if (result.success) {\r\n        toast.success('Anúncio atualizado com sucesso!');\r\n        navigate('/dashboard');\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Erro ao atualizar anúncio');\r\n    }\r\n\r\n    setIsLoading(false);\r\n  };\r\n\r\n  if (pageLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4 max-w-2xl\">\r\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n          <div className=\"mb-6\">\r\n            <h1 className=\"text-2xl font-bold text-gray-800 mb-2\">\r\n              Editar Anúncio\r\n            </h1>\r\n            <p className=\"text-gray-600\">\r\n              Atualize as informações do seu anúncio\r\n            </p>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n            {/* Tipo de Anúncio */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Tipo de Anúncio\r\n              </label>\r\n              <div className=\"grid grid-cols-3 gap-4\">\r\n                <label className=\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50\">\r\n                  <input\r\n                    {...register('ad_type', { required: 'Selecione o tipo de anúncio' })}\r\n                    type=\"radio\"\r\n                    value=\"venda\"\r\n                    className=\"mr-3\"\r\n                  />\r\n                  <div>\r\n                    <div className=\"font-medium\">Venda</div>\r\n                    <div className=\"text-sm text-gray-500\">Vender o jogo</div>\r\n                  </div>\r\n                </label>\r\n\r\n                <label className=\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50\">\r\n                  <input\r\n                    {...register('ad_type', { required: 'Selecione o tipo de anúncio' })}\r\n                    type=\"radio\"\r\n                    value=\"troca\"\r\n                    className=\"mr-3\"\r\n                  />\r\n                  <div>\r\n                    <div className=\"font-medium\">Troca</div>\r\n                    <div className=\"text-sm text-gray-500\">Trocar por outro</div>\r\n                  </div>\r\n                </label>\r\n\r\n                <label className=\"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50\">\r\n                  <input\r\n                    {...register('ad_type', { required: 'Selecione o tipo de anúncio' })}\r\n                    type=\"radio\"\r\n                    value=\"procura\"\r\n                    className=\"mr-3\"\r\n                  />\r\n                  <div>\r\n                    <div className=\"font-medium\">Procura</div>\r\n                    <div className=\"text-sm text-gray-500\">Procurar para comprar</div>\r\n                  </div>\r\n                </label>\r\n              </div>\r\n              {errors.ad_type && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.ad_type.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Jogo */}\r\n            <div>\r\n              <label htmlFor=\"game_id\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Jogo\r\n              </label>\r\n              <div className=\"relative\">\r\n                <Gamepad className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                <select\r\n                  {...register('game_id', { required: 'Selecione um jogo' })}\r\n                  className={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.game_id ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                >\r\n                  <option value=\"\">Selecione um jogo</option>\r\n                  {games.map((game) => (\r\n                    <option key={game._id} value={game._id}>\r\n                      {game.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              {errors.game_id && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.game_id.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Título */}\r\n            <div>\r\n              <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Título do Anúncio\r\n              </label>\r\n              <input\r\n                {...register('title', {\r\n                  required: 'Título é obrigatório',\r\n                  minLength: {\r\n                    value: 10,\r\n                    message: 'Título deve ter pelo menos 10 caracteres'\r\n                  }\r\n                })}\r\n                type=\"text\"\r\n                className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                  errors.title ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"Ex: FIFA 24 - PlayStation 5 em perfeito estado\"\r\n              />\r\n              {errors.title && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.title.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Descrição */}\r\n            <div>\r\n              <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Descrição\r\n              </label>\r\n              <textarea\r\n                {...register('description', {\r\n                  required: 'Descrição é obrigatória',\r\n                  minLength: {\r\n                    value: 20,\r\n                    message: 'Descrição deve ter pelo menos 20 caracteres'\r\n                  }\r\n                })}\r\n                rows={4}\r\n                className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                  errors.description ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n                placeholder=\"Descreva o estado do jogo, se possui DLCs, se foi pouco usado, etc.\"\r\n              />\r\n              {errors.description && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.description.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Upload de Imagem MELHORADO */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Imagens do Anúncio\r\n              </label>\r\n              <ImageUpload\r\n                onImageUploaded={handleImageUploaded}\r\n                currentImage={currentImageUrl}\r\n                category=\"ads\"\r\n                placeholder=\"Adicione ou altere a foto do seu anúncio\"\r\n                className=\"w-full\"\r\n                allowRemove={true}\r\n              />\r\n              <p className=\"mt-2 text-sm text-gray-500\">\r\n                💡 Você pode arrastar uma nova imagem ou clicar para trocar a atual\r\n              </p>\r\n            </div>\r\n\r\n            {/* Preço (apenas para venda) */}\r\n            {adType === 'venda' && (\r\n              <div>\r\n                <label htmlFor=\"price\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Preço (R$)\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <DollarSign className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                  <input\r\n                    {...register('price', {\r\n                      required: adType === 'venda' ? 'Preço é obrigatório para vendas' : false,\r\n                      min: {\r\n                        value: 1,\r\n                        message: 'Preço deve ser maior que zero'\r\n                      }\r\n                    })}\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    className={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                      errors.price ? 'border-red-300' : 'border-gray-300'\r\n                    }`}\r\n                    placeholder=\"0,00\"\r\n                  />\r\n                </div>\r\n                {errors.price && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.price.message}</p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Jogos desejados (apenas para troca) */}\r\n            {adType === 'troca' && (\r\n              <div>\r\n                <label htmlFor=\"desired_games\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Jogos Desejados para Troca\r\n                </label>\r\n                <textarea\r\n                  {...register('desired_games', {\r\n                    required: adType === 'troca' ? 'Informe os jogos desejados para troca' : false\r\n                  })}\r\n                  rows={3}\r\n                  className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                    errors.desired_games ? 'border-red-300' : 'border-gray-300'\r\n                  }`}\r\n                  placeholder=\"Liste os jogos que você gostaria de receber em troca\"\r\n                />\r\n                {errors.desired_games && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.desired_games.message}</p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Plataforma */}\r\n            <div>\r\n              <label htmlFor=\"platform\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Plataforma\r\n              </label>\r\n              <select\r\n                {...register('platform', { required: 'Selecione a plataforma' })}\r\n                className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                  errors.platform ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n              >\r\n                <option value=\"\">Selecione a plataforma</option>\r\n                <option value=\"PC\">PC</option>\r\n                <option value=\"PlayStation 5\">PlayStation 5</option>\r\n                <option value=\"PlayStation 4\">PlayStation 4</option>\r\n                <option value=\"Xbox Series X/S\">Xbox Series X/S</option>\r\n                <option value=\"Xbox One\">Xbox One</option>\r\n                <option value=\"Nintendo Switch\">Nintendo Switch</option>\r\n              </select>\r\n              {errors.platform && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.platform.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Estado do Jogo */}\r\n            <div>\r\n              <label htmlFor=\"condition\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Estado do Jogo\r\n              </label>\r\n              <select\r\n                {...register('condition', { required: 'Selecione o estado do jogo' })}\r\n                className={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${\r\n                  errors.condition ? 'border-red-300' : 'border-gray-300'\r\n                }`}\r\n              >\r\n                <option value=\"\">Selecione o estado</option>\r\n                <option value=\"novo\">Novo (lacrado)</option>\r\n                <option value=\"seminovo\">Seminovo (excelente estado)</option>\r\n                <option value=\"usado\">Usado (bom estado)</option>\r\n                <option value=\"regular\">Regular (com sinais de uso)</option>\r\n              </select>\r\n              {errors.condition && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.condition.message}</p>\r\n              )}\r\n            </div>\r\n\r\n            {/* Botões */}\r\n            <div className=\"flex justify-end space-x-4 pt-6\">\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                onClick={() => navigate('/dashboard')}\r\n              >\r\n                Cancelar\r\n              </Button>\r\n              <Button\r\n                type=\"submit\"\r\n                loading={isLoading}\r\n              >\r\n                Atualizar Anúncio\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditAd;","// front/src/components/Common/AddToCartButton.jsx - VERSÃO CORRIGIDA\r\nimport React, { useState, useEffect } from 'react';\r\nimport { ShoppingCart, Plus, Minus, Check, X } from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport { toast } from 'react-toastify';\r\nimport Button from './Button';\r\n\r\nconst AddToCartButton = ({\r\n                           ad,\r\n                           className = '',\r\n                           size = 'md',\r\n                           variant = 'primary',\r\n                           showQuantity = true,\r\n                           maxQuantity = 10\r\n                         }) => {\r\n  const { isAuthenticated, user } = useAuth();\r\n  const { isInCart, getCartItemQuantity, addToCart, updateCartItem, removeFromCart } = useCart();\r\n\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [currentQuantity, setCurrentQuantity] = useState(0);\r\n  const [inCart, setInCart] = useState(false);\r\n\r\n  // Verificar se anúncio é válido e se pode ser adicionado ao carrinho\r\n  const canAddToCart = React.useMemo(() => {\r\n    if (!ad) return false;\r\n    if (!isAuthenticated) return false;\r\n    if (ad.ad_type !== 'venda') return false;\r\n    if (ad.status !== 'active') return false;\r\n    if (user && (user._id === ad.user_id || user._id === ad.user?._id)) return false;\r\n    return true;\r\n  }, [ad, isAuthenticated, user]);\r\n\r\n  // Atualizar estado quando carrinho mudar\r\n  useEffect(() => {\r\n    if (ad?._id && isAuthenticated) {\r\n      const itemInCart = isInCart(ad._id);\r\n      const quantity = getCartItemQuantity(ad._id);\r\n\r\n      console.log('🔄 Atualizando estado AddToCartButton:', {\r\n        adId: ad._id,\r\n        itemInCart,\r\n        quantity,\r\n        canAddToCart\r\n      });\r\n\r\n      setInCart(itemInCart);\r\n      setCurrentQuantity(quantity);\r\n    } else {\r\n      setInCart(false);\r\n      setCurrentQuantity(0);\r\n    }\r\n  }, [ad?._id, isAuthenticated, isInCart, getCartItemQuantity]);\r\n\r\n  // Adicionar ao carrinho\r\n  const handleAddToCart = async () => {\r\n    if (!canAddToCart) {\r\n      if (!isAuthenticated) {\r\n        toast.info('Faça login para adicionar itens ao carrinho');\r\n      } else if (ad.ad_type !== 'venda') {\r\n        toast.info('Apenas anúncios de venda podem ser adicionados ao carrinho');\r\n      } else if (user && (user._id === ad.user_id || user._id === ad.user?._id)) {\r\n        toast.info('Você não pode adicionar seu próprio anúncio ao carrinho');\r\n      } else {\r\n        toast.info('Este item não pode ser adicionado ao carrinho');\r\n      }\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      const result = await addToCart(ad, 1);\r\n\r\n      if (result.success) {\r\n        // O estado será atualizado automaticamente pelo useEffect\r\n        console.log('✅ Item adicionado ao carrinho');\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Erro ao adicionar ao carrinho:', error);\r\n      toast.error('Erro ao adicionar ao carrinho');\r\n    }\r\n\r\n    setIsProcessing(false);\r\n  };\r\n\r\n  // Atualizar quantidade\r\n  const handleUpdateQuantity = async (newQuantity) => {\r\n    if (newQuantity < 0 || newQuantity > maxQuantity) return;\r\n\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      if (newQuantity === 0) {\r\n        const result = await removeFromCart(ad._id);\r\n        if (result.success) {\r\n          console.log('✅ Item removido do carrinho');\r\n        }\r\n      } else {\r\n        const result = await updateCartItem(ad._id, newQuantity);\r\n        if (result.success) {\r\n          console.log('✅ Quantidade atualizada');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Erro ao atualizar quantidade:', error);\r\n      toast.error('Erro ao atualizar quantidade');\r\n    }\r\n\r\n    setIsProcessing(false);\r\n  };\r\n\r\n  // Remover do carrinho\r\n  const handleRemoveFromCart = async () => {\r\n    setIsProcessing(true);\r\n\r\n    try {\r\n      const result = await removeFromCart(ad._id);\r\n      if (result.success) {\r\n        console.log('✅ Item removido do carrinho');\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Erro ao remover do carrinho:', error);\r\n      toast.error('Erro ao remover do carrinho');\r\n    }\r\n\r\n    setIsProcessing(false);\r\n  };\r\n\r\n  // Não renderizar se não pode adicionar ao carrinho\r\n  if (!canAddToCart) {\r\n    if (!isAuthenticated) {\r\n      return (\r\n          <Button\r\n              onClick={() => toast.info('Faça login para adicionar ao carrinho')}\r\n              variant=\"outline\"\r\n              size={size}\r\n              className={className}\r\n          >\r\n            <ShoppingCart className=\"w-4 h-4 mr-2\" />\r\n            Faça Login\r\n          </Button>\r\n      );\r\n    }\r\n\r\n    if (user && (user._id === ad?.user_id || user._id === ad?.user?._id)) {\r\n      return (\r\n          <Button\r\n              disabled\r\n              variant=\"outline\"\r\n              size={size}\r\n              className={`${className} opacity-50 cursor-not-allowed`}\r\n          >\r\n            <X className=\"w-4 h-4 mr-2\" />\r\n            Seu Anúncio\r\n          </Button>\r\n      );\r\n    }\r\n\r\n    if (ad?.ad_type !== 'venda') {\r\n      return (\r\n          <Button\r\n              disabled\r\n              variant=\"outline\"\r\n              size={size}\r\n              className={`${className} opacity-50 cursor-not-allowed`}\r\n          >\r\n            <X className=\"w-4 h-4 mr-2\" />\r\n            Não Vendível\r\n          </Button>\r\n      );\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  // Renderizar controles de quantidade se item está no carrinho\r\n  if (inCart && currentQuantity > 0 && showQuantity) {\r\n    return (\r\n        <div className={`inline-flex items-center ${className}`}>\r\n          <Button\r\n              onClick={() => handleUpdateQuantity(currentQuantity - 1)}\r\n              disabled={isProcessing || currentQuantity <= 0}\r\n              variant=\"outline\"\r\n              size={size}\r\n              className=\"rounded-r-none border-r-0\"\r\n          >\r\n            <Minus className=\"w-4 h-4\" />\r\n          </Button>\r\n\r\n          <div className=\"px-4 py-2 border border-gray-300 bg-white text-center min-w-[60px] flex items-center justify-center\">\r\n            <span className=\"font-semibold text-gray-800\">{currentQuantity}</span>\r\n          </div>\r\n\r\n          <Button\r\n              onClick={() => handleUpdateQuantity(currentQuantity + 1)}\r\n              disabled={isProcessing || currentQuantity >= maxQuantity}\r\n              variant=\"outline\"\r\n              size={size}\r\n              className=\"rounded-l-none border-l-0\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n          </Button>\r\n\r\n          <Button\r\n              onClick={handleRemoveFromCart}\r\n              disabled={isProcessing}\r\n              variant=\"danger\"\r\n              size={size}\r\n              className=\"ml-2\"\r\n              title=\"Remover do carrinho\"\r\n          >\r\n            <X className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n    );\r\n  }\r\n\r\n  // Mostrar que está no carrinho (sem controles de quantidade)\r\n  if (inCart && currentQuantity > 0 && !showQuantity) {\r\n    return (\r\n        <Button\r\n            onClick={handleRemoveFromCart}\r\n            disabled={isProcessing}\r\n            variant=\"success\"\r\n            size={size}\r\n            className={className}\r\n        >\r\n          <Check className=\"w-4 h-4 mr-2\" />\r\n          No Carrinho ({currentQuantity})\r\n        </Button>\r\n    );\r\n  }\r\n\r\n  // Botão padrão para adicionar ao carrinho\r\n  return (\r\n      <Button\r\n          onClick={handleAddToCart}\r\n          disabled={isProcessing}\r\n          variant={variant}\r\n          size={size}\r\n          className={className}\r\n          loading={isProcessing}\r\n      >\r\n        <ShoppingCart className=\"w-4 h-4 mr-2\" />\r\n        Adicionar ao Carrinho\r\n      </Button>\r\n  );\r\n};\r\n\r\nexport default AddToCartButton;","// Dynamic base URL based on environment\r\nconst getBaseUrl = () => {\r\n  // Check for environment variable first\r\n  if (import.meta.env.VITE_API_UPLOAD_URL) {\r\n    return import.meta.env.VITE_API_UPLOAD_URL;\r\n  }\r\n  \r\n  // In development, use localhost\r\n  if (import.meta.env.DEV || window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\r\n    return 'http://127.0.0.1:5000/api/upload';\r\n  }\r\n  \r\n  // In production, try using the Vite proxy first\r\n  if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\r\n    // In development with Vite proxy\r\n    return '/api/upload';\r\n  }\r\n  \r\n  // In production, construct URL from current location\r\n  const protocol = window.location.protocol;\r\n  const hostname = window.location.hostname;\r\n  \r\n  // For production, assume API is on port 5000 or same domain with /api path\r\n  return `${protocol}//${hostname}:5000/api/upload`;\r\n};\r\n\r\nconst BASE_URL = getBaseUrl();\r\n\r\nexport const imageUtils = {\r\n  // URLs padrão para fallback\r\n  defaults: {\r\n    user: `${BASE_URL}/profiles/medium/no-user-image.jpg`,\r\n    ad: `${BASE_URL}/ads/medium/no-ads-image.jpg`,\r\n    game: `${BASE_URL}/games/medium/valorant.jpg`\r\n  },\r\n\r\n  // Gerar URL de imagem com fallback automático\r\n  getImageUrl(imagePath, type = 'ad', size = 'medium') {\r\n    // Se não tem imagem, usar padrão\r\n    if (!imagePath || imagePath === '' || imagePath === null) {\r\n      return this.defaults[type];\r\n    }\r\n\r\n    // Se já é uma URL completa e correta, retornar como está\r\n    if (imagePath.startsWith(`${BASE_URL}/`)) {\r\n      return imagePath;\r\n    }\r\n\r\n    // Se é uma URL completa mas antiga (uploads), corrigir\r\n    if (imagePath.startsWith('http://127.0.0.1:5000/api/uploads/')) {\r\n      return imagePath.replace('/api/uploads/', '/api/upload/');\r\n    }\r\n\r\n    // Se é URL externa (https://example.com), usar padrão local\r\n    if (imagePath.startsWith('http')) {\r\n      return this.defaults[type];\r\n    }\r\n\r\n    // Se é um nome de arquivo, construir URL completa\r\n    return `${BASE_URL}/${type}/${size}/${imagePath}`;\r\n  },\r\n\r\n  // Gerar srcSet para imagens responsivas\r\n  getSrcSet(imagePath, type = 'ad') {\r\n    const baseUrl = this.getImageUrl(imagePath, type, 'medium');\r\n    const basePath = baseUrl.replace('/medium/', '/');\r\n    const filename = this.getFilename(baseUrl);\r\n\r\n    return [\r\n      `${basePath}thumbnail/${filename} 300w`,\r\n      `${basePath}medium/${filename} 800w`,\r\n      `${basePath}large/${filename} 1200w`\r\n    ].join(', ');\r\n  },\r\n\r\n  // Extrair nome do arquivo da URL\r\n  getFilename(url) {\r\n    return url.split('/').pop();\r\n  },\r\n\r\n  // Verificar se imagem existe (para componentes)\r\n  async checkImageExists(url) {\r\n    try {\r\n      const response = await fetch(url, { method: 'HEAD' });\r\n      return response.ok;\r\n    } catch {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  // Validar arquivo antes do upload\r\n  validateImageFile(file, maxSizeMB = 10) {\r\n    const allowedTypes = ['image/png', 'image/jpeg', 'image/jpg', 'image/gif', 'image/webp'];\r\n\r\n    if (!allowedTypes.includes(file.type)) {\r\n      return { valid: false, error: 'Tipo de arquivo não suportado. Use PNG, JPG, GIF ou WebP.' };\r\n    }\r\n\r\n    const fileSizeMB = file.size / (1024 * 1024);\r\n    if (fileSizeMB > maxSizeMB) {\r\n      return { valid: false, error: `Arquivo muito grande. Máximo ${maxSizeMB}MB.` };\r\n    }\r\n\r\n    return { valid: true };\r\n  },\r\n\r\n  // Redimensionar imagem no client-side antes do upload\r\n  async resizeImageFile(file, maxWidth = 1200, maxHeight = 900, quality = 0.8) {\r\n    return new Promise((resolve) => {\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      const img = new Image();\r\n\r\n      img.onload = () => {\r\n        // Calcular novas dimensões mantendo proporção\r\n        let { width, height } = img;\r\n\r\n        if (width > maxWidth) {\r\n          height = (height * maxWidth) / width;\r\n          width = maxWidth;\r\n        }\r\n\r\n        if (height > maxHeight) {\r\n          width = (width * maxHeight) / height;\r\n          height = maxHeight;\r\n        }\r\n\r\n        // Redimensionar\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        ctx.drawImage(img, 0, 0, width, height);\r\n\r\n        // Converter para blob\r\n        canvas.toBlob(resolve, 'image/jpeg', quality);\r\n      };\r\n\r\n      img.src = URL.createObjectURL(file);\r\n    });\r\n  }\r\n};\r\n\r\nexport default imageUtils;","import React, { useState } from 'react';\r\nimport { imageUtils } from '../../utils/imageUtils';\r\n\r\nconst SafeImage = ({\r\n  src,\r\n  alt,\r\n  type = 'ad',\r\n  size = 'medium',\r\n  className = '',\r\n  fallbackIcon = null,\r\n  ...props\r\n}) => {\r\n  const [hasError, setHasError] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const imageUrl = hasError ? imageUtils.defaults[type] : imageUtils.getImageUrl(src, type, size);\r\n\r\n  const handleError = () => {\r\n    if (!hasError) {\r\n      setHasError(true);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLoad = () => {\r\n    setIsLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className={`relative ${className}`}>\r\n      {isLoading && (\r\n        <div className=\"absolute inset-0 bg-gray-200 animate-pulse rounded\" />\r\n      )}\r\n\r\n      <img\r\n        src={imageUrl}\r\n        alt={alt}\r\n        onError={handleError}\r\n        onLoad={handleLoad}\r\n        className={`${className} ${isLoading ? 'opacity-0' : 'opacity-100'} transition-opacity duration-300`}\r\n        {...props}\r\n      />\r\n\r\n      {hasError && fallbackIcon && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100 rounded\">\r\n          {fallbackIcon}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SafeImage;","// front/src/components/Ad/AdQuestions.jsx - VERSÃO CORRIGIDA\r\nimport React, { useState, useEffect } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { questionsService } from '../../services/questionsService';\r\nimport {\r\n  MessageCircle,\r\n  Send,\r\n  Eye,\r\n  EyeOff,\r\n  Trash2,\r\n  User,\r\n  Clock,\r\n  AlertCircle,\r\n  RefreshCw,\r\n  CheckCircle\r\n} from 'lucide-react';\r\nimport Button from '../Common/Button';\r\n\r\nconst AdQuestions = ({ ad, isOwner = false }) => {\r\n  const { isAuthenticated, user } = useAuth();\r\n  const [questions, setQuestions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [newQuestion, setNewQuestion] = useState('');\r\n  const [isPublicQuestion, setIsPublicQuestion] = useState(true);\r\n  const [submittingQuestion, setSubmittingQuestion] = useState(false);\r\n  const [answeringQuestion, setAnsweringQuestion] = useState(null);\r\n  const [answerText, setAnswerText] = useState('');\r\n\r\n  // Estado para debug\r\n  const [debugInfo, setDebugInfo] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (ad?._id) {\r\n      console.log('🔄 Carregando perguntas para anúncio:', ad._id);\r\n      loadQuestions();\r\n    }\r\n  }, [ad?._id]);\r\n\r\n  const loadQuestions = async () => {\r\n    if (!ad?._id) {\r\n      console.log('⚠️ ID do anúncio não fornecido');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      console.log('📡 Fazendo requisição para perguntas...');\r\n\r\n      const result = await questionsService.getAdQuestions(ad._id);\r\n\r\n      console.log('📥 Resultado da requisição:', result);\r\n\r\n      // Debug info para desenvolvimento\r\n      if (process.env.NODE_ENV === 'development') {\r\n        setDebugInfo({\r\n          success: result.success,\r\n          message: result.message,\r\n          questionsCount: result.data?.questions?.length || 0,\r\n          isOwner,\r\n          userId: user?._id,\r\n          adId: ad._id,\r\n          timestamp: new Date().toISOString()\r\n        });\r\n      }\r\n\r\n      if (result.success) {\r\n        const questionsData = result.data?.questions || [];\r\n        setQuestions(questionsData);\r\n\r\n        console.log('✅ Perguntas carregadas:', {\r\n          total: questionsData.length,\r\n          questions: questionsData.map(q => ({\r\n            id: q._id,\r\n            question: q.question.substring(0, 50) + '...',\r\n            status: q.status,\r\n            isPublic: q.is_public\r\n          }))\r\n        });\r\n      } else {\r\n        console.error('❌ Erro ao carregar perguntas:', result.message);\r\n        toast.error(result.message);\r\n        setQuestions([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('💥 Erro crítico ao carregar perguntas:', error);\r\n      toast.error('Erro ao carregar perguntas');\r\n      setQuestions([]);\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleAskQuestion = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!isAuthenticated) {\r\n      toast.info('Faça login para fazer perguntas');\r\n      return;\r\n    }\r\n\r\n    if (!newQuestion.trim()) {\r\n      toast.error('Digite sua pergunta');\r\n      return;\r\n    }\r\n\r\n    if (newQuestion.trim().length < 10) {\r\n      toast.error('Pergunta deve ter pelo menos 10 caracteres');\r\n      return;\r\n    }\r\n\r\n    setSubmittingQuestion(true);\r\n\r\n    try {\r\n      console.log('📤 Enviando pergunta:', {\r\n        adId: ad._id,\r\n        question: newQuestion.trim(),\r\n        isPublic: isPublicQuestion,\r\n        userId: user._id\r\n      });\r\n\r\n      const result = await questionsService.askQuestion(\r\n          ad._id,\r\n          newQuestion.trim(),\r\n          isPublicQuestion\r\n      );\r\n\r\n      console.log('📥 Resultado do envio:', result);\r\n\r\n      if (result.success) {\r\n        toast.success(result.message || 'Pergunta enviada com sucesso');\r\n        setNewQuestion('');\r\n\r\n        // Aguardar um pouco antes de recarregar\r\n        setTimeout(() => {\r\n          loadQuestions();\r\n        }, 500);\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('💥 Erro ao enviar pergunta:', error);\r\n      toast.error('Erro ao enviar pergunta');\r\n    }\r\n\r\n    setSubmittingQuestion(false);\r\n  };\r\n\r\n  const handleAnswerQuestion = async (questionId) => {\r\n    if (!answerText.trim()) {\r\n      toast.error('Digite sua resposta');\r\n      return;\r\n    }\r\n\r\n    if (answerText.trim().length < 5) {\r\n      toast.error('Resposta deve ter pelo menos 5 caracteres');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log('📤 Enviando resposta:', {\r\n        questionId,\r\n        answer: answerText.trim()\r\n      });\r\n\r\n      const result = await questionsService.answerQuestion(questionId, answerText.trim());\r\n\r\n      if (result.success) {\r\n        toast.success(result.message || 'Resposta enviada com sucesso');\r\n        setAnsweringQuestion(null);\r\n        setAnswerText('');\r\n\r\n        // Recarregar perguntas após responder\r\n        setTimeout(() => {\r\n          loadQuestions();\r\n        }, 500);\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('💥 Erro ao responder pergunta:', error);\r\n      toast.error('Erro ao responder pergunta');\r\n    }\r\n  };\r\n\r\n  const handleDeleteQuestion = async (questionId) => {\r\n    if (!window.confirm('Tem certeza que deseja deletar esta pergunta?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const result = await questionsService.deleteQuestion(questionId);\r\n\r\n      if (result.success) {\r\n        toast.success(result.message || 'Pergunta deletada com sucesso');\r\n\r\n        // Recarregar perguntas após deletar\r\n        setTimeout(() => {\r\n          loadQuestions();\r\n        }, 500);\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('💥 Erro ao deletar pergunta:', error);\r\n      toast.error('Erro ao deletar pergunta');\r\n    }\r\n  };\r\n\r\n  const handleToggleVisibility = async (questionId) => {\r\n    try {\r\n      const result = await questionsService.toggleQuestionVisibility(questionId);\r\n\r\n      if (result.success) {\r\n        toast.success(result.message || 'Visibilidade alterada');\r\n\r\n        // Recarregar perguntas após alterar visibilidade\r\n        setTimeout(() => {\r\n          loadQuestions();\r\n        }, 500);\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('💥 Erro ao alterar visibilidade:', error);\r\n      toast.error('Erro ao alterar visibilidade');\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString('pt-BR', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const canUserInteract = (question) => {\r\n    if (!user) return false;\r\n\r\n    // Dono do anúncio pode fazer tudo\r\n    if (isOwner) return true;\r\n\r\n    // Autor da pergunta pode deletar\r\n    if (question.user_id === user._id) return true;\r\n\r\n    return false;\r\n  };\r\n\r\n  return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div className=\"flex items-center\">\r\n            <MessageCircle className=\"w-5 h-5 mr-2 text-blue-600\" />\r\n            <h3 className=\"text-xl font-semibold text-gray-800\">\r\n              Perguntas e Respostas\r\n            </h3>\r\n            <span className=\"ml-2 bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full\">\r\n            {questions.length}\r\n          </span>\r\n          </div>\r\n\r\n          {/* Botão de recarregar */}\r\n          <button\r\n              onClick={loadQuestions}\r\n              disabled={loading}\r\n              className=\"p-2 text-gray-500 hover:text-blue-600 rounded-full hover:bg-gray-100\"\r\n              title=\"Recarregar perguntas\"\r\n          >\r\n            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Debug Info (apenas em desenvolvimento) */}\r\n        {process.env.NODE_ENV === 'development' && debugInfo && (\r\n            <div className=\"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n              <h4 className=\"font-semibold text-yellow-800 mb-2\">🐛 Debug Info</h4>\r\n              <div className=\"text-sm text-yellow-700 space-y-1\">\r\n                <p><strong>Success:</strong> {String(debugInfo.success)}</p>\r\n                <p><strong>Message:</strong> {debugInfo.message}</p>\r\n                <p><strong>Questions Count:</strong> {debugInfo.questionsCount}</p>\r\n                <p><strong>Is Owner:</strong> {String(debugInfo.isOwner)}</p>\r\n                <p><strong>User ID:</strong> {debugInfo.userId}</p>\r\n                <p><strong>Ad ID:</strong> {debugInfo.adId}</p>\r\n                <p><strong>Timestamp:</strong> {debugInfo.timestamp}</p>\r\n              </div>\r\n            </div>\r\n        )}\r\n\r\n        {/* Formulário para fazer pergunta */}\r\n        {isAuthenticated && !isOwner && (\r\n            <form onSubmit={handleAskQuestion} className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\r\n              <h4 className=\"font-medium text-gray-800 mb-3\">Fazer uma pergunta</h4>\r\n\r\n              <textarea\r\n                  value={newQuestion}\r\n                  onChange={(e) => setNewQuestion(e.target.value)}\r\n                  placeholder=\"Digite sua pergunta sobre este anúncio...\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\r\n                  rows={3}\r\n                  maxLength={500}\r\n              />\r\n\r\n              <div className=\"flex items-center justify-between mt-3\">\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                      type=\"checkbox\"\r\n                      checked={isPublicQuestion}\r\n                      onChange={(e) => setIsPublicQuestion(e.target.checked)}\r\n                      className=\"mr-2\"\r\n                  />\r\n                  <span className=\"text-sm text-gray-600\">\r\n                Pergunta pública (outros usuários podem ver)\r\n              </span>\r\n                </label>\r\n\r\n                <div className=\"flex items-center space-x-2\">\r\n              <span className=\"text-xs text-gray-500\">\r\n                {newQuestion.length}/500\r\n              </span>\r\n                  <Button\r\n                      type=\"submit\"\r\n                      loading={submittingQuestion}\r\n                      disabled={!newQuestion.trim() || newQuestion.length < 10}\r\n                      size=\"sm\"\r\n                      className=\"inline-flex items-center\"\r\n                  >\r\n                    <Send className=\"w-4 h-4 mr-2\" />\r\n                    Enviar Pergunta\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n        )}\r\n\r\n        {/* Login prompt */}\r\n        {!isAuthenticated && (\r\n            <div className=\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n              <div className=\"flex items-center\">\r\n                <AlertCircle className=\"w-5 h-5 text-blue-600 mr-2\" />\r\n                <span className=\"text-blue-800\">\r\n              <a href=\"/login\" className=\"font-medium hover:underline\">\r\n                Faça login\r\n              </a> para fazer perguntas sobre este anúncio\r\n            </span>\r\n              </div>\r\n            </div>\r\n        )}\r\n\r\n        {/* Lista de perguntas */}\r\n        {loading ? (\r\n            <div className=\"text-center py-8\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\r\n              <p className=\"mt-2 text-gray-600\">Carregando perguntas...</p>\r\n            </div>\r\n        ) : questions.length === 0 ? (\r\n            <div className=\"text-center py-8\">\r\n              <MessageCircle className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n              <p className=\"text-gray-600\">Nenhuma pergunta ainda</p>\r\n              <p className=\"text-sm text-gray-500\">\r\n                Seja o primeiro a fazer uma pergunta sobre este anúncio!\r\n              </p>\r\n            </div>\r\n        ) : (\r\n            <div className=\"space-y-6\">\r\n              {questions.map((question) => (\r\n                  <div key={question._id} className=\"border-b border-gray-200 pb-6 last:border-b-0 last:pb-0\">\r\n                    {/* Pergunta */}\r\n                    <div className=\"flex items-start space-x-3 mb-4\">\r\n                      <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                        {question.user?.profile_pic ? (\r\n                            <img\r\n                                src={question.user.profile_pic}\r\n                                alt={question.user.username}\r\n                                className=\"w-8 h-8 rounded-full object-cover\"\r\n                            />\r\n                        ) : (\r\n                            <User className=\"w-4 h-4 text-blue-600\" />\r\n                        )}\r\n                      </div>\r\n\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center space-x-2 mb-2\">\r\n                    <span className=\"font-medium text-gray-900\">\r\n                      {question.user?.first_name || question.user?.username || 'Usuário'}\r\n                    </span>\r\n                          <span className=\"text-sm text-gray-500\">perguntou</span>\r\n                          <span className=\"text-sm text-gray-500\">\r\n                      {formatDate(question.created_at)}\r\n                    </span>\r\n\r\n                          {/* Indicadores de visibilidade/status */}\r\n                          <div className=\"flex items-center space-x-1\">\r\n                            {!question.is_public && (\r\n                                <EyeOff className=\"w-4 h-4 text-gray-400\" title=\"Pergunta privada\" />\r\n                            )}\r\n                            {question.status === 'pending' && (\r\n                                <Clock className=\"w-4 h-4 text-yellow-500\" title=\"Aguardando resposta\" />\r\n                            )}\r\n                            {question.status === 'answered' && (\r\n                                <CheckCircle className=\"w-4 h-4 text-green-500\" title=\"Respondida\" />\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n\r\n                        <p className=\"text-gray-800\">{question.question}</p>\r\n\r\n                        {/* Ações da pergunta */}\r\n                        {canUserInteract(question) && (\r\n                            <div className=\"flex items-center space-x-3 mt-3\">\r\n                              {isOwner && (\r\n                                  <>\r\n                                    <button\r\n                                        onClick={() => handleToggleVisibility(question._id)}\r\n                                        className=\"text-sm text-blue-600 hover:text-blue-800 flex items-center\"\r\n                                    >\r\n                                      {question.is_public ? (\r\n                                          <>\r\n                                            <EyeOff className=\"w-3 h-3 mr-1\" />\r\n                                            Tornar Privada\r\n                                          </>\r\n                                      ) : (\r\n                                          <>\r\n                                            <Eye className=\"w-3 h-3 mr-1\" />\r\n                                            Tornar Pública\r\n                                          </>\r\n                                      )}\r\n                                    </button>\r\n\r\n                                    {question.status === 'pending' && (\r\n                                        <button\r\n                                            onClick={() => setAnsweringQuestion(question._id)}\r\n                                            className=\"text-sm text-green-600 hover:text-green-800\"\r\n                                        >\r\n                                          Responder\r\n                                        </button>\r\n                                    )}\r\n                                  </>\r\n                              )}\r\n\r\n                              <button\r\n                                  onClick={() => handleDeleteQuestion(question._id)}\r\n                                  className=\"text-sm text-red-600 hover:text-red-800 flex items-center\"\r\n                              >\r\n                                <Trash2 className=\"w-3 h-3 mr-1\" />\r\n                                Deletar\r\n                              </button>\r\n                            </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Formulário de resposta */}\r\n                    {answeringQuestion === question._id && (\r\n                        <div className=\"ml-11 mb-4 p-3 bg-green-50 rounded-lg\">\r\n                  <textarea\r\n                      value={answerText}\r\n                      onChange={(e) => setAnswerText(e.target.value)}\r\n                      placeholder=\"Digite sua resposta...\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 resize-none\"\r\n                      rows={3}\r\n                  />\r\n                          <div className=\"flex items-center justify-end space-x-2 mt-2\">\r\n                            <button\r\n                                onClick={() => {\r\n                                  setAnsweringQuestion(null);\r\n                                  setAnswerText('');\r\n                                }}\r\n                                className=\"text-sm text-gray-600 hover:text-gray-800\"\r\n                            >\r\n                              Cancelar\r\n                            </button>\r\n                            <Button\r\n                                onClick={() => handleAnswerQuestion(question._id)}\r\n                                disabled={!answerText.trim()}\r\n                                size=\"sm\"\r\n                            >\r\n                              Enviar Resposta\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Resposta */}\r\n                    {question.status === 'answered' && question.answer && (\r\n                        <div className=\"ml-11 pl-4 border-l-4 border-green-500\">\r\n                          <div className=\"flex items-center space-x-2 mb-2\">\r\n                    <span className=\"font-medium text-green-800\">\r\n                      {question.answered_by_user?.first_name || question.answered_by_user?.username || 'Vendedor'}\r\n                    </span>\r\n                            <span className=\"text-sm text-gray-500\">respondeu</span>\r\n                            <span className=\"text-sm text-gray-500\">\r\n                      {formatDate(question.answered_at)}\r\n                    </span>\r\n                          </div>\r\n                          <p className=\"text-gray-800\">{question.answer}</p>\r\n                        </div>\r\n                    )}\r\n                  </div>\r\n              ))}\r\n            </div>\r\n        )}\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default AdQuestions;","// front/src/pages/Ads/AdDetails.jsx - VERSÃO CORRIGIDA\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { adService } from '../../services/adService';\r\nimport { favoritesService } from '../../services/favoritesService';\r\nimport {\r\n  ArrowLeft,\r\n  Eye,\r\n  Calendar,\r\n  MapPin,\r\n  Star,\r\n  Flag,\r\n  Share2,\r\n  Edit,\r\n  Trash2,\r\n  User,\r\n  Package,\r\n  GamepadIcon,\r\n  Tag,\r\n  Clock,\r\n  DollarSign,\r\n  MessageCircle,\r\n  ShoppingCart,\r\n  Heart\r\n} from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\nimport Badge from '../../components/Common/Badge';\r\nimport FavoriteButton from '../../components/Common/FavoriteButton';\r\nimport AddToCartButton from '../../components/Common/AddToCartButton';\r\nimport SafeImage from '../../components/Common/SafeImage';\r\nimport AdQuestions from '../../components/Ad/AdQuestions';\r\n\r\nconst AdDetails = () => {\r\n  const { adId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user, isAuthenticated } = useAuth();\r\n\r\n  const [ad, setAd] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [imageLoading, setImageLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [deleting, setDeleting] = useState(false);\r\n  const [showReportModal, setShowReportModal] = useState(false);\r\n  const [reportReason, setReportReason] = useState('');\r\n  const [reportDetails, setReportDetails] = useState('');\r\n  const [submittingReport, setSubmittingReport] = useState(false);\r\n  const [similarAds, setSimilarAds] = useState([]);\r\n  const [loadingSimilar, setLoadingSimilar] = useState(false);\r\n\r\n  // Estados para interações - CORRIGIDOS\r\n  const [viewCount, setViewCount] = useState(0);\r\n  const [favoritesCount, setFavoritesCount] = useState(0);\r\n  const [isFavorited, setIsFavorited] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (adId) {\r\n      loadAdDetails();\r\n    }\r\n  }, [adId]);\r\n\r\n  useEffect(() => {\r\n    if (ad && ad.game_id) {\r\n      loadSimilarAds();\r\n    }\r\n  }, [ad]);\r\n\r\n  const loadAdDetails = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      console.log('🔍 Carregando detalhes do anúncio:', adId);\r\n\r\n      const result = await adService.getAd(adId);\r\n\r\n      console.log('📦 Resultado completo:', result);\r\n\r\n      if (result.success) {\r\n        const adData = result.data.ad;\r\n\r\n        console.log('📋 Dados do anúncio:', adData);\r\n\r\n        setAd(adData);\r\n        setViewCount(adData.view_count || 0);\r\n\r\n        // CORREÇÃO: Usar os dados corretos dos favoritos\r\n        setFavoritesCount(adData.favorites_count || 0);\r\n        setIsFavorited(adData.is_favorited || adData.user_favorited || false);\r\n\r\n        console.log('❤️ Estado dos favoritos:', {\r\n          count: adData.favorites_count,\r\n          isFavorited: adData.is_favorited || adData.user_favorited\r\n        });\r\n      } else {\r\n        setError(result.message);\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('💥 Erro ao carregar anúncio:', error);\r\n      setError('Erro ao carregar anúncio');\r\n      toast.error('Erro ao carregar anúncio');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const loadSimilarAds = async () => {\r\n    if (!ad || !ad.game_id) return;\r\n    \r\n    setLoadingSimilar(true);\r\n    \r\n    try {\r\n      const result = await adService.getAds({ \r\n        game_id: ad.game_id, \r\n        limit: 4,\r\n        skip: 0 \r\n      });\r\n      \r\n      if (result.success) {\r\n        // Filtrar o anúncio atual e pegar apenas 3 similares\r\n        const filtered = result.data.ads\r\n          .filter(similarAd => similarAd._id !== ad._id)\r\n          .slice(0, 3);\r\n        setSimilarAds(filtered);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar anúncios similares:', error);\r\n    }\r\n    \r\n    setLoadingSimilar(false);\r\n  };\r\n\r\n  const handleDeleteAd = async () => {\r\n    if (!window.confirm('Tem certeza que deseja excluir este anúncio?')) {\r\n      return;\r\n    }\r\n\r\n    setDeleting(true);\r\n\r\n    try {\r\n      const result = await adService.deleteAd(adId);\r\n\r\n      if (result.success) {\r\n        toast.success('Anúncio excluído com sucesso!');\r\n        navigate('/dashboard');\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Erro ao excluir anúncio');\r\n    }\r\n\r\n    setDeleting(false);\r\n  };\r\n\r\n  // CORREÇÃO: Função para lidar com favoritos\r\n  const handleFavoriteToggle = async () => {\r\n    if (!isAuthenticated) {\r\n      toast.info('Faça login para favoritar anúncios');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const result = await favoritesService.toggleFavorite(adId);\r\n\r\n      if (result.success) {\r\n        const newIsFavorited = result.data.is_favorited;\r\n        setIsFavorited(newIsFavorited);\r\n\r\n        // Atualizar contador baseado na ação\r\n        if (newIsFavorited) {\r\n          setFavoritesCount(prev => prev + 1);\r\n        } else {\r\n          setFavoritesCount(prev => Math.max(0, prev - 1));\r\n        }\r\n\r\n        toast.success(result.message);\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao favoritar:', error);\r\n      toast.error('Erro ao favoritar anúncio');\r\n    }\r\n  };\r\n\r\n  const handleShare = async () => {\r\n    if (navigator.share) {\r\n      try {\r\n        await navigator.share({\r\n          title: ad.title,\r\n          text: `Confira este anúncio: ${ad.title}`,\r\n          url: window.location.href,\r\n        });\r\n      } catch (error) {\r\n        // Usuário cancelou o compartilhamento\r\n      }\r\n    } else {\r\n      // Fallback: copiar URL\r\n      navigator.clipboard.writeText(window.location.href);\r\n      toast.success('Link copiado para a área de transferência!');\r\n    }\r\n  };\r\n\r\n  const handleReport = async () => {\r\n    if (!isAuthenticated) {\r\n      toast.info('Faça login para reportar anúncios');\r\n      return;\r\n    }\r\n\r\n    if (!reportReason.trim()) {\r\n      toast.error('Selecione um motivo para o report');\r\n      return;\r\n    }\r\n\r\n    setSubmittingReport(true);\r\n\r\n    try {\r\n      // Simular envio do report - você pode implementar a API depois\r\n      const reportData = {\r\n        ad_id: adId,\r\n        reason: reportReason,\r\n        details: reportDetails,\r\n        reporter_id: user._id\r\n      };\r\n\r\n      console.log('Report enviado:', reportData);\r\n      \r\n      // Simular delay de request\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      toast.success('Report enviado com sucesso! Nossa equipe irá analisar.');\r\n      setShowReportModal(false);\r\n      setReportReason('');\r\n      setReportDetails('');\r\n    } catch (error) {\r\n      console.error('Erro ao enviar report:', error);\r\n      toast.error('Erro ao enviar report. Tente novamente.');\r\n    }\r\n\r\n    setSubmittingReport(false);\r\n  };\r\n\r\n  const reportReasons = [\r\n    { value: 'spam', label: 'Spam ou conteúdo repetitivo' },\r\n    { value: 'fake', label: 'Anúncio falso ou enganoso' },\r\n    { value: 'inappropriate', label: 'Conteúdo inapropriado' },\r\n    { value: 'scam', label: 'Tentativa de golpe' },\r\n    { value: 'wrong_category', label: 'Categoria incorreta' },\r\n    { value: 'other', label: 'Outro motivo' }\r\n  ];\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString('pt-BR', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const getAdTypeColor = (type) => {\r\n    switch (type) {\r\n      case 'venda':\r\n        return 'success';\r\n      case 'troca':\r\n        return 'primary';\r\n      case 'procura':\r\n        return 'warning';\r\n      default:\r\n        return 'default';\r\n    }\r\n  };\r\n\r\n  const getConditionText = (condition) => {\r\n    const conditions = {\r\n      novo: 'Novo (lacrado)',\r\n      seminovo: 'Seminovo',\r\n      usado: 'Usado',\r\n      regular: 'Regular'\r\n    };\r\n    return conditions[condition] || condition;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <LoadingSpinner size=\"lg\" />\r\n        </div>\r\n    );\r\n  }\r\n\r\n  if (error || !ad) {\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <div className=\"text-center\">\r\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">\r\n              {error || 'Anúncio não encontrado'}\r\n            </h2>\r\n            <Button onClick={() => navigate('/games')}>\r\n              Voltar aos Jogos\r\n            </Button>\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n\r\n  const isOwner = isAuthenticated && user && (user._id === ad.user_id || user._id === ad.user?._id);\r\n\r\n  return (\r\n      <div className=\"min-h-screen bg-gray-50 py-8\">\r\n        <div className=\"container mx-auto px-4 max-w-6xl\">\r\n          {/* Breadcrumb/Back Button */}\r\n          <div className=\"mb-6\">\r\n            <button\r\n                onClick={() => navigate(-1)}\r\n                className=\"flex items-center text-blue-600 hover:text-blue-800 mb-4 transition-colors\"\r\n            >\r\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n              Voltar\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n            {/* Coluna Principal */}\r\n            <div className=\"lg:col-span-2 space-y-6\">\r\n              {/* Imagem Principal - CORRIGIDA */}\r\n              <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n                <div className=\"relative\">\r\n                  {imageLoading && (\r\n                      <div className=\"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center z-10\">\r\n                        <Package className=\"w-16 h-16 text-gray-400\" />\r\n                      </div>\r\n                  )}\r\n\r\n                  <div className=\"w-full h-96 bg-gray-100 flex items-center justify-center overflow-hidden\">\r\n                    {ad.image_url ? (\r\n                        <img\r\n                            src={ad.image_url}\r\n                            alt={ad.title}\r\n                            className=\"w-full h-full object-cover\"\r\n                            onLoad={() => setImageLoading(false)}\r\n                            onError={(e) => {\r\n                              console.log('❌ Erro ao carregar imagem:', ad.image_url);\r\n                              setImageLoading(false);\r\n                              e.target.style.display = 'none';\r\n                            }}\r\n                            style={{ display: imageLoading ? 'none' : 'block' }}\r\n                        />\r\n                    ) : (\r\n                        <div className=\"w-full h-full flex items-center justify-center bg-gray-200\">\r\n                          <Package className=\"w-16 h-16 text-gray-400\" />\r\n                          <span className=\"ml-2 text-gray-500\">Sem imagem</span>\r\n                        </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Badges sobrepostos */}\r\n                  <div className=\"absolute top-4 left-4 flex flex-wrap gap-2\">\r\n                    <Badge variant={getAdTypeColor(ad.ad_type)} size=\"lg\">\r\n                      {ad.ad_type === 'venda' ? 'Venda' : ad.ad_type === 'troca' ? 'Troca' : 'Procura'}\r\n                    </Badge>\r\n\r\n                    {ad.condition && (\r\n                        <Badge variant=\"secondary\" size=\"lg\">\r\n                          {getConditionText(ad.condition)}\r\n                        </Badge>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Ações do proprietário */}\r\n                  {isOwner && (\r\n                      <div className=\"absolute top-4 right-4 flex space-x-2\">\r\n                        <Link\r\n                            to={`/ads/${ad._id}/edit`}\r\n                            className=\"bg-yellow-500 hover:bg-yellow-600 text-white p-2 rounded-full transition-colors\"\r\n                            title=\"Editar anúncio\"\r\n                        >\r\n                          <Edit className=\"w-4 h-4\" />\r\n                        </Link>\r\n                        <button\r\n                            onClick={handleDeleteAd}\r\n                            disabled={deleting}\r\n                            className=\"bg-red-500 hover:bg-red-600 text-white p-2 rounded-full transition-colors disabled:opacity-50\"\r\n                            title=\"Excluir anúncio\"\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Informações Principais */}\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                  <div className=\"flex-1\">\r\n                    <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">\r\n                      {ad.title}\r\n                    </h1>\r\n\r\n                    <div className=\"flex items-center space-x-4 text-sm text-gray-600 mb-4\">\r\n                      <div className=\"flex items-center\">\r\n                        <Eye className=\"w-4 h-4 mr-1\" />\r\n                        {viewCount} visualizações\r\n                      </div>\r\n                      <div className=\"flex items-center\">\r\n                        <Calendar className=\"w-4 h-4 mr-1\" />\r\n                        {formatDate(ad.created_at)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    {/* CORREÇÃO: Botão de favorito simplificado */}\r\n                    <button\r\n                        onClick={handleFavoriteToggle}\r\n                        disabled={!isAuthenticated}\r\n                        className={`flex items-center space-x-2 px-4 py-2 rounded-lg border transition-colors ${\r\n                            isFavorited\r\n                                ? 'bg-red-50 border-red-200 text-red-600 hover:bg-red-100'\r\n                                : 'bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100'\r\n                        } ${!isAuthenticated ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}\r\n                        title={isAuthenticated ? (isFavorited ? 'Remover dos favoritos' : 'Adicionar aos favoritos') : 'Faça login para favoritar'}\r\n                    >\r\n                      <Heart\r\n                          className={`w-5 h-5 ${isFavorited ? 'fill-current text-red-600' : 'text-gray-600'}`}\r\n                      />\r\n                      <span className=\"text-sm font-medium\">{favoritesCount}</span>\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={handleShare}\r\n                        className=\"p-2 text-gray-600 hover:text-blue-600 rounded-full hover:bg-gray-100 transition-colors\"\r\n                        title=\"Compartilhar\"\r\n                    >\r\n                      <Share2 className=\"w-5 h-5\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Resto do conteúdo permanece igual... */}\r\n                {/* Preço */}\r\n                {ad.price && ad.ad_type === 'venda' && (\r\n                    <div className=\"mb-6\">\r\n                      <div className=\"text-3xl font-bold text-green-600\">\r\n                        R$ {parseFloat(ad.price).toFixed(2)}\r\n                      </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Jogos Desejados para Troca */}\r\n                {ad.ad_type === 'troca' && ad.desired_games && (\r\n                    <div className=\"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n                      <h3 className=\"font-semibold text-blue-900 mb-2 flex items-center\">\r\n                        <GamepadIcon className=\"w-5 h-5 mr-2\" />\r\n                        Jogos Desejados para Troca:\r\n                      </h3>\r\n                      <p className=\"text-blue-800\">{ad.desired_games}</p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Descrição */}\r\n                <div className=\"mb-6\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-800 mb-3\">Descrição</h3>\r\n                  <p className=\"text-gray-700 whitespace-pre-wrap leading-relaxed\">\r\n                    {ad.description}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Especificações */}\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg\">\r\n                  <div>\r\n                    <div className=\"text-sm text-gray-600\">Jogo</div>\r\n                    <div className=\"font-semibold text-gray-800\">\r\n                      {ad.game?.name || 'Não informado'}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-sm text-gray-600\">Plataforma</div>\r\n                    <div className=\"font-semibold text-gray-800\">\r\n                      {ad.platform || 'Não informado'}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-sm text-gray-600\">Estado</div>\r\n                    <div className=\"font-semibold text-gray-800\">\r\n                      {getConditionText(ad.condition)}\r\n                    </div>\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-sm text-gray-600\">Status</div>\r\n                    <Badge variant={ad.status === 'active' ? 'success' : 'secondary'}>\r\n                      {ad.status === 'active' ? 'Ativo' : 'Inativo'}\r\n                    </Badge>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Seção de Perguntas */}\r\n              <AdQuestions ad={ad} isOwner={isOwner} />\r\n\r\n              {/* Anúncios Similares */}\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\r\n                  Anúncios Similares\r\n                </h3>\r\n                \r\n                {loadingSimilar ? (\r\n                  <div className=\"flex justify-center py-8\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                  </div>\r\n                ) : similarAds.length > 0 ? (\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                    {similarAds.map((similarAd) => (\r\n                      <div \r\n                        key={similarAd._id}\r\n                        className=\"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-all cursor-pointer group\"\r\n                        onClick={() => navigate(`/ads/${similarAd._id}`)}\r\n                      >\r\n                        <div className=\"aspect-video bg-gray-200 overflow-hidden\">\r\n                          {similarAd.image_url ? (\r\n                            <img\r\n                              src={similarAd.image_url}\r\n                              alt={similarAd.title}\r\n                              className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200\"\r\n                            />\r\n                          ) : (\r\n                            <div className=\"w-full h-full flex items-center justify-center\">\r\n                              <Package className=\"w-8 h-8 text-gray-400\" />\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                        \r\n                        <div className=\"p-4\">\r\n                          <h4 className=\"font-medium text-gray-800 truncate mb-1\">\r\n                            {similarAd.title}\r\n                          </h4>\r\n                          \r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <span className={`text-xs px-2 py-1 rounded-full ${\r\n                              similarAd.ad_type === 'venda' ? 'bg-green-100 text-green-700' :\r\n                              similarAd.ad_type === 'troca' ? 'bg-blue-100 text-blue-700' :\r\n                              'bg-orange-100 text-orange-700'\r\n                            }`}>\r\n                              {similarAd.ad_type === 'venda' ? 'Venda' : \r\n                               similarAd.ad_type === 'troca' ? 'Troca' : 'Procura'}\r\n                            </span>\r\n                          </div>\r\n                          \r\n                          {similarAd.price && similarAd.ad_type === 'venda' && (\r\n                            <p className=\"text-lg font-bold text-green-600 mb-2\">\r\n                              R$ {parseFloat(similarAd.price).toFixed(2)}\r\n                            </p>\r\n                          )}\r\n                          \r\n                          <div className=\"flex items-center justify-between text-xs text-gray-500\">\r\n                            <div className=\"flex items-center\">\r\n                              <Eye className=\"w-3 h-3 mr-1\" />\r\n                              {similarAd.view_count || 0}\r\n                            </div>\r\n                            <div className=\"flex items-center\">\r\n                              <Heart className=\"w-3 h-3 mr-1\" />\r\n                              {similarAd.favorites_count || 0}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-8\">\r\n                    <Package className=\"w-12 h-12 mx-auto text-gray-300 mb-3\" />\r\n                    <p className=\"text-gray-600\">\r\n                      Nenhum anúncio similar encontrado\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Sidebar */}\r\n            <div className=\"lg:col-span-1 space-y-6\">\r\n              {/* Vendedor - CORRIGIDO */}\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\r\n                  <User className=\"w-5 h-5 mr-2\" />\r\n                  {ad.ad_type === 'venda' ? 'Vendedor' : ad.ad_type === 'troca' ? 'Anunciante' : 'Comprador'}\r\n                </h3>\r\n\r\n                <div className=\"flex items-center space-x-3 mb-4\">\r\n                  <div className=\"w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center\">\r\n                    {ad.user?.profile_pic ? (\r\n                        <img\r\n                            src={ad.user.profile_pic}\r\n                            alt={ad.user.username}\r\n                            className=\"w-12 h-12 rounded-full object-cover\"\r\n                        />\r\n                    ) : (\r\n                        <User className=\"w-6 h-6 text-gray-600\" />\r\n                    )}\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"font-semibold text-gray-800\">\r\n                      {ad.user?.first_name} {ad.user?.last_name}\r\n                    </div>\r\n                    <div className=\"text-sm text-gray-600\">\r\n                      @{ad.user?.username}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* CORREÇÃO: Informações dinâmicas do vendedor */}\r\n                <div className=\"space-y-2 text-sm text-gray-600 mb-4\">\r\n                  <div className=\"flex items-center\">\r\n                    <Star className=\"w-4 h-4 mr-2 text-yellow-500\" />\r\n                    Avaliação: {(ad.user?.seller_rating || 0).toFixed(1)}\r\n                    ({ad.user?.sales_count || 0} {(ad.user?.sales_count || 0) === 1 ? 'venda' : 'vendas'})\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    <MapPin className=\"w-4 h-4 mr-2\" />\r\n                    {ad.user?.city && ad.user?.state\r\n                        ? `${ad.user.city}, ${ad.user.state}`\r\n                        : ad.user?.location || 'Localização não informada'\r\n                    }\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    <Clock className=\"w-4 h-4 mr-2\" />\r\n                    Membro desde {ad.user?.member_since || new Date().getFullYear()}\r\n                  </div>\r\n                </div>\r\n\r\n                {!isOwner && (\r\n                    <div className=\"space-y-3\">\r\n                      <Link\r\n                          to={`/users/${ad.user_id}`}\r\n                          className=\"block w-full text-center\"\r\n                      >\r\n                        <Button variant=\"outline\" className=\"w-full\">\r\n                          Ver Perfil\r\n                        </Button>\r\n                      </Link>\r\n\r\n                      <Button className=\"w-full\">\r\n                        <MessageCircle className=\"w-4 h-4 mr-2\" />\r\n                        Enviar Mensagem\r\n                      </Button>\r\n                    </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Resto da sidebar permanece igual... */}\r\n              {/* Ações de Compra */}\r\n              {!isOwner && ad.ad_type === 'venda' && ad.status === 'active' && (\r\n                  <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\r\n                      Interessado?\r\n                    </h3>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <AddToCartButton\r\n                          ad={ad}\r\n                          className=\"w-full\"\r\n                          size=\"lg\"\r\n                      />\r\n\r\n                      <Button variant=\"outline\" className=\"w-full\">\r\n                        Comprar Agora\r\n                      </Button>\r\n                    </div>\r\n\r\n                    <div className=\"mt-4 p-3 bg-green-50 rounded-lg border border-green-200\">\r\n                      <div className=\"text-sm text-green-800\">\r\n                        <div className=\"font-semibold mb-1\">🛡️ Compra Protegida</div>\r\n                        <ul className=\"text-xs space-y-1\">\r\n                          <li>• Pagamento seguro</li>\r\n                          <li>• Chat com vendedor</li>\r\n                          <li>• Suporte dedicado</li>\r\n                        </ul>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n              )}\r\n\r\n              {/* Relatório */}\r\n              {!isOwner && (\r\n                  <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\r\n                      Reportar Problema\r\n                    </h3>\r\n                    <p className=\"text-sm text-gray-600 mb-3\">\r\n                      Encontrou algo suspeito neste anúncio?\r\n                    </p>\r\n                    <Button \r\n                      variant=\"outline\" \r\n                      size=\"sm\" \r\n                      className=\"w-full\"\r\n                      onClick={() => setShowReportModal(true)}\r\n                      disabled={!isAuthenticated}\r\n                    >\r\n                      <Flag className=\"w-4 h-4 mr-2\" />\r\n                      Reportar\r\n                    </Button>\r\n                  </div>\r\n              )}\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modal de Report */}\r\n        {showReportModal && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-lg max-w-md w-full max-h-screen overflow-y-auto\">\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <h3 className=\"text-lg font-semibold text-gray-800\">\r\n                    Reportar Anúncio\r\n                  </h3>\r\n                  <button \r\n                    onClick={() => setShowReportModal(false)}\r\n                    className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n                  >\r\n                    ✕\r\n                  </button>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Motivo do report *\r\n                    </label>\r\n                    <select\r\n                      value={reportReason}\r\n                      onChange={(e) => setReportReason(e.target.value)}\r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      required\r\n                    >\r\n                      <option value=\"\">Selecione um motivo</option>\r\n                      {reportReasons.map((reason) => (\r\n                        <option key={reason.value} value={reason.value}>\r\n                          {reason.label}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Detalhes (opcional)\r\n                    </label>\r\n                    <textarea\r\n                      value={reportDetails}\r\n                      onChange={(e) => setReportDetails(e.target.value)}\r\n                      placeholder=\"Descreva o problema com mais detalhes...\"\r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      rows=\"4\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex space-x-3 pt-4\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      onClick={() => setShowReportModal(false)}\r\n                      className=\"flex-1\"\r\n                      disabled={submittingReport}\r\n                    >\r\n                      Cancelar\r\n                    </Button>\r\n                    <Button\r\n                      onClick={handleReport}\r\n                      className=\"flex-1\"\r\n                      disabled={submittingReport || !reportReason.trim()}\r\n                    >\r\n                      {submittingReport ? 'Enviando...' : 'Enviar Report'}\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default AdDetails;","import React, { useState, useEffect } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { userService, adService } from '../../services';\r\nimport { User, Star, Calendar, MapPin, MessageCircle, TrendingUp } from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\n\r\nconst UserProfile = () => {\r\n  const { userId } = useParams();\r\n  const [user, setUser] = useState(null);\r\n  const [userAds, setUserAds] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [adsLoading, setAdsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchUserData = async () => {\r\n      setLoading(true);\r\n\r\n      try {\r\n        // Buscar perfil público do usuário\r\n        const userResult = await userService.getUserPublicProfile(userId);\r\n        if (userResult.success) {\r\n          setUser(userResult.data.user);\r\n        } else {\r\n          toast.error(userResult.message);\r\n        }\r\n\r\n        // Buscar anúncios do usuário\r\n        setAdsLoading(true);\r\n        const adsResult = await adService.getUserAds(userId, { limit: 12 });\r\n        if (adsResult.success) {\r\n          setUserAds(adsResult.data.ads);\r\n        }\r\n        setAdsLoading(false);\r\n      } catch (error) {\r\n        toast.error('Erro ao carregar perfil do usuário');\r\n      }\r\n\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchUserData();\r\n  }, [userId]);\r\n\r\n  const handleContact = () => {\r\n    toast.info('Funcionalidade de contato em desenvolvimento');\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Usuário não encontrado</h2>\r\n          <Link to=\"/\" className=\"text-blue-600 hover:text-blue-800\">\r\n            Voltar para a página inicial\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4 max-w-6xl\">\r\n        {/* Header do Perfil */}\r\n        <div className=\"bg-white rounded-lg shadow-md overflow-hidden mb-8\">\r\n          <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-8\">\r\n            <div className=\"flex flex-col md:flex-row items-center md:items-start\">\r\n              <div className=\"w-24 h-24 bg-white rounded-full flex items-center justify-center mb-4 md:mb-0 md:mr-6\">\r\n                {user.profile_pic ? (\r\n                  <img\r\n                    src={user.profile_pic}\r\n                    alt=\"Profile\"\r\n                    className=\"w-24 h-24 rounded-full object-cover\"\r\n                  />\r\n                ) : (\r\n                  <User className=\"w-12 h-12 text-gray-600\" />\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"text-center md:text-left text-white flex-1\">\r\n                <h1 className=\"text-3xl font-bold mb-2\">\r\n                  {user.first_name} {user.last_name}\r\n                </h1>\r\n                <p className=\"text-blue-100 text-lg mb-2\">@{user.username}</p>\r\n\r\n                <div className=\"flex flex-wrap justify-center md:justify-start gap-4 text-sm text-blue-100 mb-4\">\r\n                  <div className=\"flex items-center\">\r\n                    <Calendar className=\"w-4 h-4 mr-1\" />\r\n                    Membro desde {new Date(user.created_at).toLocaleDateString('pt-BR', {\r\n                      month: 'long',\r\n                      year: 'numeric'\r\n                    })}\r\n                  </div>\r\n                  {user.location && (\r\n                    <div className=\"flex items-center\">\r\n                      <MapPin className=\"w-4 h-4 mr-1\" />\r\n                      {user.location}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {user.bio && (\r\n                  <p className=\"text-blue-100 max-w-2xl\">\r\n                    {user.bio}\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"mt-4 md:mt-0 text-center md:text-right\">\r\n                <Button\r\n                  onClick={handleContact}\r\n                  className=\"bg-white text-blue-600 hover:bg-gray-100\"\r\n                >\r\n                  <MessageCircle className=\"w-4 h-4 mr-2\" />\r\n                  Entrar em Contato\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Estatísticas */}\r\n          <div className=\"p-6 bg-gray-50 border-t\">\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold text-gray-800\">{user.total_ads || 0}</div>\r\n                <div className=\"text-sm text-gray-600\">Anúncios Publicados</div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold text-gray-800\">{user.active_ads || 0}</div>\r\n                <div className=\"text-sm text-gray-600\">Anúncios Ativos</div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold text-gray-800\">{user.total_views || 0}</div>\r\n                <div className=\"text-sm text-gray-600\">Visualizações Totais</div>\r\n              </div>\r\n              <div className=\"text-center\">\r\n                <div className=\"text-2xl font-bold text-gray-800\">R$ {user.total_value || 0}</div>\r\n                <div className=\"text-sm text-gray-600\">Valor Total em Vendas</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Avaliações */}\r\n          <div className=\"p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Avaliações</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div className=\"flex items-center justify-between p-4 bg-green-50 rounded-lg\">\r\n                <div>\r\n                  <div className=\"text-sm font-medium text-green-800\">Como Vendedor</div>\r\n                  <div className=\"flex items-center mt-1\">\r\n                    <Star className=\"w-4 h-4 text-yellow-500 fill-current mr-1\" />\r\n                    <span className=\"text-lg font-bold text-green-800\">\r\n                      {user.seller_rating?.toFixed(1) || '0.0'}/5\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-sm text-green-600\">\r\n                  {user.seller_ratings_count || 0} avaliações\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between p-4 bg-blue-50 rounded-lg\">\r\n                <div>\r\n                  <div className=\"text-sm font-medium text-blue-800\">Como Comprador</div>\r\n                  <div className=\"flex items-center mt-1\">\r\n                    <Star className=\"w-4 h-4 text-yellow-500 fill-current mr-1\" />\r\n                    <span className=\"text-lg font-bold text-blue-800\">\r\n                      {user.buyer_rating?.toFixed(1) || '0.0'}/5\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"text-sm text-blue-600\">\r\n                  {user.buyer_ratings_count || 0} avaliações\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Anúncios do Usuário */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <h2 className=\"text-xl font-semibold text-gray-800\">\r\n              Anúncios de {user.first_name}\r\n            </h2>\r\n            <span className=\"text-sm text-gray-600\">\r\n              {userAds.length} anúncios\r\n            </span>\r\n          </div>\r\n\r\n          {adsLoading ? (\r\n            <div className=\"flex justify-center py-8\">\r\n              <LoadingSpinner />\r\n            </div>\r\n          ) : userAds.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <TrendingUp className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n                Nenhum anúncio encontrado\r\n              </h3>\r\n              <p className=\"text-gray-600\">\r\n                Este usuário ainda não publicou nenhum anúncio.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {userAds.map((ad) => (\r\n                <Link\r\n                  key={ad._id}\r\n                  to={`/ads/${ad._id}`}\r\n                  className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"\r\n                >\r\n                  {ad.image_url && (\r\n                    <div className=\"mb-3\">\r\n                      <img\r\n                        src={ad.image_url}\r\n                        alt={ad.title}\r\n                        className=\"w-full h-32 object-cover rounded\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex justify-between items-start mb-3\">\r\n                    <h3 className=\"font-semibold text-lg text-gray-800 line-clamp-2 flex-1 mr-2\">\r\n                      {ad.title}\r\n                    </h3>\r\n                    <div className=\"flex flex-col items-end space-y-1\">\r\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                        ad.ad_type === 'venda' \r\n                          ? 'bg-green-100 text-green-800'\r\n                          : ad.ad_type === 'troca'\r\n                          ? 'bg-blue-100 text-blue-800'\r\n                          : 'bg-purple-100 text-purple-800'\r\n                      }`}>\r\n                        {ad.ad_type}\r\n                      </span>\r\n                      {ad.is_boosted && (\r\n                        <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\r\n                          ⭐\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">\r\n                    {ad.description}\r\n                  </p>\r\n\r\n                  <div className=\"flex justify-between items-center text-sm\">\r\n                    <div className=\"flex flex-col\">\r\n                      {ad.price && (\r\n                        <span className=\"text-xl font-bold text-green-600\">\r\n                          R$ {ad.price}\r\n                        </span>\r\n                      )}\r\n                      <span className=\"text-gray-500\">{ad.platform}</span>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-end\">\r\n                      <span className=\"text-gray-500\">\r\n                        {new Date(ad.created_at).toLocaleDateString('pt-BR')}\r\n                      </span>\r\n                      <span className=\"text-gray-400 text-xs\">\r\n                        {ad.view_count} views\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Ver Mais Anúncios */}\r\n          {userAds.length >= 12 && (\r\n            <div className=\"text-center mt-6\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => toast.info('Funcionalidade de paginação em desenvolvimento')}\r\n              >\r\n                Ver Mais Anúncios\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;","import React from 'react';\r\nimport { Gamepad } from 'lucide-react';\r\nimport Button from './Button';\r\n\r\nconst EmptyState = ({ \r\n  icon: Icon = Gamepad,\r\n  title = 'Nada encontrado',\r\n  description = 'Não encontramos nenhum resultado para sua busca.',\r\n  actionText,\r\n  onAction,\r\n  children \r\n}) => {\r\n  return (\r\n    <div className=\"text-center py-12\">\r\n      <div className=\"mb-6\">\r\n        <Icon className=\"w-16 h-16 text-gray-300 mx-auto\" />\r\n      </div>\r\n      <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n        {title}\r\n      </h3>\r\n      <p className=\"text-gray-600 mb-6 max-w-md mx-auto\">\r\n        {description}\r\n      </p>\r\n      {actionText && onAction && (\r\n        <Button onClick={onAction}>\r\n          {actionText}\r\n        </Button>\r\n      )}\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmptyState;","// front/src/pages/Favorites/Favorites.jsx - PÁGINA COMPLETA DE FAVORITOS\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { favoritesService } from '../../services/favoritesService';\r\nimport { Heart, Trash2, Eye, Filter, Grid, List, Calendar, MapPin } from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\nimport EmptyState from '../../components/Common/EmptyState';\r\n\r\nconst Favorites = () => {\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [removing, setRemoving] = useState({});\r\n  const [viewMode, setViewMode] = useState('grid'); // 'grid' or 'list'\r\n  const [filter, setFilter] = useState('all'); // 'all', 'venda', 'troca', 'procura'\r\n  const [sortBy, setSortBy] = useState('recent'); // 'recent', 'price_asc', 'price_desc', 'title'\r\n\r\n  useEffect(() => {\r\n    fetchFavorites();\r\n  }, []);\r\n\r\n  const fetchFavorites = async () => {\r\n    setLoading(true);\r\n    const result = await favoritesService.getFavorites();\r\n    if (result.success) {\r\n      setFavorites(result.data.favorites || []);\r\n    } else {\r\n      toast.error(result.message);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleRemoveFavorite = async (adId) => {\r\n    if (window.confirm('Tem certeza que deseja remover este anúncio dos favoritos?')) {\r\n      setRemoving(prev => ({ ...prev, [adId]: true }));\r\n\r\n      const result = await favoritesService.removeFromFavorites(adId);\r\n      if (result.success) {\r\n        setFavorites(favorites.filter(fav => fav.ad._id !== adId));\r\n        toast.success('Anúncio removido dos favoritos');\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n\r\n      setRemoving(prev => ({ ...prev, [adId]: false }));\r\n    }\r\n  };\r\n\r\n  const filteredAndSortedFavorites = favorites\r\n    .filter(fav => {\r\n      if (filter === 'all') return true;\r\n      return fav.ad.ad_type === filter;\r\n    })\r\n    .sort((a, b) => {\r\n      switch (sortBy) {\r\n        case 'price_asc':\r\n          return (a.ad.price || 0) - (b.ad.price || 0);\r\n        case 'price_desc':\r\n          return (b.ad.price || 0) - (a.ad.price || 0);\r\n        case 'title':\r\n          return a.ad.title.localeCompare(b.ad.title);\r\n        case 'recent':\r\n        default:\r\n          return new Date(b.created_at) - new Date(a.created_at);\r\n      }\r\n    });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">\r\n            Meus Favoritos\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Anúncios que você salvou para acompanhar\r\n          </p>\r\n        </div>\r\n\r\n        {favorites.length === 0 ? (\r\n          <EmptyState\r\n            icon={Heart}\r\n            title=\"Nenhum favorito encontrado\"\r\n            description=\"Você ainda não favoritou nenhum anúncio. Explore jogos e salve os que mais te interessam!\"\r\n            actionText=\"Explorar Jogos\"\r\n            onAction={() => window.location.href = '/games'}\r\n          />\r\n        ) : (\r\n          <>\r\n            {/* Controls */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\r\n              <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <span className=\"text-sm font-medium text-gray-700\">\r\n                    {filteredAndSortedFavorites.length} {filteredAndSortedFavorites.length === 1 ? 'favorito' : 'favoritos'}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\r\n                  {/* Filters */}\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Filter className=\"w-4 h-4 text-gray-500\" />\r\n                    <select\r\n                      value={filter}\r\n                      onChange={(e) => setFilter(e.target.value)}\r\n                      className=\"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    >\r\n                      <option value=\"all\">Todos os tipos</option>\r\n                      <option value=\"venda\">Venda</option>\r\n                      <option value=\"troca\">Troca</option>\r\n                      <option value=\"procura\">Procura</option>\r\n                    </select>\r\n                  </div>\r\n\r\n                  {/* Sort */}\r\n                  <select\r\n                    value={sortBy}\r\n                    onChange={(e) => setSortBy(e.target.value)}\r\n                    className=\"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"recent\">Mais recentes</option>\r\n                    <option value=\"title\">Nome A-Z</option>\r\n                    <option value=\"price_asc\">Menor preço</option>\r\n                    <option value=\"price_desc\">Maior preço</option>\r\n                  </select>\r\n\r\n                  {/* View Mode */}\r\n                  <div className=\"flex items-center space-x-1\">\r\n                    <button\r\n                      onClick={() => setViewMode('grid')}\r\n                      className={`p-2 rounded ${\r\n                        viewMode === 'grid'\r\n                          ? 'bg-blue-100 text-blue-600'\r\n                          : 'text-gray-500 hover:text-gray-700'\r\n                      }`}\r\n                    >\r\n                      <Grid className=\"w-4 h-4\" />\r\n                    </button>\r\n                    <button\r\n                      onClick={() => setViewMode('list')}\r\n                      className={`p-2 rounded ${\r\n                        viewMode === 'list'\r\n                          ? 'bg-blue-100 text-blue-600'\r\n                          : 'text-gray-500 hover:text-gray-700'\r\n                      }`}\r\n                    >\r\n                      <List className=\"w-4 h-4\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Favorites Grid/List */}\r\n            {viewMode === 'grid' ? (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {filteredAndSortedFavorites.map((favorite) => (\r\n                  <div\r\n                    key={favorite._id}\r\n                    className={`bg-white rounded-lg shadow-md overflow-hidden ${\r\n                      removing[favorite.ad._id] ? 'opacity-50' : ''\r\n                    }`}\r\n                  >\r\n                    {/* Image */}\r\n                    {favorite.ad.image_url && (\r\n                      <div className=\"h-48 bg-gray-200\">\r\n                        <img\r\n                          src={favorite.ad.image_url}\r\n                          alt={favorite.ad.title}\r\n                          className=\"w-full h-full object-cover\"\r\n                        />\r\n                      </div>\r\n                    )}\r\n\r\n                    <div className=\"p-4\">\r\n                      {/* Header */}\r\n                      <div className=\"flex justify-between items-start mb-3\">\r\n                        <div className=\"flex-1\">\r\n                          <h3 className=\"font-semibold text-lg text-gray-800 line-clamp-2 mb-1\">\r\n                            {favorite.ad.title}\r\n                          </h3>\r\n                          <p className=\"text-sm text-gray-600\">\r\n                            {favorite.ad.game?.name}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"flex flex-col items-end space-y-1 ml-2\">\r\n                          <span className={`px-2 py-1 rounded-full text-xs font-medium ${\r\n                            favorite.ad.ad_type === 'venda' \r\n                              ? 'bg-green-100 text-green-800'\r\n                              : favorite.ad.ad_type === 'troca'\r\n                              ? 'bg-blue-100 text-blue-800'\r\n                              : 'bg-purple-100 text-purple-800'\r\n                          }`}>\r\n                            {favorite.ad.ad_type}\r\n                          </span>\r\n                          {favorite.ad.is_boosted && (\r\n                            <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800\">\r\n                              ⭐\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Description */}\r\n                      <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">\r\n                        {favorite.ad.description}\r\n                      </p>\r\n\r\n                      {/* Price and Platform */}\r\n                      <div className=\"flex justify-between items-center mb-4\">\r\n                        <div>\r\n                          {favorite.ad.price && (\r\n                            <span className=\"text-lg font-bold text-green-600\">\r\n                              R$ {favorite.ad.price}\r\n                            </span>\r\n                          )}\r\n                          <p className=\"text-sm text-gray-500\">{favorite.ad.platform}</p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <p className=\"text-xs text-gray-500\">\r\n                            Favoritado em {new Date(favorite.created_at).toLocaleDateString('pt-BR')}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Actions */}\r\n                      <div className=\"flex space-x-2\">\r\n                        <Link\r\n                          to={`/ads/${favorite.ad._id}`}\r\n                          className=\"flex-1 bg-blue-600 text-white text-center py-2 px-3 rounded-md hover:bg-blue-700 transition-colors text-sm flex items-center justify-center\"\r\n                        >\r\n                          <Eye className=\"w-4 h-4 mr-2\" />\r\n                          Ver Anúncio\r\n                        </Link>\r\n                        <button\r\n                          onClick={() => handleRemoveFavorite(favorite.ad._id)}\r\n                          disabled={removing[favorite.ad._id]}\r\n                          className=\"bg-red-600 text-white py-2 px-3 rounded-md hover:bg-red-700 transition-colors disabled:opacity-50\"\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              // List View\r\n              <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Anúncio\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Tipo\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Preço\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Favoritado em\r\n                        </th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                          Ações\r\n                        </th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                      {filteredAndSortedFavorites.map((favorite) => (\r\n                        <tr key={favorite._id} className={removing[favorite.ad._id] ? 'opacity-50' : ''}>\r\n                          <td className=\"px-6 py-4\">\r\n                            <div className=\"flex items-center\">\r\n                              {favorite.ad.image_url && (\r\n                                <img\r\n                                  src={favorite.ad.image_url}\r\n                                  alt={favorite.ad.title}\r\n                                  className=\"w-12 h-12 rounded object-cover mr-4\"\r\n                                />\r\n                              )}\r\n                              <div>\r\n                                <div className=\"text-sm font-medium text-gray-900\">\r\n                                  {favorite.ad.title}\r\n                                </div>\r\n                                <div className=\"text-sm text-gray-500\">\r\n                                  {favorite.ad.game?.name} • {favorite.ad.platform}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                              favorite.ad.ad_type === 'venda' \r\n                                ? 'bg-green-100 text-green-800'\r\n                                : favorite.ad.ad_type === 'troca'\r\n                                ? 'bg-blue-100 text-blue-800'\r\n                                : 'bg-purple-100 text-purple-800'\r\n                            }`}>\r\n                              {favorite.ad.ad_type}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            {favorite.ad.price ? `R$ ${favorite.ad.price}` : '-'}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                            {new Date(favorite.created_at).toLocaleDateString('pt-BR')}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                            <div className=\"flex space-x-2\">\r\n                              <Link\r\n                                to={`/ads/${favorite.ad._id}`}\r\n                                className=\"text-blue-600 hover:text-blue-900\"\r\n                              >\r\n                                <Eye className=\"w-4 h-4\" />\r\n                              </Link>\r\n                              <button\r\n                                onClick={() => handleRemoveFavorite(favorite.ad._id)}\r\n                                disabled={removing[favorite.ad._id]}\r\n                                className=\"text-red-600 hover:text-red-900 disabled:opacity-50\"\r\n                              >\r\n                                <Trash2 className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Favorites;","import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport {\r\n  ShoppingCart,\r\n  Trash2,\r\n  Plus,\r\n  Minus,\r\n  AlertCircle,\r\n  ArrowRight,\r\n  RefreshCw\r\n} from 'lucide-react';\r\nimport Button from '../../components/Common/Button';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport EmptyState from '../../components/Common/EmptyState';\r\n\r\nconst Cart = () => {\r\n  const navigate = useNavigate();\r\n  const { \r\n    cart, \r\n    loading, \r\n    updateCartItem, \r\n    removeFromCart, \r\n    clearCart, \r\n    validateCart \r\n  } = useCart();\r\n  \r\n  const [updating, setUpdating] = useState({});\r\n  const [validating, setValidating] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Validar carrinho ao entrar na página\r\n    handleValidateCart();\r\n  }, []);\r\n\r\n  const handleUpdateQuantity = async (adId, newQuantity) => {\r\n    if (newQuantity < 1) {\r\n      handleRemoveItem(adId);\r\n      return;\r\n    }\r\n\r\n    setUpdating(prev => ({ ...prev, [adId]: true }));\r\n    \r\n    try {\r\n      await updateCartItem(adId, newQuantity);\r\n    } catch (error) {\r\n      toast.error('Erro ao atualizar quantidade');\r\n    }\r\n    \r\n    setUpdating(prev => ({ ...prev, [adId]: false }));\r\n  };\r\n\r\n  const handleRemoveItem = async (adId) => {\r\n    if (!window.confirm('Deseja remover este item do carrinho?')) {\r\n      return;\r\n    }\r\n\r\n    setUpdating(prev => ({ ...prev, [adId]: true }));\r\n    \r\n    try {\r\n      await removeFromCart(adId);\r\n    } catch (error) {\r\n      toast.error('Erro ao remover item');\r\n    }\r\n    \r\n    setUpdating(prev => ({ ...prev, [adId]: false }));\r\n  };\r\n\r\n  const handleClearCart = async () => {\r\n    if (!window.confirm('Deseja limpar todo o carrinho?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await clearCart();\r\n    } catch (error) {\r\n      toast.error('Erro ao limpar carrinho');\r\n    }\r\n  };\r\n\r\n  const handleValidateCart = async () => {\r\n    setValidating(true);\r\n    \r\n    try {\r\n      await validateCart();\r\n    } catch (error) {\r\n      toast.error('Erro ao validar carrinho');\r\n    }\r\n    \r\n    setValidating(false);\r\n  };\r\n\r\n  const calculateTotal = () => {\r\n    return cart.items.reduce((total, item) => {\r\n      return total + (item.price_snapshot * item.quantity);\r\n    }, 0);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (cart.items.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-50 py-8\">\r\n        <div className=\"container mx-auto px-4\">\r\n          <EmptyState\r\n            icon={ShoppingCart}\r\n            title=\"Seu carrinho está vazio\"\r\n            description=\"Adicione alguns jogos ao seu carrinho para continuar\"\r\n            actionText=\"Explorar Jogos\"\r\n            onAction={() => navigate('/games')}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4 max-w-6xl\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-8\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">\r\n              Meu Carrinho\r\n            </h1>\r\n            <p className=\"text-gray-600\">\r\n              {cart.items.length} {cart.items.length === 1 ? 'item' : 'itens'} no carrinho\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"flex items-center space-x-3\">\r\n            <Button\r\n              onClick={handleValidateCart}\r\n              loading={validating}\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"inline-flex items-center\"\r\n            >\r\n              <RefreshCw className=\"w-4 h-4 mr-2\" />\r\n              Validar Carrinho\r\n            </Button>\r\n\r\n            {cart.items.length > 1 && (\r\n              <Button\r\n                onClick={handleClearCart}\r\n                variant=\"danger\"\r\n                size=\"sm\"\r\n                className=\"inline-flex items-center\"\r\n              >\r\n                <Trash2 className=\"w-4 h-4 mr-2\" />\r\n                Limpar Carrinho\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Lista de itens */}\r\n          <div className=\"lg:col-span-2 space-y-4\">\r\n            {cart.items.map((item) => (\r\n              <div key={item._id} className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <div className=\"flex items-start space-x-4\">\r\n                  {/* Imagem */}\r\n                  <div className=\"w-20 h-20 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0\">\r\n                    <img\r\n                      src={item.ad_snapshot?.image_url || '/placeholder-game.jpg'}\r\n                      alt={item.ad_snapshot?.title}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Detalhes */}\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-800 line-clamp-2\">\r\n                      {item.ad_snapshot?.title}\r\n                    </h3>\r\n                    <p className=\"text-sm text-gray-600 mt-1\">\r\n                      {item.ad_snapshot?.game_name}\r\n                    </p>\r\n                    <div className=\"flex items-center space-x-4 mt-2 text-sm text-gray-500\">\r\n                      <span>Plataforma: {item.ad_snapshot?.platform}</span>\r\n                      <span>Estado: {item.ad_snapshot?.condition}</span>\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-600 mt-1\">\r\n                      Vendedor: @{item.ad_snapshot?.seller_username}\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Preço e controles */}\r\n                  <div className=\"text-right flex-shrink-0\">\r\n                    <div className=\"text-lg font-bold text-green-600 mb-3\">\r\n                      R$ {item.price_snapshot?.toFixed(2)}\r\n                    </div>\r\n\r\n                    {/* Controles de quantidade */}\r\n                    <div className=\"flex items-center space-x-2 mb-3\">\r\n                      <button\r\n                        onClick={() => handleUpdateQuantity(item.ad_id, item.quantity - 1)}\r\n                        disabled={updating[item.ad_id] || item.quantity <= 1}\r\n                        className=\"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center disabled:opacity-50\"\r\n                      >\r\n                        <Minus className=\"w-4 h-4\" />\r\n                      </button>\r\n                      \r\n                      <span className=\"w-12 text-center font-semibold\">\r\n                        {updating[item.ad_id] ? (\r\n                          <LoadingSpinner size=\"sm\" />\r\n                        ) : (\r\n                          item.quantity\r\n                        )}\r\n                      </span>\r\n                      \r\n                      <button\r\n                        onClick={() => handleUpdateQuantity(item.ad_id, item.quantity + 1)}\r\n                        disabled={updating[item.ad_id]}\r\n                        className=\"w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center disabled:opacity-50\"\r\n                      >\r\n                        <Plus className=\"w-4 h-4\" />\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* Subtotal */}\r\n                    <div className=\"text-sm text-gray-600 mb-3\">\r\n                      Subtotal: R$ {(item.price_snapshot * item.quantity).toFixed(2)}\r\n                    </div>\r\n\r\n                    {/* Botão remover */}\r\n                    <button\r\n                      onClick={() => handleRemoveItem(item.ad_id)}\r\n                      disabled={updating[item.ad_id]}\r\n                      className=\"text-sm text-red-600 hover:text-red-800 flex items-center disabled:opacity-50\"\r\n                    >\r\n                      <Trash2 className=\"w-3 h-3 mr-1\" />\r\n                      Remover\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Alerta de mudança de preço */}\r\n                {item.price_changed && (\r\n                  <div className=\"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n                    <div className=\"flex items-center\">\r\n                      <AlertCircle className=\"w-4 h-4 text-yellow-600 mr-2\" />\r\n                      <span className=\"text-sm text-yellow-800\">\r\n                        O preço deste item foi alterado para R$ {item.current_price?.toFixed(2)}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Resumo */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-lg shadow-md p-6 sticky top-8\">\r\n              <h2 className=\"text-xl font-semibold text-gray-800 mb-4\">\r\n                Resumo do Pedido\r\n              </h2>\r\n\r\n              <div className=\"space-y-3 mb-6\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Subtotal:</span>\r\n                  <span className=\"font-semibold\">R$ {calculateTotal().toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between text-sm text-gray-500\">\r\n                  <span>Itens ({cart.items.length}):</span>\r\n                  <span>{cart.items.reduce((sum, item) => sum + item.quantity, 0)} unidades</span>\r\n                </div>\r\n                <div className=\"border-t pt-3\">\r\n                  <div className=\"flex justify-between text-lg font-bold\">\r\n                    <span>Total:</span>\r\n                    <span className=\"text-green-600\">R$ {calculateTotal().toFixed(2)}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-3\">\r\n                <Link to=\"/checkout\">\r\n                  <Button className=\"w-full inline-flex items-center justify-center\" size=\"lg\">\r\n                    Finalizar Compra\r\n                    <ArrowRight className=\"w-4 h-4 ml-2\" />\r\n                  </Button>\r\n                </Link>\r\n                \r\n                <Link to=\"/games\">\r\n                  <Button variant=\"outline\" className=\"w-full\">\r\n                    Continuar Comprando\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n\r\n              <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\r\n                <h3 className=\"font-semibold text-blue-800 mb-2\">💡 Dicas</h3>\r\n                <ul className=\"text-sm text-blue-700 space-y-1\">\r\n                  <li>• Frete combinado diretamente com o vendedor</li>\r\n                  <li>• Pagamento seguro pela plataforma</li>\r\n                  <li>• Chat em tempo real com os vendedores</li>\r\n                  <li>• Suporte 24/7 para dúvidas</li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;","// front/src/pages/Cart/Checkout.jsx - CORREÇÃO DO RESUMO DO CARRINHO\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport { orderService } from '../../services/orderService';\r\nimport {\r\n  CreditCard,\r\n  MapPin,\r\n  User,\r\n  Phone,\r\n  Mail,\r\n  Lock,\r\n  CheckCircle,\r\n  ArrowLeft,\r\n  Package,\r\n  AlertTriangle,\r\n  ShoppingCart,\r\n  DollarSign,\r\n  Star,\r\n  Shield\r\n} from 'lucide-react';\r\nimport Button from '../../components/Common/Button';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\n\r\nconst Checkout = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const { cart, clearCart, validateCart, loadCart } = useCart();\r\n\r\n  const [processing, setProcessing] = useState(false);\r\n  const [pageLoading, setPageLoading] = useState(true);\r\n  const [cartValidation, setCartValidation] = useState(null);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors }\r\n  } = useForm({\r\n    defaultValues: {\r\n      first_name: user?.first_name || '',\r\n      last_name: user?.last_name || '',\r\n      email: user?.email || '',\r\n      phone: user?.phone || '',\r\n    }\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadAndValidateCart();\r\n  }, []);\r\n\r\n  const loadAndValidateCart = async () => {\r\n    setPageLoading(true);\r\n\r\n    try {\r\n      // CORREÇÃO: Forçar recarregamento do carrinho primeiro\r\n      await loadCart();\r\n\r\n      // Aguardar um pouco para garantir que o estado foi atualizado\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n\r\n      // Verificar se há itens no carrinho\r\n      if (!cart.items || cart.items.length === 0) {\r\n        toast.error('Carrinho vazio');\r\n        navigate('/cart');\r\n        return;\r\n      }\r\n\r\n      // Validar carrinho\r\n      const validation = await validateCart();\r\n      setCartValidation(validation);\r\n\r\n      if (validation.success && validation.data.total_invalid > 0) {\r\n        toast.warning(`${validation.data.total_invalid} item(s) removido(s) (não disponível)`);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Erro ao carregar checkout:', error);\r\n      toast.error('Erro ao carregar dados do checkout');\r\n      navigate('/cart');\r\n    } finally {\r\n      setPageLoading(false);\r\n    }\r\n  };\r\n\r\n  // CORREÇÃO: Função melhorada para calcular total\r\n  const getTotalPrice = () => {\r\n    if (!cart?.items || !Array.isArray(cart.items)) return 0;\r\n\r\n    return cart.items.reduce((total, item) => {\r\n      const price = item.price_snapshot || item.price || 0;\r\n      const quantity = item.quantity || 0;\r\n      return total + (price * quantity);\r\n    }, 0);\r\n  };\r\n\r\n  // CORREÇÃO: Função melhorada para calcular total de itens\r\n  const getTotalItems = () => {\r\n    if (!cart?.items || !Array.isArray(cart.items)) return 0;\r\n\r\n    return cart.items.reduce((total, item) => {\r\n      return total + (item.quantity || 0);\r\n    }, 0);\r\n  };\r\n\r\n  // CORREÇÃO: Função melhorada para contar vendedores únicos\r\n  const getUniqueSellerCount = () => {\r\n    if (!cart?.items || !Array.isArray(cart.items)) return 0;\r\n\r\n    const sellers = new Set();\r\n    cart.items.forEach(item => {\r\n      const sellerId = item.ad_snapshot?.seller_id || item.seller_id;\r\n      if (sellerId) {\r\n        sellers.add(sellerId);\r\n      }\r\n    });\r\n\r\n    return sellers.size;\r\n  };\r\n\r\n  const onSubmit = async (data) => {\r\n    if (!cart.items || cart.items.length === 0) {\r\n      toast.error('Carrinho está vazio');\r\n      return;\r\n    }\r\n\r\n    setProcessing(true);\r\n\r\n    try {\r\n      // CORREÇÃO: Preparar dados do checkout com melhor estrutura\r\n      const checkoutData = {\r\n        cart_items: cart.items.map(item => ({\r\n          ad_id: item.ad_id,\r\n          quantity: item.quantity,\r\n          title: item.ad_snapshot?.title || 'Item sem título'\r\n        })),\r\n        shipping_address: {\r\n          street: data.street,\r\n          number: data.number,\r\n          complement: data.complement || '',\r\n          neighborhood: data.neighborhood,\r\n          city: data.city,\r\n          state: data.state,\r\n          zipcode: data.zipcode.replace(/\\D/g, ''), // Remove formatação\r\n          country: 'Brasil'\r\n        },\r\n        contact: {\r\n          first_name: data.first_name,\r\n          last_name: data.last_name,\r\n          email: data.email,\r\n          phone: data.phone.replace(/\\D/g, '') // Remove formatação\r\n        },\r\n        payment_method: data.payment_method || 'pending'\r\n      };\r\n\r\n      console.log('Enviando checkout:', checkoutData);\r\n\r\n      const result = await orderService.processCheckout(checkoutData);\r\n\r\n      if (result.success) {\r\n        // Limpar carrinho\r\n        await clearCart();\r\n\r\n        toast.success('Pedidos criados com sucesso!');\r\n        navigate('/orders', {\r\n          state: {\r\n            message: 'Seus pedidos foram criados com sucesso!',\r\n            orders: result.data.orders || result.orders\r\n          }\r\n        });\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro no checkout:', error);\r\n      toast.error('Erro ao processar pedidos');\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  // Validações Regex\r\n  const validationRules = {\r\n    email: {\r\n      required: 'Email é obrigatório',\r\n      pattern: {\r\n        value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n        message: 'Email inválido'\r\n      }\r\n    },\r\n    phone: {\r\n      required: 'Telefone é obrigatório',\r\n      pattern: {\r\n        value: /^\\(\\d{2}\\)\\s\\d{4,5}-\\d{4}$/,\r\n        message: 'Formato: (11) 99999-9999'\r\n      }\r\n    },\r\n    zipcode: {\r\n      required: 'CEP é obrigatório',\r\n      pattern: {\r\n        value: /^\\d{5}-?\\d{3}$/,\r\n        message: 'Formato: 00000-000'\r\n      }\r\n    },\r\n    name: {\r\n      required: 'Nome é obrigatório',\r\n      pattern: {\r\n        value: /^[A-Za-zÀ-ÿ\\s]{2,}$/,\r\n        message: 'Apenas letras, mínimo 2 caracteres'\r\n      }\r\n    },\r\n    state: {\r\n      required: 'Estado é obrigatório',\r\n      pattern: {\r\n        value: /^[A-Z]{2}$/,\r\n        message: 'Use a sigla (ex: SP, RJ)'\r\n      }\r\n    }\r\n  };\r\n\r\n  // Formatação automática\r\n  const formatPhone = (value) => {\r\n    if (!value) return value;\r\n    const phone = value.replace(/\\D/g, '');\r\n    const match = phone.match(/^(\\d{2})(\\d{4,5})(\\d{4})$/);\r\n    if (match) {\r\n      return `(${match[1]}) ${match[2]}-${match[3]}`;\r\n    }\r\n    return value;\r\n  };\r\n\r\n  const formatZipcode = (value) => {\r\n    if (!value) return value;\r\n    const zip = value.replace(/\\D/g, '');\r\n    const match = zip.match(/^(\\d{5})(\\d{3})$/);\r\n    if (match) {\r\n      return `${match[1]}-${match[2]}`;\r\n    }\r\n    return value;\r\n  };\r\n\r\n  if (pageLoading) {\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <LoadingSpinner size=\"lg\" />\r\n        </div>\r\n    );\r\n  }\r\n\r\n  if (!cart.items || cart.items.length === 0) {\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <div className=\"text-center\">\r\n            <ShoppingCart className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\r\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Carrinho vazio</h2>\r\n            <p className=\"text-gray-600 mb-6\">Adicione alguns jogos ao seu carrinho para continuar.</p>\r\n            <Button onClick={() => navigate('/games')}>\r\n              Explorar Jogos\r\n            </Button>\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 py-8\">\r\n        <div className=\"container mx-auto px-4 max-w-7xl\">\r\n          {/* Header */}\r\n          <div className=\"mb-8\">\r\n            <button\r\n                onClick={() => navigate('/cart')}\r\n                className=\"flex items-center text-blue-600 hover:text-blue-800 mb-6 transition-colors\"\r\n            >\r\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n              Voltar ao Carrinho\r\n            </button>\r\n\r\n            <div className=\"text-center\">\r\n              <h1 className=\"text-4xl font-bold text-gray-800 mb-2\">\r\n                🎯 Finalizar Compra\r\n              </h1>\r\n              <p className=\"text-lg text-gray-600\">\r\n                {getTotalItems()} {getTotalItems() === 1 ? 'item' : 'itens'} •\r\n                <span className=\"font-semibold text-green-600 ml-2\">\r\n                Total: R$ {getTotalPrice().toFixed(2)}\r\n              </span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Avisos importantes */}\r\n          {cartValidation && cartValidation.data?.total_invalid > 0 && (\r\n              <div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded-r-lg shadow-sm\">\r\n                <div className=\"flex items-center\">\r\n                  <AlertTriangle className=\"w-5 h-5 text-yellow-600 mr-2\" />\r\n                  <span className=\"text-yellow-800 font-medium\">\r\n                Alguns itens foram removidos do carrinho por não estarem mais disponíveis.\r\n              </span>\r\n                </div>\r\n              </div>\r\n          )}\r\n\r\n          {getUniqueSellerCount() > 1 && (\r\n              <div className=\"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-lg shadow-sm\">\r\n                <div className=\"flex items-center\">\r\n                  <Package className=\"w-5 h-5 text-blue-600 mr-2\" />\r\n                  <div className=\"text-blue-800\">\r\n                <span className=\"font-medium\">\r\n                  Múltiplos vendedores detectados!\r\n                </span>\r\n                    <p className=\"text-sm mt-1\">\r\n                      Seus itens serão divididos em {getUniqueSellerCount()} pedidos separados, um para cada vendedor.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n            {/* Formulário Principal */}\r\n            <div className=\"lg:col-span-2 space-y-6\">\r\n              <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n\r\n                {/* Informações de Contato */}\r\n                <div className=\"bg-white rounded-xl shadow-lg p-8 border border-gray-100\">\r\n                  <h2 className=\"text-2xl font-semibold text-gray-800 mb-6 flex items-center\">\r\n                    <User className=\"w-6 h-6 mr-3 text-blue-600\" />\r\n                    Informações de Contato\r\n                  </h2>\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Nome *\r\n                      </label>\r\n                      <input\r\n                          {...register('first_name', validationRules.name)}\r\n                          type=\"text\"\r\n                          className={`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\r\n                              errors.first_name ? 'border-red-300 bg-red-50' : 'border-gray-300 focus:border-blue-500'\r\n                          }`}\r\n                          placeholder=\"Seu primeiro nome\"\r\n                      />\r\n                      {errors.first_name && (\r\n                          <p className=\"mt-2 text-sm text-red-600 flex items-center\">\r\n                            <AlertTriangle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.first_name.message}\r\n                          </p>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Sobrenome *\r\n                      </label>\r\n                      <input\r\n                          {...register('last_name', validationRules.name)}\r\n                          type=\"text\"\r\n                          className={`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\r\n                              errors.last_name ? 'border-red-300 bg-red-50' : 'border-gray-300 focus:border-blue-500'\r\n                          }`}\r\n                          placeholder=\"Seu sobrenome\"\r\n                      />\r\n                      {errors.last_name && (\r\n                          <p className=\"mt-2 text-sm text-red-600 flex items-center\">\r\n                            <AlertTriangle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.last_name.message}\r\n                          </p>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Email *\r\n                      </label>\r\n                      <div className=\"relative\">\r\n                        <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                        <input\r\n                            {...register('email', validationRules.email)}\r\n                            type=\"email\"\r\n                            className={`w-full pl-12 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\r\n                                errors.email ? 'border-red-300 bg-red-50' : 'border-gray-300 focus:border-blue-500'\r\n                            }`}\r\n                            placeholder=\"seu@email.com\"\r\n                        />\r\n                      </div>\r\n                      {errors.email && (\r\n                          <p className=\"mt-2 text-sm text-red-600 flex items-center\">\r\n                            <AlertTriangle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.email.message}\r\n                          </p>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Telefone *\r\n                      </label>\r\n                      <div className=\"relative\">\r\n                        <Phone className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                        <input\r\n                            {...register('phone', validationRules.phone)}\r\n                            type=\"tel\"\r\n                            className={`w-full pl-12 pr-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors ${\r\n                                errors.phone ? 'border-red-300 bg-red-50' : 'border-gray-300 focus:border-blue-500'\r\n                            }`}\r\n                            placeholder=\"(11) 99999-9999\"\r\n                            onChange={(e) => {\r\n                              e.target.value = formatPhone(e.target.value);\r\n                            }}\r\n                        />\r\n                      </div>\r\n                      {errors.phone && (\r\n                          <p className=\"mt-2 text-sm text-red-600 flex items-center\">\r\n                            <AlertTriangle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.phone.message}\r\n                          </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Endereço de Entrega */}\r\n                <div className=\"bg-white rounded-xl shadow-lg p-8 border border-gray-100\">\r\n                  <h2 className=\"text-2xl font-semibold text-gray-800 mb-6 flex items-center\">\r\n                    <MapPin className=\"w-6 h-6 mr-3 text-green-600\" />\r\n                    Endereço de Entrega\r\n                  </h2>\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div className=\"md:col-span-1\">\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        CEP *\r\n                      </label>\r\n                      <input\r\n                          {...register('zipcode', validationRules.zipcode)}\r\n                          type=\"text\"\r\n                          className={`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors ${\r\n                              errors.zipcode ? 'border-red-300 bg-red-50' : 'border-gray-300 focus:border-green-500'\r\n                          }`}\r\n                          placeholder=\"00000-000\"\r\n                          onChange={(e) => {\r\n                            e.target.value = formatZipcode(e.target.value);\r\n                          }}\r\n                      />\r\n                      {errors.zipcode && (\r\n                          <p className=\"mt-2 text-sm text-red-600 flex items-center\">\r\n                            <AlertTriangle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.zipcode.message}\r\n                          </p>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"md:col-span-1\">\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Estado *\r\n                      </label>\r\n                      <input\r\n                          {...register('state', validationRules.state)}\r\n                          type=\"text\"\r\n                          className={`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors ${\r\n                              errors.state ? 'border-red-300 bg-red-50' : 'border-gray-300 focus:border-green-500'\r\n                          }`}\r\n                          placeholder=\"SP\"\r\n                          maxLength={2}\r\n                          style={{ textTransform: 'uppercase' }}\r\n                      />\r\n                      {errors.state && (\r\n                          <p className=\"mt-2 text-sm text-red-600 flex items-center\">\r\n                            <AlertTriangle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.state.message}\r\n                          </p>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"md:col-span-2\">\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Rua *\r\n                      </label>\r\n                      <input\r\n                          {...register('street', { required: 'Rua é obrigatória' })}\r\n                          type=\"text\"\r\n                          className={`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors ${\r\n                              errors.street ? 'border-red-300 bg-red-50' : 'border-gray-300 focus:border-green-500'\r\n                          }`}\r\n                          placeholder=\"Nome da rua\"\r\n                      />\r\n                      {errors.street && (\r\n                          <p className=\"mt-2 text-sm text-red-600 flex items-center\">\r\n                            <AlertTriangle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.street.message}\r\n                          </p>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Número *\r\n                      </label>\r\n                      <input\r\n                          {...register('number', { required: 'Número é obrigatório' })}\r\n                          type=\"text\"\r\n                          className={`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors ${\r\n                              errors.number ? 'border-red-300 bg-red-50' : 'border-gray-300 focus:border-green-500'\r\n                          }`}\r\n                          placeholder=\"123\"\r\n                      />\r\n                      {errors.number && (\r\n                          <p className=\"mt-2 text-sm text-red-600 flex items-center\">\r\n                            <AlertTriangle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.number.message}\r\n                          </p>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Complemento\r\n                      </label>\r\n                      <input\r\n                          {...register('complement')}\r\n                          type=\"text\"\r\n                          className=\"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors\"\r\n                          placeholder=\"Apto, bloco, etc.\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Bairro *\r\n                      </label>\r\n                      <input\r\n                          {...register('neighborhood', { required: 'Bairro é obrigatório' })}\r\n                          type=\"text\"\r\n                          className={`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors ${\r\n                              errors.neighborhood ? 'border-red-300 bg-red-50' : 'border-gray-300 focus:border-green-500'\r\n                          }`}\r\n                          placeholder=\"Nome do bairro\"\r\n                      />\r\n                      {errors.neighborhood && (\r\n                          <p className=\"mt-2 text-sm text-red-600 flex items-center\">\r\n                            <AlertTriangle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.neighborhood.message}\r\n                          </p>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\r\n                        Cidade *\r\n                      </label>\r\n                      <input\r\n                          {...register('city', { required: 'Cidade é obrigatória' })}\r\n                          type=\"text\"\r\n                          className={`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors ${\r\n                              errors.city ? 'border-red-300 bg-red-50' : 'border-gray-300 focus:border-green-500'\r\n                          }`}\r\n                          placeholder=\"Nome da cidade\"\r\n                      />\r\n                      {errors.city && (\r\n                          <p className=\"mt-2 text-sm text-red-600 flex items-center\">\r\n                            <AlertTriangle className=\"w-4 h-4 mr-1\" />\r\n                            {errors.city.message}\r\n                          </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Método de Pagamento */}\r\n                <div className=\"bg-white rounded-xl shadow-lg p-8 border border-gray-100\">\r\n                  <h2 className=\"text-2xl font-semibold text-gray-800 mb-6 flex items-center\">\r\n                    <CreditCard className=\"w-6 h-6 mr-3 text-purple-600\" />\r\n                    Método de Pagamento\r\n                  </h2>\r\n\r\n                  <div className=\"space-y-4\">\r\n                    <div className=\"p-6 border-2 border-yellow-300 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl\">\r\n                      <div className=\"flex items-center\">\r\n                        <input\r\n                            {...register('payment_method')}\r\n                            type=\"radio\"\r\n                            value=\"pending\"\r\n                            defaultChecked\r\n                            className=\"mr-4 w-4 h-4\"\r\n                        />\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"font-semibold text-yellow-800 text-lg flex items-center\">\r\n                            <DollarSign className=\"w-5 h-5 mr-2\" />\r\n                            Pagamento Pendente\r\n                          </div>\r\n                          <div className=\"text-sm text-yellow-700 mt-1\">\r\n                            O pagamento será combinado diretamente com cada vendedor após a confirmação do pedido\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-6 border-2 border-gray-200 bg-gray-50 rounded-xl opacity-50\">\r\n                      <div className=\"flex items-center\">\r\n                        <input\r\n                            type=\"radio\"\r\n                            disabled\r\n                            className=\"mr-4 w-4 h-4\"\r\n                        />\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"font-semibold text-gray-600 text-lg flex items-center\">\r\n                            <CreditCard className=\"w-5 h-5 mr-2\" />\r\n                            Cartão de Crédito\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-500 mt-1\">\r\n                            Em breve - Gateway de pagamento em desenvolvimento\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"p-6 border-2 border-gray-200 bg-gray-50 rounded-xl opacity-50\">\r\n                      <div className=\"flex items-center\">\r\n                        <input\r\n                            type=\"radio\"\r\n                            disabled\r\n                            className=\"mr-4 w-4 h-4\"\r\n                        />\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"font-semibold text-gray-600 text-lg flex items-center\">\r\n                            <Package className=\"w-5 h-5 mr-2\" />\r\n                            PIX\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-500 mt-1\">\r\n                            Em breve - Pagamento via PIX\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Botão de finalizar */}\r\n                <div className=\"bg-gradient-to-r from-green-500 to-blue-600 rounded-xl shadow-lg p-6\">\r\n                  <Button\r\n                      type=\"submit\"\r\n                      loading={processing}\r\n                      className=\"w-full bg-white text-gray-800 hover:bg-gray-100 font-bold text-lg py-4 shadow-lg\"\r\n                      size=\"lg\"\r\n                  >\r\n                    <Lock className=\"w-5 h-5 mr-3\" />\r\n                    Finalizar Pedido{getUniqueSellerCount() > 1 ? 's' : ''} - R$ {getTotalPrice().toFixed(2)}\r\n                  </Button>\r\n                  <p className=\"text-white text-center text-sm mt-3 opacity-90\">\r\n                    🔒 Transação 100% segura • Seus dados estão protegidos\r\n                  </p>\r\n                </div>\r\n              </form>\r\n            </div>\r\n\r\n            {/* Sidebar do Resumo - CORRIGIDA */}\r\n            <div className=\"lg:col-span-1\">\r\n              <div className=\"bg-white rounded-xl shadow-lg p-6 sticky top-8 border border-gray-100\">\r\n                <h2 className=\"text-2xl font-semibold text-gray-800 mb-6 flex items-center\">\r\n                  <ShoppingCart className=\"w-6 h-6 mr-3 text-blue-600\" />\r\n                  Resumo do Pedido\r\n                </h2>\r\n\r\n                {/* CORREÇÃO: Lista de itens com verificações de segurança */}\r\n                <div className=\"space-y-4 mb-6 max-h-96 overflow-y-auto\">\r\n                  {cart?.items && Array.isArray(cart.items) && cart.items.length > 0 ? (\r\n                      cart.items.map((item) => (\r\n                          <div key={item.ad_id || item._id} className=\"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg\">\r\n                            <div className=\"w-16 h-16 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0\">\r\n                              {item.ad_snapshot?.image_url || item.image_url ? (\r\n                                  <img\r\n                                      src={item.ad_snapshot?.image_url || item.image_url}\r\n                                      alt={item.ad_snapshot?.title || item.title}\r\n                                      className=\"w-full h-full object-cover\"\r\n                                  />\r\n                              ) : (\r\n                                  <div className=\"w-full h-full flex items-center justify-center\">\r\n                                    <Package className=\"w-8 h-8 text-gray-400\" />\r\n                                  </div>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"flex-1 min-w-0\">\r\n                              <p className=\"text-sm font-semibold text-gray-900 truncate\">\r\n                                {item.ad_snapshot?.title || item.title || 'Item sem título'}\r\n                              </p>\r\n                              <p className=\"text-xs text-gray-600\">\r\n                                {item.ad_snapshot?.game_name || item.game_name || 'Jogo não identificado'} • Qtd: {item.quantity || 1}\r\n                              </p>\r\n                              <p className=\"text-xs text-gray-500\">\r\n                                Por: {item.ad_snapshot?.seller_username || item.seller_name || 'Vendedor'}\r\n                              </p>\r\n                              <p className=\"text-sm font-semibold text-green-600 mt-1\">\r\n                                R$ {((item.price_snapshot || item.price || 0) * (item.quantity || 1)).toFixed(2)}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                      ))\r\n                  ) : (\r\n                      <div className=\"text-center py-4\">\r\n                        <Package className=\"w-12 h-12 text-gray-300 mx-auto mb-2\" />\r\n                        <p className=\"text-gray-500\">Nenhum item no carrinho</p>\r\n                      </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Totais */}\r\n                <div className=\"space-y-3 border-t border-gray-200 pt-6\">\r\n                  <div className=\"flex justify-between text-lg\">\r\n                    <span className=\"text-gray-600\">Subtotal ({getTotalItems()} itens):</span>\r\n                    <span className=\"font-semibold\">R$ {getTotalPrice().toFixed(2)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Frete:</span>\r\n                    <span className=\"font-semibold text-blue-600\">A combinar</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between items-center pt-3 border-t border-gray-200\">\r\n                    <span className=\"text-xl font-bold text-gray-900\">Total:</span>\r\n                    <span className=\"text-3xl font-bold text-green-600\">\r\n                    R$ {getTotalPrice().toFixed(2)}\r\n                  </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Informações de segurança */}\r\n                <div className=\"mt-6 p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg border border-green-200\">\r\n                  <div className=\"flex items-center mb-2\">\r\n                    <Shield className=\"w-5 h-5 text-green-600 mr-2\" />\r\n                    <span className=\"font-semibold text-green-900\">Compra Protegida</span>\r\n                  </div>\r\n                  <ul className=\"text-sm text-green-700 space-y-1\">\r\n                    <li className=\"flex items-center\">\r\n                      <CheckCircle className=\"w-4 h-4 mr-2\" />\r\n                      Dados seguros e criptografados\r\n                    </li>\r\n                    <li className=\"flex items-center\">\r\n                      <CheckCircle className=\"w-4 h-4 mr-2\" />\r\n                      Chat direto com vendedores\r\n                    </li>\r\n                    <li className=\"flex items-center\">\r\n                      <CheckCircle className=\"w-4 h-4 mr-2\" />\r\n                      Suporte 24/7 disponível\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n\r\n                {/* Resumo dos vendedores */}\r\n                {getUniqueSellerCount() > 1 && (\r\n                    <div className=\"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200\">\r\n                      <div className=\"flex items-center mb-2\">\r\n                        <User className=\"w-5 h-5 text-blue-600 mr-2\" />\r\n                        <span className=\"font-semibold text-blue-900\">\r\n                      {getUniqueSellerCount()} Vendedores\r\n                    </span>\r\n                      </div>\r\n                      <p className=\"text-sm text-blue-700\">\r\n                        Serão criados {getUniqueSellerCount()} pedidos separados, um para cada vendedor.\r\n                      </p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Avaliações */}\r\n                <div className=\"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200\">\r\n                  <div className=\"flex items-center mb-2\">\r\n                    <Star className=\"w-5 h-5 text-yellow-600 mr-2\" />\r\n                    <span className=\"font-semibold text-yellow-900\">Vendedores Verificados</span>\r\n                  </div>\r\n                  <p className=\"text-sm text-yellow-700\">\r\n                    Todos os vendedores são verificados e têm avaliações positivas na plataforma.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;","import React, { useState, useEffect } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { orderService } from '../../services/orderService';\r\nimport {\r\n  ShoppingBag,\r\n  DollarSign,\r\n  Filter,\r\n  Grid,\r\n  List,\r\n  Clock,\r\n  CheckCircle,\r\n  Package,\r\n  XCircle,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  Eye\r\n} from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\nimport EmptyState from '../../components/Common/EmptyState';\r\n\r\nconst Orders = () => {\r\n  const location = useLocation();\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState('all');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n  const [viewMode, setViewMode] = useState('list');\r\n  const [stats, setStats] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n    fetchStats();\r\n  }, [activeTab]);\r\n\r\n  useEffect(() => {\r\n    if (location.state?.message) {\r\n      toast.success(location.state.message);\r\n      window.history.replaceState({}, document.title);\r\n    }\r\n  }, [location]);\r\n\r\n  const fetchOrders = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      let result;\r\n      if (activeTab === 'sales') {\r\n        result = await orderService.getSales();\r\n      } else if (activeTab === 'purchases') {\r\n        result = await orderService.getPurchases();\r\n      } else {\r\n        result = await orderService.getOrders();\r\n      }\r\n\r\n      if (result.success) {\r\n        setOrders(result.data.orders || result.data.sales || result.data.purchases || []);\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Erro ao carregar pedidos');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const fetchStats = async () => {\r\n    try {\r\n      const result = await orderService.getOrderStats();\r\n      if (result.success) {\r\n        setStats(result.data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar estatísticas:', error);\r\n    }\r\n  };\r\n\r\n  const filteredOrders = orders.filter(order => {\r\n    if (statusFilter === 'all') return true;\r\n    return order.status === statusFilter;\r\n  });\r\n\r\n  const getStatusColor = (status) => {\r\n    const colors = {\r\n      pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\r\n      paid: 'bg-blue-100 text-blue-800 border-blue-200',\r\n      shipped: 'bg-purple-100 text-purple-800 border-purple-200',\r\n      delivered: 'bg-green-100 text-green-800 border-green-200',\r\n      cancelled: 'bg-red-100 text-red-800 border-red-200'\r\n    };\r\n    return colors[status] || 'bg-gray-100 text-gray-800 border-gray-200';\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    const icons = {\r\n      pending: Clock,\r\n      paid: CheckCircle,\r\n      shipped: Package,\r\n      delivered: CheckCircle,\r\n      cancelled: XCircle\r\n    };\r\n    const Icon = icons[status] || Clock;\r\n    return <Icon className=\"w-4 h-4\" />;\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    const labels = {\r\n      pending: 'Pendente',\r\n      paid: 'Pago',\r\n      shipped: 'Enviado',\r\n      delivered: 'Entregue',\r\n      cancelled: 'Cancelado'\r\n    };\r\n    return labels[status] || status;\r\n  };\r\n\r\n  const getRoleLabel = (role) => {\r\n    return role === 'buyer' ? 'Compra' : 'Venda';\r\n  };\r\n\r\n  const getRoleIcon = (role) => {\r\n    return role === 'buyer' ? TrendingDown : TrendingUp;\r\n  };\r\n\r\n  const getRoleColor = (role) => {\r\n    return role === 'buyer'\r\n      ? 'bg-blue-100 text-blue-800 border-blue-200'\r\n      : 'bg-green-100 text-green-800 border-green-200';\r\n  };\r\n\r\n  const tabs = [\r\n    {\r\n      id: 'all',\r\n      label: 'Todos',\r\n      icon: ShoppingBag,\r\n      description: 'Todas as transações'\r\n    },\r\n    {\r\n      id: 'purchases',\r\n      label: 'Minhas Compras',\r\n      icon: TrendingDown,\r\n      description: 'Itens que você comprou'\r\n    },\r\n    {\r\n      id: 'sales',\r\n      label: 'Minhas Vendas',\r\n      icon: TrendingUp,\r\n      description: 'Itens que você vendeu'\r\n    }\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">\r\n            Meus Pedidos\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Acompanhe suas compras e vendas na plataforma\r\n          </p>\r\n        </div>\r\n\r\n        {/* Estatísticas */}\r\n        {stats && (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-3 bg-blue-100 rounded-full\">\r\n                  <TrendingDown className=\"w-6 h-6 text-blue-600\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600\">Total Compras</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats.buyer_stats.total}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-3 bg-green-100 rounded-full\">\r\n                  <TrendingUp className=\"w-6 h-6 text-green-600\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600\">Total Vendas</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats.seller_stats.total}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-3 bg-purple-100 rounded-full\">\r\n                  <DollarSign className=\"w-6 h-6 text-purple-600\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600\">Gasto Total</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    R$ {stats.total_spent.toFixed(2)}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-3 bg-yellow-100 rounded-full\">\r\n                  <DollarSign className=\"w-6 h-6 text-yellow-600\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600\">Receita Total</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900\">\r\n                    R$ {stats.total_revenue.toFixed(2)}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Tabs e Filtros */}\r\n        <div className=\"bg-white rounded-lg shadow-md mb-6\">\r\n          {/* Tabs melhoradas */}\r\n          <div className=\"border-b border-gray-200\">\r\n            <nav className=\"-mb-px flex space-x-0\">\r\n              {tabs.map((tab) => {\r\n                const Icon = tab.icon;\r\n                return (\r\n                  <button\r\n                    key={tab.id}\r\n                    onClick={() => setActiveTab(tab.id)}\r\n                    className={`flex-1 py-6 px-6 text-center border-b-2 font-medium text-sm transition-colors ${\r\n                      activeTab === tab.id\r\n                        ? 'border-blue-500 text-blue-600 bg-blue-50'\r\n                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50'\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex flex-col items-center space-y-2\">\r\n                      <Icon className=\"w-5 h-5\" />\r\n                      <span className=\"font-semibold\">{tab.label}</span>\r\n                      <span className=\"text-xs text-gray-500 font-normal\">{tab.description}</span>\r\n                    </div>\r\n                  </button>\r\n                );\r\n              })}\r\n            </nav>\r\n          </div>\r\n\r\n          {/* Controles */}\r\n          <div className=\"p-6\">\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <span className=\"text-sm font-medium text-gray-700\">\r\n                  {filteredOrders.length} {filteredOrders.length === 1 ? 'pedido' : 'pedidos'}\r\n                </span>\r\n                {activeTab !== 'all' && (\r\n                  <span className=\"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full\">\r\n                    {activeTab === 'purchases' ? 'Suas Compras' : 'Suas Vendas'}\r\n                  </span>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4\">\r\n                {/* Filtro por status */}\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <Filter className=\"w-4 h-4 text-gray-500\" />\r\n                  <select\r\n                    value={statusFilter}\r\n                    onChange={(e) => setStatusFilter(e.target.value)}\r\n                    className=\"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                  >\r\n                    <option value=\"all\">Todos os status</option>\r\n                    <option value=\"pending\">Pendente</option>\r\n                    <option value=\"paid\">Pago</option>\r\n                    <option value=\"shipped\">Enviado</option>\r\n                    <option value=\"delivered\">Entregue</option>\r\n                    <option value=\"cancelled\">Cancelado</option>\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Modo de visualização */}\r\n                <div className=\"flex items-center space-x-1 bg-gray-100 rounded-lg p-1\">\r\n                  <button\r\n                    onClick={() => setViewMode('list')}\r\n                    className={`p-2 rounded ${\r\n                      viewMode === 'list'\r\n                        ? 'bg-white text-blue-600 shadow-sm'\r\n                        : 'text-gray-500 hover:text-gray-700'\r\n                    }`}\r\n                    title=\"Visualização em lista\"\r\n                  >\r\n                    <List className=\"w-4 h-4\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => setViewMode('grid')}\r\n                    className={`p-2 rounded ${\r\n                      viewMode === 'grid'\r\n                        ? 'bg-white text-blue-600 shadow-sm'\r\n                        : 'text-gray-500 hover:text-gray-700'\r\n                    }`}\r\n                    title=\"Visualização em grade\"\r\n                  >\r\n                    <Grid className=\"w-4 h-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Lista de Pedidos */}\r\n        {filteredOrders.length === 0 ? (\r\n          <EmptyState\r\n            icon={ShoppingBag}\r\n            title=\"Nenhum pedido encontrado\"\r\n            description={\r\n              activeTab === 'sales'\r\n                ? 'Quando alguém comprar seus anúncios, os pedidos aparecerão aqui.'\r\n                : activeTab === 'purchases'\r\n                ? 'Quando você fizer uma compra, ela aparecerá aqui.'\r\n                : 'Você ainda não tem nenhum pedido.'\r\n            }\r\n            actionText=\"Explorar Jogos\"\r\n            onAction={() => window.location.href = '/games'}\r\n          />\r\n        ) : viewMode === 'grid' ? (\r\n          // Grid View Melhorada\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {filteredOrders.map((order) => {\r\n              const RoleIcon = getRoleIcon(order.role);\r\n              return (\r\n                <div key={order._id} className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow\">\r\n                  <div className=\"p-6\">\r\n                    {/* Header com tipo e status */}\r\n                    <div className=\"flex justify-between items-start mb-4\">\r\n                      <span className={`inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full border ${getRoleColor(order.role)}`}>\r\n                        <RoleIcon className=\"w-3 h-3 mr-1\" />\r\n                        {getRoleLabel(order.role)}\r\n                      </span>\r\n                      <span className={`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full border ${getStatusColor(order.status)}`}>\r\n                        {getStatusIcon(order.status)}\r\n                        <span className=\"ml-1\">{getStatusLabel(order.status)}</span>\r\n                      </span>\r\n                    </div>\r\n\r\n                    {/* Título e jogo */}\r\n                    <h3 className=\"font-semibold text-lg text-gray-800 line-clamp-2 mb-2\">\r\n                      {order.ad_snapshot?.title}\r\n                    </h3>\r\n                    <p className=\"text-sm text-gray-600 mb-4\">\r\n                      {order.ad_snapshot?.game_name}\r\n                    </p>\r\n\r\n                    {/* Detalhes */}\r\n                    <div className=\"space-y-2 mb-4\">\r\n                      <div className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-gray-600\">\r\n                          {order.role === 'buyer' ? 'Vendedor:' : 'Comprador:'}\r\n                        </span>\r\n                        <span className=\"font-medium text-right\">\r\n                          {order.other_user?.first_name} {order.other_user?.last_name}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-gray-600\">Quantidade:</span>\r\n                        <span className=\"font-medium\">{order.quantity}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-gray-600\">Total:</span>\r\n                        <span className=\"font-bold text-green-600\">R$ {order.total_price?.toFixed(2)}</span>\r\n                      </div>\r\n                      <div className=\"flex justify-between text-sm\">\r\n                        <span className=\"text-gray-600\">Data:</span>\r\n                        <span className=\"font-medium\">\r\n                          {new Date(order.created_at).toLocaleDateString('pt-BR')}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Ações */}\r\n                    <Link to={`/orders/${order._id}`}>\r\n                      <Button className=\"w-full inline-flex items-center justify-center\" size=\"sm\">\r\n                        <Eye className=\"w-4 h-4 mr-2\" />\r\n                        Ver Detalhes\r\n                      </Button>\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        ) : (\r\n          // List View Melhorada\r\n          <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Pedido\r\n                    </th>\r\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Tipo\r\n                    </th>\r\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Contato\r\n                    </th>\r\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Total\r\n                    </th>\r\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Data\r\n                    </th>\r\n                    <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Ações\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {filteredOrders.map((order) => {\r\n                    const RoleIcon = getRoleIcon(order.role);\r\n                    return (\r\n                      <tr key={order._id} className=\"hover:bg-gray-50\">\r\n                        <td className=\"px-6 py-4\">\r\n                          <div>\r\n                            <div className=\"text-sm font-medium text-gray-900 line-clamp-1\">\r\n                              {order.ad_snapshot?.title}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500\">\r\n                              {order.ad_snapshot?.game_name} • Qtd: {order.quantity}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full border ${getRoleColor(order.role)}`}>\r\n                            <RoleIcon className=\"w-3 h-3 mr-1\" />\r\n                            {getRoleLabel(order.role)}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div className=\"text-sm text-gray-900\">\r\n                            {order.other_user?.first_name} {order.other_user?.last_name}\r\n                          </div>\r\n                          <div className=\"text-sm text-gray-500\">\r\n                            @{order.other_user?.username}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600\">\r\n                          R$ {order.total_price?.toFixed(2)}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full border ${getStatusColor(order.status)}`}>\r\n                            {getStatusIcon(order.status)}\r\n                            <span className=\"ml-1\">{getStatusLabel(order.status)}</span>\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                          {new Date(order.created_at).toLocaleDateString('pt-BR')}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                          <Link\r\n                            to={`/orders/${order._id}`}\r\n                            className=\"text-blue-600 hover:text-blue-900 inline-flex items-center\"\r\n                          >\r\n                            <Eye className=\"w-4 h-4 mr-1\" />\r\n                            Ver Detalhes\r\n                          </Link>\r\n                        </td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Orders;","// front/src/services/chatService.js - CORREÇÃO DO PROCESSO ENV\r\nimport { io } from 'socket.io-client';\r\nimport api from './api';\r\n\r\nclass ChatService {\r\n  constructor() {\r\n    this.socket = null;\r\n    this.isConnected = false;\r\n    this.reconnectAttempts = 0;\r\n    this.maxReconnectAttempts = 5;\r\n    this.reconnectInterval = null;\r\n  }\r\n\r\n  // Conectar ao WebSocket\r\n  connect(token) {\r\n    try {\r\n      console.log('🔌 Conectando ao chat WebSocket...');\r\n\r\n      if (this.socket) {\r\n        this.disconnect();\r\n      }\r\n\r\n      // Dynamic WebSocket URL based on environment\r\n      let socketUrl;\r\n      if (import.meta.env.VITE_WS_URL) {\r\n        socketUrl = import.meta.env.VITE_WS_URL;\r\n      } else if (import.meta.env.DEV || window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {\r\n        socketUrl = 'http://127.0.0.1:5000';\r\n      } else {\r\n        // In production, construct WebSocket URL from current location\r\n        const protocol = window.location.protocol === 'https:' ? 'https:' : 'http:';\r\n        const hostname = window.location.hostname;\r\n        socketUrl = `${protocol}//${hostname}:5000`;\r\n      }\r\n\r\n      console.log('🔗 Conectando ao WebSocket em:', socketUrl);\r\n\r\n      this.socket = io(socketUrl, {\r\n        auth: { token: `Bearer ${token}` },\r\n        transports: ['websocket', 'polling'],\r\n        upgrade: true,\r\n        rememberUpgrade: true,\r\n        timeout: 20000,\r\n        forceNew: true\r\n      });\r\n\r\n      this.setupEventListeners();\r\n\r\n      return this.socket;\r\n    } catch (error) {\r\n      console.error('❌ Erro ao conectar WebSocket:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Configurar listeners de eventos\r\n  setupEventListeners() {\r\n    if (!this.socket) return;\r\n\r\n    this.socket.on('connect', () => {\r\n      console.log('✅ Conectado ao chat WebSocket');\r\n      this.isConnected = true;\r\n      this.reconnectAttempts = 0;\r\n\r\n      if (this.reconnectInterval) {\r\n        clearInterval(this.reconnectInterval);\r\n        this.reconnectInterval = null;\r\n      }\r\n    });\r\n\r\n    this.socket.on('disconnect', (reason) => {\r\n      console.log('❌ Desconectado do chat WebSocket:', reason);\r\n      this.isConnected = false;\r\n\r\n      if (reason === 'io server disconnect') {\r\n        // Reconexão automática se o servidor desconectou\r\n        this.attemptReconnect();\r\n      }\r\n    });\r\n\r\n    this.socket.on('connect_error', (error) => {\r\n      console.error('❌ Erro de conexão WebSocket:', error);\r\n      this.isConnected = false;\r\n      this.attemptReconnect();\r\n    });\r\n\r\n    this.socket.on('error', (error) => {\r\n      console.error('❌ Erro no WebSocket:', error);\r\n    });\r\n\r\n    // Eventos específicos do chat\r\n    this.socket.on('connected', (data) => {\r\n      console.log('👤 Chat autenticado:', data);\r\n    });\r\n\r\n    this.socket.on('room_joined', (data) => {\r\n      console.log('🏠 Sala joined:', data);\r\n    });\r\n\r\n    this.socket.on('new_message', (data) => {\r\n      console.log('💬 Nova mensagem recebida:', data);\r\n    });\r\n\r\n    this.socket.on('user_typing', (data) => {\r\n      console.log('⌨️ Usuário digitando:', data);\r\n    });\r\n\r\n    this.socket.on('user_stop_typing', (data) => {\r\n      console.log('⏹️ Usuário parou de digitar:', data);\r\n    });\r\n\r\n    this.socket.on('order_status_update', (data) => {\r\n      console.log('📦 Status do pedido atualizado:', data);\r\n    });\r\n\r\n    this.socket.on('system_notification', (data) => {\r\n      console.log('🔔 Notificação do sistema:', data);\r\n    });\r\n  }\r\n\r\n  // Tentar reconectar\r\n  attemptReconnect() {\r\n    if (this.reconnectAttempts >= this.maxReconnectAttempts) {\r\n      console.log('❌ Máximo de tentativas de reconexão atingido');\r\n      return;\r\n    }\r\n\r\n    if (this.reconnectInterval) return;\r\n\r\n    this.reconnectAttempts++;\r\n    const delay = Math.pow(2, this.reconnectAttempts) * 1000; // Backoff exponencial\r\n\r\n    console.log(`🔄 Tentativa de reconexão ${this.reconnectAttempts}/${this.maxReconnectAttempts} em ${delay}ms`);\r\n\r\n    this.reconnectInterval = setTimeout(() => {\r\n      this.reconnectInterval = null;\r\n      if (this.socket) {\r\n        this.socket.connect();\r\n      }\r\n    }, delay);\r\n  }\r\n\r\n  // Desconectar\r\n  disconnect() {\r\n    console.log('🔌 Desconectando do chat WebSocket...');\r\n\r\n    if (this.reconnectInterval) {\r\n      clearInterval(this.reconnectInterval);\r\n      this.reconnectInterval = null;\r\n    }\r\n\r\n    if (this.socket) {\r\n      this.socket.disconnect();\r\n      this.socket = null;\r\n    }\r\n\r\n    this.isConnected = false;\r\n  }\r\n\r\n  // Verificar se está conectado\r\n  isConnected() {\r\n    return this.isConnected && this.socket && this.socket.connected;\r\n  }\r\n\r\n  // Entrar em uma sala\r\n  joinRoom(roomId) {\r\n    if (!this.isConnected() || !roomId) {\r\n      console.warn('⚠️ Não é possível entrar na sala - não conectado');\r\n      return false;\r\n    }\r\n\r\n    console.log('🏠 Entrando na sala:', roomId);\r\n    this.socket.emit('join_chat_room', { room_id: roomId });\r\n    return true;\r\n  }\r\n\r\n  // Sair de uma sala\r\n  leaveRoom(roomId) {\r\n    if (!this.isConnected() || !roomId) {\r\n      console.warn('⚠️ Não é possível sair da sala - não conectado');\r\n      return false;\r\n    }\r\n\r\n    console.log('🚪 Saindo da sala:', roomId);\r\n    this.socket.emit('leave_chat_room', { room_id: roomId });\r\n    return true;\r\n  }\r\n\r\n  // Enviar mensagem\r\n  sendMessage(roomId, content) {\r\n    if (!this.isConnected() || !roomId || !content) {\r\n      console.warn('⚠️ Não é possível enviar mensagem - parâmetros inválidos');\r\n      return false;\r\n    }\r\n\r\n    console.log('💬 Enviando mensagem:', { roomId, content });\r\n    this.socket.emit('send_message', {\r\n      room_id: roomId,\r\n      content: content.trim()\r\n    });\r\n    return true;\r\n  }\r\n\r\n  // Indicar que está digitando\r\n  startTyping(roomId) {\r\n    if (!this.isConnected() || !roomId) return false;\r\n\r\n    this.socket.emit('typing', { room_id: roomId });\r\n    return true;\r\n  }\r\n\r\n  // Parar de indicar que está digitando\r\n  stopTyping(roomId) {\r\n    if (!this.isConnected() || !roomId) return false;\r\n\r\n    this.socket.emit('stop_typing', { room_id: roomId });\r\n    return true;\r\n  }\r\n\r\n  // Ping para manter conexão viva\r\n  ping() {\r\n    if (!this.isConnected()) return false;\r\n\r\n    this.socket.emit('ping', { timestamp: Date.now() });\r\n    return true;\r\n  }\r\n\r\n  // === API REST METHODS (fallback) ===\r\n\r\n  // Buscar salas de chat do usuário\r\n  async getChatRooms() {\r\n    try {\r\n      console.log('🔍 Buscando salas de chat...');\r\n\r\n      const response = await api.get('/chat/rooms');\r\n\r\n      console.log('📥 Salas de chat:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Salas carregadas'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao buscar salas:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao carregar salas',\r\n        data: { rooms: [] }\r\n      };\r\n    }\r\n  }\r\n\r\n  // Buscar sala de chat de um pedido\r\n  async getOrderChatRoom(orderId) {\r\n    try {\r\n      console.log('🔍 Buscando sala do pedido:', orderId);\r\n\r\n      const response = await api.get(`/chat/room/${orderId}`);\r\n\r\n      console.log('📥 Sala do pedido:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Sala encontrada'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao buscar sala do pedido:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao buscar sala',\r\n        data: null\r\n      };\r\n    }\r\n  }\r\n\r\n  // Buscar mensagens de uma sala\r\n  async getRoomMessages(roomId, limit = 50, skip = 0) {\r\n    try {\r\n      console.log('🔍 Buscando mensagens da sala:', roomId);\r\n\r\n      const response = await api.get(`/chat/room/${roomId}/messages?limit=${limit}&skip=${skip}`);\r\n\r\n      console.log('📥 Mensagens da sala:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Mensagens carregadas'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao buscar mensagens:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao carregar mensagens',\r\n        data: { messages: [] }\r\n      };\r\n    }\r\n  }\r\n\r\n  // Enviar mensagem via REST (fallback)\r\n  async sendMessageRest(roomId, content) {\r\n    try {\r\n      console.log('📤 Enviando mensagem via REST:', { roomId, content });\r\n\r\n      const response = await api.post(`/chat/room/${roomId}/message`, {\r\n        content: content.trim()\r\n      });\r\n\r\n      console.log('📥 Resposta do envio:', response.data);\r\n\r\n      return {\r\n        success: response.data.success || true,\r\n        data: response.data.data || response.data,\r\n        message: response.data.message || 'Mensagem enviada'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erro ao enviar mensagem via REST:', error);\r\n\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'Erro ao enviar mensagem'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Adicionar listener personalizado\r\n  on(event, callback) {\r\n    if (this.socket) {\r\n      this.socket.on(event, callback);\r\n    }\r\n  }\r\n\r\n  // Remover listener\r\n  off(event, callback) {\r\n    if (this.socket) {\r\n      this.socket.off(event, callback);\r\n    }\r\n  }\r\n\r\n  // Obter status da conexão\r\n  getConnectionStatus() {\r\n    return {\r\n      connected: this.isConnected(),\r\n      socket: !!this.socket,\r\n      reconnectAttempts: this.reconnectAttempts,\r\n      maxReconnectAttempts: this.maxReconnectAttempts\r\n    };\r\n  }\r\n}\r\n\r\n// Instância singleton\r\nexport const chatService = new ChatService();\r\n\r\n// Export para compatibilidade\r\nexport default chatService;","import React, { useState, useEffect, useRef } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { chatService } from '../../services/chatService';\r\nimport {\r\n  Send,\r\n  User,\r\n  MessageCircle,\r\n  AlertCircle,\r\n  Loader,\r\n  Clock,\r\n  CheckCircle2,\r\n  Phone,\r\n  Video,\r\n  Settings\r\n} from 'lucide-react';\r\nimport Button from '../Common/Button';\r\n\r\nconst ChatRoom = ({ orderId, onClose }) => {\r\n  const { user } = useAuth();\r\n  const [room, setRoom] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const [connected, setConnected] = useState(false);\r\n  const [sending, setSending] = useState(false);\r\n  const [typingUsers, setTypingUsers] = useState(new Set());\r\n  const [socket, setSocket] = useState(null);\r\n  \r\n  const messagesEndRef = useRef(null);\r\n  const typingTimeoutRef = useRef(null);\r\n  const messageInputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    initializeChat();\r\n    return () => {\r\n      cleanup();\r\n    };\r\n  }, [orderId]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const initializeChat = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Buscar sala de chat\r\n      const roomResult = await chatService.getOrderChatRoom(orderId);\r\n      if (!roomResult.success) {\r\n        toast.error(roomResult.message);\r\n        return;\r\n      }\r\n\r\n      setRoom(roomResult.data.room);\r\n\r\n      // Conectar ao WebSocket\r\n      const token = localStorage.getItem('access_token') || document.cookie\r\n        .split('; ')\r\n        .find(row => row.startsWith('access_token='))\r\n        ?.split('=')[1];\r\n\r\n      if (token) {\r\n        const socketInstance = chatService.connect(token);\r\n        setSocket(socketInstance);\r\n\r\n        setupSocketListeners(socketInstance, roomResult.data.room._id);\r\n        \r\n        // Entrar na sala\r\n        socketInstance.emit('join_chat_room', { room_id: roomResult.data.room._id });\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Erro ao inicializar chat:', error);\r\n      toast.error('Erro ao carregar chat');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const setupSocketListeners = (socketInstance, roomId) => {\r\n    socketInstance.on('connected', () => {\r\n      setConnected(true);\r\n      console.log('Conectado ao chat');\r\n    });\r\n\r\n    socketInstance.on('room_joined', (data) => {\r\n      console.log('Entrou na sala:', data);\r\n      setMessages(data.messages || []);\r\n    });\r\n\r\n    socketInstance.on('new_message', (data) => {\r\n      const message = data.message;\r\n      if (message.room_id === roomId) {\r\n        setMessages(prev => [...prev, message]);\r\n        \r\n        // Tocar som de notificação se não for própria mensagem\r\n        if (message.user_id !== user._id) {\r\n          playNotificationSound();\r\n        }\r\n      }\r\n    });\r\n\r\n    socketInstance.on('user_typing', (data) => {\r\n      if (data.user_id !== user._id) {\r\n        setTypingUsers(prev => new Set([...prev, data.username]));\r\n        \r\n        // Remover após 3 segundos\r\n        setTimeout(() => {\r\n          setTypingUsers(prev => {\r\n            const newSet = new Set(prev);\r\n            newSet.delete(data.username);\r\n            return newSet;\r\n          });\r\n        }, 3000);\r\n      }\r\n    });\r\n\r\n    socketInstance.on('user_stop_typing', (data) => {\r\n      if (data.user_id !== user._id) {\r\n        setTypingUsers(prev => {\r\n          const newSet = new Set(prev);\r\n          newSet.delete(data.username);\r\n          return newSet;\r\n        });\r\n      }\r\n    });\r\n\r\n    socketInstance.on('system_notification', (data) => {\r\n      toast.info(data.message);\r\n    });\r\n\r\n    socketInstance.on('error', (error) => {\r\n      console.error('Erro no WebSocket:', error);\r\n      toast.error(error.message || 'Erro na conexão');\r\n    });\r\n\r\n    socketInstance.on('disconnect', () => {\r\n      setConnected(false);\r\n      console.log('Desconectado do chat');\r\n    });\r\n  };\r\n\r\n  const cleanup = () => {\r\n    if (socket) {\r\n      if (room) {\r\n        socket.emit('leave_chat_room', { room_id: room._id });\r\n      }\r\n      chatService.disconnect();\r\n    }\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current);\r\n    }\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const playNotificationSound = () => {\r\n    try {\r\n      const audio = new Audio('/notification.mp3');\r\n      audio.volume = 0.3;\r\n      audio.play().catch(() => {\r\n        // Ignorar erro se não conseguir tocar\r\n      });\r\n    } catch (error) {\r\n      // Ignorar erro de som\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!newMessage.trim() || sending || !connected) return;\r\n\r\n    setSending(true);\r\n\r\n    try {\r\n      // Enviar via WebSocket\r\n      if (socket && room) {\r\n        socket.emit('send_message', {\r\n          room_id: room._id,\r\n          content: newMessage.trim()\r\n        });\r\n        \r\n        setNewMessage('');\r\n        messageInputRef.current?.focus();\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao enviar mensagem:', error);\r\n      toast.error('Erro ao enviar mensagem');\r\n    }\r\n\r\n    setSending(false);\r\n  };\r\n\r\n  const handleTyping = () => {\r\n    if (socket && room && connected) {\r\n      socket.emit('typing', { room_id: room._id });\r\n      \r\n      // Parar de indicar typing após 2 segundos\r\n      if (typingTimeoutRef.current) {\r\n        clearTimeout(typingTimeoutRef.current);\r\n      }\r\n      \r\n      typingTimeoutRef.current = setTimeout(() => {\r\n        socket.emit('stop_typing', { room_id: room._id });\r\n      }, 2000);\r\n    }\r\n  };\r\n\r\n  const formatTime = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const isToday = date.toDateString() === now.toDateString();\r\n    \r\n    if (isToday) {\r\n      return date.toLocaleTimeString('pt-BR', {\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    } else {\r\n      return date.toLocaleDateString('pt-BR', {\r\n        day: '2-digit',\r\n        month: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    }\r\n  };\r\n\r\n  const getMessageStatus = (message) => {\r\n    if (message.user_id === user._id) {\r\n      return message.read_by?.length > 1 ? 'read' : 'sent';\r\n    }\r\n    return null;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-96\">\r\n        <div className=\"text-center\">\r\n          <Loader className=\"w-8 h-8 animate-spin text-blue-600 mx-auto mb-2\" />\r\n          <p className=\"text-gray-600\">Carregando chat...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-96 bg-white rounded-lg shadow-md\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <MessageCircle className=\"w-5 h-5 text-blue-600\" />\r\n          <div>\r\n            <h3 className=\"font-semibold text-gray-800\">Chat do Pedido</h3>\r\n            <div className=\"flex items-center space-x-2\">\r\n              <div className={`w-2 h-2 rounded-full ${connected ? 'bg-green-500' : 'bg-red-500'}`}></div>\r\n              <span className=\"text-xs text-gray-600\">\r\n                {connected ? 'Conectado' : 'Desconectado'}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center space-x-2\">\r\n          <button\r\n            className=\"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100\"\r\n            title=\"Chamada de voz (em breve)\"\r\n          >\r\n            <Phone className=\"w-4 h-4\" />\r\n          </button>\r\n          <button\r\n            className=\"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100\"\r\n            title=\"Chamada de vídeo (em breve)\"\r\n          >\r\n            <Video className=\"w-4 h-4\" />\r\n          </button>\r\n          <button\r\n            className=\"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100\"\r\n            title=\"Configurações\"\r\n          >\r\n            <Settings className=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Status da conexão */}\r\n      {!connected && (\r\n        <div className=\"px-4 py-2 bg-yellow-50 border-b border-yellow-200\">\r\n          <div className=\"flex items-center text-yellow-800\">\r\n            <AlertCircle className=\"w-4 h-4 mr-2\" />\r\n            <span className=\"text-sm\">Reconectando ao chat...</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Mensagens */}\r\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\r\n        {messages.length === 0 ? (\r\n          <div className=\"text-center py-8\">\r\n            <MessageCircle className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n            <p className=\"text-gray-600\">Nenhuma mensagem ainda</p>\r\n            <p className=\"text-sm text-gray-500\">\r\n              Inicie a conversa sobre este pedido\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          messages.map((message, index) => {\r\n            const isOwnMessage = message.user_id === user._id;\r\n            const isSystemMessage = message.is_system;\r\n            \r\n            return (\r\n              <div\r\n                key={message._id || index}\r\n                className={`flex ${\r\n                  isSystemMessage \r\n                    ? 'justify-center' \r\n                    : isOwnMessage \r\n                    ? 'justify-end' \r\n                    : 'justify-start'\r\n                }`}\r\n              >\r\n                {isSystemMessage ? (\r\n                  <div className=\"bg-blue-50 text-blue-800 px-3 py-2 rounded-lg text-sm border border-blue-200\">\r\n                    {message.content}\r\n                  </div>\r\n                ) : (\r\n                  <div className={`max-w-xs lg:max-w-md ${isOwnMessage ? 'ml-12' : 'mr-12'}`}>\r\n                    {!isOwnMessage && message.user && (\r\n                      <div className=\"flex items-center mb-1\">\r\n                        <div className=\"w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center mr-2\">\r\n                          {message.user.profile_pic ? (\r\n                            <img\r\n                              src={message.user.profile_pic}\r\n                              alt={message.user.username}\r\n                              className=\"w-6 h-6 rounded-full object-cover\"\r\n                            />\r\n                          ) : (\r\n                            <User className=\"w-3 h-3 text-gray-600\" />\r\n                          )}\r\n                        </div>\r\n                        <span className=\"text-xs font-medium text-gray-700\">\r\n                          {message.user.first_name || message.user.username}\r\n                        </span>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    <div\r\n                      className={`px-4 py-2 rounded-lg ${\r\n                        isOwnMessage\r\n                          ? 'bg-blue-600 text-white'\r\n                          : 'bg-gray-100 text-gray-900'\r\n                      }`}\r\n                    >\r\n                      <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\r\n                      \r\n                      <div className={`flex items-center justify-between mt-1 ${\r\n                        isOwnMessage ? 'text-blue-100' : 'text-gray-500'\r\n                      }`}>\r\n                        <span className=\"text-xs\">\r\n                          {formatTime(message.created_at)}\r\n                        </span>\r\n                        \r\n                        {isOwnMessage && (\r\n                          <div className=\"ml-2\">\r\n                            {getMessageStatus(message) === 'read' ? (\r\n                              <CheckCircle2 className=\"w-3 h-3\" />\r\n                            ) : (\r\n                              <Clock className=\"w-3 h-3\" />\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })\r\n        )}\r\n\r\n        {/* Indicador de digitação */}\r\n        {typingUsers.size > 0 && (\r\n          <div className=\"flex justify-start\">\r\n            <div className=\"max-w-xs lg:max-w-md mr-12\">\r\n              <div className=\"bg-gray-100 text-gray-600 px-4 py-2 rounded-lg\">\r\n                <div className=\"flex items-center space-x-1\">\r\n                  <span className=\"text-sm\">\r\n                    {Array.from(typingUsers).join(', ')} {typingUsers.size === 1 ? 'está' : 'estão'} digitando\r\n                  </span>\r\n                  <div className=\"flex space-x-1\">\r\n                    <div className=\"w-1 h-1 bg-gray-400 rounded-full animate-bounce\"></div>\r\n                    <div className=\"w-1 h-1 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\r\n                    <div className=\"w-1 h-1 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {/* Input de mensagem */}\r\n      <div className=\"border-t border-gray-200 p-4\">\r\n        <form onSubmit={handleSendMessage} className=\"flex space-x-2\">\r\n          <input\r\n            ref={messageInputRef}\r\n            type=\"text\"\r\n            value={newMessage}\r\n            onChange={(e) => {\r\n              setNewMessage(e.target.value);\r\n              handleTyping();\r\n            }}\r\n            placeholder={connected ? \"Digite sua mensagem...\" : \"Aguardando conexão...\"}\r\n            className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100\"\r\n            disabled={!connected}\r\n            maxLength={1000}\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            disabled={!newMessage.trim() || sending || !connected}\r\n            loading={sending}\r\n            size=\"sm\"\r\n            className=\"px-4\"\r\n          >\r\n            <Send className=\"w-4 h-4\" />\r\n          </Button>\r\n        </form>\r\n        \r\n        {newMessage.length > 800 && (\r\n          <p className=\"text-xs text-gray-500 mt-1\">\r\n            {newMessage.length}/1000 caracteres\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatRoom;","import React from 'react';\r\nimport { AlertCircle, CheckCircle, Info, XCircle, X } from 'lucide-react';\r\nimport clsx from 'clsx';\r\n\r\nconst Alert = ({ \r\n  type = 'info', \r\n  title, \r\n  children, \r\n  dismissible = false, \r\n  onDismiss,\r\n  className = '' \r\n}) => {\r\n  const icons = {\r\n    success: CheckCircle,\r\n    error: XCircle,\r\n    warning: AlertCircle,\r\n    info: Info\r\n  };\r\n\r\n  const typeClasses = {\r\n    success: 'bg-green-50 border-green-200 text-green-800',\r\n    error: 'bg-red-50 border-red-200 text-red-800',\r\n    warning: 'bg-yellow-50 border-yellow-200 text-yellow-800',\r\n    info: 'bg-blue-50 border-blue-200 text-blue-800'\r\n  };\r\n\r\n  const iconClasses = {\r\n    success: 'text-green-400',\r\n    error: 'text-red-400',\r\n    warning: 'text-yellow-400',\r\n    info: 'text-blue-400'\r\n  };\r\n\r\n  const Icon = icons[type];\r\n\r\n  return (\r\n    <div className={clsx('border rounded-lg p-4', typeClasses[type], className)}>\r\n      <div className=\"flex\">\r\n        <div className=\"flex-shrink-0\">\r\n          <Icon className={clsx('w-5 h-5', iconClasses[type])} />\r\n        </div>\r\n        <div className=\"ml-3 flex-1\">\r\n          {title && (\r\n            <h3 className=\"text-sm font-medium mb-1\">{title}</h3>\r\n          )}\r\n          <div className=\"text-sm\">{children}</div>\r\n        </div>\r\n        {dismissible && (\r\n          <div className=\"ml-auto pl-3\">\r\n            <div className=\"-mx-1.5 -my-1.5\">\r\n              <button\r\n                onClick={onDismiss}\r\n                className={clsx(\r\n                  'inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2',\r\n                  iconClasses[type],\r\n                  'hover:bg-opacity-20'\r\n                )}\r\n              >\r\n                <X className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Alert;","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nconst Card = ({ \r\n  children, \r\n  className = '', \r\n  padding = 'default',\r\n  shadow = 'default',\r\n  rounded = 'default',\r\n  hover = false,\r\n  ...props \r\n}) => {\r\n  const paddingClasses = {\r\n    none: '',\r\n    sm: 'p-3',\r\n    default: 'p-6',\r\n    lg: 'p-8'\r\n  };\r\n\r\n  const shadowClasses = {\r\n    none: '',\r\n    sm: 'shadow-sm',\r\n    default: 'shadow-md',\r\n    lg: 'shadow-lg',\r\n    xl: 'shadow-xl'\r\n  };\r\n\r\n  const roundedClasses = {\r\n    none: '',\r\n    sm: 'rounded-sm',\r\n    default: 'rounded-lg',\r\n    lg: 'rounded-xl',\r\n    full: 'rounded-full'\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        'bg-white',\r\n        paddingClasses[padding],\r\n        shadowClasses[shadow],\r\n        roundedClasses[rounded],\r\n        {\r\n          'hover:shadow-lg transition-shadow duration-300': hover,\r\n        },\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Card;","import React from 'react';\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport Button from './Button';\r\n\r\nconst Pagination = ({ \r\n  currentPage, \r\n  totalPages, \r\n  onPageChange, \r\n  showPrevNext = true,\r\n  showPageNumbers = true,\r\n  maxPageNumbers = 5 \r\n}) => {\r\n  const getVisiblePages = () => {\r\n    const pages = [];\r\n    const start = Math.max(1, currentPage - Math.floor(maxPageNumbers / 2));\r\n    const end = Math.min(totalPages, start + maxPageNumbers - 1);\r\n\r\n    for (let i = start; i <= end; i++) {\r\n      pages.push(i);\r\n    }\r\n\r\n    return pages;\r\n  };\r\n\r\n  if (totalPages <= 1) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center space-x-2\">\r\n      {/* Previous Button */}\r\n      {showPrevNext && (\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={() => onPageChange(currentPage - 1)}\r\n          disabled={currentPage === 1}\r\n        >\r\n          <ChevronLeft className=\"w-4 h-4 mr-1\" />\r\n          Anterior\r\n        </Button>\r\n      )}\r\n\r\n      {/* Page Numbers */}\r\n      {showPageNumbers && (\r\n        <>\r\n          {/* First page */}\r\n          {getVisiblePages()[0] > 1 && (\r\n            <>\r\n              <Button\r\n                variant={1 === currentPage ? 'primary' : 'outline'}\r\n                size=\"sm\"\r\n                onClick={() => onPageChange(1)}\r\n              >\r\n                1\r\n              </Button>\r\n              {getVisiblePages()[0] > 2 && <span className=\"px-2\">...</span>}\r\n            </>\r\n          )}\r\n\r\n          {/* Visible page numbers */}\r\n          {getVisiblePages().map((page) => (\r\n            <Button\r\n              key={page}\r\n              variant={page === currentPage ? 'primary' : 'outline'}\r\n              size=\"sm\"\r\n              onClick={() => onPageChange(page)}\r\n            >\r\n              {page}\r\n            </Button>\r\n          ))}\r\n\r\n          {/* Last page */}\r\n          {getVisiblePages()[getVisiblePages().length - 1] < totalPages && (\r\n            <>\r\n              {getVisiblePages()[getVisiblePages().length - 1] < totalPages - 1 && (\r\n                <span className=\"px-2\">...</span>\r\n              )}\r\n              <Button\r\n                variant={totalPages === currentPage ? 'primary' : 'outline'}\r\n                size=\"sm\"\r\n                onClick={() => onPageChange(totalPages)}\r\n              >\r\n                {totalPages}\r\n              </Button>\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Next Button */}\r\n      {showPrevNext && (\r\n        <Button\r\n          variant=\"outline\"\r\n          size=\"sm\"\r\n          onClick={() => onPageChange(currentPage + 1)}\r\n          disabled={currentPage === totalPages}\r\n        >\r\n          Próximo\r\n          <ChevronRight className=\"w-4 h-4 ml-1\" />\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;","import React, { useState } from 'react';\r\nimport { Modal, Button, Alert } from './index';\r\nimport { supportService } from '../../services/supportService';\r\n\r\nconst RatingModal = ({ isOpen, onClose, order, onSuccess }) => {\r\n  const [rating, setRating] = useState(0);\r\n  const [comment, setComment] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (rating === 0) {\r\n      setError('Por favor, selecione uma avaliação');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      await supportService.submitRating(order._id, {\r\n        rating,\r\n        comment: comment.trim() || undefined\r\n      });\r\n      \r\n      setSuccess(true);\r\n      setTimeout(() => {\r\n        onSuccess();\r\n        onClose();\r\n        resetForm();\r\n      }, 2000);\r\n    } catch (error) {\r\n      setError(error.response?.data?.message || 'Erro ao enviar avaliação');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setRating(0);\r\n    setComment('');\r\n    setError('');\r\n    setSuccess(false);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    resetForm();\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen || !order) return null;\r\n\r\n  return (\r\n    <Modal onClose={handleClose}>\r\n      <div className=\"p-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Avaliar Pedido</h2>\r\n        \r\n        {error && <Alert type=\"error\" message={error} className=\"mb-4\" />}\r\n        {success && <Alert type=\"success\" message=\"Avaliação enviada com sucesso!\" className=\"mb-4\" />}\r\n        \r\n        <div className=\"mb-4 p-4 bg-gray-50 rounded-lg\">\r\n          <h3 className=\"font-medium\">Detalhes do Pedido</h3>\r\n          <p className=\"text-sm text-gray-600\">Pedido #{order._id?.slice(-8)}</p>\r\n          <p className=\"text-sm text-gray-600\">Total: R$ {order.total_price?.toFixed(2)}</p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Como você avalia esta experiência?\r\n            </label>\r\n            <div className=\"flex gap-2\">\r\n              {[1, 2, 3, 4, 5].map((star) => (\r\n                <button\r\n                  key={star}\r\n                  type=\"button\"\r\n                  onClick={() => setRating(star)}\r\n                  className={`w-8 h-8 text-2xl ${\r\n                    star <= rating ? 'text-yellow-400' : 'text-gray-300'\r\n                  } hover:text-yellow-400 transition-colors`}\r\n                >\r\n                  ★\r\n                </button>\r\n              ))}\r\n            </div>\r\n            <div className=\"mt-1 text-sm text-gray-500\">\r\n              {rating === 0 && 'Selecione uma avaliação'}\r\n              {rating === 1 && 'Muito ruim'}\r\n              {rating === 2 && 'Ruim'}\r\n              {rating === 3 && 'Regular'}\r\n              {rating === 4 && 'Bom'}\r\n              {rating === 5 && 'Excelente'}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Comentário (opcional)\r\n            </label>\r\n            <textarea\r\n              value={comment}\r\n              onChange={(e) => setComment(e.target.value)}\r\n              rows={4}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500\"\r\n              placeholder=\"Compartilhe sua experiência...\"\r\n              maxLength={500}\r\n            />\r\n            <div className=\"mt-1 text-xs text-gray-500\">\r\n              {comment.length}/500 caracteres\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-3\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={handleClose}\r\n              disabled={loading}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={loading || rating === 0}\r\n              loading={loading}\r\n            >\r\n              Enviar Avaliação\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default RatingModal;","// front/src/pages/Orders/OrderDetails.jsx - CORREÇÃO COMPLETA\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { orderService } from '../../services/orderService';\r\nimport {\r\n  ArrowLeft,\r\n  Package,\r\n  User,\r\n  Clock,\r\n  CheckCircle,\r\n  XCircle,\r\n  Truck,\r\n  CreditCard,\r\n  MessageCircle,\r\n  Star,\r\n  Flag,\r\n  RefreshCw,\r\n  AlertCircle,\r\n  MapPin,\r\n  Phone,\r\n  Mail,\r\n  Calendar,\r\n  DollarSign,\r\n  Tag\r\n} from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\nimport Badge from '../../components/Common/Badge';\r\nimport ChatRoom from '../../components/Chat/ChatRoom';\r\nimport RatingModal from '../../components/Common/RatingModal';\r\n\r\nconst OrderDetails = () => {\r\n  const { orderId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user, isAuthenticated } = useAuth();\r\n\r\n  const [order, setOrder] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [updating, setUpdating] = useState(false);\r\n  const [showChat, setShowChat] = useState(false);\r\n  const [showRatingModal, setShowRatingModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (orderId) {\r\n      loadOrderDetails();\r\n    }\r\n  }, [orderId]);\r\n\r\n  const loadOrderDetails = async () => {\r\n    setLoading(true);\r\n\r\n    try {\r\n      console.log('🔍 Carregando detalhes do pedido:', orderId);\r\n\r\n      const result = await orderService.getOrder(orderId);\r\n\r\n      console.log('📦 Dados do pedido (raw):', result);\r\n\r\n      if (result.success) {\r\n        const orderData = result.data.order || result.data;\r\n\r\n        console.log('📋 Dados do pedido processados:', orderData);\r\n\r\n        setOrder(orderData);\r\n      } else {\r\n        toast.error(result.message);\r\n        navigate('/orders');\r\n      }\r\n    } catch (error) {\r\n      console.error('💥 Erro ao carregar pedido:', error);\r\n      toast.error('Erro ao carregar pedido');\r\n      navigate('/orders');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleStatusUpdate = async (newStatus) => {\r\n    if (!window.confirm(`Tem certeza que deseja alterar o status para \"${newStatus}\"?`)) {\r\n      return;\r\n    }\r\n\r\n    setUpdating(true);\r\n\r\n    try {\r\n      // CORREÇÃO: Determinar o papel do usuário baseado na estrutura real\r\n      const userRole = getUserRole();\r\n\r\n      console.log('🔄 Atualizando status:', {\r\n        orderId,\r\n        newStatus,\r\n        userRole,\r\n        currentUserId: user._id,\r\n        orderSellerId: order.seller_id,\r\n        orderBuyerId: order.buyer_id\r\n      });\r\n\r\n      const result = await orderService.updateOrderStatus(orderId, newStatus, userRole);\r\n\r\n      if (result.success) {\r\n        toast.success(`Status atualizado para: ${newStatus}`);\r\n        await loadOrderDetails(); // Recarregar dados\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('💥 Erro ao atualizar status:', error);\r\n      toast.error('Erro ao atualizar status');\r\n    }\r\n\r\n    setUpdating(false);\r\n  };\r\n\r\n  // CORREÇÃO: Função para determinar o papel do usuário logado\r\n  const getUserRole = () => {\r\n    if (!user || !order) return null;\r\n\r\n    // Verificar se é vendedor\r\n    if (order.seller_id === user._id || order.seller?._id === user._id) {\r\n      return 'seller';\r\n    }\r\n\r\n    // Verificar se é comprador\r\n    if (order.buyer_id === user._id || order.buyer?._id === user._id) {\r\n      return 'buyer';\r\n    }\r\n\r\n    // Verificar pela estrutura do anúncio\r\n    if (order.ad_snapshot?.seller_id === user._id) {\r\n      return 'seller';\r\n    }\r\n\r\n    // Fallback: se criou o pedido, provavelmente é comprador\r\n    if (order.created_by === user._id) {\r\n      return 'buyer';\r\n    }\r\n\r\n    console.warn('⚠️ Não foi possível determinar o papel do usuário');\r\n    return null;\r\n  };\r\n\r\n  // CORREÇÃO: Função para obter dados do outro usuário (vendedor ou comprador)\r\n  const getOtherUser = () => {\r\n    if (!user || !order) return null;\r\n\r\n    const userRole = getUserRole();\r\n\r\n    if (userRole === 'seller') {\r\n      // Se é vendedor, retornar dados do comprador\r\n      return order.buyer || order.buyer_details || {\r\n        _id: order.buyer_id,\r\n        username: order.buyer_username || 'Comprador',\r\n        first_name: order.buyer_name || 'Comprador',\r\n        last_name: '',\r\n        email: order.buyer_email || '',\r\n        phone: order.buyer_phone || ''\r\n      };\r\n    } else if (userRole === 'buyer') {\r\n      // Se é comprador, retornar dados do vendedor\r\n      return order.seller || order.seller_details || order.ad_snapshot?.seller || {\r\n        _id: order.seller_id || order.ad_snapshot?.seller_id,\r\n        username: order.seller_username || order.ad_snapshot?.seller_username || 'Vendedor',\r\n        first_name: order.seller_name || order.ad_snapshot?.seller_name || 'Vendedor',\r\n        last_name: '',\r\n        email: order.seller_email || '',\r\n        phone: order.seller_phone || ''\r\n      };\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    const colors = {\r\n      pending: 'warning',\r\n      paid: 'primary',\r\n      shipped: 'info',\r\n      delivered: 'success',\r\n      cancelled: 'danger'\r\n    };\r\n    return colors[status] || 'secondary';\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    const icons = {\r\n      pending: Clock,\r\n      paid: CreditCard,\r\n      shipped: Truck,\r\n      delivered: CheckCircle,\r\n      cancelled: XCircle\r\n    };\r\n    const Icon = icons[status] || Clock;\r\n    return <Icon className=\"w-4 h-4\" />;\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    const texts = {\r\n      pending: 'Pendente',\r\n      paid: 'Pago',\r\n      shipped: 'Enviado',\r\n      delivered: 'Entregue',\r\n      cancelled: 'Cancelado'\r\n    };\r\n    return texts[status] || status;\r\n  };\r\n\r\n  // CORREÇÃO: Função para determinar quais ações o usuário pode fazer\r\n  const getAvailableActions = () => {\r\n    if (!user || !order) return [];\r\n\r\n    const userRole = getUserRole();\r\n    const actions = [];\r\n\r\n    console.log('🎯 Determinando ações disponíveis:', {\r\n      userRole,\r\n      currentStatus: order.status,\r\n      userId: user._id\r\n    });\r\n\r\n    if (userRole === 'seller') {\r\n      // Ações do vendedor\r\n      switch (order.status) {\r\n        case 'pending':\r\n          actions.push({\r\n            action: 'paid',\r\n            label: 'Confirmar Pagamento',\r\n            color: 'primary',\r\n            description: 'Marcar como pago após receber o pagamento'\r\n          });\r\n          actions.push({\r\n            action: 'cancelled',\r\n            label: 'Cancelar Pedido',\r\n            color: 'danger',\r\n            description: 'Cancelar este pedido'\r\n          });\r\n          break;\r\n        case 'paid':\r\n          actions.push({\r\n            action: 'shipped',\r\n            label: 'Marcar como Enviado',\r\n            color: 'info',\r\n            description: 'Confirmar que o item foi enviado'\r\n          });\r\n          break;\r\n        case 'shipped':\r\n          actions.push({\r\n            action: 'delivered',\r\n            label: 'Marcar como Entregue',\r\n            color: 'success',\r\n            description: 'Confirmar que foi entregue'\r\n          });\r\n          break;\r\n      }\r\n    } else if (userRole === 'buyer') {\r\n      // Ações do comprador\r\n      switch (order.status) {\r\n        case 'pending':\r\n          actions.push({\r\n            action: 'cancelled',\r\n            label: 'Cancelar Pedido',\r\n            color: 'danger',\r\n            description: 'Cancelar este pedido'\r\n          });\r\n          break;\r\n        case 'shipped':\r\n          actions.push({\r\n            action: 'delivered',\r\n            label: 'Confirmar Recebimento',\r\n            color: 'success',\r\n            description: 'Confirmar que recebi o item'\r\n          });\r\n          break;\r\n      }\r\n    }\r\n\r\n    console.log('✅ Ações disponíveis:', actions);\r\n    return actions;\r\n  };\r\n\r\n  // Verificar se pode avaliar o pedido\r\n  const canRate = () => {\r\n    if (!order || (order.status !== 'completed' && order.status !== 'delivered') || order.rating_submitted) {\r\n      return false;\r\n    }\r\n    \r\n    const userRole = getUserRole();\r\n    if (userRole === 'buyer' && !order.seller_rating) {\r\n      return true;\r\n    }\r\n    if (userRole === 'seller' && !order.buyer_rating) {\r\n      return true;\r\n    }\r\n    \r\n    return false;\r\n  };\r\n\r\n  const handleRatingSuccess = () => {\r\n    loadOrderDetails();\r\n    toast.success('Avaliação enviada com sucesso!');\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString('pt-BR', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <LoadingSpinner size=\"lg\" />\r\n        </div>\r\n    );\r\n  }\r\n\r\n  if (!order) {\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center\">\r\n          <div className=\"text-center\">\r\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">\r\n              Pedido não encontrado\r\n            </h2>\r\n            <Button onClick={() => navigate('/orders')}>\r\n              Voltar aos Pedidos\r\n            </Button>\r\n          </div>\r\n        </div>\r\n    );\r\n  }\r\n\r\n  const userRole = getUserRole();\r\n  const otherUser = getOtherUser();\r\n  const availableActions = getAvailableActions();\r\n\r\n  console.log('🎯 Renderização final:', {\r\n    userRole,\r\n    otherUser,\r\n    availableActions,\r\n    orderStatus: order.status\r\n  });\r\n\r\n  return (\r\n      <div className=\"min-h-screen bg-gray-50 py-8\">\r\n        <div className=\"container mx-auto px-4 max-w-6xl\">\r\n          {/* Header */}\r\n          <div className=\"mb-6\">\r\n            <button\r\n                onClick={() => navigate('/orders')}\r\n                className=\"flex items-center text-blue-600 hover:text-blue-800 mb-4 transition-colors\"\r\n            >\r\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n              Voltar aos Pedidos\r\n            </button>\r\n\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">\r\n                  Pedido #{order._id?.slice(-8) || 'N/A'}\r\n                </h1>\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <Badge variant={getStatusColor(order.status)} className=\"flex items-center\">\r\n                    {getStatusIcon(order.status)}\r\n                    <span className=\"ml-1\">{getStatusText(order.status)}</span>\r\n                  </Badge>\r\n                  <span className=\"text-sm text-gray-600\">\r\n                  {formatDate(order.created_at)}\r\n                </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-3\">\r\n                <Button\r\n                    onClick={loadOrderDetails}\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    disabled={loading}\r\n                >\r\n                  <RefreshCw className={`w-4 h-4 mr-2 ${loading ? 'animate-spin' : ''}`} />\r\n                  Atualizar\r\n                </Button>\r\n\r\n                <Button\r\n                    onClick={() => setShowChat(!showChat)}\r\n                    variant=\"outline\"\r\n                >\r\n                  <MessageCircle className=\"w-4 h-4 mr-2\" />\r\n                  {showChat ? 'Fechar Chat' : 'Abrir Chat'}\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Debug Info (apenas em desenvolvimento) */}\r\n          {process.env.NODE_ENV === 'development' && (\r\n              <div className=\"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n                <h3 className=\"font-semibold text-yellow-800 mb-2\">🐛 Debug Info</h3>\r\n                <div className=\"text-sm text-yellow-700 space-y-1\">\r\n                  <p><strong>Usuário atual:</strong> {user._id} ({user.username})</p>\r\n                  <p><strong>Papel do usuário:</strong> {userRole || 'Indefinido'}</p>\r\n                  <p><strong>Seller ID:</strong> {order.seller_id || 'N/A'}</p>\r\n                  <p><strong>Buyer ID:</strong> {order.buyer_id || 'N/A'}</p>\r\n                  <p><strong>Created By:</strong> {order.created_by || 'N/A'}</p>\r\n                  <p><strong>Outro usuário:</strong> {otherUser?.username || 'N/A'}</p>\r\n                </div>\r\n              </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n            {/* Coluna Principal */}\r\n            <div className=\"lg:col-span-2 space-y-6\">\r\n              {/* Informações do Produto */}\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <h2 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\">\r\n                  <Package className=\"w-5 h-5 mr-2\" />\r\n                  Produto\r\n                </h2>\r\n\r\n                <div className=\"flex items-start space-x-4\">\r\n                  <div className=\"w-24 h-24 bg-gray-200 rounded-lg overflow-hidden flex-shrink-0\">\r\n                    {order.ad_snapshot?.image_url ? (\r\n                        <img\r\n                            src={order.ad_snapshot.image_url}\r\n                            alt={order.ad_snapshot.title}\r\n                            className=\"w-full h-full object-cover\"\r\n                        />\r\n                    ) : (\r\n                        <div className=\"w-full h-full flex items-center justify-center\">\r\n                          <Package className=\"w-8 h-8 text-gray-400\" />\r\n                        </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"flex-1\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">\r\n                      {order.ad_snapshot?.title || 'Produto não informado'}\r\n                    </h3>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                      <div>\r\n                        <span className=\"text-gray-600\">Jogo:</span>\r\n                        <div className=\"font-medium\">{order.ad_snapshot?.game_name || 'N/A'}</div>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"text-gray-600\">Plataforma:</span>\r\n                        <div className=\"font-medium\">{order.ad_snapshot?.platform || 'N/A'}</div>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"text-gray-600\">Estado:</span>\r\n                        <div className=\"font-medium\">{order.ad_snapshot?.condition || 'N/A'}</div>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"text-gray-600\">Quantidade:</span>\r\n                        <div className=\"font-medium\">{order.quantity || 1}</div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"text-right\">\r\n                    <div className=\"text-2xl font-bold text-green-600\">\r\n                      R$ {parseFloat(order.total_price || 0).toFixed(2)}\r\n                    </div>\r\n                    {order.quantity > 1 && (\r\n                        <div className=\"text-sm text-gray-600\">\r\n                          R$ {parseFloat(order.unit_price || 0).toFixed(2)} cada\r\n                        </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {order.notes && (\r\n                    <div className=\"mt-4 p-3 bg-gray-50 rounded-lg\">\r\n                      <p className=\"text-sm text-gray-700\">\r\n                        <strong>Observações:</strong> {order.notes}\r\n                      </p>\r\n                    </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Endereço de Entrega */}\r\n              {order.shipping_address && (\r\n                  <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                    <h2 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\">\r\n                      <MapPin className=\"w-5 h-5 mr-2\" />\r\n                      Endereço de Entrega\r\n                    </h2>\r\n\r\n                    <div className=\"space-y-2 text-sm\">\r\n                      <div>\r\n                        <strong>{order.contact?.first_name} {order.contact?.last_name}</strong>\r\n                      </div>\r\n                      <div>\r\n                        {order.shipping_address.street}, {order.shipping_address.number}\r\n                      </div>\r\n                      {order.shipping_address.complement && (\r\n                          <div>{order.shipping_address.complement}</div>\r\n                      )}\r\n                      <div>\r\n                        {order.shipping_address.neighborhood} - {order.shipping_address.city}/{order.shipping_address.state}\r\n                      </div>\r\n                      <div>CEP: {order.shipping_address.zipcode}</div>\r\n\r\n                      {order.contact?.phone && (\r\n                          <div className=\"flex items-center mt-3\">\r\n                            <Phone className=\"w-4 h-4 mr-2 text-gray-600\" />\r\n                            {order.contact.phone}\r\n                          </div>\r\n                      )}\r\n                      {order.contact?.email && (\r\n                          <div className=\"flex items-center\">\r\n                            <Mail className=\"w-4 h-4 mr-2 text-gray-600\" />\r\n                            {order.contact.email}\r\n                          </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n              )}\r\n\r\n              {/* Timeline do Pedido */}\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <h2 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\">\r\n                  <Clock className=\"w-5 h-5 mr-2\" />\r\n                  Histórico do Pedido\r\n                </h2>\r\n\r\n                <div className=\"space-y-4\">\r\n                  {order.status_history?.map((status, index) => (\r\n                      <div key={index} className=\"flex items-center space-x-4\">\r\n                        <div className={`w-3 h-3 rounded-full ${\r\n                            status.status === order.status ? 'bg-blue-600' : 'bg-gray-300'\r\n                        }`}></div>\r\n                        <div>\r\n                          <div className=\"font-medium\">{getStatusText(status.status)}</div>\r\n                          <div className=\"text-sm text-gray-600\">\r\n                            {formatDate(status.timestamp)}\r\n                            {status.updated_by && ` - por ${status.updated_by}`}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                  )) || (\r\n                      <div className=\"text-sm text-gray-600\">\r\n                        <div className=\"flex items-center space-x-4\">\r\n                          <div className=\"w-3 h-3 rounded-full bg-blue-600\"></div>\r\n                          <div>\r\n                            <div className=\"font-medium\">Pedido Criado</div>\r\n                            <div className=\"text-sm text-gray-600\">\r\n                              {formatDate(order.created_at)}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Chat */}\r\n              {showChat && (\r\n                  <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                    <h2 className=\"text-xl font-semibold text-gray-800 mb-4 flex items-center\">\r\n                      <MessageCircle className=\"w-5 h-5 mr-2\" />\r\n                      Chat do Pedido\r\n                    </h2>\r\n                    <ChatRoom orderId={orderId} onClose={() => setShowChat(false)} />\r\n                  </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Sidebar */}\r\n            <div className=\"lg:col-span-1 space-y-6\">\r\n              {/* Informações do Outro Usuário */}\r\n              {otherUser && (\r\n                  <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\r\n                      <User className=\"w-5 h-5 mr-2\" />\r\n                      {userRole === 'seller' ? 'Comprador' : 'Vendedor'}\r\n                    </h3>\r\n\r\n                    <div className=\"flex items-center space-x-3 mb-4\">\r\n                      <div className=\"w-12 h-12 bg-gray-300 rounded-full flex items-center justify-center\">\r\n                        {otherUser.profile_pic ? (\r\n                            <img\r\n                                src={otherUser.profile_pic}\r\n                                alt={otherUser.username}\r\n                                className=\"w-12 h-12 rounded-full object-cover\"\r\n                            />\r\n                        ) : (\r\n                            <User className=\"w-6 h-6 text-gray-600\" />\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"font-semibold text-gray-800\">\r\n                          {otherUser.first_name} {otherUser.last_name}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-600\">\r\n                          @{otherUser.username}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-2 text-sm text-gray-600 mb-4\">\r\n                      <div className=\"flex items-center\">\r\n                        <Star className=\"w-4 h-4 mr-2 text-yellow-500\" />\r\n                        Avaliação: 4.8 (23 vendas)\r\n                      </div>\r\n                      <div className=\"flex items-center\">\r\n                        <Calendar className=\"w-4 h-4 mr-2\" />\r\n                        Membro desde 2023\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <Link\r\n                          to={`/users/${otherUser._id}`}\r\n                          className=\"block w-full text-center\"\r\n                      >\r\n                        <Button variant=\"outline\" className=\"w-full\">\r\n                          Ver Perfil\r\n                        </Button>\r\n                      </Link>\r\n\r\n                      <Button\r\n                          className=\"w-full\"\r\n                          onClick={() => setShowChat(true)}\r\n                      >\r\n                        <MessageCircle className=\"w-4 h-4 mr-2\" />\r\n                        Enviar Mensagem\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n              )}\r\n\r\n              {/* Ações Disponíveis */}\r\n              {(availableActions.length > 0 || canRate()) && (\r\n                  <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\r\n                      Ações Disponíveis\r\n                    </h3>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      {availableActions.map((actionItem, index) => (\r\n                          <div key={index}>\r\n                            <Button\r\n                                onClick={() => handleStatusUpdate(actionItem.action)}\r\n                                disabled={updating}\r\n                                variant={actionItem.color === 'danger' ? 'danger' : 'primary'}\r\n                                className=\"w-full\"\r\n                            >\r\n                              {updating ? 'Atualizando...' : actionItem.label}\r\n                            </Button>\r\n                            {actionItem.description && (\r\n                                <p className=\"text-xs text-gray-600 mt-1\">\r\n                                  {actionItem.description}\r\n                                </p>\r\n                            )}\r\n                          </div>\r\n                      ))}\r\n                      \r\n                      {/* Botão de Avaliação */}\r\n                      {canRate() && (\r\n                          <div>\r\n                            <Button\r\n                                onClick={() => setShowRatingModal(true)}\r\n                                variant=\"primary\"\r\n                                className=\"w-full\"\r\n                            >\r\n                              <Star className=\"w-4 h-4 mr-2\" />\r\n                              Avaliar {getUserRole() === 'buyer' ? 'Vendedor' : 'Comprador'}\r\n                            </Button>\r\n                            <p className=\"text-xs text-gray-600 mt-1\">\r\n                              Compartilhe sua experiência com esta transação\r\n                            </p>\r\n                          </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n              )}\r\n\r\n              {/* Informações do Pedido */}\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\r\n                  Detalhes do Pedido\r\n                </h3>\r\n\r\n                <div className=\"space-y-3 text-sm\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">ID do Pedido:</span>\r\n                    <span className=\"font-mono\">#{order._id?.slice(-8)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Data do Pedido:</span>\r\n                    <span>{formatDate(order.created_at)}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Método de Pagamento:</span>\r\n                    <span>{order.payment_method || 'A combinar'}</span>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-gray-600\">Status:</span>\r\n                    <Badge variant={getStatusColor(order.status)}>\r\n                      {getStatusText(order.status)}\r\n                    </Badge>\r\n                  </div>\r\n                  <div className=\"border-t pt-3\">\r\n                    <div className=\"flex justify-between font-semibold\">\r\n                      <span>Total:</span>\r\n                      <span className=\"text-green-600\">\r\n                      R$ {parseFloat(order.total_price || 0).toFixed(2)}\r\n                    </span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Reportar Problema */}\r\n              <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">\r\n                  Suporte\r\n                </h3>\r\n                <p className=\"text-sm text-gray-600 mb-3\">\r\n                  Problemas com este pedido?\r\n                </p>\r\n                <Button variant=\"outline\" size=\"sm\" className=\"w-full\">\r\n                  <Flag className=\"w-4 h-4 mr-2\" />\r\n                  Reportar Problema\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Modal de Avaliação */}\r\n        <RatingModal\r\n          isOpen={showRatingModal}\r\n          onClose={() => setShowRatingModal(false)}\r\n          order={order}\r\n          onSuccess={handleRatingSuccess}\r\n        />\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Card, \r\n  Button, \r\n  Modal, \r\n  Badge, \r\n  LoadingSpinner, \r\n  Alert, \r\n  Pagination,\r\n  ImageUpload \r\n} from '../Common';\r\nimport { useApi } from '../../hooks';\r\nimport {\r\n  Plus,\r\n  Edit3,\r\n  Trash2,\r\n  Eye,\r\n  Star,\r\n  Upload,\r\n  Image as ImageIcon,\r\n  Tag,\r\n  Globe,\r\n  Search,\r\n  Filter,\r\n  MoreVertical,\r\n  Zap,\r\n  Users,\r\n  TrendingUp\r\n} from 'lucide-react';\r\n\r\nconst GamesManagement = () => {\r\n  const [games, setGames] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [modalType, setModalType] = useState('create');\r\n  const [selectedGame, setSelectedGame] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n\r\n  const api = useApi();\r\n\r\n  useEffect(() => {\r\n    loadGames();\r\n  }, [currentPage, searchTerm, statusFilter]);\r\n\r\n  const loadGames = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get('/games');\r\n      // A API retorna {success: true, data: {games: []}}\r\n      if (response.success && response.data?.games) {\r\n        setGames(response.data.games);\r\n      } else {\r\n        setGames([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar jogos:', error);\r\n      setGames([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateGame = () => {\r\n    setModalType('create');\r\n    setSelectedGame(null);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleEditGame = (game) => {\r\n    setModalType('edit');\r\n    setSelectedGame(game);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleDeleteGame = async (gameId) => {\r\n    if (window.confirm('Tem certeza que deseja deletar este jogo?')) {\r\n      try {\r\n        await api.delete(`/games/${gameId}`);\r\n        await loadGames();\r\n      } catch (error) {\r\n        console.error('Erro ao deletar jogo:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleToggleFeatured = async (gameId, currentStatus) => {\r\n    try {\r\n      await api.put(`/games/${gameId}`, {\r\n        is_featured: !currentStatus\r\n      });\r\n      await loadGames();\r\n    } catch (error) {\r\n      console.error('Erro ao alterar destaque:', error);\r\n    }\r\n  };\r\n\r\n  const handleToggleActive = async (gameId, currentStatus) => {\r\n    try {\r\n      await api.put(`/games/${gameId}`, {\r\n        is_active: !currentStatus\r\n      });\r\n      await loadGames();\r\n    } catch (error) {\r\n      console.error('Erro ao alterar status:', error);\r\n    }\r\n  };\r\n\r\n  const filteredGames = games.filter(game => {\r\n    const matchesSearch = game.name.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesStatus = statusFilter === 'all' || \r\n      (statusFilter === 'active' && game.is_active) ||\r\n      (statusFilter === 'inactive' && !game.is_active) ||\r\n      (statusFilter === 'featured' && game.is_featured);\r\n    \r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-xl font-semibold text-gray-900\">Gestão de Jogos</h2>\r\n          <p className=\"text-gray-600\">Gerencie jogos, categorias e destaques</p>\r\n        </div>\r\n        <Button\r\n          onClick={handleCreateGame}\r\n          className=\"flex items-center gap-2\"\r\n        >\r\n          <Plus className=\"w-4 h-4\" />\r\n          Adicionar Jogo\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex flex-col md:flex-row gap-4\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"relative\">\r\n              <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Buscar jogos...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"all\">Todos</option>\r\n              <option value=\"active\">Ativos</option>\r\n              <option value=\"inactive\">Inativos</option>\r\n              <option value=\"featured\">Em Destaque</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <StatCard\r\n          title=\"Total de Jogos\"\r\n          value={games.length}\r\n          icon={Globe}\r\n          color=\"blue\"\r\n        />\r\n        <StatCard\r\n          title=\"Jogos Ativos\"\r\n          value={games.filter(g => g.is_active).length}\r\n          icon={Zap}\r\n          color=\"green\"\r\n        />\r\n        <StatCard\r\n          title=\"Em Destaque\"\r\n          value={games.filter(g => g.is_featured).length}\r\n          icon={Star}\r\n          color=\"yellow\"\r\n        />\r\n        <StatCard\r\n          title=\"Com Anúncios\"\r\n          value={games.reduce((total, game) => total + (game.ads_count || 0), 0)}\r\n          icon={TrendingUp}\r\n          color=\"purple\"\r\n        />\r\n      </div>\r\n\r\n      {/* Games Grid */}\r\n      {filteredGames.length === 0 ? (\r\n        <Card className=\"p-8 text-center\">\r\n          <Globe className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Nenhum jogo encontrado</h3>\r\n          <p className=\"text-gray-600 mb-4\">Comece adicionando o primeiro jogo à plataforma</p>\r\n          <Button onClick={handleCreateGame}>\r\n            Adicionar Primeiro Jogo\r\n          </Button>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n          {filteredGames.map((game) => (\r\n            <GameCard\r\n              key={game._id}\r\n              game={game}\r\n              onEdit={handleEditGame}\r\n              onDelete={handleDeleteGame}\r\n              onToggleFeatured={handleToggleFeatured}\r\n              onToggleActive={handleToggleActive}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <Pagination\r\n          currentPage={currentPage}\r\n          totalPages={totalPages}\r\n          onPageChange={setCurrentPage}\r\n        />\r\n      )}\r\n\r\n      {/* Modal */}\r\n      {showModal && (\r\n        <GameModal\r\n          type={modalType}\r\n          game={selectedGame}\r\n          onClose={() => setShowModal(false)}\r\n          onSave={loadGames}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Game Card Component\r\nconst GameCard = ({ game, onEdit, onDelete, onToggleFeatured, onToggleActive }) => {\r\n  const [showMenu, setShowMenu] = useState(false);\r\n\r\n  return (\r\n    <Card className=\"overflow-hidden hover:shadow-lg transition-shadow\">\r\n      <div className=\"relative\">\r\n        <img\r\n          src={game.image_url || '/placeholder-game.png'}\r\n          alt={game.name}\r\n          className=\"w-full h-48 object-cover\"\r\n        />\r\n        \r\n        {/* Status Badges */}\r\n        <div className=\"absolute top-2 left-2 flex gap-1\">\r\n          {game.is_featured && (\r\n            <Badge variant=\"warning\" size=\"sm\" className=\"flex items-center gap-1\">\r\n              <Star className=\"w-3 h-3\" />\r\n              Destaque\r\n            </Badge>\r\n          )}\r\n          {!game.is_active && (\r\n            <Badge variant=\"danger\" size=\"sm\">\r\n              Inativo\r\n            </Badge>\r\n          )}\r\n        </div>\r\n\r\n        {/* Menu Button */}\r\n        <div className=\"absolute top-2 right-2\">\r\n          <div className=\"relative\">\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={() => setShowMenu(!showMenu)}\r\n              className=\"bg-white/90 hover:bg-white\"\r\n            >\r\n              <MoreVertical className=\"w-4 h-4\" />\r\n            </Button>\r\n            \r\n            {showMenu && (\r\n              <div className=\"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-10\">\r\n                <button\r\n                  onClick={() => onEdit(game)}\r\n                  className=\"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2\"\r\n                >\r\n                  <Edit3 className=\"w-4 h-4\" />\r\n                  Editar\r\n                </button>\r\n                <button\r\n                  onClick={() => onToggleFeatured(game._id, game.is_featured)}\r\n                  className=\"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2\"\r\n                >\r\n                  <Star className=\"w-4 h-4\" />\r\n                  {game.is_featured ? 'Remover Destaque' : 'Destacar'}\r\n                </button>\r\n                <button\r\n                  onClick={() => onToggleActive(game._id, game.is_active)}\r\n                  className=\"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2\"\r\n                >\r\n                  <Zap className=\"w-4 h-4\" />\r\n                  {game.is_active ? 'Desativar' : 'Ativar'}\r\n                </button>\r\n                <hr className=\"my-1\" />\r\n                <button\r\n                  onClick={() => onDelete(game._id)}\r\n                  className=\"w-full px-3 py-2 text-left text-sm hover:bg-red-50 text-red-600 flex items-center gap-2\"\r\n                >\r\n                  <Trash2 className=\"w-4 h-4\" />\r\n                  Deletar\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-4\">\r\n        <h3 className=\"font-semibold text-gray-900 mb-1\">{game.name}</h3>\r\n        <p className=\"text-sm text-gray-600 mb-2\">{game.platform}</p>\r\n        {game.description && (\r\n          <p className=\"text-xs text-gray-500 line-clamp-2\">{game.description}</p>\r\n        )}\r\n        \r\n        <div className=\"mt-3 flex items-center justify-between\">\r\n          <span className=\"text-xs text-gray-500\">\r\n            Criado em {new Date(game.created_at).toLocaleDateString()}\r\n          </span>\r\n          <div className=\"flex items-center gap-1\">\r\n            <Users className=\"w-3 h-3 text-gray-400\" />\r\n            <span className=\"text-xs text-gray-500\">{game.ads_count || 0} ads</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\n// Game Modal Component\r\nconst GameModal = ({ type, game, onClose, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    image_url: '',\r\n    platform: 'PC',\r\n    category: '',\r\n    is_featured: false,\r\n    is_active: true\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const api = useApi();\r\n\r\n  useEffect(() => {\r\n    if (game) {\r\n      setFormData(game);\r\n    }\r\n  }, [game]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      if (type === 'create') {\r\n        await api.post('/games', formData);\r\n      } else {\r\n        await api.put(`/games/${game._id}`, formData);\r\n      }\r\n      onSave();\r\n      onClose();\r\n    } catch (error) {\r\n      setError(error.response?.data?.message || 'Erro ao salvar jogo');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal onClose={onClose} size=\"lg\">\r\n      <form onSubmit={handleSubmit} className=\"p-6\">\r\n        <h2 className=\"text-xl font-semibold mb-6\">\r\n          {type === 'create' ? 'Adicionar Novo Jogo' : 'Editar Jogo'}\r\n        </h2>\r\n\r\n        {error && <Alert type=\"error\" message={error} className=\"mb-4\" />}\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          {/* Left Column */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Nome do Jogo *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.name}\r\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Plataforma\r\n              </label>\r\n              <select\r\n                value={formData.platform}\r\n                onChange={(e) => setFormData({ ...formData, platform: e.target.value })}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              >\r\n                <option value=\"PC\">PC</option>\r\n                <option value=\"PlayStation\">PlayStation</option>\r\n                <option value=\"Xbox\">Xbox</option>\r\n                <option value=\"Nintendo\">Nintendo</option>\r\n                <option value=\"Mobile\">Mobile</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Categoria\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={formData.category}\r\n                onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n                placeholder=\"Ex: FPS, RPG, Battle Royale...\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                URL da Imagem\r\n              </label>\r\n              <input\r\n                type=\"url\"\r\n                value={formData.image_url}\r\n                onChange={(e) => setFormData({ ...formData, image_url: e.target.value })}\r\n                placeholder=\"https://exemplo.com/imagem.jpg\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Column */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Descrição\r\n              </label>\r\n              <textarea\r\n                value={formData.description}\r\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                rows={6}\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                placeholder=\"Descrição do jogo...\"\r\n              />\r\n            </div>\r\n\r\n            {/* Preview */}\r\n            {formData.image_url && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Preview\r\n                </label>\r\n                <img\r\n                  src={formData.image_url}\r\n                  alt=\"Preview\"\r\n                  className=\"w-full h-32 object-cover rounded-lg border\"\r\n                  onError={(e) => {\r\n                    e.target.style.display = 'none';\r\n                  }}\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* Toggles */}\r\n            <div className=\"space-y-3\">\r\n              <label className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.is_featured}\r\n                  onChange={(e) => setFormData({ ...formData, is_featured: e.target.checked })}\r\n                  className=\"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50\"\r\n                />\r\n                <span className=\"ml-2 text-sm text-gray-700\">Jogo em destaque</span>\r\n              </label>\r\n\r\n              <label className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.is_active}\r\n                  onChange={(e) => setFormData({ ...formData, is_active: e.target.checked })}\r\n                  className=\"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50\"\r\n                />\r\n                <span className=\"ml-2 text-sm text-gray-700\">Jogo ativo</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end gap-3 mt-6 pt-6 border-t\">\r\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n            Cancelar\r\n          </Button>\r\n          <Button type=\"submit\" disabled={loading}>\r\n            {loading ? 'Salvando...' : type === 'create' ? 'Criar Jogo' : 'Salvar Alterações'}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\n// Stat Card Component\r\nconst StatCard = ({ title, value, icon: Icon, color }) => {\r\n  const colorClasses = {\r\n    blue: 'text-blue-600 bg-blue-100',\r\n    green: 'text-green-600 bg-green-100',\r\n    yellow: 'text-yellow-600 bg-yellow-100',\r\n    purple: 'text-purple-600 bg-purple-100'\r\n  };\r\n\r\n  return (\r\n    <Card className=\"p-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <p className=\"text-sm text-gray-600\">{title}</p>\r\n          <p className=\"text-2xl font-bold text-gray-900\">{value}</p>\r\n        </div>\r\n        <div className={`w-10 h-10 rounded-lg ${colorClasses[color]} flex items-center justify-center`}>\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default GamesManagement;","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Card, \r\n  Button, \r\n  Modal, \r\n  Badge, \r\n  LoadingSpinner, \r\n  Alert, \r\n  Pagination,\r\n  SafeImage \r\n} from '../Common';\r\nimport { useApi } from '../../hooks';\r\nimport {\r\n  MessageSquare,\r\n  Clock,\r\n  CheckCircle,\r\n  AlertTriangle,\r\n  User,\r\n  Search,\r\n  Filter\r\n} from 'lucide-react';\r\n\r\nconst TicketsManagement = () => {\r\n  const [tickets, setTickets] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n  const [selectedTicket, setSelectedTicket] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const api = useApi();\r\n\r\n  useEffect(() => {\r\n    loadTickets();\r\n  }, [statusFilter]);\r\n\r\n  const loadTickets = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get('/support/admin/tickets', {\r\n        params: {\r\n          status: statusFilter !== 'all' ? statusFilter : undefined\r\n        }\r\n      });\r\n      setTickets(response.data.tickets || []);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar tickets:', error);\r\n      setTickets([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleTicketResponse = (ticket) => {\r\n    setSelectedTicket(ticket);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const variants = {\r\n      open: 'danger',\r\n      in_progress: 'warning', \r\n      resolved: 'success',\r\n      closed: 'secondary'\r\n    };\r\n    return <Badge variant={variants[status]}>{status}</Badge>;\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-xl font-semibold text-gray-900\">Tickets de Suporte</h2>\r\n          <p className=\"text-gray-600\">Gerencie e responda tickets dos usuários</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex flex-col md:flex-row gap-4\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"relative\">\r\n              <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Buscar tickets...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <select\r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e.target.value)}\r\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          >\r\n            <option value=\"all\">Todos os Status</option>\r\n            <option value=\"open\">Abertos</option>\r\n            <option value=\"in_progress\">Em Progresso</option>\r\n            <option value=\"resolved\">Resolvidos</option>\r\n            <option value=\"closed\">Fechados</option>\r\n          </select>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Tickets List */}\r\n      {tickets.length === 0 ? (\r\n        <Card className=\"p-8 text-center\">\r\n          <MessageSquare className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Nenhum ticket encontrado</h3>\r\n          <p className=\"text-gray-600\">Não há tickets de suporte no momento</p>\r\n        </Card>\r\n      ) : (\r\n        <div className=\"space-y-4\">\r\n          {tickets.map((ticket) => (\r\n            <Card key={ticket._id} className=\"p-6\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-3 mb-3\">\r\n                    <h3 className=\"font-semibold text-lg\">{ticket.subject}</h3>\r\n                    {getStatusBadge(ticket.status)}\r\n                    <Badge variant=\"secondary\">{ticket.priority}</Badge>\r\n                  </div>\r\n                  \r\n                  <p className=\"text-gray-600 mb-3\">{ticket.message}</p>\r\n                  \r\n                  <div className=\"flex items-center gap-4 text-sm text-gray-500\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      {ticket.user?.profile_pic ? (\r\n                        <SafeImage\r\n                          src={ticket.user.profile_pic}\r\n                          alt={ticket.user.username}\r\n                          type=\"user\"\r\n                          size=\"thumbnail\"\r\n                          className=\"w-6 h-6 rounded-full object-cover\"\r\n                          fallbackIcon={<User className=\"w-4 h-4\" />}\r\n                        />\r\n                      ) : (\r\n                        <User className=\"w-4 h-4\" />\r\n                      )}\r\n                      {ticket.user?.username || 'Usuário'}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <Clock className=\"w-4 h-4\" />\r\n                      {new Date(ticket.created_at).toLocaleString()}\r\n                    </div>\r\n                    <div>Categoria: {ticket.category}</div>\r\n                  </div>\r\n\r\n                  {ticket.admin_response && (\r\n                    <div className=\"mt-4 p-4 bg-blue-50 rounded-lg\">\r\n                      <h4 className=\"font-medium text-blue-900 mb-2\">Resposta do Suporte:</h4>\r\n                      <p className=\"text-blue-800 text-sm\">{ticket.admin_response}</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"ml-4\">\r\n                  <Button\r\n                    onClick={() => handleTicketResponse(ticket)}\r\n                    size=\"sm\"\r\n                    variant={ticket.status === 'open' ? 'primary' : 'outline'}\r\n                  >\r\n                    {ticket.admin_response ? 'Atualizar' : 'Responder'}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Response Modal */}\r\n      {showModal && selectedTicket && (\r\n        <TicketResponseModal\r\n          ticket={selectedTicket}\r\n          onClose={() => setShowModal(false)}\r\n          onSave={loadTickets}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst TicketResponseModal = ({ ticket, onClose, onSave }) => {\r\n  const [formData, setFormData] = useState({\r\n    status: ticket.status || 'open',\r\n    admin_response: ticket.admin_response || '',\r\n    priority: ticket.priority || 'medium'\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const api = useApi();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      await api.put(`/support/admin/tickets/${ticket._id}`, formData);\r\n      onSave();\r\n      onClose();\r\n    } catch (error) {\r\n      setError(error.response?.data?.message || 'Erro ao atualizar ticket');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal \r\n      isOpen={true}\r\n      onClose={onClose} \r\n      title=\"Responder Ticket\"\r\n      size=\"lg\"\r\n    >\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        {error && <Alert type=\"error\" message={error} className=\"mb-4\" />}\r\n\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Status\r\n            </label>\r\n            <select\r\n              value={formData.status}\r\n              onChange={(e) => setFormData({ ...formData, status: e.target.value })}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"open\">Aberto</option>\r\n              <option value=\"in_progress\">Em Progresso</option>\r\n              <option value=\"resolved\">Resolvido</option>\r\n              <option value=\"closed\">Fechado</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Prioridade\r\n            </label>\r\n            <select\r\n              value={formData.priority}\r\n              onChange={(e) => setFormData({ ...formData, priority: e.target.value })}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"low\">Baixa</option>\r\n              <option value=\"medium\">Média</option>\r\n              <option value=\"high\">Alta</option>\r\n              <option value=\"urgent\">Urgente</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Resposta\r\n            </label>\r\n            <textarea\r\n              value={formData.admin_response}\r\n              onChange={(e) => setFormData({ ...formData, admin_response: e.target.value })}\r\n              rows={6}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              placeholder=\"Digite sua resposta ao usuário...\"\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end gap-3 mt-6 pt-6 border-t\">\r\n          <Button type=\"button\" variant=\"outline\" onClick={onClose}>\r\n            Cancelar\r\n          </Button>\r\n          <Button type=\"submit\" disabled={loading}>\r\n            {loading ? 'Salvando...' : 'Salvar Resposta'}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default TicketsManagement;","import React, { useState, useEffect } from 'react';\r\nimport { Button, Modal } from '../Common';\r\nimport { useApi } from '../../hooks';\r\nimport { \r\n  User, \r\n  Mail, \r\n  UserCheck, \r\n  Shield, \r\n  AlertCircle,\r\n  Save,\r\n  X\r\n} from 'lucide-react';\r\n\r\nconst UserEditModal = ({ isOpen, onClose, user, onUserUpdated }) => {\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    email: '',\r\n    first_name: '',\r\n    last_name: '',\r\n    bio: '',\r\n    role: 'user',\r\n    is_active: true,\r\n    is_verified: false,\r\n    profile_pic: ''\r\n  });\r\n\r\n  // Update form data when user prop changes\r\n  useEffect(() => {\r\n    if (user) {\r\n      setFormData({\r\n        username: user.username || '',\r\n        email: user.email || '',\r\n        first_name: user.first_name || '',\r\n        last_name: user.last_name || '',\r\n        bio: user.bio || '',\r\n        role: user.role || 'user',\r\n        is_active: user.is_active !== false,\r\n        is_verified: user.is_verified || false,\r\n        profile_pic: user.profile_pic || ''\r\n      });\r\n      setErrors({}); // Clear any previous errors\r\n    }\r\n  }, [user]);\r\n  \r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  \r\n  const api = useApi();\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: null\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    \r\n    if (!formData.username.trim()) {\r\n      newErrors.username = 'Username é obrigatório';\r\n    } else if (formData.username.length < 3) {\r\n      newErrors.username = 'Username deve ter pelo menos 3 caracteres';\r\n    }\r\n    \r\n    if (!formData.email.trim()) {\r\n      newErrors.email = 'Email é obrigatório';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\r\n      newErrors.email = 'Email inválido';\r\n    }\r\n    \r\n    if (formData.first_name && formData.first_name.length < 2) {\r\n      newErrors.first_name = 'Nome deve ter pelo menos 2 caracteres';\r\n    }\r\n    \r\n    if (formData.last_name && formData.last_name.length < 2) {\r\n      newErrors.last_name = 'Sobrenome deve ter pelo menos 2 caracteres';\r\n    }\r\n    \r\n    if (formData.bio && formData.bio.length > 500) {\r\n      newErrors.bio = 'Bio não pode ter mais de 500 caracteres';\r\n    }\r\n    \r\n    return newErrors;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    const newErrors = validateForm();\r\n    if (Object.keys(newErrors).length > 0) {\r\n      setErrors(newErrors);\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      // Prepare data - only send changed fields\r\n      const updateData = {};\r\n      Object.keys(formData).forEach(key => {\r\n        if (formData[key] !== user[key]) {\r\n          updateData[key] = formData[key];\r\n        }\r\n      });\r\n      \r\n      if (Object.keys(updateData).length === 0) {\r\n        onClose();\r\n        return;\r\n      }\r\n      \r\n      const response = await api.put(`/support/admin/users/${user._id}`, updateData);\r\n      \r\n      if (response.success) {\r\n        onUserUpdated(response.data);\r\n        onClose();\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao atualizar usuário:', error);\r\n      if (error.response?.data?.message) {\r\n        setErrors({ submit: error.response.data.message });\r\n      } else {\r\n        setErrors({ submit: 'Erro ao atualizar usuário' });\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleProfileImageChange = (imageUrl) => {\r\n    handleInputChange('profile_pic', imageUrl);\r\n  };\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <Modal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      title={`Editar Usuário: ${user.username}`}\r\n      size=\"lg\"\r\n    >\r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* Profile Image */}\r\n        <div className=\"flex justify-center\">\r\n          <div className=\"flex flex-col items-center space-y-2\">\r\n            <div className=\"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden\">\r\n              {formData.profile_pic ? (\r\n                <img \r\n                  src={formData.profile_pic} \r\n                  alt=\"Profile\" \r\n                  className=\"w-full h-full object-cover\"\r\n                />\r\n              ) : (\r\n                <User className=\"w-12 h-12 text-gray-400\" />\r\n              )}\r\n            </div>\r\n            <input\r\n              type=\"url\"\r\n              placeholder=\"URL da imagem de perfil\"\r\n              value={formData.profile_pic}\r\n              onChange={(e) => handleInputChange('profile_pic', e.target.value)}\r\n              className=\"text-sm px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Basic Information */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              <User className=\"w-4 h-4 inline mr-2\" />\r\n              Username *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.username}\r\n              onChange={(e) => handleInputChange('username', e.target.value)}\r\n              className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n                errors.username ? 'border-red-500' : 'border-gray-300'\r\n              }`}\r\n              placeholder=\"Username\"\r\n            />\r\n            {errors.username && (\r\n              <p className=\"text-red-500 text-sm mt-1 flex items-center\">\r\n                <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                {errors.username}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              <Mail className=\"w-4 h-4 inline mr-2\" />\r\n              Email *\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              value={formData.email}\r\n              onChange={(e) => handleInputChange('email', e.target.value)}\r\n              className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n                errors.email ? 'border-red-500' : 'border-gray-300'\r\n              }`}\r\n              placeholder=\"email@exemplo.com\"\r\n            />\r\n            {errors.email && (\r\n              <p className=\"text-red-500 text-sm mt-1 flex items-center\">\r\n                <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                {errors.email}\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Name Fields */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Primeiro Nome\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.first_name}\r\n              onChange={(e) => handleInputChange('first_name', e.target.value)}\r\n              className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n                errors.first_name ? 'border-red-500' : 'border-gray-300'\r\n              }`}\r\n              placeholder=\"Primeiro nome\"\r\n            />\r\n            {errors.first_name && (\r\n              <p className=\"text-red-500 text-sm mt-1 flex items-center\">\r\n                <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                {errors.first_name}\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Sobrenome\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.last_name}\r\n              onChange={(e) => handleInputChange('last_name', e.target.value)}\r\n              className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n                errors.last_name ? 'border-red-500' : 'border-gray-300'\r\n              }`}\r\n              placeholder=\"Sobrenome\"\r\n            />\r\n            {errors.last_name && (\r\n              <p className=\"text-red-500 text-sm mt-1 flex items-center\">\r\n                <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                {errors.last_name}\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Bio */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Bio\r\n          </label>\r\n          <textarea\r\n            value={formData.bio}\r\n            onChange={(e) => handleInputChange('bio', e.target.value)}\r\n            rows={3}\r\n            className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n              errors.bio ? 'border-red-500' : 'border-gray-300'\r\n            }`}\r\n            placeholder=\"Biografia do usuário...\"\r\n          />\r\n          <div className=\"flex justify-between text-sm text-gray-500 mt-1\">\r\n            <span>{formData.bio.length}/500 caracteres</span>\r\n            {errors.bio && (\r\n              <span className=\"text-red-500 flex items-center\">\r\n                <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                {errors.bio}\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Role and Status */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              <Shield className=\"w-4 h-4 inline mr-2\" />\r\n              Função\r\n            </label>\r\n            <select\r\n              value={formData.role}\r\n              onChange={(e) => handleInputChange('role', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"user\">Usuário</option>\r\n              <option value=\"admin\">Administrador</option>\r\n              <option value=\"support\">Suporte</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              <UserCheck className=\"w-4 h-4 inline mr-2\" />\r\n              Status\r\n            </label>\r\n            <select\r\n              value={formData.is_active}\r\n              onChange={(e) => handleInputChange('is_active', e.target.value === 'true')}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value={true}>Ativo</option>\r\n              <option value={false}>Inativo</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Verificado\r\n            </label>\r\n            <select\r\n              value={formData.is_verified}\r\n              onChange={(e) => handleInputChange('is_verified', e.target.value === 'true')}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value={true}>Verificado</option>\r\n              <option value={false}>Não Verificado</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Submit Error */}\r\n        {errors.submit && (\r\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n            <div className=\"flex items-center\">\r\n              <AlertCircle className=\"w-5 h-5 text-red-500 mr-2\" />\r\n              <span className=\"text-red-700\">{errors.submit}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex justify-end gap-3 pt-4 border-t\">\r\n          <Button\r\n            type=\"button\"\r\n            variant=\"outline\"\r\n            onClick={onClose}\r\n            disabled={loading}\r\n          >\r\n            <X className=\"w-4 h-4 mr-2\" />\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n          >\r\n            <Save className=\"w-4 h-4 mr-2\" />\r\n            {loading ? 'Salvando...' : 'Salvar Alterações'}\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default UserEditModal;","import React, { useState, useEffect } from 'react';\r\nimport { Card, Button, Badge, LoadingSpinner, Pagination, SafeImage } from '../Common';\r\nimport UserEditModal from './UserEditModal';\r\nimport { useApi } from '../../hooks';\r\nimport { \r\n  Users, \r\n  UserCheck, \r\n  UserX, \r\n  Activity,\r\n  Search,\r\n  Filter,\r\n  Shield,\r\n  Mail,\r\n  Calendar,\r\n  MoreVertical,\r\n  Edit3,\r\n  Eye\r\n} from 'lucide-react';\r\n\r\nconst UsersManagement = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [roleFilter, setRoleFilter] = useState('all');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n\r\n  const api = useApi();\r\n\r\n  useEffect(() => {\r\n    loadUsers();\r\n  }, [currentPage, searchTerm, roleFilter, statusFilter]);\r\n\r\n  const loadUsers = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get('/support/admin/users', {\r\n        params: {\r\n          page: currentPage,\r\n          limit: 20,\r\n          search: searchTerm || undefined,\r\n          role: roleFilter !== 'all' ? roleFilter : undefined,\r\n          status: statusFilter !== 'all' ? statusFilter : undefined\r\n        }\r\n      });\r\n      \r\n      if (response.success) {\r\n        setUsers(response.data?.users || []);\r\n        setTotalPages(response.data?.total_pages || 1);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar usuários:', error);\r\n      setUsers([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleToggleUserStatus = async (userId, currentStatus) => {\r\n    try {\r\n      await api.put(`/support/admin/users/${userId}`, {\r\n        is_active: !currentStatus\r\n      });\r\n      await loadUsers();\r\n    } catch (error) {\r\n      console.error('Erro ao alterar status do usuário:', error);\r\n    }\r\n  };\r\n\r\n  const handleEditUser = (user) => {\r\n    setSelectedUser(user);\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const handleUserUpdated = (updatedUser) => {\r\n    setUsers(prev => prev.map(user => \r\n      user._id === updatedUser._id ? updatedUser : user\r\n    ));\r\n  };\r\n\r\n  const handleCloseEditModal = () => {\r\n    setShowEditModal(false);\r\n    setSelectedUser(null);\r\n  };\r\n\r\n  const filteredUsers = users.filter(user => {\r\n    const matchesSearch = user.username.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         user.email?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesRole = roleFilter === 'all' || user.role === roleFilter;\r\n    const matchesStatus = statusFilter === 'all' || \r\n                         (statusFilter === 'active' && user.is_active) ||\r\n                         (statusFilter === 'inactive' && !user.is_active);\r\n    \r\n    return matchesSearch && matchesRole && matchesStatus;\r\n  });\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-xl font-semibold text-gray-900\">Gestão de Usuários</h2>\r\n          <p className=\"text-gray-600\">Gerencie usuários, permissões e atividades</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <StatCard\r\n          title=\"Total de Usuários\"\r\n          value={users.length}\r\n          icon={Users}\r\n          color=\"blue\"\r\n        />\r\n        <StatCard\r\n          title=\"Usuários Ativos\"\r\n          value={users.filter(u => u.is_active).length}\r\n          icon={UserCheck}\r\n          color=\"green\"\r\n        />\r\n        <StatCard\r\n          title=\"Administradores\"\r\n          value={users.filter(u => u.role === 'admin').length}\r\n          icon={Shield}\r\n          color=\"purple\"\r\n        />\r\n        <StatCard\r\n          title=\"Usuários Hoje\"\r\n          value={users.filter(u => {\r\n            const today = new Date().toDateString();\r\n            return new Date(u.created_at).toDateString() === today;\r\n          }).length}\r\n          icon={Activity}\r\n          color=\"orange\"\r\n        />\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex flex-col md:flex-row gap-4\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"relative\">\r\n              <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Buscar usuários...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <select\r\n              value={roleFilter}\r\n              onChange={(e) => setRoleFilter(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"all\">Todas as Funções</option>\r\n              <option value=\"user\">Usuário</option>\r\n              <option value=\"admin\">Administrador</option>\r\n              <option value=\"support\">Suporte</option>\r\n            </select>\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"all\">Todos os Status</option>\r\n              <option value=\"active\">Ativo</option>\r\n              <option value=\"inactive\">Inativo</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Users Table */}\r\n      <Card className=\"overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Usuário\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Email\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Função\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Status\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Cadastro\r\n                </th>\r\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Ações\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {filteredUsers.map((user) => (\r\n                <UserRow \r\n                  key={user._id} \r\n                  user={user} \r\n                  onToggleStatus={handleToggleUserStatus}\r\n                  onEdit={handleEditUser}\r\n                />\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <Pagination\r\n          currentPage={currentPage}\r\n          totalPages={totalPages}\r\n          onPageChange={setCurrentPage}\r\n        />\r\n      )}\r\n\r\n      {/* Edit User Modal */}\r\n      <UserEditModal\r\n        isOpen={showEditModal}\r\n        onClose={handleCloseEditModal}\r\n        user={selectedUser}\r\n        onUserUpdated={handleUserUpdated}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n// User Row Component\r\nconst UserRow = ({ user, onToggleStatus, onEdit }) => {\r\n  return (\r\n    <tr>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <div className=\"flex items-center\">\r\n          <div className=\"flex-shrink-0 h-10 w-10\">\r\n            <SafeImage\r\n              src={user.profile_pic || user.profile_image}\r\n              alt={user.username}\r\n              type=\"user\"\r\n              size=\"thumbnail\"\r\n              className=\"h-10 w-10 rounded-full object-cover\"\r\n              fallbackIcon={<Users className=\"w-6 h-6 text-gray-400\" />}\r\n            />\r\n          </div>\r\n          <div className=\"ml-4\">\r\n            <div className=\"text-sm font-medium text-gray-900\">{user.username}</div>\r\n            <div className=\"text-sm text-gray-500\">ID: {user._id}</div>\r\n          </div>\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <div className=\"flex items-center\">\r\n          <Mail className=\"w-4 h-4 text-gray-400 mr-2\" />\r\n          <span className=\"text-sm text-gray-900\">{user.email || 'N/A'}</span>\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <Badge \r\n          variant={user.role === 'admin' ? 'danger' : user.role === 'support' ? 'warning' : 'default'}\r\n        >\r\n          {user.role}\r\n        </Badge>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <Badge variant={user.is_active ? 'success' : 'danger'}>\r\n          {user.is_active ? 'Ativo' : 'Inativo'}\r\n        </Badge>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n        <div className=\"flex items-center\">\r\n          <Calendar className=\"w-4 h-4 mr-2\" />\r\n          {new Date(user.created_at).toLocaleDateString()}\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n        <div className=\"flex gap-2 justify-end\">\r\n          <Button\r\n            size=\"sm\"\r\n            variant=\"outline\"\r\n            onClick={() => onEdit(user)}\r\n            title=\"Editar usuário\"\r\n          >\r\n            <Edit3 className=\"w-4 h-4\" />\r\n          </Button>\r\n          <Button\r\n            size=\"sm\"\r\n            variant={user.is_active ? \"outline\" : \"default\"}\r\n            onClick={() => onToggleStatus(user._id, user.is_active)}\r\n          >\r\n            {user.is_active ? 'Desativar' : 'Ativar'}\r\n          </Button>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\n// Stat Card Component\r\nconst StatCard = ({ title, value, icon: Icon, color }) => {\r\n  const colorClasses = {\r\n    blue: 'text-blue-600 bg-blue-100',\r\n    green: 'text-green-600 bg-green-100',\r\n    purple: 'text-purple-600 bg-purple-100',\r\n    orange: 'text-orange-600 bg-orange-100'\r\n  };\r\n\r\n  return (\r\n    <Card className=\"p-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <p className=\"text-sm text-gray-600\">{title}</p>\r\n          <p className=\"text-2xl font-bold text-gray-900\">{value}</p>\r\n        </div>\r\n        <div className={`w-10 h-10 rounded-lg ${colorClasses[color]} flex items-center justify-center`}>\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default UsersManagement;","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Card, Button, Badge, LoadingSpinner, Pagination, Modal } from '../Common';\r\nimport { useApi } from '../../hooks';\r\nimport { \r\n  ShoppingBag, \r\n  Package, \r\n  TrendingUp, \r\n  Search,\r\n  Filter,\r\n  Calendar,\r\n  User,\r\n  Star,\r\n  Eye,\r\n  CheckCircle,\r\n  XCircle,\r\n  Clock\r\n} from 'lucide-react';\r\n\r\nconst OrdersManagement = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [showOrderModal, setShowOrderModal] = useState(false);\r\n\r\n  const api = useApi();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    loadOrders();\r\n  }, [currentPage, searchTerm, statusFilter]);\r\n\r\n  const loadOrders = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get('/support/admin/orders', {\r\n        params: {\r\n          page: currentPage,\r\n          limit: 20,\r\n          search: searchTerm || undefined,\r\n          status: statusFilter !== 'all' ? statusFilter : undefined\r\n        }\r\n      });\r\n      \r\n      if (response.success) {\r\n        setOrders(response.data?.orders || []);\r\n        setTotalPages(response.data?.total_pages || 1);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar pedidos:', error);\r\n      setOrders([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateOrderStatus = async (orderId, newStatus) => {\r\n    try {\r\n      await api.put(`/support/admin/orders/${orderId}`, {\r\n        status: newStatus\r\n      });\r\n      await loadOrders();\r\n    } catch (error) {\r\n      console.error('Erro ao atualizar status do pedido:', error);\r\n    }\r\n  };\r\n\r\n  const handleViewOrderDetails = async (orderId) => {\r\n    try {\r\n      const response = await api.get(`/admin/orders/${orderId}`);\r\n      if (response.success) {\r\n        setSelectedOrder(response.data);\r\n        setShowOrderModal(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar detalhes do pedido:', error);\r\n    }\r\n  };\r\n\r\n  const filteredOrders = orders.filter(order => {\r\n    const matchesSearch = order._id.includes(searchTerm) ||\r\n                         order.buyer_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         order.seller_name?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesStatus = statusFilter === 'all' || order.status === statusFilter;\r\n    \r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const totalRevenue = orders.reduce((sum, order) => \r\n    order.status === 'completed' ? sum + (order.total_price || 0) : sum, 0\r\n  );\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-xl font-semibold text-gray-900\">Gestão de Pedidos</h2>\r\n          <p className=\"text-gray-600\">Monitore e gerencie pedidos da plataforma</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <StatCard\r\n          title=\"Total de Pedidos\"\r\n          value={orders.length}\r\n          icon={ShoppingBag}\r\n          color=\"blue\"\r\n        />\r\n        <StatCard\r\n          title=\"Pedidos Completos\"\r\n          value={orders.filter(o => o.status === 'completed').length}\r\n          icon={CheckCircle}\r\n          color=\"green\"\r\n        />\r\n        <StatCard\r\n          title=\"Pendentes\"\r\n          value={orders.filter(o => o.status === 'pending').length}\r\n          icon={Clock}\r\n          color=\"orange\"\r\n        />\r\n        <StatCard\r\n          title=\"Receita Total\"\r\n          value={`R$ ${totalRevenue.toFixed(2)}`}\r\n          icon={TrendingUp}\r\n          color=\"purple\"\r\n        />\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex flex-col md:flex-row gap-4\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"relative\">\r\n              <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Buscar pedidos...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n              className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"all\">Todos os Status</option>\r\n              <option value=\"pending\">Pendente</option>\r\n              <option value=\"confirmed\">Confirmado</option>\r\n              <option value=\"shipped\">Enviado</option>\r\n              <option value=\"delivered\">Entregue</option>\r\n              <option value=\"completed\">Completo</option>\r\n              <option value=\"cancelled\">Cancelado</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Orders Table */}\r\n      <Card className=\"overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Pedido\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Comprador\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Vendedor\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Valor\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Status\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Data\r\n                </th>\r\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Ações\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {filteredOrders.map((order) => (\r\n                <OrderRow \r\n                  key={order._id} \r\n                  order={order} \r\n                  onUpdateStatus={handleUpdateOrderStatus}\r\n                  onViewDetails={handleViewOrderDetails}\r\n                />\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <Pagination\r\n          currentPage={currentPage}\r\n          totalPages={totalPages}\r\n          onPageChange={setCurrentPage}\r\n        />\r\n      )}\r\n\r\n      {/* Order Details Modal */}\r\n      <Modal \r\n        isOpen={showOrderModal} \r\n        onClose={() => setShowOrderModal(false)}\r\n        title=\"Detalhes do Pedido\"\r\n        size=\"lg\"\r\n      >\r\n        {selectedOrder && (\r\n          <OrderDetailsModal \r\n            order={selectedOrder} \r\n            onClose={() => setShowOrderModal(false)}\r\n          />\r\n        )}\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Order Row Component\r\nconst OrderRow = ({ order, onUpdateStatus, onViewDetails }) => {\r\n  const getStatusColor = (status) => {\r\n    const colors = {\r\n      pending: 'warning',\r\n      confirmed: 'info',\r\n      shipped: 'default',\r\n      delivered: 'success',\r\n      completed: 'success',\r\n      cancelled: 'danger'\r\n    };\r\n    return colors[status] || 'default';\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    const texts = {\r\n      pending: 'Pendente',\r\n      confirmed: 'Confirmado',\r\n      shipped: 'Enviado',\r\n      delivered: 'Entregue',\r\n      completed: 'Completo',\r\n      cancelled: 'Cancelado'\r\n    };\r\n    return texts[status] || status;\r\n  };\r\n\r\n  return (\r\n    <tr>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <div>\r\n          <div className=\"text-sm font-medium text-gray-900\">#{order._id.slice(-8)}</div>\r\n          <div className=\"text-sm text-gray-500\">{order.ad_title || 'N/A'}</div>\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <div className=\"flex items-center\">\r\n          <User className=\"w-4 h-4 text-gray-400 mr-2\" />\r\n          <span className=\"text-sm text-gray-900\">{order.buyer_name || 'N/A'}</span>\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <div className=\"flex items-center\">\r\n          <User className=\"w-4 h-4 text-gray-400 mr-2\" />\r\n          <span className=\"text-sm text-gray-900\">{order.seller_name || 'N/A'}</span>\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <span className=\"text-sm font-medium text-gray-900\">\r\n          R$ {(order.total_price || 0).toFixed(2)}\r\n        </span>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <Badge variant={getStatusColor(order.status)}>\r\n          {getStatusText(order.status)}\r\n        </Badge>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n        <div className=\"flex items-center\">\r\n          <Calendar className=\"w-4 h-4 mr-2\" />\r\n          {new Date(order.created_at).toLocaleDateString()}\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n        <div className=\"flex gap-2 justify-end\">\r\n          <Button \r\n            size=\"sm\" \r\n            variant=\"outline\"\r\n            onClick={() => onViewDetails(order._id)}\r\n            title=\"Ver detalhes do pedido\"\r\n          >\r\n            <Eye className=\"w-4 h-4\" />\r\n          </Button>\r\n          {order.status !== 'completed' && order.status !== 'cancelled' && (\r\n            <select\r\n              value={order.status}\r\n              onChange={(e) => onUpdateStatus(order._id, e.target.value)}\r\n              className=\"text-xs px-2 py-1 border border-gray-300 rounded\"\r\n            >\r\n              <option value=\"pending\">Pendente</option>\r\n              <option value=\"confirmed\">Confirmado</option>\r\n              <option value=\"shipped\">Enviado</option>\r\n              <option value=\"delivered\">Entregue</option>\r\n              <option value=\"completed\">Completo</option>\r\n              <option value=\"cancelled\">Cancelado</option>\r\n            </select>\r\n          )}\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\n// Stat Card Component\r\nconst StatCard = ({ title, value, icon: Icon, color }) => {\r\n  const colorClasses = {\r\n    blue: 'text-blue-600 bg-blue-100',\r\n    green: 'text-green-600 bg-green-100',\r\n    orange: 'text-orange-600 bg-orange-100',\r\n    purple: 'text-purple-600 bg-purple-100'\r\n  };\r\n\r\n  return (\r\n    <Card className=\"p-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <p className=\"text-sm text-gray-600\">{title}</p>\r\n          <p className=\"text-2xl font-bold text-gray-900\">{value}</p>\r\n        </div>\r\n        <div className={`w-10 h-10 rounded-lg ${colorClasses[color]} flex items-center justify-center`}>\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\n// Order Details Modal Component\r\nconst OrderDetailsModal = ({ order, onClose }) => {\r\n  // Helper function to format date\r\n  const formatDate = (dateString) => {\r\n    try {\r\n      if (!dateString) return 'Data não disponível';\r\n      const date = new Date(dateString);\r\n      return date.toLocaleString('pt-BR');\r\n    } catch (error) {\r\n      return 'Data inválida';\r\n    }\r\n  };\r\n\r\n  // Helper function to get user display name\r\n  const getUserDisplayName = (user) => {\r\n    if (!user) return 'N/A';\r\n    if (user.first_name && user.last_name) {\r\n      return `${user.first_name} ${user.last_name}`;\r\n    }\r\n    return user.username || 'N/A';\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Order Header */}\r\n      <div className=\"border-b pb-4\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <h3 className=\"text-lg font-semibold\">Pedido #{order._id?.slice(-8)}</h3>\r\n          <Badge variant={getStatusColor(order.status)}>\r\n            {getStatusText(order.status)}\r\n          </Badge>\r\n        </div>\r\n        <p className=\"text-gray-600\">\r\n          Criado em {formatDate(order.created_at)}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Order Info */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <div>\r\n          <h4 className=\"font-medium text-gray-900 mb-3\">Informações do Comprador</h4>\r\n          <div className=\"space-y-2 text-sm\">\r\n            <p><strong>Nome:</strong> {getUserDisplayName(order.buyer)}</p>\r\n            <p><strong>Email:</strong> {order.buyer?.email || 'N/A'}</p>\r\n            <p><strong>Username:</strong> {order.buyer?.username || 'N/A'}</p>\r\n            <p><strong>ID:</strong> {order.buyer_id}</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div>\r\n          <h4 className=\"font-medium text-gray-900 mb-3\">Informações do Vendedor</h4>\r\n          <div className=\"space-y-2 text-sm\">\r\n            <p><strong>Nome:</strong> {getUserDisplayName(order.seller)}</p>\r\n            <p><strong>Email:</strong> {order.seller?.email || 'N/A'}</p>\r\n            <p><strong>Username:</strong> {order.seller?.username || 'N/A'}</p>\r\n            <p><strong>ID:</strong> {order.seller_id}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Product Info */}\r\n      <div>\r\n        <h4 className=\"font-medium text-gray-900 mb-3\">Produto</h4>\r\n        <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n          <div className=\"flex items-center gap-4\">\r\n            {(order.ad?.image_url || order.ad?.images?.[0]) && (\r\n              <img \r\n                src={order.ad?.image_url || order.ad?.images?.[0]} \r\n                alt={order.ad?.title || 'Produto'}\r\n                className=\"w-16 h-16 object-cover rounded\"\r\n              />\r\n            )}\r\n            <div className=\"flex-1\">\r\n              <h5 className=\"font-medium\">{order.ad?.title || order.ad_title || 'Produto não identificado'}</h5>\r\n              <p className=\"text-sm text-gray-600\">{order.ad?.description || order.ad_description || 'Sem descrição'}</p>\r\n              <p className=\"text-sm text-gray-500\">Jogo: {order.ad?.game?.name || 'N/A'}</p>\r\n              <p className=\"text-lg font-bold text-green-600 mt-2\">\r\n                R$ {(order.total_price || order.price || 0).toFixed(2)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Order Timeline */}\r\n      {order.status_history && order.status_history.length > 0 && (\r\n        <div>\r\n          <h4 className=\"font-medium text-gray-900 mb-3\">Histórico do Pedido</h4>\r\n          <div className=\"space-y-3\">\r\n            {order.status_history.map((history, index) => (\r\n              <div key={index} className=\"flex items-center gap-3 text-sm\">\r\n                <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\r\n                <div className=\"flex-1\">\r\n                  <p className=\"font-medium\">{getStatusText(history.status)}</p>\r\n                  <p className=\"text-gray-600\">\r\n                    {new Date(history.timestamp).toLocaleString()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex justify-end pt-4 border-t\">\r\n        <Button onClick={onClose} variant=\"outline\">\r\n          Fechar\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Helper functions for the modal\r\nconst getStatusColor = (status) => {\r\n  const colors = {\r\n    pending: 'warning',\r\n    confirmed: 'info', \r\n    shipped: 'default',\r\n    delivered: 'success',\r\n    completed: 'success',\r\n    cancelled: 'danger'\r\n  };\r\n  return colors[status] || 'default';\r\n};\r\n\r\nconst getStatusText = (status) => {\r\n  const texts = {\r\n    pending: 'Pendente',\r\n    confirmed: 'Confirmado',\r\n    shipped: 'Enviado',\r\n    delivered: 'Entregue',\r\n    completed: 'Completo',\r\n    cancelled: 'Cancelado'\r\n  };\r\n  return texts[status] || status;\r\n};\r\n\r\nexport default OrdersManagement;","import React, { useState, useEffect } from 'react';\r\nimport { Card, Button, Badge, LoadingSpinner, Pagination, Modal } from '../Common';\r\nimport { useApi } from '../../hooks';\r\nimport { \r\n  Tag, \r\n  Package, \r\n  TrendingUp, \r\n  Search,\r\n  Filter,\r\n  Calendar,\r\n  User,\r\n  Star,\r\n  Eye,\r\n  Trash2,\r\n  Edit3,\r\n  AlertTriangle,\r\n  CheckCircle,\r\n  XCircle,\r\n  Clock\r\n} from 'lucide-react';\r\n\r\nconst AdsManagement = () => {\r\n  const [ads, setAds] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('all');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [selectedAd, setSelectedAd] = useState(null);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [showAdModal, setShowAdModal] = useState(false);\r\n  const [deleteLoading, setDeleteLoading] = useState(false);\r\n\r\n  const api = useApi();\r\n\r\n  useEffect(() => {\r\n    loadAds();\r\n  }, [currentPage, searchTerm, statusFilter]);\r\n\r\n  const loadAds = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        page: currentPage,\r\n        limit: 10,\r\n        search: searchTerm,\r\n        status: statusFilter\r\n      });\r\n\r\n      const response = await api.get(`/admin/ads?${params}`);\r\n      if (response.success) {\r\n        setAds(response.data.ads || []);\r\n        setTotalPages(response.data?.total_pages || 1);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar anúncios:', error);\r\n      setAds([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteAd = async () => {\r\n    if (!selectedAd) return;\r\n    \r\n    setDeleteLoading(true);\r\n    try {\r\n      const response = await api.delete(`/admin/ads/${selectedAd._id}`);\r\n      if (response.success) {\r\n        await loadAds();\r\n        setShowDeleteModal(false);\r\n        setSelectedAd(null);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao deletar anúncio:', error);\r\n    } finally {\r\n      setDeleteLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleUpdateStatus = async (adId, newStatus) => {\r\n    try {\r\n      await api.put(`/admin/ads/${adId}/status`, {\r\n        status: newStatus\r\n      });\r\n      await loadAds();\r\n    } catch (error) {\r\n      console.error('Erro ao atualizar status do anúncio:', error);\r\n    }\r\n  };\r\n\r\n  const handleViewAd = (ad) => {\r\n    // Use os dados que já temos da listagem em vez de fazer nova requisição\r\n    setSelectedAd(ad);\r\n    setShowAdModal(true);\r\n  };\r\n\r\n  const filteredAds = ads.filter(ad => {\r\n    const matchesSearch = ad.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         ad.seller?.username?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         ad.game?.name?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesStatus = statusFilter === 'all' || ad.status === statusFilter;\r\n    \r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const totalValue = ads.reduce((sum, ad) => sum + (ad.price || 0), 0);\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-xl font-semibold text-gray-900\">Gestão de Anúncios</h2>\r\n          <p className=\"text-gray-600\">Monitore e gerencie anúncios da plataforma</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n        <StatCard\r\n          title=\"Total de Anúncios\"\r\n          value={ads.length}\r\n          icon={Tag}\r\n          color=\"blue\"\r\n        />\r\n        <StatCard\r\n          title=\"Anúncios Ativos\"\r\n          value={ads.filter(a => a.status === 'active').length}\r\n          icon={CheckCircle}\r\n          color=\"green\"\r\n        />\r\n        <StatCard\r\n          title=\"Pendentes\"\r\n          value={ads.filter(a => a.status === 'pending').length}\r\n          icon={Clock}\r\n          color=\"orange\"\r\n        />\r\n        <StatCard\r\n          title=\"Valor Total\"\r\n          value={`R$ ${totalValue.toFixed(2)}`}\r\n          icon={TrendingUp}\r\n          color=\"purple\"\r\n        />\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card className=\"p-4\">\r\n        <div className=\"flex flex-col md:flex-row gap-4\">\r\n          <div className=\"flex-1\">\r\n            <div className=\"relative\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Buscar anúncios, vendedores ou jogos...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"flex gap-2\">\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n              className=\"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"all\">Todos os Status</option>\r\n              <option value=\"active\">Ativo</option>\r\n              <option value=\"inactive\">Inativo</option>\r\n              <option value=\"pending\">Pendente</option>\r\n              <option value=\"banned\">Banido</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Ads Table */}\r\n      <Card className=\"overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full divide-y divide-gray-200\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Anúncio\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Vendedor\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Jogo\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Preço\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Status\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Data\r\n                </th>\r\n                <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Ações\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {filteredAds.map((ad) => (\r\n                <AdRow \r\n                  key={ad._id} \r\n                  ad={ad} \r\n                  onDelete={(ad) => {\r\n                    setSelectedAd(ad);\r\n                    setShowDeleteModal(true);\r\n                  }}\r\n                  onView={() => handleViewAd(ad)}\r\n                  onUpdateStatus={handleUpdateStatus}\r\n                />\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <Pagination\r\n          currentPage={currentPage}\r\n          totalPages={totalPages}\r\n          onPageChange={setCurrentPage}\r\n        />\r\n      )}\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      <Modal\r\n        isOpen={showDeleteModal}\r\n        onClose={() => setShowDeleteModal(false)}\r\n        title=\"Confirmar Exclusão\"\r\n      >\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <AlertTriangle className=\"w-8 h-8 text-red-500\" />\r\n            <div>\r\n              <p className=\"font-medium\">Tem certeza que deseja deletar este anúncio?</p>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Esta ação não pode ser desfeita.\r\n              </p>\r\n            </div>\r\n          </div>\r\n          {selectedAd && (\r\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n              <p className=\"font-medium\">{selectedAd.title}</p>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Vendedor: {selectedAd.seller?.username || 'N/A'}\r\n              </p>\r\n            </div>\r\n          )}\r\n          <div className=\"flex justify-end gap-2\">\r\n            <Button\r\n              variant=\"outline\"\r\n              onClick={() => setShowDeleteModal(false)}\r\n              disabled={deleteLoading}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n            <Button\r\n              variant=\"danger\"\r\n              onClick={handleDeleteAd}\r\n              disabled={deleteLoading}\r\n            >\r\n              {deleteLoading ? 'Deletando...' : 'Deletar'}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Ad Details Modal */}\r\n      <Modal \r\n        isOpen={showAdModal} \r\n        onClose={() => setShowAdModal(false)}\r\n        title=\"Detalhes do Anúncio\"\r\n        size=\"lg\"\r\n      >\r\n        {selectedAd && (\r\n          <AdDetailsModal \r\n            ad={selectedAd} \r\n            onClose={() => setShowAdModal(false)}\r\n          />\r\n        )}\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Ad Row Component\r\nconst AdRow = ({ ad, onDelete, onView, onUpdateStatus }) => {\r\n  const getStatusColor = (status) => {\r\n    const colors = {\r\n      active: 'success',\r\n      inactive: 'default',\r\n      pending: 'warning',\r\n      banned: 'danger'\r\n    };\r\n    return colors[status] || 'default';\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    const texts = {\r\n      active: 'Ativo',\r\n      inactive: 'Inativo',\r\n      pending: 'Pendente',\r\n      banned: 'Banido'\r\n    };\r\n    return texts[status] || status;\r\n  };\r\n\r\n  return (\r\n    <tr>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <div className=\"flex items-center\">\r\n          {ad.images && ad.images.length > 0 && (\r\n            <img \r\n              src={ad.images[0]} \r\n              alt={ad.title}\r\n              className=\"w-12 h-12 object-cover rounded mr-3\"\r\n            />\r\n          )}\r\n          <div>\r\n            <div className=\"text-sm font-medium text-gray-900\">{ad.title}</div>\r\n            <div className=\"text-sm text-gray-500\">{ad._id.slice(-8)}</div>\r\n          </div>\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <div className=\"flex items-center\">\r\n          <User className=\"w-4 h-4 text-gray-400 mr-2\" />\r\n          <span className=\"text-sm text-gray-900\">{ad.seller?.username || 'N/A'}</span>\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <span className=\"text-sm text-gray-900\">{ad.game?.name || 'N/A'}</span>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <span className=\"text-sm font-medium text-gray-900\">\r\n          R$ {(ad.price || ad.price_per_hour || 0).toFixed(2)}\r\n        </span>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n        <Badge variant={getStatusColor(ad.status)}>\r\n          {getStatusText(ad.status)}\r\n        </Badge>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n        <div className=\"flex items-center\">\r\n          <Calendar className=\"w-4 h-4 mr-2\" />\r\n          {new Date(ad.created_at).toLocaleDateString()}\r\n        </div>\r\n      </td>\r\n      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n        <div className=\"flex gap-2 justify-end\">\r\n          <Button \r\n            size=\"sm\" \r\n            variant=\"outline\"\r\n            onClick={onView}\r\n            title=\"Ver detalhes\"\r\n          >\r\n            <Eye className=\"w-4 h-4\" />\r\n          </Button>\r\n          {ad.status !== 'banned' && (\r\n            <select\r\n              value={ad.status}\r\n              onChange={(e) => onUpdateStatus(ad._id, e.target.value)}\r\n              className=\"text-xs px-2 py-1 border border-gray-300 rounded\"\r\n            >\r\n              <option value=\"active\">Ativo</option>\r\n              <option value=\"inactive\">Inativo</option>\r\n              <option value=\"pending\">Pendente</option>\r\n              <option value=\"banned\">Banir</option>\r\n            </select>\r\n          )}\r\n          <Button \r\n            size=\"sm\" \r\n            variant=\"danger\"\r\n            onClick={() => onDelete(ad)}\r\n            title=\"Deletar anúncio\"\r\n          >\r\n            <Trash2 className=\"w-4 h-4\" />\r\n          </Button>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  );\r\n};\r\n\r\n// Stat Card Component\r\nconst StatCard = ({ title, value, icon: Icon, color }) => {\r\n  const colorClasses = {\r\n    blue: 'bg-blue-500 text-white',\r\n    green: 'bg-green-500 text-white',\r\n    orange: 'bg-orange-500 text-white',\r\n    purple: 'bg-purple-500 text-white'\r\n  };\r\n\r\n  return (\r\n    <Card className=\"p-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <p className=\"text-sm font-medium text-gray-600\">{title}</p>\r\n          <p className=\"text-2xl font-bold text-gray-900 mt-2\">{value}</p>\r\n        </div>\r\n        <div className={`w-12 h-12 rounded-lg ${colorClasses[color]} flex items-center justify-center`}>\r\n          <Icon className=\"w-6 h-6\" />\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\n// Ad Details Modal Component\r\nconst AdDetailsModal = ({ ad, onClose }) => {\r\n  // Helper function to format date\r\n  const formatDate = (dateString) => {\r\n    try {\r\n      if (!dateString) return 'Data não disponível';\r\n      const date = new Date(dateString);\r\n      return date.toLocaleString('pt-BR');\r\n    } catch (error) {\r\n      return 'Data inválida';\r\n    }\r\n  };\r\n\r\n  // Helper function to get price\r\n  const getPrice = (ad) => {\r\n    return ad.price || ad.price_per_hour || 0;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Ad Header */}\r\n      <div className=\"border-b pb-4\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <h3 className=\"text-lg font-semibold\">{ad.title || 'Título não disponível'}</h3>\r\n          <Badge variant={getStatusColor(ad.status)}>\r\n            {getStatusText(ad.status)}\r\n          </Badge>\r\n        </div>\r\n        <p className=\"text-gray-600\">\r\n          Criado em {formatDate(ad.created_at)}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Ad Info */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <div>\r\n          <h4 className=\"font-medium text-gray-900 mb-3\">Informações do Anúncio</h4>\r\n          <div className=\"space-y-2 text-sm\">\r\n            <p><strong>Preço:</strong> R$ {getPrice(ad).toFixed(2)}</p>\r\n            <p><strong>Jogo:</strong> {ad.game?.name || 'N/A'}</p>\r\n            <p><strong>Plataforma:</strong> {ad.platform || 'N/A'}</p>\r\n            <p><strong>Tipo:</strong> {ad.ad_type || 'N/A'}</p>\r\n            <p><strong>Condição:</strong> {ad.condition || 'N/A'}</p>\r\n            <p><strong>ID:</strong> {ad._id}</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div>\r\n          <h4 className=\"font-medium text-gray-900 mb-3\">Vendedor</h4>\r\n          <div className=\"space-y-2 text-sm\">\r\n            <p><strong>Username:</strong> {ad.seller?.username || 'N/A'}</p>\r\n            <p><strong>Email:</strong> {ad.seller?.email || 'N/A'}</p>\r\n            <p><strong>ID:</strong> {ad.seller_id}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Description */}\r\n      <div>\r\n        <h4 className=\"font-medium text-gray-900 mb-3\">Descrição</h4>\r\n        <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n          <p className=\"text-sm\">{ad.description || 'Sem descrição'}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Images */}\r\n      {ad.images && ad.images.length > 0 && (\r\n        <div>\r\n          <h4 className=\"font-medium text-gray-900 mb-3\">Imagens</h4>\r\n          <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n            {ad.images.map((image, index) => (\r\n              <img \r\n                key={index}\r\n                src={image} \r\n                alt={`${ad.title} ${index + 1}`}\r\n                className=\"w-full h-32 object-cover rounded-lg\"\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex justify-end pt-4 border-t\">\r\n        <Button onClick={onClose} variant=\"outline\">\r\n          Fechar\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Helper functions for the modal\r\nconst getStatusColor = (status) => {\r\n  const colors = {\r\n    active: 'success',\r\n    inactive: 'default',\r\n    pending: 'warning',\r\n    banned: 'danger'\r\n  };\r\n  return colors[status] || 'default';\r\n};\r\n\r\nconst getStatusText = (status) => {\r\n  const texts = {\r\n    active: 'Ativo',\r\n    inactive: 'Inativo',\r\n    pending: 'Pendente',\r\n    banned: 'Banido'\r\n  };\r\n  return texts[status] || status;\r\n};\r\n\r\nexport default AdsManagement;","import React, { useState, useEffect } from 'react';\r\nimport { Card, LoadingSpinner, Badge, Pagination } from '../Common';\r\nimport { useApi } from '../../hooks';\r\nimport { Activity, Eye, Shield, AlertTriangle, Clock, User } from 'lucide-react';\r\n\r\nconst AuditLogs = () => {\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n\r\n  const api = useApi();\r\n\r\n  useEffect(() => {\r\n    loadAuditLogs();\r\n  }, [currentPage]);\r\n\r\n  const loadAuditLogs = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get('/support/admin/audit-logs', {\r\n        params: {\r\n          page: currentPage,\r\n          limit: 20\r\n        }\r\n      });\r\n      setLogs(response.data.logs || []);\r\n      setTotalPages(Math.ceil((response.data.total || 0) / 20));\r\n    } catch (error) {\r\n      console.error('Erro ao carregar logs:', error);\r\n      setLogs([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getActionIcon = (action) => {\r\n    const icons = {\r\n      create: Eye,\r\n      update: Shield,\r\n      delete: AlertTriangle,\r\n      read: Activity\r\n    };\r\n    const Icon = icons[action] || Activity;\r\n    return <Icon className=\"w-4 h-4\" />;\r\n  };\r\n\r\n  const getActionColor = (action) => {\r\n    const colors = {\r\n      create: 'success',\r\n      update: 'warning',\r\n      delete: 'danger',\r\n      read: 'primary'\r\n    };\r\n    return colors[action] || 'secondary';\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\r\n        <div>\r\n          <h2 className=\"text-xl font-semibold text-gray-900\">Logs de Auditoria</h2>\r\n          <p className=\"text-gray-600\">Monitore ações administrativas e eventos de segurança</p>\r\n        </div>\r\n      </div>\r\n\r\n      {logs.length === 0 ? (\r\n        <Card className=\"p-8 text-center\">\r\n          <Activity className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Nenhum log encontrado</h3>\r\n          <p className=\"text-gray-600\">Não há logs de auditoria no momento</p>\r\n        </Card>\r\n      ) : (\r\n        <Card className=\"overflow-hidden\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Ação\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Recurso\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Admin\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Data/Hora\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Status\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {logs.map((log) => (\r\n                  <tr key={log._id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"flex items-center\">\r\n                        <div className=\"flex-shrink-0\">\r\n                          <Badge variant={getActionColor(log.action)} className=\"flex items-center gap-1\">\r\n                            {getActionIcon(log.action)}\r\n                            {log.action}\r\n                          </Badge>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-900\">{log.resource_type}</div>\r\n                      {log.resource_id && (\r\n                        <div className=\"text-sm text-gray-500\">ID: {log.resource_id.slice(-8)}</div>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"flex items-center\">\r\n                        <User className=\"w-4 h-4 text-gray-400 mr-2\" />\r\n                        <div className=\"text-sm text-gray-900\">{log.admin_username || 'Sistema'}</div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"flex items-center text-sm text-gray-500\">\r\n                        <Clock className=\"w-4 h-4 mr-1\" />\r\n                        {new Date(log.timestamp).toLocaleString()}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <Badge variant={log.success ? 'success' : 'danger'}>\r\n                        {log.success ? 'Sucesso' : 'Falha'}\r\n                      </Badge>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </Card>\r\n      )}\r\n\r\n      {totalPages > 1 && (\r\n        <Pagination\r\n          currentPage={currentPage}\r\n          totalPages={totalPages}\r\n          onPageChange={setCurrentPage}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuditLogs;","import React, { useState, useEffect } from 'react';\r\nimport { Flag, Eye, Check, X, Clock, AlertTriangle } from 'lucide-react';\r\nimport LoadingSpinner from '../Common/LoadingSpinner';\r\nimport Button from '../Common/Button';\r\nimport Badge from '../Common/Badge';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst ReportsManagement = () => {\r\n  const [reports, setReports] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState('all'); // all, pending, reviewed, resolved, dismissed\r\n  const [selectedReport, setSelectedReport] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [actionLoading, setActionLoading] = useState({});\r\n\r\n  useEffect(() => {\r\n    loadReports();\r\n  }, [filter]);\r\n\r\n  const loadReports = async () => {\r\n    setLoading(true);\r\n    \r\n    try {\r\n      // Simular dados de reports - implementar API depois\r\n      const mockReports = [\r\n        {\r\n          _id: '1',\r\n          reporter: {\r\n            username: 'user123',\r\n            first_name: 'João',\r\n            last_name: 'Silva'\r\n          },\r\n          reported_item_id: 'ad_123',\r\n          reported_item_type: 'ad',\r\n          reason: 'spam',\r\n          details: 'Este anúncio está sendo postado repetidamente com o mesmo conteúdo',\r\n          status: 'pending',\r\n          created_at: new Date(Date.now() - 2 * 60 * 60000).toISOString(),\r\n          updated_at: new Date(Date.now() - 2 * 60 * 60000).toISOString()\r\n        },\r\n        {\r\n          _id: '2',\r\n          reporter: {\r\n            username: 'maria456',\r\n            first_name: 'Maria',\r\n            last_name: 'Santos'\r\n          },\r\n          reported_item_id: 'ad_456',\r\n          reported_item_type: 'ad',\r\n          reason: 'fake',\r\n          details: 'O vendedor está anunciando um produto que não possui',\r\n          status: 'reviewed',\r\n          admin_notes: 'Verificado e confirmado como falso',\r\n          reviewed_by: 'admin',\r\n          reviewed_at: new Date(Date.now() - 1 * 60 * 60000).toISOString(),\r\n          created_at: new Date(Date.now() - 24 * 60 * 60000).toISOString(),\r\n          updated_at: new Date(Date.now() - 1 * 60 * 60000).toISOString()\r\n        },\r\n        {\r\n          _id: '3',\r\n          reporter: {\r\n            username: 'pedro789',\r\n            first_name: 'Pedro',\r\n            last_name: 'Costa'\r\n          },\r\n          reported_item_id: 'user_789',\r\n          reported_item_type: 'user',\r\n          reason: 'inappropriate',\r\n          details: 'Usuário está enviando mensagens ofensivas',\r\n          status: 'resolved',\r\n          admin_notes: 'Usuário foi advertido e suspendido temporariamente',\r\n          reviewed_by: 'admin',\r\n          reviewed_at: new Date(Date.now() - 30 * 60000).toISOString(),\r\n          created_at: new Date(Date.now() - 48 * 60 * 60000).toISOString(),\r\n          updated_at: new Date(Date.now() - 30 * 60000).toISOString()\r\n        }\r\n      ];\r\n\r\n      setReports(mockReports);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar reports:', error);\r\n      toast.error('Erro ao carregar reports');\r\n    }\r\n    \r\n    setLoading(false);\r\n  };\r\n\r\n  const formatTime = (timestamp) => {\r\n    const date = new Date(timestamp);\r\n    return date.toLocaleString('pt-BR');\r\n  };\r\n\r\n  const getReasonLabel = (reason) => {\r\n    const reasons = {\r\n      spam: 'Spam',\r\n      fake: 'Anúncio falso',\r\n      inappropriate: 'Conteúdo inapropriado',\r\n      scam: 'Tentativa de golpe',\r\n      wrong_category: 'Categoria incorreta',\r\n      other: 'Outro motivo'\r\n    };\r\n    return reasons[reason] || reason;\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'warning';\r\n      case 'reviewed': return 'primary';\r\n      case 'resolved': return 'success';\r\n      case 'dismissed': return 'secondary';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'pending': return 'Pendente';\r\n      case 'reviewed': return 'Analisado';\r\n      case 'resolved': return 'Resolvido';\r\n      case 'dismissed': return 'Descartado';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (reportId, newStatus, adminNotes = '') => {\r\n    setActionLoading(prev => ({ ...prev, [reportId]: true }));\r\n    \r\n    try {\r\n      // Simular API call\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      setReports(prev => \r\n        prev.map(report => \r\n          report._id === reportId \r\n            ? {\r\n                ...report,\r\n                status: newStatus,\r\n                admin_notes: adminNotes,\r\n                reviewed_by: 'admin',\r\n                reviewed_at: new Date().toISOString(),\r\n                updated_at: new Date().toISOString()\r\n              }\r\n            : report\r\n        )\r\n      );\r\n      \r\n      toast.success(`Report ${getStatusLabel(newStatus).toLowerCase()}`);\r\n      setShowModal(false);\r\n      setSelectedReport(null);\r\n    } catch (error) {\r\n      toast.error('Erro ao atualizar status do report');\r\n    }\r\n    \r\n    setActionLoading(prev => ({ ...prev, [reportId]: false }));\r\n  };\r\n\r\n  const openReportModal = (report) => {\r\n    setSelectedReport(report);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const filteredReports = reports.filter(report => {\r\n    if (filter === 'all') return true;\r\n    return report.status === filter;\r\n  });\r\n\r\n  const getFilterCounts = () => {\r\n    return {\r\n      all: reports.length,\r\n      pending: reports.filter(r => r.status === 'pending').length,\r\n      reviewed: reports.filter(r => r.status === 'reviewed').length,\r\n      resolved: reports.filter(r => r.status === 'resolved').length,\r\n      dismissed: reports.filter(r => r.status === 'dismissed').length\r\n    };\r\n  };\r\n\r\n  const counts = getFilterCounts();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Flag className=\"w-6 h-6 text-red-600\" />\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-800\">\r\n              Gerenciar Reports\r\n            </h2>\r\n            <p className=\"text-gray-600\">\r\n              {counts.pending} pendente{counts.pending !== 1 ? 's' : ''} de {counts.all} total\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        {[\r\n          { key: 'all', label: 'Todos', count: counts.all },\r\n          { key: 'pending', label: 'Pendentes', count: counts.pending },\r\n          { key: 'reviewed', label: 'Analisados', count: counts.reviewed },\r\n          { key: 'resolved', label: 'Resolvidos', count: counts.resolved },\r\n          { key: 'dismissed', label: 'Descartados', count: counts.dismissed }\r\n        ].map(filterOption => (\r\n          <button\r\n            key={filterOption.key}\r\n            onClick={() => setFilter(filterOption.key)}\r\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n              filter === filterOption.key\r\n                ? 'bg-blue-600 text-white'\r\n                : 'bg-white text-gray-600 hover:bg-gray-50 border border-gray-200'\r\n            }`}\r\n          >\r\n            {filterOption.label} ({filterOption.count})\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Reports List */}\r\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n        {filteredReports.length > 0 ? (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Reporter\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Item Reportado\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Motivo\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Status\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Data\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Ações\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {filteredReports.map((report) => (\r\n                  <tr key={report._id} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div>\r\n                        <div className=\"text-sm font-medium text-gray-900\">\r\n                          {report.reporter.first_name} {report.reporter.last_name}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500\">\r\n                          @{report.reporter.username}\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        {report.reported_item_type === 'ad' ? 'Anúncio' : 'Usuário'}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        ID: {report.reported_item_id}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        {getReasonLabel(report.reason)}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <Badge variant={getStatusColor(report.status)}>\r\n                        {getStatusLabel(report.status)}\r\n                      </Badge>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                      {formatTime(report.created_at)}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                      <button\r\n                        onClick={() => openReportModal(report)}\r\n                        className=\"text-blue-600 hover:text-blue-900 mr-3\"\r\n                      >\r\n                        <Eye className=\"w-4 h-4\" />\r\n                      </button>\r\n                      {report.status === 'pending' && (\r\n                        <div className=\"flex space-x-2\">\r\n                          <button\r\n                            onClick={() => handleStatusChange(report._id, 'resolved')}\r\n                            disabled={actionLoading[report._id]}\r\n                            className=\"text-green-600 hover:text-green-900\"\r\n                            title=\"Resolver\"\r\n                          >\r\n                            <Check className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleStatusChange(report._id, 'dismissed')}\r\n                            disabled={actionLoading[report._id]}\r\n                            className=\"text-red-600 hover:text-red-900\"\r\n                            title=\"Descartar\"\r\n                          >\r\n                            <X className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ) : (\r\n          <div className=\"text-center py-12\">\r\n            <Flag className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-gray-800 mb-2\">\r\n              Nenhum report encontrado\r\n            </h3>\r\n            <p className=\"text-gray-600\">\r\n              {filter === 'all' \r\n                ? 'Ainda não há reports para revisar'\r\n                : `Nenhum report ${getStatusLabel(filter).toLowerCase()}`\r\n              }\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Report Detail Modal */}\r\n      {showModal && selectedReport && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto\">\r\n            <div className=\"p-6\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h3 className=\"text-xl font-semibold text-gray-800\">\r\n                  Detalhes do Report\r\n                </h3>\r\n                <button \r\n                  onClick={() => setShowModal(false)}\r\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n                >\r\n                  ✕\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Reporter\r\n                    </label>\r\n                    <p className=\"text-gray-900\">\r\n                      {selectedReport.reporter.first_name} {selectedReport.reporter.last_name}\r\n                    </p>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      @{selectedReport.reporter.username}\r\n                    </p>\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Status\r\n                    </label>\r\n                    <Badge variant={getStatusColor(selectedReport.status)}>\r\n                      {getStatusLabel(selectedReport.status)}\r\n                    </Badge>\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Item Reportado\r\n                  </label>\r\n                  <p className=\"text-gray-900\">\r\n                    {selectedReport.reported_item_type === 'ad' ? 'Anúncio' : 'Usuário'} \r\n                    (ID: {selectedReport.reported_item_id})\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Motivo\r\n                  </label>\r\n                  <p className=\"text-gray-900\">{getReasonLabel(selectedReport.reason)}</p>\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                    Detalhes\r\n                  </label>\r\n                  <p className=\"text-gray-900 bg-gray-50 p-3 rounded-lg\">\r\n                    {selectedReport.details || 'Nenhum detalhe fornecido'}\r\n                  </p>\r\n                </div>\r\n\r\n                {selectedReport.admin_notes && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Notas do Admin\r\n                    </label>\r\n                    <p className=\"text-gray-900 bg-blue-50 p-3 rounded-lg\">\r\n                      {selectedReport.admin_notes}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                      Criado em\r\n                    </label>\r\n                    <p className=\"text-gray-900\">{formatTime(selectedReport.created_at)}</p>\r\n                  </div>\r\n                  \r\n                  {selectedReport.reviewed_at && (\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n                        Revisado em\r\n                      </label>\r\n                      <p className=\"text-gray-900\">{formatTime(selectedReport.reviewed_at)}</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {selectedReport.status === 'pending' && (\r\n                <div className=\"flex space-x-3 pt-6 border-t border-gray-200 mt-6\">\r\n                  <Button\r\n                    onClick={() => handleStatusChange(selectedReport._id, 'resolved', 'Report resolvido pelo administrador')}\r\n                    disabled={actionLoading[selectedReport._id]}\r\n                    className=\"flex-1\"\r\n                  >\r\n                    <Check className=\"w-4 h-4 mr-2\" />\r\n                    Resolver\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => handleStatusChange(selectedReport._id, 'dismissed', 'Report descartado - sem violação encontrada')}\r\n                    disabled={actionLoading[selectedReport._id]}\r\n                    className=\"flex-1\"\r\n                  >\r\n                    <X className=\"w-4 h-4 mr-2\" />\r\n                    Descartar\r\n                  </Button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportsManagement;","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Card, \r\n  Button, \r\n  Modal, \r\n  Badge, \r\n  LoadingSpinner, \r\n  Alert, \r\n  Pagination \r\n} from '../../components/Common';\r\nimport { useApi } from '../../hooks';\r\nimport GamesManagement from '../../components/Admin/GamesManagement';\r\nimport TicketsManagement from '../../components/Admin/TicketsManagement';\r\nimport UsersManagement from '../../components/Admin/UsersManagement';\r\nimport OrdersManagement from '../../components/Admin/OrdersManagement';\r\nimport AdsManagement from '../../components/Admin/AdsManagement';\r\nimport AuditLogs from '../../components/Admin/AuditLogs';\r\nimport ReportsManagement from '../../components/Admin/ReportsManagement';\r\nimport {\r\n  Users,\r\n  ShoppingBag,\r\n  AlertTriangle,\r\n  TrendingUp,\r\n  Activity,\r\n  Clock,\r\n  CheckCircle2,\r\n  XCircle,\r\n  Settings,\r\n  Plus,\r\n  Edit3,\r\n  Trash2,\r\n  Eye,\r\n  Filter,\r\n  Search,\r\n  BarChart3,\r\n  MessageSquare,\r\n  Star,\r\n  Upload,\r\n  Image as ImageIcon,\r\n  Tag,\r\n  Globe,\r\n  RefreshCw\r\n} from 'lucide-react';\r\n\r\nconst AdminDashboard = () => {\r\n  const [activeTab, setActiveTab] = useState('dashboard');\r\n  const [loading, setLoading] = useState(true);\r\n  const [stats, setStats] = useState({});\r\n  \r\n  const api = useApi();\r\n\r\n  useEffect(() => {\r\n    loadDashboardData();\r\n  }, []);\r\n\r\n  const loadDashboardData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await api.get('/support/admin/stats');\r\n      setStats(response.data);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar dados:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    {\r\n      id: 'dashboard',\r\n      label: 'Dashboard',\r\n      icon: BarChart3,\r\n      description: 'Visão geral do sistema'\r\n    },\r\n    {\r\n      id: 'tickets',\r\n      label: 'Tickets',\r\n      icon: MessageSquare,\r\n      description: 'Suporte ao cliente',\r\n      badge: stats.tickets?.open || 0\r\n    },\r\n    {\r\n      id: 'games',\r\n      label: 'Jogos',\r\n      icon: Settings,\r\n      description: 'Gestão de jogos'\r\n    },\r\n    {\r\n      id: 'users',\r\n      label: 'Usuários',\r\n      icon: Users,\r\n      description: 'Gestão de usuários'\r\n    },\r\n    {\r\n      id: 'ads',\r\n      label: 'Anúncios',\r\n      icon: Tag,\r\n      description: 'Gestão de anúncios'\r\n    },\r\n    {\r\n      id: 'orders',\r\n      label: 'Pedidos',\r\n      icon: ShoppingBag,\r\n      description: 'Gestão de pedidos'\r\n    },\r\n    {\r\n      id: 'audit',\r\n      label: 'Auditoria',\r\n      icon: Activity,\r\n      description: 'Logs do sistema'\r\n    },\r\n    {\r\n      id: 'reports',\r\n      label: 'Reports',\r\n      icon: AlertTriangle,\r\n      description: 'Gerenciar reports de usuários',\r\n      badge: stats.reports?.pending || 0\r\n    }\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white shadow-sm border-b\">\r\n        <div className=\"px-6 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">\r\n                Painel Administrativo\r\n              </h1>\r\n              <p className=\"text-gray-600 mt-1\">\r\n                Gerencie e monitore o GameUnite\r\n              </p>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <Button\r\n                onClick={loadDashboardData}\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                className=\"flex items-center gap-2\"\r\n              >\r\n                <RefreshCw className=\"w-4 h-4\" />\r\n                Atualizar\r\n              </Button>\r\n              <Badge variant=\"success\" className=\"px-3 py-1\">\r\n                Sistema Online\r\n              </Badge>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation Tabs */}\r\n      <div className=\"bg-white border-b\">\r\n        <div className=\"px-6\">\r\n          <nav className=\"flex space-x-0 overflow-x-auto\">\r\n            {tabs.map((tab) => {\r\n              const Icon = tab.icon;\r\n              return (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id)}\r\n                  className={`flex items-center gap-3 px-6 py-4 border-b-2 font-medium text-sm transition-all whitespace-nowrap ${\r\n                    activeTab === tab.id\r\n                      ? 'border-blue-500 text-blue-600 bg-blue-50'\r\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                  }`}\r\n                >\r\n                  <Icon className=\"w-5 h-5\" />\r\n                  <span className=\"font-semibold\">{tab.label}</span>\r\n                  {tab.badge > 0 && (\r\n                    <Badge variant=\"danger\" size=\"sm\">\r\n                      {tab.badge}\r\n                    </Badge>\r\n                  )}\r\n                </button>\r\n              );\r\n            })}\r\n          </nav>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"p-6\">\r\n        {activeTab === 'dashboard' && <DashboardTab stats={stats} setActiveTab={setActiveTab} />}\r\n        {activeTab === 'tickets' && <TicketsTab />}\r\n        {activeTab === 'games' && <GamesTab />}\r\n        {activeTab === 'users' && <UsersTab />}\r\n        {activeTab === 'ads' && <AdsTab />}\r\n        {activeTab === 'orders' && <OrdersTab />}\r\n        {activeTab === 'audit' && <AuditTab />}\r\n        {activeTab === 'reports' && <ReportsTab />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Dashboard Tab Component\r\nconst DashboardTab = ({ stats, setActiveTab }) => {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Stats Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        <StatCard\r\n          title=\"Total de Usuários\"\r\n          value={stats.users?.total || 0}\r\n          icon={Users}\r\n          color=\"blue\"\r\n          subtitle={`${stats.users?.active || 0} ativos`}\r\n        />\r\n        <StatCard\r\n          title=\"Tickets Abertos\"\r\n          value={stats.tickets?.open || 0}\r\n          icon={AlertTriangle}\r\n          color=\"red\"\r\n          subtitle={`${stats.tickets?.total || 0} total`}\r\n        />\r\n        <StatCard\r\n          title=\"Total de Pedidos\"\r\n          value={stats.orders?.total || 0}\r\n          icon={ShoppingBag}\r\n          color=\"green\"\r\n          subtitle={`${stats.orders?.completed || 0} completos`}\r\n        />\r\n        <StatCard\r\n          title=\"Receita Total\"\r\n          value={`R$ ${(stats.revenue?.total || 0).toFixed(2)}`}\r\n          icon={TrendingUp}\r\n          color=\"purple\"\r\n          subtitle={`${stats.orders?.completed || 0} vendas`}\r\n        />\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <Card className=\"p-6\">\r\n        <h3 className=\"text-lg font-semibold mb-4\">Ações Rápidas</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <QuickActionCard\r\n            title=\"Novo Jogo\"\r\n            description=\"Adicionar jogo à plataforma\"\r\n            icon={Plus}\r\n            color=\"blue\"\r\n            onClick={() => setActiveTab('games')}\r\n          />\r\n          <QuickActionCard\r\n            title=\"Verificar Tickets\"\r\n            description=\"Responder tickets pendentes\"\r\n            icon={MessageSquare}\r\n            color=\"orange\"\r\n            onClick={() => window.location.href = '/admin/support'}\r\n          />\r\n          <QuickActionCard\r\n            title=\"Ver Pedidos\"\r\n            description=\"Monitorar pedidos recentes\"\r\n            icon={BarChart3}\r\n            color=\"green\"\r\n            onClick={() => setActiveTab('orders')}\r\n          />\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Recent Activity */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <Card className=\"p-6\">\r\n          <h3 className=\"text-lg font-semibold mb-4\">Atividade Recente</h3>\r\n          <div className=\"space-y-4\">\r\n            {stats.tickets?.recent?.map((ticket, index) => (\r\n              <div key={index} className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-lg\">\r\n                <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\r\n                  <MessageSquare className=\"w-4 h-4 text-blue-600\" />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <p className=\"font-medium text-sm\">{ticket.subject}</p>\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    {new Date(ticket.created_at).toLocaleString()}\r\n                  </p>\r\n                </div>\r\n                <Badge variant={ticket.status === 'open' ? 'danger' : 'success'}>\r\n                  {ticket.status}\r\n                </Badge>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </Card>\r\n\r\n        <Card className=\"p-6\">\r\n          <h3 className=\"text-lg font-semibold mb-4\">Status do Sistema</h3>\r\n          <div className=\"space-y-4\">\r\n            <SystemStatus label=\"API Backend\" status=\"online\" />\r\n            <SystemStatus label=\"Base de Dados\" status=\"online\" />\r\n            <SystemStatus label=\"Storage\" status=\"online\" />\r\n            <SystemStatus label=\"Cache\" status=\"warning\" />\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Componentes auxiliares\r\nconst StatCard = ({ title, value, icon: Icon, color, trend, subtitle }) => {\r\n  const colorClasses = {\r\n    blue: 'bg-blue-500 text-white',\r\n    red: 'bg-red-500 text-white',\r\n    green: 'bg-green-500 text-white',\r\n    purple: 'bg-purple-500 text-white'\r\n  };\r\n\r\n  return (\r\n    <Card className=\"p-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <p className=\"text-sm font-medium text-gray-600\">{title}</p>\r\n          <p className=\"text-2xl font-bold text-gray-900 mt-2\">{value}</p>\r\n          {subtitle && (\r\n            <p className=\"text-sm mt-1 text-gray-500\">\r\n              {subtitle}\r\n            </p>\r\n          )}\r\n          {trend && (\r\n            <p className={`text-sm mt-1 ${trend.startsWith('+') ? 'text-green-600' : 'text-red-600'}`}>\r\n              {trend} vs mês anterior\r\n            </p>\r\n          )}\r\n        </div>\r\n        <div className={`w-12 h-12 rounded-lg ${colorClasses[color]} flex items-center justify-center`}>\r\n          <Icon className=\"w-6 h-6\" />\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst QuickActionCard = ({ title, description, icon: Icon, color, onClick }) => {\r\n  const colorClasses = {\r\n    blue: 'text-blue-600 bg-blue-100',\r\n    orange: 'text-orange-600 bg-orange-100',\r\n    green: 'text-green-600 bg-green-100'\r\n  };\r\n\r\n  return (\r\n    <Card className=\"p-4 hover:shadow-md transition-shadow cursor-pointer\" onClick={onClick}>\r\n      <div className=\"flex items-center gap-3\">\r\n        <div className={`w-10 h-10 rounded-lg ${colorClasses[color]} flex items-center justify-center`}>\r\n          <Icon className=\"w-5 h-5\" />\r\n        </div>\r\n        <div>\r\n          <h4 className=\"font-semibold text-gray-900\">{title}</h4>\r\n          <p className=\"text-sm text-gray-600\">{description}</p>\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n\r\nconst SystemStatus = ({ label, status }) => {\r\n  const statusConfig = {\r\n    online: { color: 'bg-green-500', text: 'Online' },\r\n    warning: { color: 'bg-yellow-500', text: 'Atenção' },\r\n    offline: { color: 'bg-red-500', text: 'Offline' }\r\n  };\r\n\r\n  const config = statusConfig[status];\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between\">\r\n      <span className=\"font-medium text-gray-900\">{label}</span>\r\n      <div className=\"flex items-center gap-2\">\r\n        <div className={`w-2 h-2 rounded-full ${config.color}`}></div>\r\n        <span className=\"text-sm text-gray-600\">{config.text}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Tab components\r\nconst TicketsTab = () => <TicketsManagement />;\r\nconst GamesTab = () => <GamesManagement />;\r\nconst UsersTab = () => <UsersManagement />;\r\nconst AdsTab = () => <AdsManagement />;\r\nconst OrdersTab = () => <OrdersManagement />;\r\nconst AuditTab = () => <AuditLogs />;\r\nconst ReportsTab = () => <ReportsManagement />;\r\n\r\nexport default AdminDashboard;","import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { \r\n  MessageCircle, \r\n  Search, \r\n  Filter, \r\n  Eye, \r\n  Send, \r\n  Clock, \r\n  CheckCircle, \r\n  AlertCircle, \r\n  AlertTriangle,\r\n  User,\r\n  Calendar,\r\n  Hash,\r\n  RefreshCw,\r\n  Shield,\r\n  Settings,\r\n  BarChart3,\r\n  Users,\r\n  FileText,\r\n  XCircle,\r\n  Timer,\r\n  ChevronRight,\r\n  ChevronDown\r\n} from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\nimport Badge from '../../components/Common/Badge';\r\nimport { toast } from 'react-toastify';\r\nimport { supportService } from '../../services/supportService';\r\n\r\nconst AdminSupport = () => {\r\n  const navigate = useNavigate();\r\n  const [tickets, setTickets] = useState([]);\r\n  const [stats, setStats] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [updating, setUpdating] = useState(false);\r\n  const [selectedTicket, setSelectedTicket] = useState(null);\r\n  const [showTicketModal, setShowTicketModal] = useState(false);\r\n  const [expandedTickets, setExpandedTickets] = useState(new Set());\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [filters, setFilters] = useState({\r\n    status: '',\r\n    category: '',\r\n    priority: '',\r\n    search: ''\r\n  });\r\n  const [formData, setFormData] = useState({\r\n    status: '',\r\n    priority: '',\r\n    admin_response: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [currentPage, filters]);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      await Promise.all([\r\n        loadTickets(),\r\n        loadStats()\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar dados:', error);\r\n      toast.error('Erro ao carregar dados do painel');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadTickets = async () => {\r\n    try {\r\n      const params = {\r\n        page: currentPage,\r\n        limit: 10,\r\n        ...Object.fromEntries(Object.entries(filters).filter(([_, v]) => v))\r\n      };\r\n\r\n      console.log('📋 Carregando tickets admin com params:', params);\r\n      const result = await supportService.getAllTickets(params);\r\n      \r\n      console.log('📄 Resposta getAllTickets:', result);\r\n      \r\n      if (result && result.data) {\r\n        const responseData = result.data.data || result.data;\r\n        setTickets(responseData.tickets || []);\r\n        setTotalPages(responseData.total_pages || 1);\r\n        console.log('✅ Tickets carregados:', responseData.tickets?.length || 0);\r\n      } else {\r\n        console.error('❌ Estrutura de resposta inesperada:', result);\r\n        setTickets([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Erro ao carregar tickets:', error);\r\n      toast.error('Erro ao carregar tickets');\r\n      setTickets([]);\r\n    }\r\n  };\r\n\r\n  const loadStats = async () => {\r\n    try {\r\n      console.log('📊 Carregando estatísticas...');\r\n      const result = await supportService.getAdminStats();\r\n      \r\n      console.log('📈 Resposta getAdminStats:', result);\r\n      \r\n      if (result && result.data) {\r\n        const statsData = result.data.data || result.data;\r\n        setStats(statsData);\r\n        console.log('✅ Stats carregadas:', statsData);\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Erro ao carregar stats:', error);\r\n      // Don't show error toast for stats, it's not critical\r\n    }\r\n  };\r\n\r\n  const handleTicketUpdate = async (ticketId, updateData) => {\r\n    setUpdating(true);\r\n    try {\r\n      console.log('🔄 Atualizando ticket:', ticketId, updateData);\r\n      \r\n      const result = await supportService.updateTicket(ticketId, updateData);\r\n      \r\n      console.log('✅ Resultado da atualização:', result);\r\n      \r\n      if (result && result.data) {\r\n        toast.success('Ticket atualizado com sucesso');\r\n        setShowTicketModal(false);\r\n        setSelectedTicket(null);\r\n        await loadTickets(); // Reload tickets\r\n      } else {\r\n        toast.error('Erro ao atualizar ticket');\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Erro ao atualizar ticket:', error);\r\n      toast.error(error.response?.data?.message || 'Erro ao atualizar ticket');\r\n    } finally {\r\n      setUpdating(false);\r\n    }\r\n  };\r\n\r\n  const handleViewTicket = (ticket) => {\r\n    setSelectedTicket(ticket);\r\n    setFormData({\r\n      status: ticket.status || '',\r\n      priority: ticket.priority || '',\r\n      admin_response: ticket.admin_response || ''\r\n    });\r\n    setShowTicketModal(true);\r\n  };\r\n\r\n  const handleToggleExpand = (ticketId) => {\r\n    const newExpanded = new Set(expandedTickets);\r\n    if (newExpanded.has(ticketId)) {\r\n      newExpanded.delete(ticketId);\r\n    } else {\r\n      newExpanded.add(ticketId);\r\n    }\r\n    setExpandedTickets(newExpanded);\r\n  };\r\n\r\n  const formatTime = (timestamp) => {\r\n    if (!timestamp) return 'Não disponível';\r\n    \r\n    try {\r\n      const date = new Date(timestamp);\r\n      return date.toLocaleString('pt-BR', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    } catch (error) {\r\n      return 'Data inválida';\r\n    }\r\n  };\r\n\r\n  const formatRelativeTime = (timestamp) => {\r\n    if (!timestamp) return '';\r\n    \r\n    try {\r\n      const date = new Date(timestamp);\r\n      const now = new Date();\r\n      const diffMs = now - date;\r\n      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n      const diffDays = Math.floor(diffHours / 24);\r\n      \r\n      if (diffDays > 0) {\r\n        return `há ${diffDays} dia(s)`;\r\n      } else if (diffHours > 0) {\r\n        return `há ${diffHours} hora(s)`;\r\n      } else {\r\n        const diffMinutes = Math.floor(diffMs / (1000 * 60));\r\n        return `há ${Math.max(1, diffMinutes)} minuto(s)`;\r\n      }\r\n    } catch (error) {\r\n      return '';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'open': return 'warning';\r\n      case 'in_progress': return 'primary';\r\n      case 'resolved': return 'success';\r\n      case 'closed': return 'secondary';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'open': return 'Aberto';\r\n      case 'in_progress': return 'Em Andamento';\r\n      case 'resolved': return 'Resolvido';\r\n      case 'closed': return 'Fechado';\r\n      default: return status || 'Desconhecido';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'open': return <Clock className=\"w-4 h-4\" />;\r\n      case 'in_progress': return <Timer className=\"w-4 h-4\" />;\r\n      case 'resolved': return <CheckCircle className=\"w-4 h-4\" />;\r\n      case 'closed': return <XCircle className=\"w-4 h-4\" />;\r\n      default: return <AlertCircle className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'low': return 'secondary';\r\n      case 'medium': return 'primary';\r\n      case 'high': return 'warning';\r\n      case 'urgent': return 'danger';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getPriorityLabel = (priority) => {\r\n    switch (priority) {\r\n      case 'low': return 'Baixa';\r\n      case 'medium': return 'Média';\r\n      case 'high': return 'Alta';\r\n      case 'urgent': return 'Urgente';\r\n      default: return priority || 'Não definida';\r\n    }\r\n  };\r\n\r\n  const getCategoryLabel = (category) => {\r\n    switch (category) {\r\n      case 'general': return 'Geral';\r\n      case 'technical': return 'Técnico';\r\n      case 'billing': return 'Pagamento';\r\n      case 'account': return 'Conta';\r\n      default: return category || 'Não categorizado';\r\n    }\r\n  };\r\n\r\n  const getTicketCount = (status) => {\r\n    if (!Array.isArray(tickets)) return 0;\r\n    return status === 'all' ? tickets.length : tickets.filter(t => t.status === status).length;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <LoadingSpinner size=\"lg\" />\r\n          <p className=\"mt-4 text-gray-600\">Carregando painel administrativo...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4 max-w-7xl\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Shield className=\"w-8 h-8 text-blue-600\" />\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-gray-800\">\r\n                  Painel de Suporte\r\n                </h1>\r\n                <p className=\"text-gray-600\">\r\n                  Gerencie tickets de suporte dos usuários\r\n                </p>\r\n              </div>\r\n            </div>\r\n            \r\n            <Button \r\n              onClick={loadData}\r\n              variant=\"outline\"\r\n              disabled={loading}\r\n            >\r\n              <RefreshCw className={`w-4 h-4 mr-2 ${loading ? 'animate-spin' : ''}`} />\r\n              Atualizar\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Stats Cards */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\r\n            <div className=\"bg-white p-6 rounded-lg shadow-md\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n                  <MessageCircle className=\"w-6 h-6 text-blue-600\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Total de Tickets</p>\r\n                  <p className=\"text-2xl font-bold text-gray-800\">{stats.tickets?.total || 0}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white p-6 rounded-lg shadow-md\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center\">\r\n                  <Clock className=\"w-6 h-6 text-orange-600\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Tickets Abertos</p>\r\n                  <p className=\"text-2xl font-bold text-orange-600\">{stats.tickets?.open || 0}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white p-6 rounded-lg shadow-md\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center\">\r\n                  <Timer className=\"w-6 h-6 text-blue-600\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Em Andamento</p>\r\n                  <p className=\"text-2xl font-bold text-blue-600\">{stats.tickets?.in_progress || 0}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white p-6 rounded-lg shadow-md\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center\">\r\n                  <CheckCircle className=\"w-6 h-6 text-green-600\" />\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm text-gray-600\">Resolvidos</p>\r\n                  <p className=\"text-2xl font-bold text-green-600\">\r\n                    {tickets.filter(t => t.status === 'resolved').length}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Filters */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\r\n          <div className=\"flex flex-col gap-4\">\r\n            {/* Search */}\r\n            <div className=\"relative flex-1 max-w-md\">\r\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Buscar tickets...\"\r\n                value={filters.search}\r\n                onChange={(e) => setFilters({ ...filters, search: e.target.value })}\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"flex flex-wrap gap-4\">\r\n              <select\r\n                value={filters.status}\r\n                onChange={(e) => setFilters({ ...filters, status: e.target.value })}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              >\r\n                <option value=\"\">Todos os Status</option>\r\n                <option value=\"open\">Aberto</option>\r\n                <option value=\"in_progress\">Em Andamento</option>\r\n                <option value=\"resolved\">Resolvido</option>\r\n                <option value=\"closed\">Fechado</option>\r\n              </select>\r\n\r\n              <select\r\n                value={filters.priority}\r\n                onChange={(e) => setFilters({ ...filters, priority: e.target.value })}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              >\r\n                <option value=\"\">Todas as Prioridades</option>\r\n                <option value=\"low\">Baixa</option>\r\n                <option value=\"medium\">Média</option>\r\n                <option value=\"high\">Alta</option>\r\n                <option value=\"urgent\">Urgente</option>\r\n              </select>\r\n\r\n              <select\r\n                value={filters.category}\r\n                onChange={(e) => setFilters({ ...filters, category: e.target.value })}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              >\r\n                <option value=\"\">Todas as Categorias</option>\r\n                <option value=\"general\">Geral</option>\r\n                <option value=\"technical\">Técnico</option>\r\n                <option value=\"billing\">Pagamento</option>\r\n                <option value=\"account\">Conta</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tickets List */}\r\n        <div className=\"space-y-4\">\r\n          {Array.isArray(tickets) && tickets.length > 0 ? (\r\n            tickets.map((ticket) => (\r\n              <div\r\n                key={ticket._id}\r\n                className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow\"\r\n              >\r\n                {/* Ticket Header */}\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-3 mb-2\">\r\n                      <h3 className=\"text-lg font-semibold text-gray-800\">\r\n                        {ticket.subject || 'Sem assunto'}\r\n                      </h3>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        {getStatusIcon(ticket.status)}\r\n                        <Badge variant={getStatusColor(ticket.status || 'open')}>\r\n                          {getStatusLabel(ticket.status || 'open')}\r\n                        </Badge>\r\n                      </div>\r\n                      <Badge variant={getPriorityColor(ticket.priority || 'medium')} size=\"sm\">\r\n                        <AlertTriangle className=\"w-3 h-3 mr-1\" />\r\n                        {getPriorityLabel(ticket.priority || 'medium')}\r\n                      </Badge>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center space-x-4 text-sm text-gray-500 mb-3\">\r\n                      <span className=\"flex items-center\">\r\n                        <User className=\"w-4 h-4 mr-1\" />\r\n                        {ticket.user?.username || ticket.user_name || 'Usuário desconhecido'}\r\n                      </span>\r\n                      <span className=\"flex items-center\">\r\n                        <Calendar className=\"w-4 h-4 mr-1\" />\r\n                        {formatTime(ticket.created_at)}\r\n                        {ticket.created_at && (\r\n                          <span className=\"text-gray-400 ml-2\">\r\n                            ({formatRelativeTime(ticket.created_at)})\r\n                          </span>\r\n                        )}\r\n                      </span>\r\n                      {ticket.protocol_number && (\r\n                        <span className=\"flex items-center font-mono text-blue-600\">\r\n                          <Hash className=\"w-4 h-4 mr-1\" />\r\n                          {ticket.protocol_number}\r\n                        </span>\r\n                      )}\r\n                      <span className=\"flex items-center\">\r\n                        <FileText className=\"w-4 h-4 mr-1\" />\r\n                        {getCategoryLabel(ticket.category || 'general')}\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => handleToggleExpand(ticket._id)}\r\n                    >\r\n                      {expandedTickets.has(ticket._id) ? (\r\n                        <ChevronDown className=\"w-4 h-4\" />\r\n                      ) : (\r\n                        <ChevronRight className=\"w-4 h-4\" />\r\n                      )}\r\n                    </Button>\r\n                    <Button\r\n                      size=\"sm\"\r\n                      onClick={() => handleViewTicket(ticket)}\r\n                    >\r\n                      <Eye className=\"w-4 h-4 mr-2\" />\r\n                      Gerenciar\r\n                    </Button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Ticket Preview */}\r\n                <div className=\"border-l-4 border-gray-200 pl-4 mb-4\">\r\n                  <p className=\"text-gray-700 line-clamp-2\">\r\n                    {ticket.message || 'Sem mensagem'}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Expanded Content */}\r\n                {expandedTickets.has(ticket._id) && (\r\n                  <div className=\"border-t pt-4 space-y-4\">\r\n                    {/* Full Message */}\r\n                    <div>\r\n                      <h4 className=\"font-medium text-gray-800 mb-2\">Descrição Completa:</h4>\r\n                      <div className=\"bg-gray-50 p-3 rounded-lg\">\r\n                        <p className=\"text-gray-700 whitespace-pre-wrap\">\r\n                          {ticket.message || 'Sem mensagem'}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Admin Response */}\r\n                    {ticket.admin_response && (\r\n                      <div>\r\n                        <h4 className=\"font-medium text-gray-800 mb-2\">Resposta da Equipe:</h4>\r\n                        <div className=\"bg-blue-50 border border-blue-200 p-3 rounded-lg\">\r\n                          <p className=\"text-gray-800\">{ticket.admin_response}</p>\r\n                          {ticket.resolved_at && (\r\n                            <p className=\"text-xs text-blue-600 mt-2\">\r\n                              Respondido em {formatTime(ticket.resolved_at)}\r\n                            </p>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Additional Info */}\r\n                    {ticket.additional_info && ticket.additional_info.length > 0 && (\r\n                      <div>\r\n                        <h4 className=\"font-medium text-gray-800 mb-2\">\r\n                          Informações Adicionais do Usuário:\r\n                        </h4>\r\n                        <div className=\"space-y-2\">\r\n                          {ticket.additional_info.map((info, index) => (\r\n                            <div key={index} className=\"bg-green-50 border border-green-200 p-3 rounded-lg\">\r\n                              <p className=\"text-gray-800\">{info.message}</p>\r\n                              <p className=\"text-xs text-green-600 mt-1\">\r\n                                {formatTime(info.created_at)}\r\n                              </p>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"text-center py-12 bg-white rounded-lg shadow-md\">\r\n              <MessageCircle className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-800 mb-2\">\r\n                Nenhum ticket encontrado\r\n              </h3>\r\n              <p className=\"text-gray-600\">\r\n                Não há tickets que correspondam aos filtros selecionados.\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Pagination */}\r\n        {totalPages > 1 && (\r\n          <div className=\"mt-8 flex justify-center\">\r\n            <div className=\"flex space-x-2\">\r\n              {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n                <button\r\n                  key={page}\r\n                  onClick={() => setCurrentPage(page)}\r\n                  className={`px-4 py-2 rounded-lg ${\r\n                    currentPage === page\r\n                      ? 'bg-blue-600 text-white'\r\n                      : 'bg-white text-gray-600 hover:bg-gray-50'\r\n                  }`}\r\n                >\r\n                  {page}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Ticket Management Modal */}\r\n        {showTicketModal && selectedTicket && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto\">\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  <h3 className=\"text-xl font-semibold text-gray-800\">\r\n                    Gerenciar Ticket\r\n                  </h3>\r\n                  <button \r\n                    onClick={() => setShowTicketModal(false)}\r\n                    className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n                  >\r\n                    <XCircle className=\"w-6 h-6\" />\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Ticket Info */}\r\n                <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\r\n                  <h4 className=\"font-medium text-gray-800 mb-2\">{selectedTicket.subject}</h4>\r\n                  <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                    <div>\r\n                      <span className=\"text-gray-600\">Usuário:</span>\r\n                      <span className=\"ml-2 font-medium\">\r\n                        {selectedTicket.user?.username || selectedTicket.user_name || 'N/A'}\r\n                      </span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"text-gray-600\">Protocolo:</span>\r\n                      <span className=\"ml-2 font-medium font-mono\">\r\n                        {selectedTicket.protocol_number || 'N/A'}\r\n                      </span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"text-gray-600\">Criado em:</span>\r\n                      <span className=\"ml-2\">{formatTime(selectedTicket.created_at)}</span>\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"text-gray-600\">Categoria:</span>\r\n                      <span className=\"ml-2\">{getCategoryLabel(selectedTicket.category)}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Update Form */}\r\n                <form onSubmit={(e) => {\r\n                  e.preventDefault();\r\n                  handleTicketUpdate(selectedTicket._id, formData);\r\n                }} className=\"space-y-4\">\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        Status\r\n                      </label>\r\n                      <select\r\n                        value={formData.status}\r\n                        onChange={(e) => setFormData(prev => ({ ...prev, status: e.target.value }))}\r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        required\r\n                      >\r\n                        <option value=\"open\">Aberto</option>\r\n                        <option value=\"in_progress\">Em Andamento</option>\r\n                        <option value=\"resolved\">Resolvido</option>\r\n                        <option value=\"closed\">Fechado</option>\r\n                      </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        Prioridade\r\n                      </label>\r\n                      <select\r\n                        value={formData.priority}\r\n                        onChange={(e) => setFormData(prev => ({ ...prev, priority: e.target.value }))}\r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                        required\r\n                      >\r\n                        <option value=\"low\">Baixa</option>\r\n                        <option value=\"medium\">Média</option>\r\n                        <option value=\"high\">Alta</option>\r\n                        <option value=\"urgent\">Urgente</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Resposta da Equipe de Suporte\r\n                    </label>\r\n                    <textarea\r\n                      value={formData.admin_response}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, admin_response: e.target.value }))}\r\n                      placeholder=\"Digite sua resposta para o usuário...\"\r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      rows=\"4\"\r\n                      maxLength=\"2000\"\r\n                    />\r\n                    <div className=\"text-right text-xs text-gray-500 mt-1\">\r\n                      {formData.admin_response.length}/2000 caracteres\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex space-x-3 pt-4\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"outline\"\r\n                      onClick={() => setShowTicketModal(false)}\r\n                      className=\"flex-1\"\r\n                      disabled={updating}\r\n                    >\r\n                      Cancelar\r\n                    </Button>\r\n                    <Button\r\n                      type=\"submit\"\r\n                      className=\"flex-1\"\r\n                      disabled={updating}\r\n                    >\r\n                      <Send className=\"w-4 h-4 mr-2\" />\r\n                      {updating ? 'Atualizando...' : 'Atualizar Ticket'}\r\n                    </Button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminSupport;","import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { \r\n  MessageCircle, \r\n  Plus, \r\n  Clock, \r\n  CheckCircle, \r\n  AlertCircle,\r\n  User,\r\n  Calendar,\r\n  Send,\r\n  Search,\r\n  Filter,\r\n  X,\r\n  FileText,\r\n  HelpCircle,\r\n  Mail,\r\n  Phone,\r\n  Hash\r\n} from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\nimport Badge from '../../components/Common/Badge';\r\nimport { toast } from 'react-toastify';\r\nimport { supportService } from '../../services/supportService';\r\n\r\nconst Support = () => {\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [tickets, setTickets] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState('all');\r\n  const [showCreateForm, setShowCreateForm] = useState(false);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [protocolSearch, setProtocolSearch] = useState('');\r\n  const [formData, setFormData] = useState({\r\n    subject: '',\r\n    message: '',\r\n    category: 'general',\r\n    priority: 'medium'\r\n  });\r\n\r\n  useEffect(() => {\r\n    loadTickets();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadTickets();\r\n  }, [filter]);\r\n\r\n  const loadTickets = async () => {\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const result = await supportService.getUserTickets({\r\n        limit: 50,\r\n        skip: 0,\r\n        status: filter === 'all' ? undefined : filter\r\n      });\r\n\r\n      if (result.success) {\r\n        const ticketsData = result.data.tickets || result.data || [];\r\n        setTickets(Array.isArray(ticketsData) ? ticketsData : []);\r\n      } else {\r\n        toast.error(result.message);\r\n        setTickets([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar tickets:', error);\r\n      toast.error('Erro ao carregar tickets de suporte');\r\n      setTickets([]);\r\n    }\r\n    \r\n    setLoading(false);\r\n  };\r\n\r\n  const handleCreateTicket = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    // Validate form data\r\n    const validation = supportService.validateTicketData(formData);\r\n    if (!validation.isValid) {\r\n      toast.error(validation.errors[0]);\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    \r\n    try {\r\n      const result = await supportService.createTicket(validation.data);\r\n      \r\n      if (result.success) {\r\n        // Add new ticket to state\r\n        const newTicket = result.data.ticket || result.data;\r\n        \r\n        if (newTicket && newTicket._id) {\r\n          setTickets(prev => Array.isArray(prev) ? [newTicket, ...prev] : [newTicket]);\r\n        } else {\r\n          console.error('Invalid ticket structure:', newTicket);\r\n          toast.error('Erro na estrutura do ticket criado');\r\n        }\r\n        \r\n        // Reset form\r\n        setFormData({\r\n          subject: '',\r\n          message: '',\r\n          category: 'general',\r\n          priority: 'medium'\r\n        });\r\n        setShowCreateForm(false);\r\n        \r\n        const protocolInfo = newTicket.protocol_number ? `Protocolo: ${newTicket.protocol_number}` : `ID: ${newTicket._id}`;\r\n        toast.success(`Ticket criado com sucesso! ${protocolInfo}`);\r\n      } else {\r\n        toast.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao criar ticket:', error);\r\n      toast.error('Erro ao criar ticket');\r\n    }\r\n    \r\n    setSubmitting(false);\r\n  };\r\n\r\n  const handleProtocolSearch = async () => {\r\n    if (!protocolSearch.trim()) {\r\n      toast.error('Digite um número de protocolo');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const result = await supportService.getTicketByProtocol(protocolSearch.trim());\r\n      \r\n      if (result.success) {\r\n        const ticket = result.data.ticket || result.data;\r\n        setTickets(ticket ? [ticket] : []);\r\n        setFilter('all');\r\n        setSearchTerm('');\r\n        toast.success('Ticket encontrado!');\r\n      } else {\r\n        toast.error(result.message);\r\n        setTickets([]);\r\n      }\r\n    } catch (error) {\r\n      toast.error('Erro ao buscar ticket');\r\n      setTickets([]);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const clearSearch = () => {\r\n    setProtocolSearch('');\r\n    setSearchTerm('');\r\n    loadTickets();\r\n  };\r\n\r\n  const handleViewDetails = (ticket) => {\r\n    const ticketId = ticket.protocol_number || ticket._id;\r\n    navigate(`/support/ticket/${ticketId}`);\r\n  };\r\n\r\n  const handleAddInfo = (ticket) => {\r\n    navigate(`/support/ticket/${ticket.protocol_number || ticket._id}`);\r\n  };\r\n\r\n  const formatTime = (timestamp) => {\r\n    const date = new Date(timestamp);\r\n    return date.toLocaleString('pt-BR');\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'open': return 'warning';\r\n      case 'in_progress': return 'primary';\r\n      case 'resolved': return 'success';\r\n      case 'closed': return 'secondary';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'open': return 'Aberto';\r\n      case 'in_progress': return 'Em Andamento';\r\n      case 'resolved': return 'Resolvido';\r\n      case 'closed': return 'Fechado';\r\n      default: return status;\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'low': return 'secondary';\r\n      case 'medium': return 'primary';\r\n      case 'high': return 'warning';\r\n      case 'urgent': return 'danger';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getPriorityLabel = (priority) => {\r\n    switch (priority) {\r\n      case 'low': return 'Baixa';\r\n      case 'medium': return 'Média';\r\n      case 'high': return 'Alta';\r\n      case 'urgent': return 'Urgente';\r\n      default: return priority;\r\n    }\r\n  };\r\n\r\n  const getCategoryLabel = (category) => {\r\n    switch (category) {\r\n      case 'general': return 'Geral';\r\n      case 'technical': return 'Técnico';\r\n      case 'billing': return 'Pagamento';\r\n      case 'account': return 'Conta';\r\n      default: return category;\r\n    }\r\n  };\r\n\r\n  const filteredTickets = Array.isArray(tickets) ? tickets.filter(ticket => {\r\n    const matchesFilter = filter === 'all' || ticket.status === filter;\r\n    const matchesSearch = !searchTerm || \r\n      ticket.subject.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      ticket.message.toLowerCase().includes(searchTerm.toLowerCase());\r\n    \r\n    return matchesFilter && matchesSearch;\r\n  }) : [];\r\n\r\n  const getFilterCounts = () => {\r\n    if (!Array.isArray(tickets)) {\r\n      return { all: 0, open: 0, in_progress: 0, resolved: 0 };\r\n    }\r\n    \r\n    return {\r\n      all: tickets.length,\r\n      open: tickets.filter(t => t.status === 'open').length,\r\n      in_progress: tickets.filter(t => t.status === 'in_progress').length,\r\n      resolved: tickets.filter(t => t.status === 'resolved').length\r\n    };\r\n  };\r\n\r\n  const counts = getFilterCounts();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4 max-w-6xl\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between mb-6\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <HelpCircle className=\"w-8 h-8 text-blue-600\" />\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-gray-800\">\r\n                  Central de Ajuda\r\n                </h1>\r\n                <p className=\"text-gray-600\">\r\n                  Como podemos ajudar você hoje?\r\n                </p>\r\n              </div>\r\n            </div>\r\n            \r\n            <Button \r\n              onClick={() => setShowCreateForm(true)}\r\n              className=\"flex items-center\"\r\n            >\r\n              <Plus className=\"w-4 h-4 mr-2\" />\r\n              Novo Ticket\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Quick Help Cards */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\r\n            <div className=\"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex items-center space-x-3 mb-3\">\r\n                <FileText className=\"w-6 h-6 text-blue-600\" />\r\n                <h3 className=\"font-semibold text-gray-800\">FAQ</h3>\r\n              </div>\r\n              <p className=\"text-gray-600 text-sm mb-3\">\r\n                Encontre respostas para as perguntas mais comuns\r\n              </p>\r\n              <Button variant=\"outline\" size=\"sm\">\r\n                Ver FAQ\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex items-center space-x-3 mb-3\">\r\n                <Mail className=\"w-6 h-6 text-green-600\" />\r\n                <h3 className=\"font-semibold text-gray-800\">Email</h3>\r\n              </div>\r\n              <p className=\"text-gray-600 text-sm mb-3\">\r\n                Entre em contato diretamente por email\r\n              </p>\r\n              <Button variant=\"outline\" size=\"sm\">\r\n                <a href=\"mailto:suporte@gameunite.com\">Enviar Email</a>\r\n              </Button>\r\n            </div>\r\n\r\n            <div className=\"bg-white p-6 rounded-lg shadow-md hover:shadow-lg transition-shadow\">\r\n              <div className=\"flex items-center space-x-3 mb-3\">\r\n                <Phone className=\"w-6 h-6 text-purple-600\" />\r\n                <h3 className=\"font-semibold text-gray-800\">WhatsApp</h3>\r\n              </div>\r\n              <p className=\"text-gray-600 text-sm mb-3\">\r\n                Suporte rápido via WhatsApp\r\n              </p>\r\n              <Button variant=\"outline\" size=\"sm\">\r\n                <a href=\"https://wa.me/5511999999999\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  Abrir Chat\r\n                </a>\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Search and Filters */}\r\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\r\n          <div className=\"flex flex-col gap-4\">\r\n            {/* Protocol Search */}\r\n            <div className=\"flex flex-col sm:flex-row gap-3\">\r\n              <div className=\"relative flex-1 max-w-md\">\r\n                <Hash className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Buscar por protocolo (ex: SUP-2025-000123)\"\r\n                  value={protocolSearch}\r\n                  onChange={(e) => setProtocolSearch(e.target.value)}\r\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <Button \r\n                  onClick={handleProtocolSearch}\r\n                  disabled={!protocolSearch.trim() || loading}\r\n                  size=\"sm\"\r\n                >\r\n                  <Search className=\"w-4 h-4 mr-2\" />\r\n                  Buscar\r\n                </Button>\r\n                <Button \r\n                  variant=\"outline\"\r\n                  onClick={clearSearch}\r\n                  size=\"sm\"\r\n                >\r\n                  Limpar\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* General Search */}\r\n            <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\r\n              <div className=\"relative flex-1 max-w-md\">\r\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"Buscar tickets...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Filters */}\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {[\r\n                  { key: 'all', label: 'Todos', count: counts.all },\r\n                  { key: 'open', label: 'Abertos', count: counts.open },\r\n                  { key: 'in_progress', label: 'Em Andamento', count: counts.in_progress },\r\n                  { key: 'resolved', label: 'Resolvidos', count: counts.resolved }\r\n                ].map(filterOption => (\r\n                  <button\r\n                    key={filterOption.key}\r\n                    onClick={() => setFilter(filterOption.key)}\r\n                    className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                      filter === filterOption.key\r\n                        ? 'bg-blue-600 text-white'\r\n                        : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\r\n                    }`}\r\n                  >\r\n                    {filterOption.label} ({filterOption.count})\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tickets List */}\r\n        <div className=\"space-y-4\">\r\n          {filteredTickets.length > 0 ? (\r\n            filteredTickets.map((ticket) => (\r\n              <div\r\n                key={ticket._id}\r\n                className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow\"\r\n              >\r\n                {/* Ticket Header */}\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-3 mb-2\">\r\n                      <h3 className=\"text-lg font-semibold text-gray-800\">\r\n                        {ticket.subject || 'Sem assunto'}\r\n                      </h3>\r\n                      <Badge variant={getStatusColor(ticket.status || 'open')}>\r\n                        {getStatusLabel(ticket.status || 'open')}\r\n                      </Badge>\r\n                      <Badge variant={getPriorityColor(ticket.priority || 'medium')} size=\"sm\">\r\n                        {getPriorityLabel(ticket.priority || 'medium')}\r\n                      </Badge>\r\n                    </div>\r\n                    \r\n                    <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\r\n                      <span className=\"flex items-center\">\r\n                        <Calendar className=\"w-4 h-4 mr-1\" />\r\n                        {ticket.created_at ? formatTime(ticket.created_at) : 'Data não disponível'}\r\n                      </span>\r\n                      {ticket.protocol_number && (\r\n                        <span className=\"flex items-center font-mono\">\r\n                          <Hash className=\"w-4 h-4 mr-1\" />\r\n                          {ticket.protocol_number}\r\n                        </span>\r\n                      )}\r\n                      <span>#{ticket._id ? ticket._id.slice(-6) : 'N/A'}</span>\r\n                      <span>{getCategoryLabel(ticket.category || 'general')}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Ticket Content */}\r\n                <div className=\"mb-4\">\r\n                  <p className=\"text-gray-700 whitespace-pre-wrap\">\r\n                    {ticket.message || 'Sem mensagem'}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Admin Response */}\r\n                {ticket.admin_response && (\r\n                  <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                    <div className=\"flex items-start space-x-3\">\r\n                      <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                        <User className=\"w-4 h-4 text-white\" />\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"text-sm text-blue-600 font-medium mb-1\">\r\n                          Resposta do Suporte\r\n                          {ticket.resolved_at && (\r\n                            <span className=\"ml-2 text-xs\">\r\n                              • {formatTime(ticket.resolved_at)}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <p className=\"text-gray-800\">{ticket.admin_response}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Ticket Actions */}\r\n                <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    {ticket.status === 'open' && (\r\n                      <span className=\"flex items-center text-sm text-orange-600\">\r\n                        <Clock className=\"w-4 h-4 mr-1\" />\r\n                        Aguardando resposta\r\n                      </span>\r\n                    )}\r\n                    {ticket.status === 'in_progress' && (\r\n                      <span className=\"flex items-center text-sm text-blue-600\">\r\n                        <AlertCircle className=\"w-4 h-4 mr-1\" />\r\n                        Em análise\r\n                      </span>\r\n                    )}\r\n                    {ticket.status === 'resolved' && (\r\n                      <span className=\"flex items-center text-sm text-green-600\">\r\n                        <CheckCircle className=\"w-4 h-4 mr-1\" />\r\n                        Resolvido\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  <div className=\"flex space-x-2\">\r\n                    <Button \r\n                      variant=\"outline\" \r\n                      size=\"sm\"\r\n                      onClick={() => handleViewDetails(ticket)}\r\n                    >\r\n                      Ver Detalhes\r\n                    </Button>\r\n                    {ticket.status === 'open' && (\r\n                      <Button \r\n                        size=\"sm\"\r\n                        onClick={() => handleAddInfo(ticket)}\r\n                      >\r\n                        Adicionar Informação\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"text-center py-12\">\r\n              <MessageCircle className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-800 mb-2\">\r\n                {searchTerm ? 'Nenhum ticket encontrado' : 'Nenhum ticket ainda'}\r\n              </h3>\r\n              <p className=\"text-gray-600 mb-4\">\r\n                {searchTerm \r\n                  ? 'Tente ajustar sua busca ou filtros'\r\n                  : 'Crie seu primeiro ticket de suporte'\r\n                }\r\n              </p>\r\n              {!searchTerm && (\r\n                <Button onClick={() => setShowCreateForm(true)}>\r\n                  <Plus className=\"w-4 h-4 mr-2\" />\r\n                  Criar Ticket\r\n                </Button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Create Ticket Modal */}\r\n        {showCreateForm && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto\">\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  <h3 className=\"text-xl font-semibold text-gray-800\">\r\n                    Criar Novo Ticket\r\n                  </h3>\r\n                  <button \r\n                    onClick={() => setShowCreateForm(false)}\r\n                    className=\"text-gray-400 hover:text-gray-600 transition-colors\"\r\n                  >\r\n                    <X className=\"w-6 h-6\" />\r\n                  </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleCreateTicket} className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Assunto *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={formData.subject}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, subject: e.target.value }))}\r\n                      placeholder=\"Descreva brevemente o problema\"\r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        Categoria\r\n                      </label>\r\n                      <select\r\n                        value={formData.category}\r\n                        onChange={(e) => setFormData(prev => ({ ...prev, category: e.target.value }))}\r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      >\r\n                        <option value=\"general\">Geral</option>\r\n                        <option value=\"technical\">Técnico</option>\r\n                        <option value=\"billing\">Pagamento</option>\r\n                        <option value=\"account\">Conta</option>\r\n                      </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                        Prioridade\r\n                      </label>\r\n                      <select\r\n                        value={formData.priority}\r\n                        onChange={(e) => setFormData(prev => ({ ...prev, priority: e.target.value }))}\r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      >\r\n                        <option value=\"low\">Baixa</option>\r\n                        <option value=\"medium\">Média</option>\r\n                        <option value=\"high\">Alta</option>\r\n                        <option value=\"urgent\">Urgente</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Descrição *\r\n                    </label>\r\n                    <textarea\r\n                      value={formData.message}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, message: e.target.value }))}\r\n                      placeholder=\"Descreva o problema com detalhes...\"\r\n                      className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      rows=\"6\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex space-x-3 pt-4\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"outline\"\r\n                      onClick={() => setShowCreateForm(false)}\r\n                      className=\"flex-1\"\r\n                      disabled={submitting}\r\n                    >\r\n                      Cancelar\r\n                    </Button>\r\n                    <Button\r\n                      type=\"submit\"\r\n                      className=\"flex-1\"\r\n                      disabled={submitting}\r\n                    >\r\n                      <Send className=\"w-4 h-4 mr-2\" />\r\n                      {submitting ? 'Criando...' : 'Criar Ticket'}\r\n                    </Button>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Support;","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { \r\n  ArrowLeft,\r\n  Clock, \r\n  CheckCircle, \r\n  AlertCircle,\r\n  User,\r\n  Calendar,\r\n  Hash,\r\n  MessageCircle,\r\n  Send,\r\n  FileText,\r\n  Edit,\r\n  Shield,\r\n  RefreshCw,\r\n  Info,\r\n  AlertTriangle,\r\n  CheckCircle2,\r\n  XCircle,\r\n  Timer\r\n} from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\nimport Badge from '../../components/Common/Badge';\r\nimport { toast } from 'react-toastify';\r\nimport { supportService } from '../../services/supportService';\r\n\r\nconst TicketDetails = () => {\r\n  const { ticketId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  const [ticket, setTicket] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [updating, setUpdating] = useState(false);\r\n  const [replyText, setReplyText] = useState('');\r\n  const [showReplyForm, setShowReplyForm] = useState(false);\r\n\r\n  useEffect(() => {\r\n    loadTicketDetails();\r\n  }, [ticketId]);\r\n\r\n  const loadTicketDetails = async () => {\r\n    setLoading(true);\r\n    try {\r\n      let result;\r\n      \r\n      console.log('🔍 Carregando ticket:', ticketId);\r\n      \r\n      // Try to get by protocol number first, then by ID\r\n      if (ticketId.startsWith('SUP-')) {\r\n        console.log('📋 Buscando por protocolo');\r\n        result = await supportService.getTicketByProtocol(ticketId);\r\n      } else {\r\n        console.log('📋 Buscando por ID');\r\n        result = await supportService.getTicketById(ticketId);\r\n      }\r\n\r\n      console.log('📄 Resultado da busca:', result);\r\n\r\n      if (result.success) {\r\n        const ticketData = result.data.ticket || result.data;\r\n        console.log('🎯 Ticket carregado:', ticketData);\r\n        setTicket(ticketData);\r\n      } else {\r\n        console.error('❌ Erro ao carregar ticket:', result.message);\r\n        toast.error(result.message || 'Ticket não encontrado');\r\n        navigate('/support');\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Erro no carregamento:', error);\r\n      \r\n      // If rate limited, show a better message\r\n      if (error.response?.status === 429) {\r\n        toast.error('Muitas requisições. Aguarde um momento e tente novamente.');\r\n      } else if (error.response?.status === 404) {\r\n        toast.error('Ticket não encontrado');\r\n      } else {\r\n        toast.error('Erro ao carregar detalhes do ticket');\r\n      }\r\n      navigate('/support');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const formatTime = (timestamp) => {\r\n    if (!timestamp) return 'Não disponível';\r\n    \r\n    try {\r\n      const date = new Date(timestamp);\r\n      return date.toLocaleString('pt-BR', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit'\r\n      });\r\n    } catch (error) {\r\n      return 'Data inválida';\r\n    }\r\n  };\r\n\r\n  const formatRelativeTime = (timestamp) => {\r\n    if (!timestamp) return '';\r\n    \r\n    try {\r\n      const date = new Date(timestamp);\r\n      const now = new Date();\r\n      const diffMs = now - date;\r\n      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n      const diffDays = Math.floor(diffHours / 24);\r\n      \r\n      if (diffDays > 0) {\r\n        return `há ${diffDays} dia(s)`;\r\n      } else if (diffHours > 0) {\r\n        return `há ${diffHours} hora(s)`;\r\n      } else {\r\n        const diffMinutes = Math.floor(diffMs / (1000 * 60));\r\n        return `há ${Math.max(1, diffMinutes)} minuto(s)`;\r\n      }\r\n    } catch (error) {\r\n      return '';\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    switch (status) {\r\n      case 'open': return 'warning';\r\n      case 'in_progress': return 'primary';\r\n      case 'resolved': return 'success';\r\n      case 'closed': return 'secondary';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getStatusLabel = (status) => {\r\n    switch (status) {\r\n      case 'open': return 'Aberto';\r\n      case 'in_progress': return 'Em Andamento';\r\n      case 'resolved': return 'Resolvido';\r\n      case 'closed': return 'Fechado';\r\n      default: return status || 'Desconhecido';\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'open': return <Clock className=\"w-4 h-4\" />;\r\n      case 'in_progress': return <Timer className=\"w-4 h-4\" />;\r\n      case 'resolved': return <CheckCircle2 className=\"w-4 h-4\" />;\r\n      case 'closed': return <XCircle className=\"w-4 h-4\" />;\r\n      default: return <AlertCircle className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority) => {\r\n    switch (priority) {\r\n      case 'low': return 'secondary';\r\n      case 'medium': return 'primary';\r\n      case 'high': return 'warning';\r\n      case 'urgent': return 'danger';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getPriorityLabel = (priority) => {\r\n    switch (priority) {\r\n      case 'low': return 'Baixa';\r\n      case 'medium': return 'Média';\r\n      case 'high': return 'Alta';\r\n      case 'urgent': return 'Urgente';\r\n      default: return priority || 'Não definida';\r\n    }\r\n  };\r\n\r\n  const getCategoryLabel = (category) => {\r\n    switch (category) {\r\n      case 'general': return 'Geral';\r\n      case 'technical': return 'Técnico';\r\n      case 'billing': return 'Pagamento';\r\n      case 'account': return 'Conta';\r\n      default: return category || 'Não categorizado';\r\n    }\r\n  };\r\n\r\n  const getCategoryIcon = (category) => {\r\n    switch (category) {\r\n      case 'general': return <Info className=\"w-4 h-4\" />;\r\n      case 'technical': return <Shield className=\"w-4 h-4\" />;\r\n      case 'billing': return <FileText className=\"w-4 h-4\" />;\r\n      case 'account': return <User className=\"w-4 h-4\" />;\r\n      default: return <MessageCircle className=\"w-4 h-4\" />;\r\n    }\r\n  };\r\n\r\n  const handleAddReply = async () => {\r\n    if (!replyText.trim()) {\r\n      toast.error('Digite uma mensagem');\r\n      return;\r\n    }\r\n\r\n    if (replyText.trim().length < 5) {\r\n      toast.error('A mensagem deve ter pelo menos 5 caracteres');\r\n      return;\r\n    }\r\n\r\n    setUpdating(true);\r\n    try {\r\n      console.log('📤 Enviando resposta para ticket:', ticket._id);\r\n      const result = await supportService.addTicketReply(ticket._id, replyText.trim());\r\n      \r\n      console.log('📨 Resultado do envio:', result);\r\n      \r\n      if (result.success) {\r\n        toast.success('Informação adicionada com sucesso');\r\n        setReplyText('');\r\n        setShowReplyForm(false);\r\n        \r\n        // Reload ticket details to show the new reply\r\n        await loadTicketDetails();\r\n      } else {\r\n        toast.error(result.message || 'Erro ao adicionar informação');\r\n      }\r\n    } catch (error) {\r\n      console.error('❌ Erro ao adicionar resposta:', error);\r\n      toast.error('Erro ao adicionar informação');\r\n    }\r\n    setUpdating(false);\r\n  };\r\n\r\n  const handleRefresh = () => {\r\n    toast.info('Atualizando ticket...');\r\n    loadTicketDetails();\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <LoadingSpinner size=\"lg\" />\r\n          <p className=\"mt-4 text-gray-600\">Carregando detalhes do ticket...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!ticket) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"text-center\">\r\n          <MessageCircle className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-800 mb-2\">\r\n            Ticket não encontrado\r\n          </h3>\r\n          <p className=\"text-gray-600 mb-4\">\r\n            O ticket solicitado não existe ou você não tem permissão para visualizá-lo.\r\n          </p>\r\n          <Button onClick={() => navigate('/support')}>\r\n            Voltar ao Suporte\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const canAddReply = ticket.status === 'open' || ticket.status === 'in_progress';\r\n  const isResolved = ticket.status === 'resolved' || ticket.status === 'closed';\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4 max-w-4xl\">\r\n        {/* Header Navigation */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <Button \r\n              variant=\"outline\" \r\n              onClick={() => navigate('/support')}\r\n            >\r\n              <ArrowLeft className=\"w-4 h-4 mr-2\" />\r\n              Voltar ao Suporte\r\n            </Button>\r\n            \r\n            <Button \r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={handleRefresh}\r\n              disabled={loading}\r\n            >\r\n              <RefreshCw className={`w-4 h-4 mr-2 ${loading ? 'animate-spin' : ''}`} />\r\n              Atualizar\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Ticket Header Card */}\r\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n            <div className=\"flex items-start justify-between mb-4\">\r\n              <div className=\"flex-1\">\r\n                <h1 className=\"text-2xl font-bold text-gray-800 mb-3\">\r\n                  {ticket.subject || 'Sem assunto'}\r\n                </h1>\r\n                \r\n                {/* Status and Priority Badges */}\r\n                <div className=\"flex items-center flex-wrap gap-3 mb-4\">\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    {getStatusIcon(ticket.status)}\r\n                    <Badge variant={getStatusColor(ticket.status || 'open')}>\r\n                      {getStatusLabel(ticket.status || 'open')}\r\n                    </Badge>\r\n                  </div>\r\n                  \r\n                  <Badge variant={getPriorityColor(ticket.priority || 'medium')} size=\"sm\">\r\n                    <AlertTriangle className=\"w-3 h-3 mr-1\" />\r\n                    {getPriorityLabel(ticket.priority || 'medium')}\r\n                  </Badge>\r\n                  \r\n                  <div className=\"flex items-center text-sm text-gray-600\">\r\n                    {getCategoryIcon(ticket.category)}\r\n                    <span className=\"ml-1\">{getCategoryLabel(ticket.category || 'general')}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Ticket Info */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600\">\r\n                  <div className=\"flex items-center\">\r\n                    <Calendar className=\"w-4 h-4 mr-2\" />\r\n                    <span>\r\n                      Criado em {formatTime(ticket.created_at)}\r\n                      {ticket.created_at && (\r\n                        <span className=\"text-gray-500 ml-2\">\r\n                          ({formatRelativeTime(ticket.created_at)})\r\n                        </span>\r\n                      )}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  {ticket.protocol_number && (\r\n                    <div className=\"flex items-center font-mono\">\r\n                      <Hash className=\"w-4 h-4 mr-2\" />\r\n                      <span className=\"font-medium\">{ticket.protocol_number}</span>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <div className=\"flex items-center\">\r\n                    <FileText className=\"w-4 h-4 mr-2\" />\r\n                    <span>ID: #{ticket._id ? ticket._id.slice(-8) : 'N/A'}</span>\r\n                  </div>\r\n                  \r\n                  {ticket.updated_at && (\r\n                    <div className=\"flex items-center\">\r\n                      <RefreshCw className=\"w-4 h-4 mr-2\" />\r\n                      <span>\r\n                        Atualizado {formatRelativeTime(ticket.updated_at)}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"flex flex-col space-y-2 ml-4\">\r\n                {canAddReply && (\r\n                  <Button \r\n                    size=\"sm\"\r\n                    onClick={() => setShowReplyForm(!showReplyForm)}\r\n                    className={showReplyForm ? 'bg-gray-600' : ''}\r\n                  >\r\n                    <Edit className=\"w-4 h-4 mr-2\" />\r\n                    {showReplyForm ? 'Cancelar' : 'Adicionar Info'}\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Content Area */}\r\n        <div className=\"space-y-6\">\r\n          {/* Original Message */}\r\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\r\n              <MessageCircle className=\"w-5 h-5 mr-2 text-blue-600\" />\r\n              Descrição do Problema\r\n            </h3>\r\n            <div className=\"bg-gray-50 border-l-4 border-blue-500 p-4 rounded-r-lg\">\r\n              <p className=\"text-gray-700 whitespace-pre-wrap leading-relaxed\">\r\n                {ticket.message || 'Nenhuma descrição fornecida.'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Admin Response */}\r\n          {ticket.admin_response && (\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\r\n                <Shield className=\"w-5 h-5 mr-2 text-blue-600\" />\r\n                Resposta da Equipe de Suporte\r\n              </h3>\r\n              <div className=\"bg-blue-50 border-l-4 border-blue-500 rounded-r-lg p-4\">\r\n                <div className=\"flex items-start space-x-3\">\r\n                  <div className=\"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                    <Shield className=\"w-5 h-5 text-white\" />\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"text-sm text-blue-700 font-medium mb-2\">\r\n                      Equipe de Suporte\r\n                      {ticket.resolved_at && (\r\n                        <span className=\"ml-2 text-xs bg-blue-100 px-2 py-1 rounded\">\r\n                          Respondido em {formatTime(ticket.resolved_at)}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                    <p className=\"text-gray-800 leading-relaxed\">{ticket.admin_response}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Additional Information from User */}\r\n          {ticket.additional_info && ticket.additional_info.length > 0 && (\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\r\n                <Edit className=\"w-5 h-5 mr-2 text-green-600\" />\r\n                Informações Adicionais\r\n                <span className=\"ml-2 text-sm bg-green-100 text-green-700 px-2 py-1 rounded\">\r\n                  {ticket.additional_info.length} mensagem(ns)\r\n                </span>\r\n              </h3>\r\n              <div className=\"space-y-4\">\r\n                {ticket.additional_info.map((info, index) => (\r\n                  <div key={index} className=\"bg-green-50 border-l-4 border-green-500 rounded-r-lg p-4\">\r\n                    <div className=\"flex items-start space-x-3\">\r\n                      <div className=\"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center flex-shrink-0\">\r\n                        <User className=\"w-4 h-4 text-white\" />\r\n                      </div>\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"text-sm text-green-700 font-medium mb-1\">\r\n                          Você • {formatTime(info.created_at)}\r\n                          <span className=\"text-green-600 ml-2\">\r\n                            ({formatRelativeTime(info.created_at)})\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-gray-800 leading-relaxed\">{info.message}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Add Reply Form */}\r\n          {showReplyForm && canAddReply && (\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\r\n                <Send className=\"w-5 h-5 mr-2 text-blue-600\" />\r\n                Adicionar Informação\r\n              </h3>\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Descreva informações adicionais sobre seu problema:\r\n                  </label>\r\n                  <textarea\r\n                    value={replyText}\r\n                    onChange={(e) => setReplyText(e.target.value)}\r\n                    placeholder=\"Forneça mais detalhes, capturas de tela que podem ajudar, ou atualizações sobre o problema...\"\r\n                    className=\"w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-vertical\"\r\n                    rows=\"5\"\r\n                    maxLength=\"1000\"\r\n                  />\r\n                  <div className=\"text-right text-xs text-gray-500 mt-1\">\r\n                    {replyText.length}/1000 caracteres\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex space-x-3\">\r\n                  <Button\r\n                    onClick={handleAddReply}\r\n                    disabled={updating || !replyText.trim() || replyText.trim().length < 5}\r\n                  >\r\n                    <Send className=\"w-4 h-4 mr-2\" />\r\n                    {updating ? 'Enviando...' : 'Enviar Informação'}\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => {\r\n                      setShowReplyForm(false);\r\n                      setReplyText('');\r\n                    }}\r\n                    disabled={updating}\r\n                  >\r\n                    Cancelar\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Status Information */}\r\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-4 flex items-center\">\r\n              <Info className=\"w-5 h-5 mr-2 text-purple-600\" />\r\n              Informações do Ticket\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {/* Status Details */}\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                  <span className=\"text-gray-600 font-medium\">Status atual:</span>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    {getStatusIcon(ticket.status)}\r\n                    <span className={`font-medium ${\r\n                      ticket.status === 'open' ? 'text-orange-600' : \r\n                      ticket.status === 'in_progress' ? 'text-blue-600' :\r\n                      ticket.status === 'resolved' ? 'text-green-600' : 'text-gray-600'\r\n                    }`}>\r\n                      {getStatusLabel(ticket.status)}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                  <span className=\"text-gray-600 font-medium\">Prioridade:</span>\r\n                  <Badge variant={getPriorityColor(ticket.priority)}>\r\n                    {getPriorityLabel(ticket.priority)}\r\n                  </Badge>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                  <span className=\"text-gray-600 font-medium\">Categoria:</span>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    {getCategoryIcon(ticket.category)}\r\n                    <span className=\"text-gray-800\">{getCategoryLabel(ticket.category)}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Timeline */}\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                  <span className=\"text-gray-600 font-medium\">Criado em:</span>\r\n                  <span className=\"text-gray-800 text-sm\">\r\n                    {formatTime(ticket.created_at)}\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                  <span className=\"text-gray-600 font-medium\">Última atualização:</span>\r\n                  <span className=\"text-gray-800 text-sm\">\r\n                    {formatTime(ticket.updated_at)}\r\n                  </span>\r\n                </div>\r\n\r\n                {ticket.resolved_at && (\r\n                  <div className=\"flex items-center justify-between p-3 bg-green-50 rounded-lg\">\r\n                    <span className=\"text-green-700 font-medium\">Resolvido em:</span>\r\n                    <span className=\"text-green-800 text-sm\">\r\n                      {formatTime(ticket.resolved_at)}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Status Message */}\r\n            <div className={`mt-6 p-4 rounded-lg border-l-4 ${\r\n              ticket.status === 'open' ? 'bg-orange-50 border-orange-500' :\r\n              ticket.status === 'in_progress' ? 'bg-blue-50 border-blue-500' :\r\n              ticket.status === 'resolved' ? 'bg-green-50 border-green-500' : 'bg-gray-50 border-gray-500'\r\n            }`}>\r\n              <div className=\"flex items-start space-x-3\">\r\n                <div className={`w-6 h-6 rounded-full flex items-center justify-center ${\r\n                  ticket.status === 'open' ? 'bg-orange-500' :\r\n                  ticket.status === 'in_progress' ? 'bg-blue-500' :\r\n                  ticket.status === 'resolved' ? 'bg-green-500' : 'bg-gray-500'\r\n                }`}>\r\n                  {getStatusIcon(ticket.status)}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <p className={`text-sm ${\r\n                    ticket.status === 'open' ? 'text-orange-800' :\r\n                    ticket.status === 'in_progress' ? 'text-blue-800' :\r\n                    ticket.status === 'resolved' ? 'text-green-800' : 'text-gray-800'\r\n                  }`}>\r\n                    {ticket.status === 'open' && \r\n                      'Seu ticket foi recebido e está aguardando análise da nossa equipe de suporte. Você será notificado quando houver atualizações.'\r\n                    }\r\n                    {ticket.status === 'in_progress' && \r\n                      'Nossa equipe está analisando seu problema e trabalhando em uma solução. Mantenha-se atento para atualizações.'\r\n                    }\r\n                    {ticket.status === 'resolved' && \r\n                      'Seu ticket foi resolvido pela nossa equipe. Se o problema persistir, você pode adicionar mais informações ou criar um novo ticket.'\r\n                    }\r\n                    {ticket.status === 'closed' && \r\n                      'Este ticket foi fechado. Se você precisar de mais ajuda, crie um novo ticket de suporte.'\r\n                    }\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicketDetails;","import React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { Bell, Check, CheckCheck, Eye, Trash2, Filter } from 'lucide-react';\r\nimport LoadingSpinner from '../../components/Common/LoadingSpinner';\r\nimport Button from '../../components/Common/Button';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst Notifications = () => {\r\n  const { user, isAuthenticated } = useAuth();\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filter, setFilter] = useState('all'); // all, unread, read\r\n  const [actionLoading, setActionLoading] = useState({});\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      loadNotifications();\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  const loadNotifications = async () => {\r\n    setLoading(true);\r\n    \r\n    try {\r\n      // Simular carregamento de notificações - implementar API depois\r\n      const mockNotifications = [\r\n        {\r\n          id: 1,\r\n          type: 'question',\r\n          title: 'Nova pergunta no seu anúncio',\r\n          message: 'João perguntou: \"O jogo está funcionando perfeitamente?\"',\r\n          timestamp: new Date(Date.now() - 5 * 60000),\r\n          read: false,\r\n          data: {\r\n            ad_id: '123',\r\n            ad_title: 'Counter-Strike 2',\r\n            user_name: 'João'\r\n          }\r\n        },\r\n        {\r\n          id: 2,\r\n          type: 'order',\r\n          title: 'Pedido entregue',\r\n          message: 'Seu pedido \"Valorant\" foi marcado como entregue',\r\n          timestamp: new Date(Date.now() - 2 * 60 * 60000),\r\n          read: false,\r\n          data: {\r\n            order_id: '456',\r\n            product_title: 'Valorant'\r\n          }\r\n        },\r\n        {\r\n          id: 3,\r\n          type: 'favorite',\r\n          title: 'Anúncio favoritado',\r\n          message: 'Maria favoritou seu anúncio \"League of Legends\"',\r\n          timestamp: new Date(Date.now() - 24 * 60 * 60000),\r\n          read: true,\r\n          data: {\r\n            ad_id: '789',\r\n            ad_title: 'League of Legends',\r\n            user_name: 'Maria'\r\n          }\r\n        },\r\n        {\r\n          id: 4,\r\n          type: 'system',\r\n          title: 'Anúncio aprovado',\r\n          message: 'Seu anúncio \"Minecraft\" foi aprovado e está visível',\r\n          timestamp: new Date(Date.now() - 48 * 60 * 60000),\r\n          read: true,\r\n          data: {\r\n            ad_id: '101',\r\n            ad_title: 'Minecraft'\r\n          }\r\n        }\r\n      ];\r\n\r\n      setNotifications(mockNotifications);\r\n    } catch (error) {\r\n      console.error('Erro ao carregar notificações:', error);\r\n      toast.error('Erro ao carregar notificações');\r\n    }\r\n    \r\n    setLoading(false);\r\n  };\r\n\r\n  const formatTime = (timestamp) => {\r\n    const now = new Date();\r\n    const diff = now - timestamp;\r\n    const minutes = Math.floor(diff / 60000);\r\n    const hours = Math.floor(minutes / 60);\r\n    const days = Math.floor(hours / 24);\r\n\r\n    if (days > 0) return `${days} dia${days > 1 ? 's' : ''} atrás`;\r\n    if (hours > 0) return `${hours} hora${hours > 1 ? 's' : ''} atrás`;\r\n    if (minutes > 0) return `${minutes} minuto${minutes > 1 ? 's' : ''} atrás`;\r\n    return 'Agora mesmo';\r\n  };\r\n\r\n  const getNotificationIcon = (type) => {\r\n    switch (type) {\r\n      case 'question': return '💬';\r\n      case 'order': return '📦';\r\n      case 'favorite': return '❤️';\r\n      case 'system': return '🔔';\r\n      default: return '📢';\r\n    }\r\n  };\r\n\r\n  const getNotificationColor = (type) => {\r\n    switch (type) {\r\n      case 'question': return 'bg-blue-100 text-blue-600';\r\n      case 'order': return 'bg-green-100 text-green-600';\r\n      case 'favorite': return 'bg-red-100 text-red-600';\r\n      case 'system': return 'bg-gray-100 text-gray-600';\r\n      default: return 'bg-blue-100 text-blue-600';\r\n    }\r\n  };\r\n\r\n  const markAsRead = async (notificationId) => {\r\n    setActionLoading(prev => ({ ...prev, [notificationId]: true }));\r\n    \r\n    try {\r\n      // Simular API call\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      setNotifications(prev =>\r\n        prev.map(n =>\r\n          n.id === notificationId ? { ...n, read: true } : n\r\n        )\r\n      );\r\n      \r\n      toast.success('Notificação marcada como lida');\r\n    } catch (error) {\r\n      toast.error('Erro ao marcar como lida');\r\n    }\r\n    \r\n    setActionLoading(prev => ({ ...prev, [notificationId]: false }));\r\n  };\r\n\r\n  const markAllAsRead = async () => {\r\n    setLoading(true);\r\n    \r\n    try {\r\n      // Simular API call\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      setNotifications(prev => prev.map(n => ({ ...n, read: true })));\r\n      toast.success('Todas as notificações foram marcadas como lidas');\r\n    } catch (error) {\r\n      toast.error('Erro ao marcar todas como lidas');\r\n    }\r\n    \r\n    setLoading(false);\r\n  };\r\n\r\n  const deleteNotification = async (notificationId) => {\r\n    setActionLoading(prev => ({ ...prev, [notificationId]: true }));\r\n    \r\n    try {\r\n      // Simular API call\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      setNotifications(prev => prev.filter(n => n.id !== notificationId));\r\n      toast.success('Notificação removida');\r\n    } catch (error) {\r\n      toast.error('Erro ao remover notificação');\r\n    }\r\n    \r\n    setActionLoading(prev => ({ ...prev, [notificationId]: false }));\r\n  };\r\n\r\n  const filteredNotifications = notifications.filter(notification => {\r\n    if (filter === 'unread') return !notification.read;\r\n    if (filter === 'read') return notification.read;\r\n    return true;\r\n  });\r\n\r\n  const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">\r\n            Acesso Restrito\r\n          </h2>\r\n          <p className=\"text-gray-600\">\r\n            Faça login para ver suas notificações\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"container mx-auto px-4 max-w-4xl\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center space-x-3\">\r\n              <Bell className=\"w-8 h-8 text-blue-600\" />\r\n              <div>\r\n                <h1 className=\"text-3xl font-bold text-gray-800\">\r\n                  Notificações\r\n                </h1>\r\n                <p className=\"text-gray-600\">\r\n                  {unreadCount > 0 ? `${unreadCount} não lida${unreadCount > 1 ? 's' : ''}` : 'Todas lidas'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            \r\n            {unreadCount > 0 && (\r\n              <Button onClick={markAllAsRead} disabled={loading}>\r\n                <CheckCheck className=\"w-4 h-4 mr-2\" />\r\n                Marcar todas como lidas\r\n              </Button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Filters */}\r\n          <div className=\"flex space-x-2\">\r\n            <button\r\n              onClick={() => setFilter('all')}\r\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                filter === 'all'\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'bg-white text-gray-600 hover:bg-gray-50'\r\n              }`}\r\n            >\r\n              Todas ({notifications.length})\r\n            </button>\r\n            <button\r\n              onClick={() => setFilter('unread')}\r\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                filter === 'unread'\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'bg-white text-gray-600 hover:bg-gray-50'\r\n              }`}\r\n            >\r\n              Não lidas ({unreadCount})\r\n            </button>\r\n            <button\r\n              onClick={() => setFilter('read')}\r\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                filter === 'read'\r\n                  ? 'bg-blue-600 text-white'\r\n                  : 'bg-white text-gray-600 hover:bg-gray-50'\r\n              }`}\r\n            >\r\n              Lidas ({notifications.length - unreadCount})\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Notifications List */}\r\n        <div className=\"space-y-4\">\r\n          {filteredNotifications.length > 0 ? (\r\n            filteredNotifications.map((notification) => (\r\n              <div\r\n                key={notification.id}\r\n                className={`bg-white rounded-lg shadow-md p-6 transition-all hover:shadow-lg ${\r\n                  !notification.read ? 'border-l-4 border-blue-500' : ''\r\n                }`}\r\n              >\r\n                <div className=\"flex items-start space-x-4\">\r\n                  <div className={`p-3 rounded-full ${getNotificationColor(notification.type)}`}>\r\n                    <span className=\"text-lg\">\r\n                      {getNotificationIcon(notification.type)}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <h3 className=\"font-semibold text-gray-800\">\r\n                        {notification.title}\r\n                      </h3>\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        {!notification.read && (\r\n                          <button\r\n                            onClick={() => markAsRead(notification.id)}\r\n                            disabled={actionLoading[notification.id]}\r\n                            className=\"p-1 text-blue-600 hover:text-blue-800 transition-colors\"\r\n                            title=\"Marcar como lida\"\r\n                          >\r\n                            <Check className=\"w-4 h-4\" />\r\n                          </button>\r\n                        )}\r\n                        <button\r\n                          onClick={() => deleteNotification(notification.id)}\r\n                          disabled={actionLoading[notification.id]}\r\n                          className=\"p-1 text-red-600 hover:text-red-800 transition-colors\"\r\n                          title=\"Remover notificação\"\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <p className=\"text-gray-700 mb-3\">\r\n                      {notification.message}\r\n                    </p>\r\n                    \r\n                    <div className=\"flex items-center justify-between\">\r\n                      <span className=\"text-sm text-gray-500\">\r\n                        {formatTime(notification.timestamp)}\r\n                      </span>\r\n                      \r\n                      {!notification.read && (\r\n                        <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\r\n                          Nova\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"text-center py-12\">\r\n              <Bell className=\"w-16 h-16 mx-auto text-gray-300 mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-800 mb-2\">\r\n                {filter === 'unread' ? 'Nenhuma notificação não lida' :\r\n                 filter === 'read' ? 'Nenhuma notificação lida' :\r\n                 'Nenhuma notificação'}\r\n              </h3>\r\n              <p className=\"text-gray-600\">\r\n                {filter === 'all' \r\n                  ? 'Você não tem notificações ainda'\r\n                  : `Altere o filtro para ver outras notificações`\r\n                }\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notifications;","import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children, requireAdmin = false }) => {\r\n  const { isAuthenticated, loading, user } = useAuth();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  if (requireAdmin && (!user || !['admin', 'support'].includes(user.role))) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h1 className=\"text-3xl font-bold text-red-600 mb-4\">Acesso Negado</h1>\r\n          <p className=\"text-gray-600 mb-6\">Você não tem permissão para acessar esta página.</p>\r\n          <Navigate to=\"/\" replace />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n// Context providers\r\nimport { AuthProvider } from './contexts/AuthContext';\r\nimport { GameProvider } from './contexts/GameContext';\r\nimport { CartProvider } from './contexts/CartContext';\r\n\r\n// Layout\r\nimport Layout from './components/Layout/Layout';\r\n\r\n// Pages\r\nimport Home from './pages/Home/Home';\r\nimport Games from './pages/Games/Games';\r\nimport GameDetails from './pages/Games/GameDetails';\r\nimport Login from './pages/Auth/Login';\r\nimport Register from './pages/Auth/Register';\r\nimport Dashboard from './pages/Dashboard/Dashboard';\r\nimport Profile from './pages/Profile/Profile';\r\nimport CreateAd from './pages/Ads/CreateAd';\r\nimport EditAd from './pages/Ads/EditAd';\r\nimport AdDetails from './pages/Ads/AdDetails';\r\nimport UserProfile from './pages/Users/UserProfile';\r\nimport Favorites from './pages/Favorites/Favorites';\r\nimport Cart from './pages/Cart/Cart';\r\nimport Checkout from './pages/Cart/Checkout';\r\nimport Orders from './pages/Orders/Orders';\r\nimport OrderDetails from './pages/Orders/OrderDetails';\r\nimport AdminDashboard from './pages/Admin/AdminDashboard';\r\nimport AdminSupport from './pages/Admin/AdminSupport';\r\nimport Support from './pages/Support/Support';\r\nimport TicketDetails from './pages/Support/TicketDetails';\r\nimport Notifications from './pages/Notifications/Notifications';\r\n\r\n// Components\r\nimport ProtectedRoute from './components/Auth/ProtectedRoute';\r\n\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  return (\r\n      <AuthProvider>\r\n        <GameProvider>\r\n          <CartProvider> {/* NOVO */}\r\n            <Router>\r\n              <div className=\"App\">\r\n                <Routes>\r\n                  {/* Public Routes */}\r\n                  <Route path=\"/\" element={<Layout><Home /></Layout>} />\r\n                  <Route path=\"/games\" element={<Layout><Games /></Layout>} />\r\n                  <Route path=\"/games/:gameId\" element={<Layout><GameDetails /></Layout>} />\r\n                  <Route path=\"/ads/:adId\" element={<Layout><AdDetails /></Layout>} />\r\n                  <Route path=\"/users/:userId\" element={<Layout><UserProfile /></Layout>} />\r\n\r\n                  {/* Auth Routes */}\r\n                  <Route path=\"/login\" element={<Login />} />\r\n                  <Route path=\"/register\" element={<Register />} />\r\n\r\n                  {/* Protected Routes */}\r\n                  <Route\r\n                      path=\"/dashboard\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><Dashboard /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/profile\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><Profile /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/favorites\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><Favorites /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/cart\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><Cart /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/checkout\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><Checkout /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/orders\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><Orders /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/orders/:orderId\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><OrderDetails /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/create-ad\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><CreateAd /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/ads/:adId/edit\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><EditAd /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/support\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><Support /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/support/ticket/:ticketId\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><TicketDetails /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/notifications\"\r\n                      element={\r\n                        <ProtectedRoute>\r\n                          <Layout><Notifications /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/admin\"\r\n                      element={\r\n                        <ProtectedRoute requireAdmin={true}>\r\n                          <Layout><AdminDashboard /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n                  <Route\r\n                      path=\"/admin/support\"\r\n                      element={\r\n                        <ProtectedRoute requireAdmin={true}>\r\n                          <Layout><AdminSupport /></Layout>\r\n                        </ProtectedRoute>\r\n                      }\r\n                  />\r\n\r\n                  {/* 404 Route */}\r\n                  <Route\r\n                      path=\"*\"\r\n                      element={\r\n                        <Layout>\r\n                          <div className=\"min-h-screen flex items-center justify-center\">\r\n                            <div className=\"text-center\">\r\n                              <h1 className=\"text-4xl font-bold text-gray-800 mb-4\">404</h1>\r\n                              <p className=\"text-gray-600 mb-6\">Página não encontrada</p>\r\n                              <a href=\"/\" className=\"text-blue-600 hover:text-blue-800\">\r\n                                Voltar para o início\r\n                              </a>\r\n                            </div>\r\n                          </div>\r\n                        </Layout>\r\n                      }\r\n                  />\r\n                </Routes>\r\n\r\n                {/* Toast notifications */}\r\n                <ToastContainer\r\n                    position=\"top-right\"\r\n                    autoClose={5000}\r\n                    hideProgressBar={false}\r\n                    newestOnTop={false}\r\n                    closeOnClick\r\n                    rtl={false}\r\n                    pauseOnFocusLoss\r\n                    draggable\r\n                    pauseOnHover\r\n                />\r\n              </div>\r\n            </Router>\r\n          </CartProvider>\r\n        </GameProvider>\r\n      </AuthProvider>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\nimport App from './App.jsx'\r\nimport './index.css'\r\n\r\nReactDOM.createRoot(document.getElementById('root')).render(\r\n    <App />\r\n)\r\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","bind","fn","thisArg","toString","getPrototypeOf","iterator","toStringTag","kindOf","cache","thing","str","kindOfTest","type","typeOfTest","isArray","isUndefined","isBuffer","val","isFunction","isArrayBuffer","isArrayBufferView","result","isString","isNumber","isObject","isBoolean","isPlainObject","prototype","isDate","isFile","isBlob","isFileList","isStream","isFormData","kind","isURLSearchParams","isReadableStream","isRequest","isResponse","isHeaders","trim","forEach","obj","allOwnKeys","i","keys","len","key","findKey","_key","_global","isContextDefined","context","merge","caseless","assignValue","targetKey","extend","stripBOM","content","inherits","constructor","superConstructor","props","descriptors","toFlatObject","sourceObj","destObj","filter","propFilter","prop","merged","endsWith","searchString","position","lastIndex","toArray","arr","isTypedArray","TypedArray","forEachEntry","_iterator","pair","matchAll","regExp","matches","isHTMLForm","toCamelCase","p1","p2","hasOwnProperty","isRegExp","reduceDescriptors","reducer","reducedDescriptors","descriptor","name","ret","freezeMethods","value","toObjectSet","arrayOrString","delimiter","define","noop","toFiniteNumber","defaultValue","isSpecCompliantForm","toJSONObject","stack","visit","source","target","reducedValue","isAsyncFn","isThenable","_setImmediate","setImmediateSupported","postMessageSupported","token","callbacks","data","cb","asap","isIterable","utils$1","AxiosError","message","code","config","request","response","utils","error","customProps","axiosError","httpAdapter","isVisitable","removeBrackets","renderKey","path","dots","isFlatArray","predicates","toFormData","formData","options","option","metaTokens","visitor","defaultVisitor","indexes","useBlob","convertValue","el","index","exposedHelpers","build","encode","charMap","match","AxiosURLSearchParams","params","encoder","_encode","buildURL","url","serializeFn","serializedParams","hashmarkIndex","InterceptorManager","fulfilled","rejected","id","InterceptorManager$1","transitionalDefaults","URLSearchParams$1","FormData$1","Blob$1","platform$1","URLSearchParams","FormData","Blob","hasBrowserEnv","_navigator","hasStandardBrowserEnv","hasStandardBrowserWebWorkerEnv","origin","platform","toURLEncodedForm","helpers","parsePropPath","arrayToObject","formDataToJSON","buildPath","isNumericKey","isLast","stringifySafely","rawValue","parser","defaults","headers","contentType","hasJSONContentType","isObjectPayload","_FormData","transitional","forcedJSONParsing","JSONRequested","strictJSONParsing","status","method","defaults$1","ignoreDuplicateOf","parseHeaders","rawHeaders","parsed","line","$internals","normalizeHeader","header","normalizeValue","parseTokens","tokens","tokensRE","isValidHeaderName","matchHeaderValue","isHeaderNameFilter","formatHeader","w","char","buildAccessors","accessorName","methodName","arg1","arg2","arg3","AxiosHeaders","valueOrRewrite","rewrite","self","setHeader","_value","_header","_rewrite","lHeader","setHeaders","dest","entry","matcher","deleted","deleteHeader","format","normalized","targets","asStrings","first","computed","accessors","defineAccessor","mapped","headerValue","AxiosHeaders$1","transformData","fns","isCancel","CanceledError","settle","resolve","reject","validateStatus","parseProtocol","speedometer","samplesCount","min","bytes","timestamps","head","tail","firstSampleTS","chunkLength","now","startedAt","bytesCount","passed","throttle","freq","timestamp","threshold","lastArgs","timer","invoke","args","progressEventReducer","listener","isDownloadStream","bytesNotified","_speedometer","loaded","total","progressBytes","rate","inRange","progressEventDecorator","throttled","lengthComputable","asyncDecorator","isURLSameOrigin","isMSIE","cookies","expires","domain","secure","cookie","isAbsoluteURL","combineURLs","baseURL","relativeURL","buildFullPath","requestedURL","allowAbsoluteUrls","isRelativeUrl","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","configValue","resolveConfig","newConfig","withXSRFToken","xsrfHeaderName","xsrfCookieName","auth","xsrfValue","isXHRAdapterSupported","xhrAdapter","_config","requestData","requestHeaders","responseType","onUploadProgress","onDownloadProgress","onCanceled","uploadThrottled","downloadThrottled","flushUpload","flushDownload","done","onloadend","responseHeaders","err","timeoutErrorMessage","cancel","protocol","composeSignals","signals","timeout","length","controller","aborted","onabort","reason","unsubscribe","signal","composeSignals$1","streamChunk","chunk","chunkSize","pos","end","readBytes","iterable","readStream","stream","reader","trackStream","onProgress","onFinish","_onFinish","loadedBytes","isFetchSupported","isReadableStreamSupported","encodeText","test","supportsRequestStream","duplexAccessed","hasContentType","DEFAULT_CHUNK_SIZE","supportsResponseStream","resolvers","res","_","getBodyLength","body","resolveBodyLength","fetchAdapter","cancelToken","withCredentials","fetchOptions","composedSignal","requestContentLength","_request","contentTypeHeader","flush","isCredentialsSupported","isStreamResponse","responseContentLength","responseData","knownAdapters","renderReason","isResolvedHandle","adapter","adapters","nameOrAdapter","rejectedReasons","reasons","state","s","throwIfCancellationRequested","dispatchRequest","VERSION","validators","deprecatedWarnings","validator","version","formatMessage","opt","desc","opts","correctSpelling","assertOptions","schema","allowUnknown","Axios","instanceConfig","configOrUrl","dummy","paramsSerializer","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","responseInterceptorChain","promise","chain","onFulfilled","onRejected","fullPath","generateHTTPMethod","isForm","Axios$1","CancelToken","executor","resolvePromise","onfulfilled","_resolve","abort","CancelToken$1","spread","callback","isAxiosError","payload","HttpStatusCode","HttpStatusCode$1","createInstance","defaultConfig","instance","axios","promises","axios$1","assign","defaultConverter","init","converter","defaultAttributes","set","attributes","stringifiedAttributes","attributeName","get","jar","parts","found","api","getApiBaseUrl","hostname","API_BASE_URL","isRefreshing","failedQueue","processQueue","prom","clearSession","Cookies","originalRequest","_a","refreshToken","access_token","refreshError","_b","_d","_c","errorKey","_e","_f","lastErrorTime","_g","toast","authService","email","password","refresh_token","user","userData","userService","passwordData","userId","AuthContext","createContext","useAuth","useContext","AuthProvider","children","setUser","useState","loading","setLoading","isAuthenticated","setIsAuthenticated","lastAuthCheck","setLastAuthCheck","AUTH_CACHE_DURATION","checkAuth","force","useEffect","handleStorageChange","handleVisibilityChange","authCheckInterval","updatedUserData","prevUser","jsx","gameService","gameId","GameContext","useGames","GameProvider","games","setGames","featuredGames","setFeaturedGames","fetchGames","fetchFeaturedGames","cartService","adId","quantity","CartContext","useCart","CartProvider","cart","setCart","cartCache","setCartCache","loadCart","cartData","items","normalizedItems","item","normalizedItem","_h","_i","_j","_k","_l","_n","_m","_o","_q","_p","_r","_s","_t","_v","_u","_w","_x","total_items","sum","total_price","normalizedCart","adIds","addToCart","ad","prev","updateCartItem","newCache","removeFromCart","clearCart","validateCart","isInCart","inCart","getCartItemQuantity","getCartForCheckout","checkoutItems","uniqueSellers","useApi","useDebounce","delay","debouncedValue","setDebouncedValue","handler","Header","logout","navigate","useNavigate","isMenuOpen","setIsMenuOpen","isUserMenuOpen","setIsUserMenuOpen","isNotificationOpen","setIsNotificationOpen","searchTerm","setSearchTerm","searchResults","setSearchResults","showSearchResults","setShowSearchResults","searchLoading","setSearchLoading","notifications","setNotifications","unreadCount","setUnreadCount","searchRef","useRef","userMenuRef","notificationRef","debouncedSearch","handleSearch","loadNotifications","interval","handleClickOutside","event","term","handleLogout","handleSearchSelect","closeAllMenus","mockNotifications","markAsRead","notificationId","markAllAsRead","formatNotificationTime","diff","minutes","hours","days","cartItemCount","jsxs","Link","Search","game","Fragment","Plus","ShoppingCart","Bell","notification","User","ChevronDown","BarChart3","ShoppingBag","Heart","Settings","LogOut","X","Menu","Footer","Layout","adService","adData","LoadingSpinner","size","sizeClasses","Home","gamesLoading","boostedAds","setBoostedAds","adsLoading","setAdsLoading","Star","Gamepad","TrendingUp","r","o","clsx","Button","variant","disabled","className","baseClasses","variants","sizes","Games","filteredGames","setFilteredGames","showFilters","setShowFilters","filtered","Filter","favoritesService","orderService","orderData","checkoutData","orderId","role","supportService","protocolNumber","ticketId","categoryId","errors","GameDetails","useParams","setGame","ads","setAds","adTypeFilter","setAdTypeFilter","priceSort","setPriceSort","fetchGameDetails","gameResult","fetchGameAds","adsResult","filteredAndSortedAds","Login","login","location","useLocation","showPassword","setShowPassword","isLoading","setIsLoading","register","handleSubmit","useForm","onSubmit","from","Mail","Lock","EyeOff","Eye","Register","registerUser","showConfirmPassword","setShowConfirmPassword","watch","questionsService","question","isPublic","questionId","answer","trimmed","Badge","variantClasses","MyQuestions","questions","setQuestions","setFilter","selectedQuestion","setSelectedQuestion","answerText","setAnswerText","submittingAnswer","setSubmittingAnswer","loadQuestions","handleAnswerQuestion","formatTime","date","filteredQuestions","counts","MessageCircle","filterOption","Clock","CheckCircle","Calendar","Send","Dashboard","activeTab","setActiveTab","dashboardData","setDashboardData","userAds","setUserAds","orders","setOrders","orderStats","setOrderStats","ordersLoading","setOrdersLoading","tabs","Package","DollarSign","Users","tab","t","fetchDashboardData","fetchUserAds","fetchOrders","dashboardResult","statsResult","handleEditAd","handleDeleteAd","getStatusColor","getStatusIcon","Icon","XCircle","renderTabContent","Edit","Trash2","isSellerView","order","Modal","isOpen","onClose","title","footer","closeOnBackdrop","handleBackdropClick","ProfileImageUpload","currentImage","onImageUpdated","uploading","setUploading","previewImage","setPreviewImage","handleFileUpload","file","maxSize","existingFilename","imageData","handleFileSelect","Camera","Profile","setUserData","isEditing","setIsEditing","showPasswordModal","setShowPasswordModal","profileImageUrl","setProfileImageUrl","reset","registerPassword","handlePasswordSubmit","resetPassword","passwordErrors","newPassword","handleProfileImageUpdate","newImageUrl","onPasswordSubmit","handleCancel","Save","Phone","MapPin","ImageUpload","onImageUploaded","category","acceptedTypes","placeholder","allowRemove","dragOver","setDragOver","fileInputRef","validateFile","endpoint","handleDrop","files","handleDragOver","handleDragLeave","removeImage","triggerFileInput","FileImage","Upload","CreateAd","uploadedImage","setUploadedImage","adType","handleImageUploaded","EditAd","pageLoading","setPageLoading","currentImageUrl","setCurrentImageUrl","loadAdData","updateData","AddToCartButton","showQuantity","maxQuantity","isProcessing","setIsProcessing","currentQuantity","setCurrentQuantity","setInCart","canAddToCart","React","itemInCart","handleAddToCart","handleUpdateQuantity","newQuantity","handleRemoveFromCart","Minus","Check","getBaseUrl","BASE_URL","imageUtils","imagePath","baseUrl","basePath","filename","maxSizeMB","maxWidth","maxHeight","quality","canvas","ctx","img","width","height","SafeImage","src","alt","fallbackIcon","hasError","setHasError","imageUrl","handleError","handleLoad","AdQuestions","isOwner","newQuestion","setNewQuestion","isPublicQuestion","setIsPublicQuestion","submittingQuestion","setSubmittingQuestion","answeringQuestion","setAnsweringQuestion","debugInfo","setDebugInfo","questionsData","handleAskQuestion","handleDeleteQuestion","handleToggleVisibility","formatDate","dateString","canUserInteract","RefreshCw","AlertCircle","AdDetails","setAd","imageLoading","setImageLoading","setError","deleting","setDeleting","showReportModal","setShowReportModal","reportReason","setReportReason","reportDetails","setReportDetails","submittingReport","setSubmittingReport","similarAds","setSimilarAds","loadingSimilar","setLoadingSimilar","viewCount","setViewCount","favoritesCount","setFavoritesCount","isFavorited","setIsFavorited","loadAdDetails","loadSimilarAds","similarAd","handleFavoriteToggle","newIsFavorited","handleShare","handleReport","reportData","reportReasons","getAdTypeColor","getConditionText","condition","ArrowLeft","Share2","GamepadIcon","Flag","UserProfile","userResult","handleContact","EmptyState","description","actionText","onAction","Favorites","favorites","setFavorites","removing","setRemoving","viewMode","setViewMode","sortBy","setSortBy","fetchFavorites","handleRemoveFavorite","fav","filteredAndSortedFavorites","Grid","List","favorite","Cart","updating","setUpdating","validating","setValidating","handleValidateCart","handleRemoveItem","handleClearCart","calculateTotal","ArrowRight","Checkout","processing","setProcessing","cartValidation","setCartValidation","loadAndValidateCart","validation","getTotalPrice","price","getTotalItems","getUniqueSellerCount","sellers","sellerId","validationRules","formatPhone","formatZipcode","AlertTriangle","CreditCard","Shield","Orders","statusFilter","setStatusFilter","stats","setStats","fetchStats","filteredOrders","getStatusLabel","getRoleLabel","getRoleIcon","TrendingDown","getRoleColor","RoleIcon","ChatService","socketUrl","io","roomId","limit","skip","chatService","ChatRoom","room","setRoom","messages","setMessages","newMessage","setNewMessage","connected","setConnected","sending","setSending","typingUsers","setTypingUsers","socket","setSocket","messagesEndRef","typingTimeoutRef","messageInputRef","initializeChat","cleanup","scrollToBottom","roomResult","row","socketInstance","setupSocketListeners","playNotificationSound","newSet","audio","handleSendMessage","handleTyping","getMessageStatus","Loader","Video","isOwnMessage","isSystemMessage","CheckCircle2","Alert","dismissible","onDismiss","icons","Info","typeClasses","iconClasses","Card","padding","shadow","rounded","hover","paddingClasses","shadowClasses","roundedClasses","Pagination","currentPage","totalPages","onPageChange","showPrevNext","showPageNumbers","maxPageNumbers","getVisiblePages","pages","start","ChevronLeft","page","ChevronRight","RatingModal","onSuccess","rating","setRating","comment","setComment","success","setSuccess","resetForm","handleClose","star","OrderDetails","setOrder","showChat","setShowChat","showRatingModal","setShowRatingModal","loadOrderDetails","handleStatusUpdate","newStatus","userRole","getUserRole","getOtherUser","Truck","getStatusText","getAvailableActions","actions","canRate","handleRatingSuccess","otherUser","availableActions","actionItem","GamesManagement","showModal","setShowModal","modalType","setModalType","selectedGame","setSelectedGame","setCurrentPage","setTotalPages","loadGames","handleCreateGame","handleEditGame","handleDeleteGame","handleToggleFeatured","currentStatus","handleToggleActive","matchesSearch","matchesStatus","StatCard","Globe","Zap","GameCard","GameModal","onEdit","onDelete","onToggleFeatured","onToggleActive","showMenu","setShowMenu","MoreVertical","Edit3","onSave","setFormData","color","colorClasses","TicketsManagement","tickets","setTickets","selectedTicket","setSelectedTicket","loadTickets","handleTicketResponse","ticket","getStatusBadge","MessageSquare","TicketResponseModal","UserEditModal","onUserUpdated","setErrors","handleInputChange","field","validateForm","newErrors","UserCheck","UsersManagement","users","setUsers","roleFilter","setRoleFilter","selectedUser","setSelectedUser","showEditModal","setShowEditModal","loadUsers","handleToggleUserStatus","handleEditUser","handleUserUpdated","updatedUser","handleCloseEditModal","filteredUsers","matchesRole","u","today","Activity","UserRow","onToggleStatus","OrdersManagement","selectedOrder","setSelectedOrder","showOrderModal","setShowOrderModal","loadOrders","handleUpdateOrderStatus","handleViewOrderDetails","totalRevenue","OrderRow","OrderDetailsModal","onUpdateStatus","onViewDetails","getUserDisplayName","history","AdsManagement","selectedAd","setSelectedAd","showDeleteModal","setShowDeleteModal","showAdModal","setShowAdModal","deleteLoading","setDeleteLoading","loadAds","handleUpdateStatus","handleViewAd","filteredAds","totalValue","Tag","AdRow","AdDetailsModal","onView","getPrice","image","AuditLogs","logs","setLogs","loadAuditLogs","getActionIcon","action","getActionColor","log","ReportsManagement","reports","setReports","selectedReport","setSelectedReport","actionLoading","setActionLoading","loadReports","mockReports","getReasonLabel","handleStatusChange","reportId","adminNotes","report","openReportModal","filteredReports","AdminDashboard","loadDashboardData","DashboardTab","TicketsTab","GamesTab","UsersTab","AdsTab","OrdersTab","AuditTab","ReportsTab","QuickActionCard","SystemStatus","trend","subtitle","onClick","label","AdminSupport","showTicketModal","setShowTicketModal","expandedTickets","setExpandedTickets","filters","setFilters","loadData","loadStats","v","statsData","handleTicketUpdate","handleViewTicket","handleToggleExpand","newExpanded","formatRelativeTime","diffMs","diffHours","diffDays","diffMinutes","Timer","getPriorityColor","priority","getPriorityLabel","getCategoryLabel","Hash","FileText","info","Support","showCreateForm","setShowCreateForm","submitting","setSubmitting","protocolSearch","setProtocolSearch","ticketsData","handleCreateTicket","newTicket","protocolInfo","handleProtocolSearch","clearSearch","handleViewDetails","handleAddInfo","filteredTickets","matchesFilter","HelpCircle","TicketDetails","setTicket","replyText","setReplyText","showReplyForm","setShowReplyForm","loadTicketDetails","ticketData","getCategoryIcon","handleAddReply","handleRefresh","canAddReply","Notifications","getNotificationIcon","getNotificationColor","deleteNotification","filteredNotifications","CheckCheck","ProtectedRoute","requireAdmin","Navigate","App","Router","Routes","Route","ToastContainer","ReactDOM"],"mappings":";;;;;;;;GASa,IAAIA,GAAEC,EAAiBC,GAAE,OAAO,IAAI,eAAe,EAAEC,GAAE,OAAO,IAAI,gBAAgB,EAAEC,GAAE,OAAO,UAAU,eAAeC,GAAEL,GAAE,mDAAmD,kBAAkBM,GAAE,CAAC,IAAI,GAAG,IAAI,GAAG,OAAO,GAAG,SAAS,EAAE,EAClP,SAASC,GAAEC,EAAEC,EAAEC,EAAE,CAAC,IAAIC,EAAEC,EAAE,GAAGC,EAAE,KAAKC,EAAE,KAAcJ,IAAT,SAAaG,EAAE,GAAGH,GAAYD,EAAE,MAAX,SAAiBI,EAAE,GAAGJ,EAAE,KAAcA,EAAE,MAAX,SAAiBK,EAAEL,EAAE,KAAK,IAAIE,KAAKF,EAAEL,GAAE,KAAKK,EAAEE,CAAC,GAAG,CAACL,GAAE,eAAeK,CAAC,IAAIC,EAAED,CAAC,EAAEF,EAAEE,CAAC,GAAG,GAAGH,GAAGA,EAAE,aAAa,IAAIG,KAAKF,EAAED,EAAE,aAAaC,EAAWG,EAAED,CAAC,IAAZ,SAAgBC,EAAED,CAAC,EAAEF,EAAEE,CAAC,GAAG,MAAM,CAAC,SAAST,GAAE,KAAKM,EAAE,IAAIK,EAAE,IAAIC,EAAE,MAAMF,EAAE,OAAOP,GAAE,OAAO,CAAC,aAAkBF,GAAaY,GAAA,IAACR,GAAEQ,GAAA,KAAaR,GCPxWS,GAAA,QAAiBf,0BCDfG,GAAIH,GAEYgB,GAAA,WAAGb,GAAE,WACJa,GAAA,YAAGb,GAAE,YCHX,SAASc,GAAKC,EAAIC,EAAS,CACxC,OAAO,UAAgB,CACrB,OAAOD,EAAG,MAAMC,EAAS,SAAS,CACtC,CACA,CCAA,KAAM,CAAC,SAAAC,EAAQ,EAAI,OAAO,UACpB,CAAC,eAAAC,EAAc,EAAI,OACnB,CAAC,SAAAC,GAAU,YAAAC,EAAW,EAAI,OAE1BC,IAAUC,GAASC,GAAS,CAC9B,MAAMC,EAAMP,GAAS,KAAKM,CAAK,EAC/B,OAAOD,EAAME,CAAG,IAAMF,EAAME,CAAG,EAAIA,EAAI,MAAM,EAAG,EAAE,EAAE,YAAa,EACrE,GAAG,OAAO,OAAO,IAAI,CAAC,EAEhBC,GAAcC,IAClBA,EAAOA,EAAK,cACJH,GAAUF,GAAOE,CAAK,IAAMG,GAGhCC,GAAaD,GAAQH,GAAS,OAAOA,IAAUG,EAS/C,CAAC,QAAAE,EAAO,EAAI,MASZC,GAAcF,GAAW,WAAW,EAS1C,SAASG,GAASC,EAAK,CACrB,OAAOA,IAAQ,MAAQ,CAACF,GAAYE,CAAG,GAAKA,EAAI,cAAgB,MAAQ,CAACF,GAAYE,EAAI,WAAW,GAC/FC,GAAWD,EAAI,YAAY,QAAQ,GAAKA,EAAI,YAAY,SAASA,CAAG,CAC3E,CASA,MAAME,GAAgBR,GAAW,aAAa,EAU9C,SAASS,GAAkBH,EAAK,CAC9B,IAAII,EACJ,OAAK,OAAO,YAAgB,KAAiB,YAAY,OACvDA,EAAS,YAAY,OAAOJ,CAAG,EAE/BI,EAAUJ,GAASA,EAAI,QAAYE,GAAcF,EAAI,MAAM,EAEtDI,CACT,CASA,MAAMC,GAAWT,GAAW,QAAQ,EAQ9BK,GAAaL,GAAW,UAAU,EASlCU,GAAWV,GAAW,QAAQ,EAS9BW,GAAYf,GAAUA,IAAU,MAAQ,OAAOA,GAAU,SAQzDgB,GAAYhB,GAASA,IAAU,IAAQA,IAAU,GASjDiB,GAAiBT,GAAQ,CAC7B,GAAIV,GAAOU,CAAG,IAAM,SAClB,MAAO,GAGT,MAAMU,EAAYvB,GAAea,CAAG,EACpC,OAAQU,IAAc,MAAQA,IAAc,OAAO,WAAa,OAAO,eAAeA,CAAS,IAAM,OAAS,EAAErB,MAAeW,IAAQ,EAAEZ,MAAYY,EACvJ,EASMW,GAASjB,GAAW,MAAM,EAS1BkB,GAASlB,GAAW,MAAM,EAS1BmB,GAASnB,GAAW,MAAM,EAS1BoB,GAAapB,GAAW,UAAU,EASlCqB,GAAYf,GAAQO,GAASP,CAAG,GAAKC,GAAWD,EAAI,IAAI,EASxDgB,GAAcxB,GAAU,CAC5B,IAAIyB,EACJ,OAAOzB,IACJ,OAAO,UAAa,YAAcA,aAAiB,UAClDS,GAAWT,EAAM,MAAM,KACpByB,EAAO3B,GAAOE,CAAK,KAAO,YAE1ByB,IAAS,UAAYhB,GAAWT,EAAM,QAAQ,GAAKA,EAAM,SAAU,IAAK,qBAIjF,EASM0B,GAAoBxB,GAAW,iBAAiB,EAEhD,CAACyB,GAAkBC,GAAWC,GAAYC,EAAS,EAAI,CAAC,iBAAkB,UAAW,WAAY,SAAS,EAAE,IAAI5B,EAAU,EAS1H6B,GAAQ9B,GAAQA,EAAI,KACxBA,EAAI,KAAI,EAAKA,EAAI,QAAQ,qCAAsC,EAAE,EAiBnE,SAAS+B,GAAQC,EAAKzC,EAAI,CAAC,WAAA0C,EAAa,EAAK,EAAI,GAAI,CAEnD,GAAID,IAAQ,MAAQ,OAAOA,EAAQ,IACjC,OAGF,IAAIE,EACA3D,EAQJ,GALI,OAAOyD,GAAQ,WAEjBA,EAAM,CAACA,CAAG,GAGR5B,GAAQ4B,CAAG,EAEb,IAAKE,EAAI,EAAG3D,EAAIyD,EAAI,OAAQE,EAAI3D,EAAG2D,IACjC3C,EAAG,KAAK,KAAMyC,EAAIE,CAAC,EAAGA,EAAGF,CAAG,MAEzB,CAEL,MAAMG,EAAOF,EAAa,OAAO,oBAAoBD,CAAG,EAAI,OAAO,KAAKA,CAAG,EACrEI,EAAMD,EAAK,OACjB,IAAIE,EAEJ,IAAKH,EAAI,EAAGA,EAAIE,EAAKF,IACnBG,EAAMF,EAAKD,CAAC,EACZ3C,EAAG,KAAK,KAAMyC,EAAIK,CAAG,EAAGA,EAAKL,CAAG,CAEnC,CACH,CAEA,SAASM,GAAQN,EAAKK,EAAK,CACzBA,EAAMA,EAAI,cACV,MAAMF,EAAO,OAAO,KAAKH,CAAG,EAC5B,IAAIE,EAAIC,EAAK,OACTI,EACJ,KAAOL,KAAM,GAEX,GADAK,EAAOJ,EAAKD,CAAC,EACTG,IAAQE,EAAK,cACf,OAAOA,EAGX,OAAO,IACT,CAEA,MAAMC,IAAW,IAEX,OAAO,WAAe,IAAoB,WACvC,OAAO,KAAS,IAAc,KAAQ,OAAO,OAAW,IAAc,OAAS,cAGlFC,GAAoBC,GAAY,CAACrC,GAAYqC,CAAO,GAAKA,IAAYF,GAoB3E,SAASG,IAAmC,CAC1C,KAAM,CAAC,SAAAC,CAAQ,EAAIH,GAAiB,IAAI,GAAK,MAAQ,GAC/C9B,EAAS,CAAA,EACTkC,EAAc,CAACtC,EAAK8B,IAAQ,CAChC,MAAMS,EAAYF,GAAYN,GAAQ3B,EAAQ0B,CAAG,GAAKA,EAClDrB,GAAcL,EAAOmC,CAAS,CAAC,GAAK9B,GAAcT,CAAG,EACvDI,EAAOmC,CAAS,EAAIH,GAAMhC,EAAOmC,CAAS,EAAGvC,CAAG,EACvCS,GAAcT,CAAG,EAC1BI,EAAOmC,CAAS,EAAIH,GAAM,CAAE,EAAEpC,CAAG,EACxBH,GAAQG,CAAG,EACpBI,EAAOmC,CAAS,EAAIvC,EAAI,MAAK,EAE7BI,EAAOmC,CAAS,EAAIvC,CAEvB,EAED,QAAS2B,EAAI,EAAG3D,EAAI,UAAU,OAAQ2D,EAAI3D,EAAG2D,IAC3C,UAAUA,CAAC,GAAKH,GAAQ,UAAUG,CAAC,EAAGW,CAAW,EAEnD,OAAOlC,CACT,CAYA,MAAMoC,GAAS,CAAClE,EAAGE,EAAGS,EAAS,CAAC,WAAAyC,CAAU,EAAG,MAC3CF,GAAQhD,EAAG,CAACwB,EAAK8B,IAAQ,CACnB7C,GAAWgB,GAAWD,CAAG,EAC3B1B,EAAEwD,CAAG,EAAI/C,GAAKiB,EAAKf,CAAO,EAE1BX,EAAEwD,CAAG,EAAI9B,CAEf,EAAK,CAAC,WAAA0B,CAAU,CAAC,EACRpD,GAUHmE,GAAYC,IACZA,EAAQ,WAAW,CAAC,IAAM,QAC5BA,EAAUA,EAAQ,MAAM,CAAC,GAEpBA,GAYHC,GAAW,CAACC,EAAaC,EAAkBC,EAAOC,IAAgB,CACtEH,EAAY,UAAY,OAAO,OAAOC,EAAiB,UAAWE,CAAW,EAC7EH,EAAY,UAAU,YAAcA,EACpC,OAAO,eAAeA,EAAa,QAAS,CAC1C,MAAOC,EAAiB,SAC5B,CAAG,EACDC,GAAS,OAAO,OAAOF,EAAY,UAAWE,CAAK,CACrD,EAWME,GAAe,CAACC,EAAWC,EAASC,EAAQC,IAAe,CAC/D,IAAIN,EACAnB,EACA0B,EACJ,MAAMC,EAAS,CAAA,EAIf,GAFAJ,EAAUA,GAAW,GAEjBD,GAAa,KAAM,OAAOC,EAE9B,EAAG,CAGD,IAFAJ,EAAQ,OAAO,oBAAoBG,CAAS,EAC5CtB,EAAImB,EAAM,OACHnB,KAAM,GACX0B,EAAOP,EAAMnB,CAAC,GACT,CAACyB,GAAcA,EAAWC,EAAMJ,EAAWC,CAAO,IAAM,CAACI,EAAOD,CAAI,IACvEH,EAAQG,CAAI,EAAIJ,EAAUI,CAAI,EAC9BC,EAAOD,CAAI,EAAI,IAGnBJ,EAAYE,IAAW,IAAShE,GAAe8D,CAAS,CAC5D,OAAWA,IAAc,CAACE,GAAUA,EAAOF,EAAWC,CAAO,IAAMD,IAAc,OAAO,WAEtF,OAAOC,CACT,EAWMK,GAAW,CAAC9D,EAAK+D,EAAcC,IAAa,CAChDhE,EAAM,OAAOA,CAAG,GACZgE,IAAa,QAAaA,EAAWhE,EAAI,UAC3CgE,EAAWhE,EAAI,QAEjBgE,GAAYD,EAAa,OACzB,MAAME,EAAYjE,EAAI,QAAQ+D,EAAcC,CAAQ,EACpD,OAAOC,IAAc,IAAMA,IAAcD,CAC3C,EAUME,GAAWnE,GAAU,CACzB,GAAI,CAACA,EAAO,OAAO,KACnB,GAAIK,GAAQL,CAAK,EAAG,OAAOA,EAC3B,IAAImC,EAAInC,EAAM,OACd,GAAI,CAACc,GAASqB,CAAC,EAAG,OAAO,KACzB,MAAMiC,EAAM,IAAI,MAAMjC,CAAC,EACvB,KAAOA,KAAM,GACXiC,EAAIjC,CAAC,EAAInC,EAAMmC,CAAC,EAElB,OAAOiC,CACT,EAWMC,IAAgBC,GAEbtE,GACEsE,GAActE,aAAiBsE,GAEvC,OAAO,WAAe,KAAe3E,GAAe,UAAU,CAAC,EAU5D4E,GAAe,CAACtC,EAAKzC,IAAO,CAGhC,MAAMgF,GAFYvC,GAAOA,EAAIrC,EAAQ,GAET,KAAKqC,CAAG,EAEpC,IAAIrB,EAEJ,MAAQA,EAAS4D,EAAU,KAAI,IAAO,CAAC5D,EAAO,MAAM,CAClD,MAAM6D,EAAO7D,EAAO,MACpBpB,EAAG,KAAKyC,EAAKwC,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,CAC9B,CACH,EAUMC,GAAW,CAACC,EAAQ1E,IAAQ,CAChC,IAAI2E,EACJ,MAAMR,EAAM,CAAA,EAEZ,MAAQQ,EAAUD,EAAO,KAAK1E,CAAG,KAAO,MACtCmE,EAAI,KAAKQ,CAAO,EAGlB,OAAOR,CACT,EAGMS,GAAa3E,GAAW,iBAAiB,EAEzC4E,GAAc7E,GACXA,EAAI,cAAc,QAAQ,wBAC/B,SAAkBxB,EAAGsG,EAAIC,EAAI,CAC3B,OAAOD,EAAG,YAAa,EAAGC,CAC3B,CACL,EAIMC,IAAkB,CAAC,CAAC,eAAAA,CAAc,IAAM,CAAChD,EAAK4B,IAASoB,EAAe,KAAKhD,EAAK4B,CAAI,GAAG,OAAO,SAAS,EASvGqB,GAAWhF,GAAW,QAAQ,EAE9BiF,GAAoB,CAAClD,EAAKmD,IAAY,CAC1C,MAAM7B,EAAc,OAAO,0BAA0BtB,CAAG,EAClDoD,EAAqB,CAAA,EAE3BrD,GAAQuB,EAAa,CAAC+B,EAAYC,IAAS,CACzC,IAAIC,GACCA,EAAMJ,EAAQE,EAAYC,EAAMtD,CAAG,KAAO,KAC7CoD,EAAmBE,CAAI,EAAIC,GAAOF,EAExC,CAAG,EAED,OAAO,iBAAiBrD,EAAKoD,CAAkB,CACjD,EAOMI,GAAiBxD,GAAQ,CAC7BkD,GAAkBlD,EAAK,CAACqD,EAAYC,IAAS,CAE3C,GAAI9E,GAAWwB,CAAG,GAAK,CAAC,YAAa,SAAU,QAAQ,EAAE,QAAQsD,CAAI,IAAM,GACzE,MAAO,GAGT,MAAMG,EAAQzD,EAAIsD,CAAI,EAEtB,GAAK9E,GAAWiF,CAAK,EAIrB,IAFAJ,EAAW,WAAa,GAEpB,aAAcA,EAAY,CAC5BA,EAAW,SAAW,GACtB,MACD,CAEIA,EAAW,MACdA,EAAW,IAAM,IAAM,CACrB,MAAM,MAAM,qCAAwCC,EAAO,GAAI,CACvE,GAEA,CAAG,CACH,EAEMI,GAAc,CAACC,EAAeC,IAAc,CAChD,MAAM5D,EAAM,CAAA,EAEN6D,EAAU1B,GAAQ,CACtBA,EAAI,QAAQsB,GAAS,CACnBzD,EAAIyD,CAAK,EAAI,EACnB,CAAK,CACF,EAED,OAAArF,GAAQuF,CAAa,EAAIE,EAAOF,CAAa,EAAIE,EAAO,OAAOF,CAAa,EAAE,MAAMC,CAAS,CAAC,EAEvF5D,CACT,EAEM8D,GAAO,IAAM,CAAE,EAEfC,GAAiB,CAACN,EAAOO,IACtBP,GAAS,MAAQ,OAAO,SAASA,EAAQ,CAACA,CAAK,EAAIA,EAAQO,EAUpE,SAASC,GAAoBlG,EAAO,CAClC,MAAO,CAAC,EAAEA,GAASS,GAAWT,EAAM,MAAM,GAAKA,EAAMH,EAAW,IAAM,YAAcG,EAAMJ,EAAQ,EACpG,CAEA,MAAMuG,GAAgBlE,GAAQ,CAC5B,MAAMmE,EAAQ,IAAI,MAAM,EAAE,EAEpBC,EAAQ,CAACC,EAAQnE,IAAM,CAE3B,GAAIpB,GAASuF,CAAM,EAAG,CACpB,GAAIF,EAAM,QAAQE,CAAM,GAAK,EAC3B,OAGF,GAAG,EAAE,WAAYA,GAAS,CACxBF,EAAMjE,CAAC,EAAImE,EACX,MAAMC,EAASlG,GAAQiG,CAAM,EAAI,CAAA,EAAK,CAAA,EAEtC,OAAAtE,GAAQsE,EAAQ,CAACZ,EAAOpD,IAAQ,CAC9B,MAAMkE,EAAeH,EAAMX,EAAOvD,EAAI,CAAC,EACvC,CAAC7B,GAAYkG,CAAY,IAAMD,EAAOjE,CAAG,EAAIkE,EACvD,CAAS,EAEDJ,EAAMjE,CAAC,EAAI,OAEJoE,CACR,CACF,CAED,OAAOD,CACR,EAED,OAAOD,EAAMpE,EAAK,CAAC,CACrB,EAEMwE,GAAYvG,GAAW,eAAe,EAEtCwG,GAAc1G,GAClBA,IAAUe,GAASf,CAAK,GAAKS,GAAWT,CAAK,IAAMS,GAAWT,EAAM,IAAI,GAAKS,GAAWT,EAAM,KAAK,EAK/F2G,IAAiB,CAACC,EAAuBC,IACzCD,EACK,aAGFC,GAAwB,CAACC,EAAOC,KACrCtE,GAAQ,iBAAiB,UAAW,CAAC,CAAC,OAAA6D,EAAQ,KAAAU,CAAI,IAAM,CAClDV,IAAW7D,IAAWuE,IAASF,GACjCC,EAAU,QAAUA,EAAU,MAAO,EAAA,CAExC,EAAE,EAAK,EAEAE,GAAO,CACbF,EAAU,KAAKE,CAAE,EACjBxE,GAAQ,YAAYqE,EAAO,GAAG,CAC/B,IACA,SAAS,KAAK,QAAQ,GAAI,CAAE,CAAA,EAAKG,GAAO,WAAWA,CAAE,GAExD,OAAO,cAAiB,WACxBxG,GAAWgC,GAAQ,WAAW,CAChC,EAEMyE,GAAO,OAAO,eAAmB,IACrC,eAAe,KAAKzE,EAAO,EAAM,OAAO,QAAY,KAAe,QAAQ,UAAYkE,GAKnFQ,GAAcnH,GAAUA,GAAS,MAAQS,GAAWT,EAAMJ,EAAQ,CAAC,EAG1DwH,EAAA,CACb,QAAA/G,GACA,cAAAK,GACA,SAAAH,GACA,WAAAiB,GACA,kBAAAb,GACA,SAAAE,GACA,SAAAC,GACA,UAAAE,GACA,SAAAD,GACA,cAAAE,GACA,iBAAAU,GACA,UAAAC,GACA,WAAAC,GACA,UAAAC,GACA,YAAAxB,GACA,OAAAa,GACA,OAAAC,GACA,OAAAC,GACA,SAAA6D,GACA,WAAAzE,GACA,SAAAc,GACA,kBAAAG,GACA,aAAA2C,GACA,WAAA/C,GACA,QAAAU,GACA,MAAAY,GACA,OAAAI,GACA,KAAAjB,GACA,SAAAkB,GACA,SAAAE,GACA,aAAAK,GACA,OAAA1D,GACA,WAAAI,GACA,SAAA6D,GACA,QAAAI,GACA,aAAAI,GACA,SAAAG,GACA,WAAAG,GACA,eAAAI,GACA,WAAYA,GACZ,kBAAAE,GACA,cAAAM,GACA,YAAAE,GACA,YAAAb,GACA,KAAAiB,GACA,eAAAC,GACA,QAAAzD,GACA,WAAQE,GACR,iBAAAC,GACA,oBAAAwD,GACA,aAAAC,GACA,UAAAM,GACA,WAAAC,GACA,aAAcC,GACd,KAAAO,GACA,WAAAC,EACF,ECxtBA,SAASE,EAAWC,EAASC,EAAMC,EAAQC,EAASC,EAAU,CAC5D,MAAM,KAAK,IAAI,EAEX,MAAM,kBACR,MAAM,kBAAkB,KAAM,KAAK,WAAW,EAE9C,KAAK,MAAS,IAAI,MAAK,EAAI,MAG7B,KAAK,QAAUJ,EACf,KAAK,KAAO,aACZC,IAAS,KAAK,KAAOA,GACrBC,IAAW,KAAK,OAASA,GACzBC,IAAY,KAAK,QAAUA,GACvBC,IACF,KAAK,SAAWA,EAChB,KAAK,OAASA,EAAS,OAASA,EAAS,OAAS,KAEtD,CAEAC,EAAM,SAASN,EAAY,MAAO,CAChC,OAAQ,UAAkB,CACxB,MAAO,CAEL,QAAS,KAAK,QACd,KAAM,KAAK,KAEX,YAAa,KAAK,YAClB,OAAQ,KAAK,OAEb,SAAU,KAAK,SACf,WAAY,KAAK,WACjB,aAAc,KAAK,aACnB,MAAO,KAAK,MAEZ,OAAQM,EAAM,aAAa,KAAK,MAAM,EACtC,KAAM,KAAK,KACX,OAAQ,KAAK,MACnB,CACG,CACH,CAAC,EAED,MAAMzG,GAAYmG,EAAW,UACvB9D,GAAc,CAAA,EAEpB,CACE,uBACA,iBACA,eACA,YACA,cACA,4BACA,iBACA,mBACA,kBACA,eACA,kBACA,iBAEF,EAAE,QAAQgE,GAAQ,CAChBhE,GAAYgE,CAAI,EAAI,CAAC,MAAOA,CAAI,CAClC,CAAC,EAED,OAAO,iBAAiBF,EAAY9D,EAAW,EAC/C,OAAO,eAAerC,GAAW,eAAgB,CAAC,MAAO,EAAI,CAAC,EAG9DmG,EAAW,KAAO,CAACO,EAAOL,EAAMC,EAAQC,EAASC,EAAUG,IAAgB,CACzE,MAAMC,EAAa,OAAO,OAAO5G,EAAS,EAE1CyG,OAAAA,EAAM,aAAaC,EAAOE,EAAY,SAAgB7F,EAAK,CACzD,OAAOA,IAAQ,MAAM,SACtB,EAAE4B,GACMA,IAAS,cACjB,EAEDwD,EAAW,KAAKS,EAAYF,EAAM,QAASL,EAAMC,EAAQC,EAASC,CAAQ,EAE1EI,EAAW,MAAQF,EAEnBE,EAAW,KAAOF,EAAM,KAExBC,GAAe,OAAO,OAAOC,EAAYD,CAAW,EAE7CC,CACT,ECnGA,MAAAC,GAAe,KCaf,SAASC,GAAYhI,EAAO,CAC1B,OAAO2H,EAAM,cAAc3H,CAAK,GAAK2H,EAAM,QAAQ3H,CAAK,CAC1D,CASA,SAASiI,GAAe3F,EAAK,CAC3B,OAAOqF,EAAM,SAASrF,EAAK,IAAI,EAAIA,EAAI,MAAM,EAAG,EAAE,EAAIA,CACxD,CAWA,SAAS4F,GAAUC,EAAM7F,EAAK8F,EAAM,CAClC,OAAKD,EACEA,EAAK,OAAO7F,CAAG,EAAE,IAAI,SAAcwE,EAAO3E,EAAG,CAElD,OAAA2E,EAAQmB,GAAenB,CAAK,EACrB,CAACsB,GAAQjG,EAAI,IAAM2E,EAAQ,IAAMA,CACzC,CAAA,EAAE,KAAKsB,EAAO,IAAM,EAAE,EALL9F,CAMpB,CASA,SAAS+F,GAAYjE,EAAK,CACxB,OAAOuD,EAAM,QAAQvD,CAAG,GAAK,CAACA,EAAI,KAAK4D,EAAW,CACpD,CAEA,MAAMM,GAAaX,EAAM,aAAaA,EAAO,CAAE,EAAE,KAAM,SAAgB9D,EAAM,CAC3E,MAAO,WAAW,KAAKA,CAAI,CAC7B,CAAC,EAyBD,SAAS0E,GAAWtG,EAAKuG,EAAUC,EAAS,CAC1C,GAAI,CAACd,EAAM,SAAS1F,CAAG,EACrB,MAAM,IAAI,UAAU,0BAA0B,EAIhDuG,EAAWA,GAAY,IAAyB,SAGhDC,EAAUd,EAAM,aAAac,EAAS,CACpC,WAAY,GACZ,KAAM,GACN,QAAS,EACV,EAAE,GAAO,SAAiBC,EAAQpC,EAAQ,CAEzC,MAAO,CAACqB,EAAM,YAAYrB,EAAOoC,CAAM,CAAC,CAC5C,CAAG,EAED,MAAMC,EAAaF,EAAQ,WAErBG,EAAUH,EAAQ,SAAWI,EAC7BT,EAAOK,EAAQ,KACfK,EAAUL,EAAQ,QAElBM,GADQN,EAAQ,MAAQ,OAAO,KAAS,KAAe,OACpCd,EAAM,oBAAoBa,CAAQ,EAE3D,GAAI,CAACb,EAAM,WAAWiB,CAAO,EAC3B,MAAM,IAAI,UAAU,4BAA4B,EAGlD,SAASI,EAAatD,EAAO,CAC3B,GAAIA,IAAU,KAAM,MAAO,GAE3B,GAAIiC,EAAM,OAAOjC,CAAK,EACpB,OAAOA,EAAM,cAGf,GAAI,CAACqD,GAAWpB,EAAM,OAAOjC,CAAK,EAChC,MAAM,IAAI2B,EAAW,8CAA8C,EAGrE,OAAIM,EAAM,cAAcjC,CAAK,GAAKiC,EAAM,aAAajC,CAAK,EACjDqD,GAAW,OAAO,MAAS,WAAa,IAAI,KAAK,CAACrD,CAAK,CAAC,EAAI,OAAO,KAAKA,CAAK,EAG/EA,CACR,CAYD,SAASmD,EAAenD,EAAOpD,EAAK6F,EAAM,CACxC,IAAI/D,EAAMsB,EAEV,GAAIA,GAAS,CAACyC,GAAQ,OAAOzC,GAAU,UACrC,GAAIiC,EAAM,SAASrF,EAAK,IAAI,EAE1BA,EAAMqG,EAAarG,EAAMA,EAAI,MAAM,EAAG,EAAE,EAExCoD,EAAQ,KAAK,UAAUA,CAAK,UAE3BiC,EAAM,QAAQjC,CAAK,GAAK2C,GAAY3C,CAAK,IACxCiC,EAAM,WAAWjC,CAAK,GAAKiC,EAAM,SAASrF,EAAK,IAAI,KAAO8B,EAAMuD,EAAM,QAAQjC,CAAK,GAGrF,OAAApD,EAAM2F,GAAe3F,CAAG,EAExB8B,EAAI,QAAQ,SAAc6E,EAAIC,EAAO,CACnC,EAAEvB,EAAM,YAAYsB,CAAE,GAAKA,IAAO,OAAST,EAAS,OAElDM,IAAY,GAAOZ,GAAU,CAAC5F,CAAG,EAAG4G,EAAOd,CAAI,EAAKU,IAAY,KAAOxG,EAAMA,EAAM,KACnF0G,EAAaC,CAAE,CAC3B,CACA,CAAS,EACM,GAIX,OAAIjB,GAAYtC,CAAK,EACZ,IAGT8C,EAAS,OAAON,GAAUC,EAAM7F,EAAK8F,CAAI,EAAGY,EAAatD,CAAK,CAAC,EAExD,GACR,CAED,MAAMU,EAAQ,CAAA,EAER+C,EAAiB,OAAO,OAAOb,GAAY,CAC/C,eAAAO,EACA,aAAAG,EACA,YAAAhB,EACJ,CAAG,EAED,SAASoB,EAAM1D,EAAOyC,EAAM,CAC1B,GAAIR,CAAAA,EAAM,YAAYjC,CAAK,EAE3B,IAAIU,EAAM,QAAQV,CAAK,IAAM,GAC3B,MAAM,MAAM,kCAAoCyC,EAAK,KAAK,GAAG,CAAC,EAGhE/B,EAAM,KAAKV,CAAK,EAEhBiC,EAAM,QAAQjC,EAAO,SAAcuD,EAAI3G,EAAK,EAC3B,EAAEqF,EAAM,YAAYsB,CAAE,GAAKA,IAAO,OAASL,EAAQ,KAChEJ,EAAUS,EAAItB,EAAM,SAASrF,CAAG,EAAIA,EAAI,KAAM,EAAGA,EAAK6F,EAAMgB,CACpE,KAEqB,IACbC,EAAMH,EAAId,EAAOA,EAAK,OAAO7F,CAAG,EAAI,CAACA,CAAG,CAAC,CAEjD,CAAK,EAED8D,EAAM,IAAG,EACV,CAED,GAAI,CAACuB,EAAM,SAAS1F,CAAG,EACrB,MAAM,IAAI,UAAU,wBAAwB,EAG9C,OAAAmH,EAAMnH,CAAG,EAEFuG,CACT,CC5MA,SAASa,GAAOpJ,EAAK,CACnB,MAAMqJ,EAAU,CACd,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,IAAK,MACL,MAAO,IACP,MAAO,IACX,EACE,OAAO,mBAAmBrJ,CAAG,EAAE,QAAQ,mBAAoB,SAAkBsJ,EAAO,CAClF,OAAOD,EAAQC,CAAK,CACxB,CAAG,CACH,CAUA,SAASC,GAAqBC,EAAQhB,EAAS,CAC7C,KAAK,OAAS,GAEdgB,GAAUlB,GAAWkB,EAAQ,KAAMhB,CAAO,CAC5C,CAEA,MAAMvH,GAAYsI,GAAqB,UAEvCtI,GAAU,OAAS,SAAgBqE,EAAMG,EAAO,CAC9C,KAAK,OAAO,KAAK,CAACH,EAAMG,CAAK,CAAC,CAChC,EAEAxE,GAAU,SAAW,SAAkBwI,EAAS,CAC9C,MAAMC,EAAUD,EAAU,SAAShE,EAAO,CACxC,OAAOgE,EAAQ,KAAK,KAAMhE,EAAO2D,EAAM,CACxC,EAAGA,GAEJ,OAAO,KAAK,OAAO,IAAI,SAAc5E,EAAM,CACzC,OAAOkF,EAAQlF,EAAK,CAAC,CAAC,EAAI,IAAMkF,EAAQlF,EAAK,CAAC,CAAC,CAChD,EAAE,EAAE,EAAE,KAAK,GAAG,CACjB,EC1CA,SAAS4E,GAAO7I,EAAK,CACnB,OAAO,mBAAmBA,CAAG,EAC3B,QAAQ,QAAS,GAAG,EACpB,QAAQ,OAAQ,GAAG,EACnB,QAAQ,QAAS,GAAG,EACpB,QAAQ,OAAQ,GAAG,EACnB,QAAQ,QAAS,GAAG,EACpB,QAAQ,QAAS,GAAG,CACxB,CAWe,SAASoJ,GAASC,EAAKJ,EAAQhB,EAAS,CAErD,GAAI,CAACgB,EACH,OAAOI,EAGT,MAAMF,EAAUlB,GAAWA,EAAQ,QAAUY,GAEzC1B,EAAM,WAAWc,CAAO,IAC1BA,EAAU,CACR,UAAWA,CACjB,GAGE,MAAMqB,EAAcrB,GAAWA,EAAQ,UAEvC,IAAIsB,EAUJ,GARID,EACFC,EAAmBD,EAAYL,EAAQhB,CAAO,EAE9CsB,EAAmBpC,EAAM,kBAAkB8B,CAAM,EAC/CA,EAAO,SAAU,EACjB,IAAID,GAAqBC,EAAQhB,CAAO,EAAE,SAASkB,CAAO,EAG1DI,EAAkB,CACpB,MAAMC,EAAgBH,EAAI,QAAQ,GAAG,EAEjCG,IAAkB,KACpBH,EAAMA,EAAI,MAAM,EAAGG,CAAa,GAElCH,IAAQA,EAAI,QAAQ,GAAG,IAAM,GAAK,IAAM,KAAOE,CAChD,CAED,OAAOF,CACT,CChEA,MAAMI,EAAmB,CACvB,aAAc,CACZ,KAAK,SAAW,EACjB,CAUD,IAAIC,EAAWC,EAAU1B,EAAS,CAChC,YAAK,SAAS,KAAK,CACjB,UAAAyB,EACA,SAAAC,EACA,YAAa1B,EAAUA,EAAQ,YAAc,GAC7C,QAASA,EAAUA,EAAQ,QAAU,IAC3C,CAAK,EACM,KAAK,SAAS,OAAS,CAC/B,CASD,MAAM2B,EAAI,CACJ,KAAK,SAASA,CAAE,IAClB,KAAK,SAASA,CAAE,EAAI,KAEvB,CAOD,OAAQ,CACF,KAAK,WACP,KAAK,SAAW,GAEnB,CAYD,QAAQ5K,EAAI,CACVmI,EAAM,QAAQ,KAAK,SAAU,SAAwBxI,EAAG,CAClDA,IAAM,MACRK,EAAGL,CAAC,CAEZ,CAAK,CACF,CACH,CAEA,MAAAkL,GAAeJ,GCpEAK,GAAA,CACb,kBAAmB,GACnB,kBAAmB,GACnB,oBAAqB,EACvB,ECHAC,GAAe,OAAO,gBAAoB,IAAc,gBAAkBf,GCD1EgB,GAAe,OAAO,SAAa,IAAc,SAAW,KCA5DC,GAAe,OAAO,KAAS,IAAc,KAAO,KCErCC,GAAA,CACb,UAAW,GACX,QAAS,CACX,gBAAIC,GACJ,SAAIC,GACJ,KAAIC,EACD,EACD,UAAW,CAAC,OAAQ,QAAS,OAAQ,OAAQ,MAAO,MAAM,CAC5D,ECZMC,GAAgB,OAAO,OAAW,KAAe,OAAO,SAAa,IAErEC,GAAa,OAAO,WAAc,UAAY,WAAa,OAmB3DC,GAAwBF,KAC3B,CAACC,IAAc,CAAC,cAAe,eAAgB,IAAI,EAAE,QAAQA,GAAW,OAAO,EAAI,GAWhFE,IAAkC,IAEpC,OAAO,kBAAsB,KAE7B,gBAAgB,mBAChB,OAAO,KAAK,eAAkB,cAI5BC,GAASJ,IAAiB,OAAO,SAAS,MAAQ,oNCvCzCK,GAAA,CACb,GAAGxD,GACH,GAAGwD,EACL,ECAe,SAASC,GAAiBpE,EAAMyB,EAAS,CACtD,OAAOF,GAAWvB,EAAM,IAAImE,GAAS,QAAQ,gBAAmB,OAAO,OAAO,CAC5E,QAAS,SAASzF,EAAOpD,EAAK6F,EAAMkD,EAAS,CAC3C,OAAIF,GAAS,QAAUxD,EAAM,SAASjC,CAAK,GACzC,KAAK,OAAOpD,EAAKoD,EAAM,SAAS,QAAQ,CAAC,EAClC,IAGF2F,EAAQ,eAAe,MAAM,KAAM,SAAS,CACpD,CACL,EAAK5C,CAAO,CAAC,CACb,CCNA,SAAS6C,GAAc/F,EAAM,CAK3B,OAAOoC,EAAM,SAAS,gBAAiBpC,CAAI,EAAE,IAAIgE,GACxCA,EAAM,CAAC,IAAM,KAAO,GAAKA,EAAM,CAAC,GAAKA,EAAM,CAAC,CACpD,CACH,CASA,SAASgC,GAAcnH,EAAK,CAC1B,MAAMnC,EAAM,CAAA,EACNG,EAAO,OAAO,KAAKgC,CAAG,EAC5B,IAAIjC,EACJ,MAAME,EAAMD,EAAK,OACjB,IAAIE,EACJ,IAAKH,EAAI,EAAGA,EAAIE,EAAKF,IACnBG,EAAMF,EAAKD,CAAC,EACZF,EAAIK,CAAG,EAAI8B,EAAI9B,CAAG,EAEpB,OAAOL,CACT,CASA,SAASuJ,GAAehD,EAAU,CAChC,SAASiD,EAAUtD,EAAMzC,EAAOa,EAAQ2C,EAAO,CAC7C,IAAI3D,EAAO4C,EAAKe,GAAO,EAEvB,GAAI3D,IAAS,YAAa,MAAO,GAEjC,MAAMmG,EAAe,OAAO,SAAS,CAACnG,CAAI,EACpCoG,EAASzC,GAASf,EAAK,OAG7B,OAFA5C,EAAO,CAACA,GAAQoC,EAAM,QAAQpB,CAAM,EAAIA,EAAO,OAAShB,EAEpDoG,GACEhE,EAAM,WAAWpB,EAAQhB,CAAI,EAC/BgB,EAAOhB,CAAI,EAAI,CAACgB,EAAOhB,CAAI,EAAGG,CAAK,EAEnCa,EAAOhB,CAAI,EAAIG,EAGV,CAACgG,KAGN,CAACnF,EAAOhB,CAAI,GAAK,CAACoC,EAAM,SAASpB,EAAOhB,CAAI,CAAC,KAC/CgB,EAAOhB,CAAI,EAAI,IAGFkG,EAAUtD,EAAMzC,EAAOa,EAAOhB,CAAI,EAAG2D,CAAK,GAE3CvB,EAAM,QAAQpB,EAAOhB,CAAI,CAAC,IACtCgB,EAAOhB,CAAI,EAAIgG,GAAchF,EAAOhB,CAAI,CAAC,GAGpC,CAACmG,EACT,CAED,GAAI/D,EAAM,WAAWa,CAAQ,GAAKb,EAAM,WAAWa,EAAS,OAAO,EAAG,CACpE,MAAMvG,EAAM,CAAA,EAEZ0F,OAAAA,EAAM,aAAaa,EAAU,CAACjD,EAAMG,IAAU,CAC5C+F,EAAUH,GAAc/F,CAAI,EAAGG,EAAOzD,EAAK,CAAC,CAClD,CAAK,EAEMA,CACR,CAED,OAAO,IACT,CCxEA,SAAS2J,GAAgBC,EAAUC,EAAQpC,EAAS,CAClD,GAAI/B,EAAM,SAASkE,CAAQ,EACzB,GAAI,CACF,OAACC,GAAU,KAAK,OAAOD,CAAQ,EACxBlE,EAAM,KAAKkE,CAAQ,CAC3B,OAAQ3M,EAAG,CACV,GAAIA,EAAE,OAAS,cACb,MAAMA,CAET,CAGH,OAAQwK,GAAW,KAAK,WAAWmC,CAAQ,CAC7C,CAEA,MAAME,GAAW,CAEf,aAAczB,GAEd,QAAS,CAAC,MAAO,OAAQ,OAAO,EAEhC,iBAAkB,CAAC,SAA0BtD,EAAMgF,EAAS,CAC1D,MAAMC,EAAcD,EAAQ,eAAc,GAAM,GAC1CE,EAAqBD,EAAY,QAAQ,kBAAkB,EAAI,GAC/DE,EAAkBxE,EAAM,SAASX,CAAI,EAQ3C,GANImF,GAAmBxE,EAAM,WAAWX,CAAI,IAC1CA,EAAO,IAAI,SAASA,CAAI,GAGPW,EAAM,WAAWX,CAAI,EAGtC,OAAOkF,EAAqB,KAAK,UAAUV,GAAexE,CAAI,CAAC,EAAIA,EAGrE,GAAIW,EAAM,cAAcX,CAAI,GAC1BW,EAAM,SAASX,CAAI,GACnBW,EAAM,SAASX,CAAI,GACnBW,EAAM,OAAOX,CAAI,GACjBW,EAAM,OAAOX,CAAI,GACjBW,EAAM,iBAAiBX,CAAI,EAE3B,OAAOA,EAET,GAAIW,EAAM,kBAAkBX,CAAI,EAC9B,OAAOA,EAAK,OAEd,GAAIW,EAAM,kBAAkBX,CAAI,EAC9B,OAAAgF,EAAQ,eAAe,kDAAmD,EAAK,EACxEhF,EAAK,WAGd,IAAI1F,EAEJ,GAAI6K,EAAiB,CACnB,GAAIF,EAAY,QAAQ,mCAAmC,EAAI,GAC7D,OAAOb,GAAiBpE,EAAM,KAAK,cAAc,EAAE,SAAQ,EAG7D,IAAK1F,EAAaqG,EAAM,WAAWX,CAAI,IAAMiF,EAAY,QAAQ,qBAAqB,EAAI,GAAI,CAC5F,MAAMG,EAAY,KAAK,KAAO,KAAK,IAAI,SAEvC,OAAO7D,GACLjH,EAAa,CAAC,UAAW0F,CAAI,EAAIA,EACjCoF,GAAa,IAAIA,EACjB,KAAK,cACf,CACO,CACF,CAED,OAAID,GAAmBD,GACrBF,EAAQ,eAAe,mBAAoB,EAAK,EACzCJ,GAAgB5E,CAAI,GAGtBA,CACX,CAAG,EAED,kBAAmB,CAAC,SAA2BA,EAAM,CACnD,MAAMqF,EAAe,KAAK,cAAgBN,GAAS,aAC7CO,EAAoBD,GAAgBA,EAAa,kBACjDE,EAAgB,KAAK,eAAiB,OAE5C,GAAI5E,EAAM,WAAWX,CAAI,GAAKW,EAAM,iBAAiBX,CAAI,EACvD,OAAOA,EAGT,GAAIA,GAAQW,EAAM,SAASX,CAAI,IAAOsF,GAAqB,CAAC,KAAK,cAAiBC,GAAgB,CAEhG,MAAMC,EAAoB,EADAH,GAAgBA,EAAa,oBACPE,EAEhD,GAAI,CACF,OAAO,KAAK,MAAMvF,CAAI,CACvB,OAAQ9H,EAAG,CACV,GAAIsN,EACF,MAAItN,EAAE,OAAS,cACPmI,EAAW,KAAKnI,EAAGmI,EAAW,iBAAkB,KAAM,KAAM,KAAK,QAAQ,EAE3EnI,CAET,CACF,CAED,OAAO8H,CACX,CAAG,EAMD,QAAS,EAET,eAAgB,aAChB,eAAgB,eAEhB,iBAAkB,GAClB,cAAe,GAEf,IAAK,CACH,SAAUmE,GAAS,QAAQ,SAC3B,KAAMA,GAAS,QAAQ,IACxB,EAED,eAAgB,SAAwBsB,EAAQ,CAC9C,OAAOA,GAAU,KAAOA,EAAS,GAClC,EAED,QAAS,CACP,OAAQ,CACN,OAAU,oCACV,eAAgB,MACjB,CACF,CACH,EAEA9E,EAAM,QAAQ,CAAC,SAAU,MAAO,OAAQ,OAAQ,MAAO,OAAO,EAAI+E,GAAW,CAC3EX,GAAS,QAAQW,CAAM,EAAI,EAC7B,CAAC,EAED,MAAAC,GAAeZ,GC1JTa,GAAoBjF,EAAM,YAAY,CAC1C,MAAO,gBAAiB,iBAAkB,eAAgB,OAC1D,UAAW,OAAQ,OAAQ,oBAAqB,sBAChD,gBAAiB,WAAY,eAAgB,sBAC7C,UAAW,cAAe,YAC5B,CAAC,EAgBDkF,GAAeC,GAAc,CAC3B,MAAMC,EAAS,CAAA,EACf,IAAIzK,EACA9B,EACA2B,EAEJ,OAAA2K,GAAcA,EAAW,MAAM;AAAA,CAAI,EAAE,QAAQ,SAAgBE,EAAM,CACjE7K,EAAI6K,EAAK,QAAQ,GAAG,EACpB1K,EAAM0K,EAAK,UAAU,EAAG7K,CAAC,EAAE,KAAI,EAAG,cAClC3B,EAAMwM,EAAK,UAAU7K,EAAI,CAAC,EAAE,OAExB,GAACG,GAAQyK,EAAOzK,CAAG,GAAKsK,GAAkBtK,CAAG,KAI7CA,IAAQ,aACNyK,EAAOzK,CAAG,EACZyK,EAAOzK,CAAG,EAAE,KAAK9B,CAAG,EAEpBuM,EAAOzK,CAAG,EAAI,CAAC9B,CAAG,EAGpBuM,EAAOzK,CAAG,EAAIyK,EAAOzK,CAAG,EAAIyK,EAAOzK,CAAG,EAAI,KAAO9B,EAAMA,EAE7D,CAAG,EAEMuM,CACT,ECjDME,GAAa,OAAO,WAAW,EAErC,SAASC,GAAgBC,EAAQ,CAC/B,OAAOA,GAAU,OAAOA,CAAM,EAAE,KAAI,EAAG,aACzC,CAEA,SAASC,GAAe1H,EAAO,CAC7B,OAAIA,IAAU,IAASA,GAAS,KACvBA,EAGFiC,EAAM,QAAQjC,CAAK,EAAIA,EAAM,IAAI0H,EAAc,EAAI,OAAO1H,CAAK,CACxE,CAEA,SAAS2H,GAAYpN,EAAK,CACxB,MAAMqN,EAAS,OAAO,OAAO,IAAI,EAC3BC,EAAW,mCACjB,IAAIhE,EAEJ,KAAQA,EAAQgE,EAAS,KAAKtN,CAAG,GAC/BqN,EAAO/D,EAAM,CAAC,CAAC,EAAIA,EAAM,CAAC,EAG5B,OAAO+D,CACT,CAEA,MAAME,GAAqBvN,GAAQ,iCAAiC,KAAKA,EAAI,KAAI,CAAE,EAEnF,SAASwN,GAAiB9K,EAAS+C,EAAOyH,EAAQxJ,EAAQ+J,EAAoB,CAC5E,GAAI/F,EAAM,WAAWhE,CAAM,EACzB,OAAOA,EAAO,KAAK,KAAM+B,EAAOyH,CAAM,EAOxC,GAJIO,IACFhI,EAAQyH,GAGN,EAACxF,EAAM,SAASjC,CAAK,EAEzB,IAAIiC,EAAM,SAAShE,CAAM,EACvB,OAAO+B,EAAM,QAAQ/B,CAAM,IAAM,GAGnC,GAAIgE,EAAM,SAAShE,CAAM,EACvB,OAAOA,EAAO,KAAK+B,CAAK,EAE5B,CAEA,SAASiI,GAAaR,EAAQ,CAC5B,OAAOA,EAAO,KAAM,EACjB,YAAW,EAAG,QAAQ,kBAAmB,CAACS,EAAGC,EAAM5N,IAC3C4N,EAAK,YAAa,EAAG5N,CAC7B,CACL,CAEA,SAAS6N,GAAe7L,EAAKkL,EAAQ,CACnC,MAAMY,EAAepG,EAAM,YAAY,IAAMwF,CAAM,EAEnD,CAAC,MAAO,MAAO,KAAK,EAAE,QAAQa,GAAc,CAC1C,OAAO,eAAe/L,EAAK+L,EAAaD,EAAc,CACpD,MAAO,SAASE,EAAMC,EAAMC,EAAM,CAChC,OAAO,KAAKH,CAAU,EAAE,KAAK,KAAMb,EAAQc,EAAMC,EAAMC,CAAI,CAC5D,EACD,aAAc,EACpB,CAAK,CACL,CAAG,CACH,CAEA,MAAMC,EAAa,CACjB,YAAYpC,EAAS,CACnBA,GAAW,KAAK,IAAIA,CAAO,CAC5B,CAED,IAAImB,EAAQkB,EAAgBC,EAAS,CACnC,MAAMC,EAAO,KAEb,SAASC,EAAUC,EAAQC,EAASC,EAAU,CAC5C,MAAMC,EAAU1B,GAAgBwB,CAAO,EAEvC,GAAI,CAACE,EACH,MAAM,IAAI,MAAM,wCAAwC,EAG1D,MAAMtM,EAAMqF,EAAM,QAAQ4G,EAAMK,CAAO,GAEpC,CAACtM,GAAOiM,EAAKjM,CAAG,IAAM,QAAaqM,IAAa,IAASA,IAAa,QAAaJ,EAAKjM,CAAG,IAAM,MAClGiM,EAAKjM,GAAOoM,CAAO,EAAItB,GAAeqB,CAAM,EAE/C,CAED,MAAMI,EAAa,CAAC7C,EAAS2C,IAC3BhH,EAAM,QAAQqE,EAAS,CAACyC,EAAQC,IAAYF,EAAUC,EAAQC,EAASC,CAAQ,CAAC,EAElF,GAAIhH,EAAM,cAAcwF,CAAM,GAAKA,aAAkB,KAAK,YACxD0B,EAAW1B,EAAQkB,CAAc,UACzB1G,EAAM,SAASwF,CAAM,IAAMA,EAASA,EAAO,SAAW,CAACK,GAAkBL,CAAM,EACvF0B,EAAWhC,GAAaM,CAAM,EAAGkB,CAAc,UACtC1G,EAAM,SAASwF,CAAM,GAAKxF,EAAM,WAAWwF,CAAM,EAAG,CAC7D,IAAIlL,EAAM,CAAA,EAAI6M,EAAMxM,EACpB,UAAWyM,KAAS5B,EAAQ,CAC1B,GAAI,CAACxF,EAAM,QAAQoH,CAAK,EACtB,MAAM,UAAU,8CAA8C,EAGhE9M,EAAIK,EAAMyM,EAAM,CAAC,CAAC,GAAKD,EAAO7M,EAAIK,CAAG,GAClCqF,EAAM,QAAQmH,CAAI,EAAI,CAAC,GAAGA,EAAMC,EAAM,CAAC,CAAC,EAAI,CAACD,EAAMC,EAAM,CAAC,CAAC,EAAKA,EAAM,CAAC,CAC3E,CAEDF,EAAW5M,EAAKoM,CAAc,CACpC,MACMlB,GAAU,MAAQqB,EAAUH,EAAgBlB,EAAQmB,CAAO,EAG7D,OAAO,IACR,CAED,IAAInB,EAAQrB,EAAQ,CAGlB,GAFAqB,EAASD,GAAgBC,CAAM,EAE3BA,EAAQ,CACV,MAAM7K,EAAMqF,EAAM,QAAQ,KAAMwF,CAAM,EAEtC,GAAI7K,EAAK,CACP,MAAMoD,EAAQ,KAAKpD,CAAG,EAEtB,GAAI,CAACwJ,EACH,OAAOpG,EAGT,GAAIoG,IAAW,GACb,OAAOuB,GAAY3H,CAAK,EAG1B,GAAIiC,EAAM,WAAWmE,CAAM,EACzB,OAAOA,EAAO,KAAK,KAAMpG,EAAOpD,CAAG,EAGrC,GAAIqF,EAAM,SAASmE,CAAM,EACvB,OAAOA,EAAO,KAAKpG,CAAK,EAG1B,MAAM,IAAI,UAAU,wCAAwC,CAC7D,CACF,CACF,CAED,IAAIyH,EAAQ6B,EAAS,CAGnB,GAFA7B,EAASD,GAAgBC,CAAM,EAE3BA,EAAQ,CACV,MAAM7K,EAAMqF,EAAM,QAAQ,KAAMwF,CAAM,EAEtC,MAAO,CAAC,EAAE7K,GAAO,KAAKA,CAAG,IAAM,SAAc,CAAC0M,GAAWvB,GAAiB,KAAM,KAAKnL,CAAG,EAAGA,EAAK0M,CAAO,GACxG,CAED,MAAO,EACR,CAED,OAAO7B,EAAQ6B,EAAS,CACtB,MAAMT,EAAO,KACb,IAAIU,EAAU,GAEd,SAASC,EAAaR,EAAS,CAG7B,GAFAA,EAAUxB,GAAgBwB,CAAO,EAE7BA,EAAS,CACX,MAAMpM,EAAMqF,EAAM,QAAQ4G,EAAMG,CAAO,EAEnCpM,IAAQ,CAAC0M,GAAWvB,GAAiBc,EAAMA,EAAKjM,CAAG,EAAGA,EAAK0M,CAAO,KACpE,OAAOT,EAAKjM,CAAG,EAEf2M,EAAU,GAEb,CACF,CAED,OAAItH,EAAM,QAAQwF,CAAM,EACtBA,EAAO,QAAQ+B,CAAY,EAE3BA,EAAa/B,CAAM,EAGd8B,CACR,CAED,MAAMD,EAAS,CACb,MAAM5M,EAAO,OAAO,KAAK,IAAI,EAC7B,IAAID,EAAIC,EAAK,OACT6M,EAAU,GAEd,KAAO9M,KAAK,CACV,MAAMG,EAAMF,EAAKD,CAAC,GACf,CAAC6M,GAAWvB,GAAiB,KAAM,KAAKnL,CAAG,EAAGA,EAAK0M,EAAS,EAAI,KACjE,OAAO,KAAK1M,CAAG,EACf2M,EAAU,GAEb,CAED,OAAOA,CACR,CAED,UAAUE,EAAQ,CAChB,MAAMZ,EAAO,KACPvC,EAAU,CAAA,EAEhBrE,OAAAA,EAAM,QAAQ,KAAM,CAACjC,EAAOyH,IAAW,CACrC,MAAM7K,EAAMqF,EAAM,QAAQqE,EAASmB,CAAM,EAEzC,GAAI7K,EAAK,CACPiM,EAAKjM,CAAG,EAAI8K,GAAe1H,CAAK,EAChC,OAAO6I,EAAKpB,CAAM,EAClB,MACD,CAED,MAAMiC,EAAaD,EAASxB,GAAaR,CAAM,EAAI,OAAOA,CAAM,EAAE,OAE9DiC,IAAejC,GACjB,OAAOoB,EAAKpB,CAAM,EAGpBoB,EAAKa,CAAU,EAAIhC,GAAe1H,CAAK,EAEvCsG,EAAQoD,CAAU,EAAI,EAC5B,CAAK,EAEM,IACR,CAED,UAAUC,EAAS,CACjB,OAAO,KAAK,YAAY,OAAO,KAAM,GAAGA,CAAO,CAChD,CAED,OAAOC,EAAW,CAChB,MAAMrN,EAAM,OAAO,OAAO,IAAI,EAE9B0F,OAAAA,EAAM,QAAQ,KAAM,CAACjC,EAAOyH,IAAW,CACrCzH,GAAS,MAAQA,IAAU,KAAUzD,EAAIkL,CAAM,EAAImC,GAAa3H,EAAM,QAAQjC,CAAK,EAAIA,EAAM,KAAK,IAAI,EAAIA,EAChH,CAAK,EAEMzD,CACR,CAED,CAAC,OAAO,QAAQ,GAAI,CAClB,OAAO,OAAO,QAAQ,KAAK,OAAQ,CAAA,EAAE,OAAO,QAAQ,GACrD,CAED,UAAW,CACT,OAAO,OAAO,QAAQ,KAAK,OAAQ,CAAA,EAAE,IAAI,CAAC,CAACkL,EAAQzH,CAAK,IAAMyH,EAAS,KAAOzH,CAAK,EAAE,KAAK;AAAA,CAAI,CAC/F,CAED,cAAe,CACb,OAAO,KAAK,IAAI,YAAY,GAAK,CAAA,CAClC,CAED,IAAK,OAAO,WAAW,GAAI,CACzB,MAAO,cACR,CAED,OAAO,KAAK1F,EAAO,CACjB,OAAOA,aAAiB,KAAOA,EAAQ,IAAI,KAAKA,CAAK,CACtD,CAED,OAAO,OAAOuP,KAAUF,EAAS,CAC/B,MAAMG,EAAW,IAAI,KAAKD,CAAK,EAE/B,OAAAF,EAAQ,QAAS9I,GAAWiJ,EAAS,IAAIjJ,CAAM,CAAC,EAEzCiJ,CACR,CAED,OAAO,SAASrC,EAAQ,CAKtB,MAAMsC,GAJY,KAAKxC,EAAU,EAAK,KAAKA,EAAU,EAAI,CACvD,UAAW,CAAE,CACnB,GAEgC,UACtB/L,EAAY,KAAK,UAEvB,SAASwO,EAAehB,EAAS,CAC/B,MAAME,EAAU1B,GAAgBwB,CAAO,EAElCe,EAAUb,CAAO,IACpBd,GAAe5M,EAAWwN,CAAO,EACjCe,EAAUb,CAAO,EAAI,GAExB,CAEDjH,OAAAA,EAAM,QAAQwF,CAAM,EAAIA,EAAO,QAAQuC,CAAc,EAAIA,EAAevC,CAAM,EAEvE,IACR,CACH,CAEAiB,GAAa,SAAS,CAAC,eAAgB,iBAAkB,SAAU,kBAAmB,aAAc,eAAe,CAAC,EAGpHzG,EAAM,kBAAkByG,GAAa,UAAW,CAAC,CAAC,MAAA1I,CAAK,EAAGpD,IAAQ,CAChE,IAAIqN,EAASrN,EAAI,CAAC,EAAE,YAAW,EAAKA,EAAI,MAAM,CAAC,EAC/C,MAAO,CACL,IAAK,IAAMoD,EACX,IAAIkK,EAAa,CACf,KAAKD,CAAM,EAAIC,CAChB,CACF,CACH,CAAC,EAEDjI,EAAM,cAAcyG,EAAY,EAEhC,MAAAyB,GAAezB,GC3SA,SAAS0B,GAAcC,EAAKrI,EAAU,CACnD,MAAMF,EAAS,MAAQuE,GACjBpJ,EAAU+E,GAAYF,EACtBwE,EAAUoC,GAAa,KAAKzL,EAAQ,OAAO,EACjD,IAAIqE,EAAOrE,EAAQ,KAEnBgF,OAAAA,EAAM,QAAQoI,EAAK,SAAmBvQ,EAAI,CACxCwH,EAAOxH,EAAG,KAAKgI,EAAQR,EAAMgF,EAAQ,UAAS,EAAItE,EAAWA,EAAS,OAAS,MAAS,CAC5F,CAAG,EAEDsE,EAAQ,UAAS,EAEVhF,CACT,CCzBe,SAASgJ,GAAStK,EAAO,CACtC,MAAO,CAAC,EAAEA,GAASA,EAAM,WAC3B,CCUA,SAASuK,GAAc3I,EAASE,EAAQC,EAAS,CAE/CJ,EAAW,KAAK,KAAMC,GAAkB,WAAsBD,EAAW,aAAcG,EAAQC,CAAO,EACtG,KAAK,KAAO,eACd,CAEAE,EAAM,SAASsI,GAAe5I,EAAY,CACxC,WAAY,EACd,CAAC,ECTc,SAAS6I,GAAOC,EAASC,EAAQ1I,EAAU,CACxD,MAAM2I,EAAiB3I,EAAS,OAAO,eACnC,CAACA,EAAS,QAAU,CAAC2I,GAAkBA,EAAe3I,EAAS,MAAM,EACvEyI,EAAQzI,CAAQ,EAEhB0I,EAAO,IAAI/I,EACT,mCAAqCK,EAAS,OAC9C,CAACL,EAAW,gBAAiBA,EAAW,gBAAgB,EAAE,KAAK,MAAMK,EAAS,OAAS,GAAG,EAAI,CAAC,EAC/FA,EAAS,OACTA,EAAS,QACTA,CACN,CAAK,CAEL,CCxBe,SAAS4I,GAAczG,EAAK,CACzC,MAAMN,EAAQ,4BAA4B,KAAKM,CAAG,EAClD,OAAON,GAASA,EAAM,CAAC,GAAK,EAC9B,CCGA,SAASgH,GAAYC,EAAcC,EAAK,CACtCD,EAAeA,GAAgB,GAC/B,MAAME,EAAQ,IAAI,MAAMF,CAAY,EAC9BG,EAAa,IAAI,MAAMH,CAAY,EACzC,IAAII,EAAO,EACPC,EAAO,EACPC,EAEJ,OAAAL,EAAMA,IAAQ,OAAYA,EAAM,IAEzB,SAAcM,EAAa,CAChC,MAAMC,EAAM,KAAK,MAEXC,EAAYN,EAAWE,CAAI,EAE5BC,IACHA,EAAgBE,GAGlBN,EAAME,CAAI,EAAIG,EACdJ,EAAWC,CAAI,EAAII,EAEnB,IAAI7O,EAAI0O,EACJK,EAAa,EAEjB,KAAO/O,IAAMyO,GACXM,GAAcR,EAAMvO,GAAG,EACvBA,EAAIA,EAAIqO,EASV,GANAI,GAAQA,EAAO,GAAKJ,EAEhBI,IAASC,IACXA,GAAQA,EAAO,GAAKL,GAGlBQ,EAAMF,EAAgBL,EACxB,OAGF,MAAMU,EAASF,GAAaD,EAAMC,EAElC,OAAOE,EAAS,KAAK,MAAMD,EAAa,IAAOC,CAAM,EAAI,MAC7D,CACA,CC9CA,SAASC,GAAS5R,EAAI6R,EAAM,CAC1B,IAAIC,EAAY,EACZC,EAAY,IAAOF,EACnBG,EACAC,EAEJ,MAAMC,EAAS,CAACC,EAAMX,EAAM,KAAK,IAAG,IAAO,CACzCM,EAAYN,EACZQ,EAAW,KACPC,IACF,aAAaA,CAAK,EAClBA,EAAQ,MAEVjS,EAAG,MAAM,KAAMmS,CAAI,CACpB,EAoBD,MAAO,CAlBW,IAAIA,IAAS,CAC7B,MAAMX,EAAM,KAAK,MACXG,EAASH,EAAMM,EAChBH,GAAUI,EACbG,EAAOC,EAAMX,CAAG,GAEhBQ,EAAWG,EACNF,IACHA,EAAQ,WAAW,IAAM,CACvBA,EAAQ,KACRC,EAAOF,CAAQ,CACzB,EAAWD,EAAYJ,CAAM,GAG1B,EAEa,IAAMK,GAAYE,EAAOF,CAAQ,CAEvB,CAC1B,CCrCO,MAAMI,GAAuB,CAACC,EAAUC,EAAkBT,EAAO,IAAM,CAC5E,IAAIU,EAAgB,EACpB,MAAMC,EAAezB,GAAY,GAAI,GAAG,EAExC,OAAOa,GAASlS,GAAK,CACnB,MAAM+S,EAAS/S,EAAE,OACXgT,EAAQhT,EAAE,iBAAmBA,EAAE,MAAQ,OACvCiT,EAAgBF,EAASF,EACzBK,EAAOJ,EAAaG,CAAa,EACjCE,EAAUJ,GAAUC,EAE1BH,EAAgBE,EAEhB,MAAMjL,EAAO,CACX,OAAAiL,EACA,MAAAC,EACA,SAAUA,EAASD,EAASC,EAAS,OACrC,MAAOC,EACP,KAAMC,GAAc,OACpB,UAAWA,GAAQF,GAASG,GAAWH,EAAQD,GAAUG,EAAO,OAChE,MAAOlT,EACP,iBAAkBgT,GAAS,KAC3B,CAACJ,EAAmB,WAAa,QAAQ,EAAG,EAClD,EAEID,EAAS7K,CAAI,CACd,EAAEqK,CAAI,CACT,EAEaiB,GAAyB,CAACJ,EAAOK,IAAc,CAC1D,MAAMC,EAAmBN,GAAS,KAElC,MAAO,CAAED,GAAWM,EAAU,CAAC,EAAE,CAC/B,iBAAAC,EACA,MAAAN,EACA,OAAAD,CACJ,CAAG,EAAGM,EAAU,CAAC,CAAC,CAClB,EAEaE,GAAkBjT,GAAO,IAAImS,IAAShK,EAAM,KAAK,IAAMnI,EAAG,GAAGmS,CAAI,CAAC,ECzC/Ee,GAAevH,GAAS,uBAAyB,CAACD,EAAQyH,IAAY9I,IACpEA,EAAM,IAAI,IAAIA,EAAKsB,GAAS,MAAM,EAGhCD,EAAO,WAAarB,EAAI,UACxBqB,EAAO,OAASrB,EAAI,OACnB8I,GAAUzH,EAAO,OAASrB,EAAI,QAGjC,IAAI,IAAIsB,GAAS,MAAM,EACvBA,GAAS,WAAa,kBAAkB,KAAKA,GAAS,UAAU,SAAS,CAC3E,EAAI,IAAM,GCVKyH,GAAAzH,GAAS,sBAGtB,CACE,MAAM5F,EAAMG,EAAOmN,EAAS1K,EAAM2K,EAAQC,EAAQ,CAChD,MAAMC,EAAS,CAACzN,EAAO,IAAM,mBAAmBG,CAAK,CAAC,EAEtDiC,EAAM,SAASkL,CAAO,GAAKG,EAAO,KAAK,WAAa,IAAI,KAAKH,CAAO,EAAE,YAAa,CAAA,EAEnFlL,EAAM,SAASQ,CAAI,GAAK6K,EAAO,KAAK,QAAU7K,CAAI,EAElDR,EAAM,SAASmL,CAAM,GAAKE,EAAO,KAAK,UAAYF,CAAM,EAExDC,IAAW,IAAQC,EAAO,KAAK,QAAQ,EAEvC,SAAS,OAASA,EAAO,KAAK,IAAI,CACnC,EAED,KAAKzN,EAAM,CACT,MAAMgE,EAAQ,SAAS,OAAO,MAAM,IAAI,OAAO,aAAehE,EAAO,WAAW,CAAC,EACjF,OAAQgE,EAAQ,mBAAmBA,EAAM,CAAC,CAAC,EAAI,IAChD,EAED,OAAOhE,EAAM,CACX,KAAK,MAAMA,EAAM,GAAI,KAAK,IAAG,EAAK,KAAQ,CAC3C,CACF,EAKD,CACE,OAAQ,CAAE,EACV,MAAO,CACL,OAAO,IACR,EACD,QAAS,CAAE,CACZ,EC/BY,SAAS0N,GAAcpJ,EAAK,CAIzC,MAAO,8BAA8B,KAAKA,CAAG,CAC/C,CCJe,SAASqJ,GAAYC,EAASC,EAAa,CACxD,OAAOA,EACHD,EAAQ,QAAQ,SAAU,EAAE,EAAI,IAAMC,EAAY,QAAQ,OAAQ,EAAE,EACpED,CACN,CCCe,SAASE,GAAcF,EAASG,EAAcC,EAAmB,CAC9E,IAAIC,EAAgB,CAACP,GAAcK,CAAY,EAC/C,OAAIH,IAAYK,GAAiBD,GAAqB,IAC7CL,GAAYC,EAASG,CAAY,EAEnCA,CACT,CChBA,MAAMG,GAAmBzT,GAAUA,aAAiBoO,GAAe,CAAE,GAAGpO,CAAO,EAAGA,EAWnE,SAAS0T,GAAYC,EAASC,EAAS,CAEpDA,EAAUA,GAAW,GACrB,MAAMpM,EAAS,CAAA,EAEf,SAASqM,EAAetN,EAAQD,EAAQzC,EAAMhB,EAAU,CACtD,OAAI8E,EAAM,cAAcpB,CAAM,GAAKoB,EAAM,cAAcrB,CAAM,EACpDqB,EAAM,MAAM,KAAK,CAAC,SAAA9E,CAAQ,EAAG0D,EAAQD,CAAM,EACzCqB,EAAM,cAAcrB,CAAM,EAC5BqB,EAAM,MAAM,CAAE,EAAErB,CAAM,EACpBqB,EAAM,QAAQrB,CAAM,EACtBA,EAAO,QAETA,CACR,CAGD,SAASwN,EAAoBhV,EAAGE,EAAG6E,EAAOhB,EAAU,CAClD,GAAK8E,EAAM,YAAY3I,CAAC,GAEjB,GAAI,CAAC2I,EAAM,YAAY7I,CAAC,EAC7B,OAAO+U,EAAe,OAAW/U,EAAG+E,EAAOhB,CAAQ,MAFnD,QAAOgR,EAAe/U,EAAGE,EAAG6E,EAAOhB,CAAQ,CAI9C,CAGD,SAASkR,EAAiBjV,EAAGE,EAAG,CAC9B,GAAI,CAAC2I,EAAM,YAAY3I,CAAC,EACtB,OAAO6U,EAAe,OAAW7U,CAAC,CAErC,CAGD,SAASgV,EAAiBlV,EAAGE,EAAG,CAC9B,GAAK2I,EAAM,YAAY3I,CAAC,GAEjB,GAAI,CAAC2I,EAAM,YAAY7I,CAAC,EAC7B,OAAO+U,EAAe,OAAW/U,CAAC,MAFlC,QAAO+U,EAAe,OAAW7U,CAAC,CAIrC,CAGD,SAASiV,EAAgBnV,EAAGE,EAAG6E,EAAM,CACnC,GAAIA,KAAQ+P,EACV,OAAOC,EAAe/U,EAAGE,CAAC,EACrB,GAAI6E,KAAQ8P,EACjB,OAAOE,EAAe,OAAW/U,CAAC,CAErC,CAED,MAAMoV,EAAW,CACf,IAAKH,EACL,OAAQA,EACR,KAAMA,EACN,QAASC,EACT,iBAAkBA,EAClB,kBAAmBA,EACnB,iBAAkBA,EAClB,QAASA,EACT,eAAgBA,EAChB,gBAAiBA,EACjB,cAAeA,EACf,QAASA,EACT,aAAcA,EACd,eAAgBA,EAChB,eAAgBA,EAChB,iBAAkBA,EAClB,mBAAoBA,EACpB,WAAYA,EACZ,iBAAkBA,EAClB,cAAeA,EACf,eAAgBA,EAChB,UAAWA,EACX,UAAWA,EACX,WAAYA,EACZ,YAAaA,EACb,WAAYA,EACZ,iBAAkBA,EAClB,eAAgBC,EAChB,QAAS,CAACnV,EAAGE,EAAI6E,IAASiQ,EAAoBL,GAAgB3U,CAAC,EAAG2U,GAAgBzU,CAAC,EAAE6E,EAAM,EAAI,CACnG,EAEE8D,OAAAA,EAAM,QAAQ,OAAO,KAAK,OAAO,OAAO,GAAIgM,EAASC,CAAO,CAAC,EAAG,SAA4B/P,EAAM,CAChG,MAAMjB,EAAQsR,EAASrQ,CAAI,GAAKiQ,EAC1BK,EAAcvR,EAAM+Q,EAAQ9P,CAAI,EAAG+P,EAAQ/P,CAAI,EAAGA,CAAI,EAC3D8D,EAAM,YAAYwM,CAAW,GAAKvR,IAAUqR,IAAqBzM,EAAO3D,CAAI,EAAIsQ,EACrF,CAAG,EAEM3M,CACT,CChGA,MAAe4M,GAAC5M,GAAW,CACzB,MAAM6M,EAAYX,GAAY,CAAE,EAAElM,CAAM,EAExC,GAAI,CAAC,KAAAR,EAAM,cAAAsN,EAAe,eAAAC,EAAgB,eAAAC,EAAgB,QAAAxI,EAAS,KAAAyI,CAAI,EAAIJ,EAE3EA,EAAU,QAAUrI,EAAUoC,GAAa,KAAKpC,CAAO,EAEvDqI,EAAU,IAAMzK,GAASyJ,GAAcgB,EAAU,QAASA,EAAU,IAAKA,EAAU,iBAAiB,EAAG7M,EAAO,OAAQA,EAAO,gBAAgB,EAGzIiN,GACFzI,EAAQ,IAAI,gBAAiB,SAC3B,MAAMyI,EAAK,UAAY,IAAM,KAAOA,EAAK,SAAW,SAAS,mBAAmBA,EAAK,QAAQ,CAAC,EAAI,GAAG,CAC3G,EAGE,IAAIxI,EAEJ,GAAItE,EAAM,WAAWX,CAAI,GACvB,GAAImE,GAAS,uBAAyBA,GAAS,+BAC7Ca,EAAQ,eAAe,MAAS,WACtBC,EAAcD,EAAQ,eAAc,KAAQ,GAAO,CAE7D,KAAM,CAAC7L,EAAM,GAAGmN,CAAM,EAAIrB,EAAcA,EAAY,MAAM,GAAG,EAAE,IAAInF,GAASA,EAAM,KAAI,CAAE,EAAE,OAAO,OAAO,EAAI,GAC5GkF,EAAQ,eAAe,CAAC7L,GAAQ,sBAAuB,GAAGmN,CAAM,EAAE,KAAK,IAAI,CAAC,CAC7E,EAOH,GAAInC,GAAS,wBACXmJ,GAAiB3M,EAAM,WAAW2M,CAAa,IAAMA,EAAgBA,EAAcD,CAAS,GAExFC,GAAkBA,IAAkB,IAAS5B,GAAgB2B,EAAU,GAAG,GAAI,CAEhF,MAAMK,EAAYH,GAAkBC,GAAkB5B,GAAQ,KAAK4B,CAAc,EAE7EE,GACF1I,EAAQ,IAAIuI,EAAgBG,CAAS,CAExC,CAGH,OAAOL,CACT,EC5CMM,GAAwB,OAAO,eAAmB,IAExDC,GAAeD,IAAyB,SAAUnN,EAAQ,CACxD,OAAO,IAAI,QAAQ,SAA4B2I,EAASC,EAAQ,CAC9D,MAAMyE,EAAUT,GAAc5M,CAAM,EACpC,IAAIsN,EAAcD,EAAQ,KAC1B,MAAME,EAAiB3G,GAAa,KAAKyG,EAAQ,OAAO,EAAE,YAC1D,GAAI,CAAC,aAAAG,EAAc,iBAAAC,EAAkB,mBAAAC,CAAkB,EAAIL,EACvDM,EACAC,EAAiBC,EACjBC,EAAaC,EAEjB,SAASC,GAAO,CACdF,GAAeA,EAAW,EAC1BC,GAAiBA,EAAa,EAE9BV,EAAQ,aAAeA,EAAQ,YAAY,YAAYM,CAAU,EAEjEN,EAAQ,QAAUA,EAAQ,OAAO,oBAAoB,QAASM,CAAU,CACzE,CAED,IAAI1N,EAAU,IAAI,eAElBA,EAAQ,KAAKoN,EAAQ,OAAO,YAAW,EAAIA,EAAQ,IAAK,EAAI,EAG5DpN,EAAQ,QAAUoN,EAAQ,QAE1B,SAASY,GAAY,CACnB,GAAI,CAAChO,EACH,OAGF,MAAMiO,EAAkBtH,GAAa,KACnC,0BAA2B3G,GAAWA,EAAQ,sBAAuB,CAC7E,EAGYC,EAAW,CACf,KAHmB,CAACsN,GAAgBA,IAAiB,QAAUA,IAAiB,OAChFvN,EAAQ,aAAeA,EAAQ,SAG/B,OAAQA,EAAQ,OAChB,WAAYA,EAAQ,WACpB,QAASiO,EACT,OAAAlO,EACA,QAAAC,CACR,EAEMyI,GAAO,SAAkBxK,EAAO,CAC9ByK,EAAQzK,CAAK,EACb8P,GACR,EAAS,SAAiBG,EAAK,CACvBvF,EAAOuF,CAAG,EACVH,GACD,EAAE9N,CAAQ,EAGXD,EAAU,IACX,CAEG,cAAeA,EAEjBA,EAAQ,UAAYgO,EAGpBhO,EAAQ,mBAAqB,UAAsB,CAC7C,CAACA,GAAWA,EAAQ,aAAe,GAQnCA,EAAQ,SAAW,GAAK,EAAEA,EAAQ,aAAeA,EAAQ,YAAY,QAAQ,OAAO,IAAM,IAK9F,WAAWgO,CAAS,CAC5B,EAIIhO,EAAQ,QAAU,UAAuB,CAClCA,IAIL2I,EAAO,IAAI/I,EAAW,kBAAmBA,EAAW,aAAcG,EAAQC,CAAO,CAAC,EAGlFA,EAAU,KAChB,EAGIA,EAAQ,QAAU,UAAuB,CAGvC2I,EAAO,IAAI/I,EAAW,gBAAiBA,EAAW,YAAaG,EAAQC,CAAO,CAAC,EAG/EA,EAAU,IAChB,EAGIA,EAAQ,UAAY,UAAyB,CAC3C,IAAImO,EAAsBf,EAAQ,QAAU,cAAgBA,EAAQ,QAAU,cAAgB,mBAC9F,MAAMxI,EAAewI,EAAQ,cAAgBvK,GACzCuK,EAAQ,sBACVe,EAAsBf,EAAQ,qBAEhCzE,EAAO,IAAI/I,EACTuO,EACAvJ,EAAa,oBAAsBhF,EAAW,UAAYA,EAAW,aACrEG,EACAC,CAAO,CAAC,EAGVA,EAAU,IAChB,EAGIqN,IAAgB,QAAaC,EAAe,eAAe,IAAI,EAG3D,qBAAsBtN,GACxBE,EAAM,QAAQoN,EAAe,OAAQ,EAAE,SAA0BvU,EAAK8B,EAAK,CACzEmF,EAAQ,iBAAiBnF,EAAK9B,CAAG,CACzC,CAAO,EAIEmH,EAAM,YAAYkN,EAAQ,eAAe,IAC5CpN,EAAQ,gBAAkB,CAAC,CAACoN,EAAQ,iBAIlCG,GAAgBA,IAAiB,SACnCvN,EAAQ,aAAeoN,EAAQ,cAI7BK,IACD,CAACG,EAAmBE,CAAa,EAAI3D,GAAqBsD,EAAoB,EAAI,EACnFzN,EAAQ,iBAAiB,WAAY4N,CAAiB,GAIpDJ,GAAoBxN,EAAQ,SAC7B,CAAC2N,EAAiBE,CAAW,EAAI1D,GAAqBqD,CAAgB,EAEvExN,EAAQ,OAAO,iBAAiB,WAAY2N,CAAe,EAE3D3N,EAAQ,OAAO,iBAAiB,UAAW6N,CAAW,IAGpDT,EAAQ,aAAeA,EAAQ,UAGjCM,EAAaU,GAAU,CAChBpO,IAGL2I,EAAO,CAACyF,GAAUA,EAAO,KAAO,IAAI5F,GAAc,KAAMzI,EAAQC,CAAO,EAAIoO,CAAM,EACjFpO,EAAQ,MAAK,EACbA,EAAU,KAClB,EAEMoN,EAAQ,aAAeA,EAAQ,YAAY,UAAUM,CAAU,EAC3DN,EAAQ,SACVA,EAAQ,OAAO,QAAUM,EAAY,EAAGN,EAAQ,OAAO,iBAAiB,QAASM,CAAU,IAI/F,MAAMW,EAAWxF,GAAcuE,EAAQ,GAAG,EAE1C,GAAIiB,GAAY3K,GAAS,UAAU,QAAQ2K,CAAQ,IAAM,GAAI,CAC3D1F,EAAO,IAAI/I,EAAW,wBAA0ByO,EAAW,IAAKzO,EAAW,gBAAiBG,CAAM,CAAC,EACnG,MACD,CAIDC,EAAQ,KAAKqN,GAAe,IAAI,CACpC,CAAG,CACH,EChMMiB,GAAiB,CAACC,EAASC,IAAY,CAC3C,KAAM,CAAC,OAAAC,CAAM,EAAKF,EAAUA,EAAUA,EAAQ,OAAO,OAAO,EAAI,CAAA,EAEhE,GAAIC,GAAWC,EAAQ,CACrB,IAAIC,EAAa,IAAI,gBAEjBC,EAEJ,MAAMC,EAAU,SAAUC,EAAQ,CAChC,GAAI,CAACF,EAAS,CACZA,EAAU,GACVG,IACA,MAAMZ,EAAMW,aAAkB,MAAQA,EAAS,KAAK,OACpDH,EAAW,MAAMR,aAAetO,EAAasO,EAAM,IAAI1F,GAAc0F,aAAe,MAAQA,EAAI,QAAUA,CAAG,CAAC,CAC/G,CACF,EAED,IAAIlE,EAAQwE,GAAW,WAAW,IAAM,CACtCxE,EAAQ,KACR4E,EAAQ,IAAIhP,EAAW,WAAW4O,CAAO,kBAAmB5O,EAAW,SAAS,CAAC,CAClF,EAAE4O,CAAO,EAEV,MAAMM,EAAc,IAAM,CACpBP,IACFvE,GAAS,aAAaA,CAAK,EAC3BA,EAAQ,KACRuE,EAAQ,QAAQQ,GAAU,CACxBA,EAAO,YAAcA,EAAO,YAAYH,CAAO,EAAIG,EAAO,oBAAoB,QAASH,CAAO,CACxG,CAAS,EACDL,EAAU,KAEb,EAEDA,EAAQ,QAASQ,GAAWA,EAAO,iBAAiB,QAASH,CAAO,CAAC,EAErE,KAAM,CAAC,OAAAG,CAAM,EAAIL,EAEjB,OAAAK,EAAO,YAAc,IAAM7O,EAAM,KAAK4O,CAAW,EAE1CC,CACR,CACH,EAEAC,GAAeV,GC9CFW,GAAc,UAAWC,EAAOC,EAAW,CACtD,IAAIvU,EAAMsU,EAAM,WAEhB,GAAI,CAACC,GAAavU,EAAMuU,EAAW,CACjC,MAAMD,EACN,MACD,CAED,IAAIE,EAAM,EACNC,EAEJ,KAAOD,EAAMxU,GACXyU,EAAMD,EAAMD,EACZ,MAAMD,EAAM,MAAME,EAAKC,CAAG,EAC1BD,EAAMC,CAEV,EAEaC,GAAY,gBAAiBC,EAAUJ,EAAW,CAC7D,gBAAiBD,KAASM,GAAWD,CAAQ,EAC3C,MAAON,GAAYC,EAAOC,CAAS,CAEvC,EAEMK,GAAa,gBAAiBC,EAAQ,CAC1C,GAAIA,EAAO,OAAO,aAAa,EAAG,CAChC,MAAOA,EACP,MACD,CAED,MAAMC,EAASD,EAAO,YACtB,GAAI,CACF,OAAS,CACP,KAAM,CAAC,KAAA1B,EAAM,MAAA9P,CAAK,EAAI,MAAMyR,EAAO,KAAI,EACvC,GAAI3B,EACF,MAEF,MAAM9P,CACP,CACL,QAAY,CACR,MAAMyR,EAAO,QACd,CACH,EAEaC,GAAc,CAACF,EAAQN,EAAWS,EAAYC,IAAa,CACtE,MAAM1X,EAAWmX,GAAUG,EAAQN,CAAS,EAE5C,IAAIlG,EAAQ,EACR8E,EACA+B,EAAarY,GAAM,CAChBsW,IACHA,EAAO,GACP8B,GAAYA,EAASpY,CAAC,EAEzB,EAED,OAAO,IAAI,eAAe,CACxB,MAAM,KAAKiX,EAAY,CACrB,GAAI,CACF,KAAM,CAAC,KAAAX,EAAM,MAAA9P,CAAK,EAAI,MAAM9F,EAAS,KAAI,EAEzC,GAAI4V,EAAM,CACT+B,IACCpB,EAAW,MAAK,EAChB,MACD,CAED,IAAI9T,EAAMqD,EAAM,WAChB,GAAI2R,EAAY,CACd,IAAIG,EAAc9G,GAASrO,EAC3BgV,EAAWG,CAAW,CACvB,CACDrB,EAAW,QAAQ,IAAI,WAAWzQ,CAAK,CAAC,CACzC,OAAQiQ,EAAK,CACZ,MAAA4B,EAAU5B,CAAG,EACPA,CACP,CACF,EACD,OAAOW,EAAQ,CACb,OAAAiB,EAAUjB,CAAM,EACT1W,EAAS,QACjB,CACL,EAAK,CACD,cAAe,CACnB,CAAG,CACH,EC5EM6X,GAAmB,OAAO,OAAU,YAAc,OAAO,SAAY,YAAc,OAAO,UAAa,WACvGC,GAA4BD,IAAoB,OAAO,gBAAmB,WAG1EE,GAAaF,KAAqB,OAAO,aAAgB,YACzD/N,GAAazJ,GAAQyJ,EAAQ,OAAOzJ,CAAG,GAAG,IAAI,WAAa,EAC7D,MAAOA,GAAQ,IAAI,WAAW,MAAM,IAAI,SAASA,CAAG,EAAE,aAAa,GAGjE2X,GAAO,CAACpY,KAAOmS,IAAS,CAC5B,GAAI,CACF,MAAO,CAAC,CAACnS,EAAG,GAAGmS,CAAI,CACpB,MAAW,CACV,MAAO,EACR,CACH,EAEMkG,GAAwBH,IAA6BE,GAAK,IAAM,CACpE,IAAIE,EAAiB,GAErB,MAAMC,EAAiB,IAAI,QAAQ5M,GAAS,OAAQ,CAClD,KAAM,IAAI,eACV,OAAQ,OACR,IAAI,QAAS,CACX,OAAA2M,EAAiB,GACV,MACR,CACF,CAAA,EAAE,QAAQ,IAAI,cAAc,EAE7B,OAAOA,GAAkB,CAACC,CAC5B,CAAC,EAEKC,GAAqB,GAAK,KAE1BC,GAAyBP,IAC7BE,GAAK,IAAMjQ,EAAM,iBAAiB,IAAI,SAAS,EAAE,EAAE,IAAI,CAAC,EAGpDuQ,GAAY,CAChB,OAAQD,KAA4BE,GAAQA,EAAI,KAClD,EAEAV,KAAuBU,GAAQ,CAC7B,CAAC,OAAQ,cAAe,OAAQ,WAAY,QAAQ,EAAE,QAAQhY,GAAQ,CACpE,CAAC+X,GAAU/X,CAAI,IAAM+X,GAAU/X,CAAI,EAAIwH,EAAM,WAAWwQ,EAAIhY,CAAI,CAAC,EAAKgY,GAAQA,EAAIhY,CAAI,EAAG,EACvF,CAACiY,EAAG5Q,IAAW,CACb,MAAM,IAAIH,EAAW,kBAAkBlH,CAAI,qBAAsBkH,EAAW,gBAAiBG,CAAM,CAC3G,EACA,CAAG,CACH,GAAG,IAAI,QAAQ,EAEf,MAAM6Q,GAAgB,MAAOC,GAAS,CACpC,GAAIA,GAAQ,KACV,MAAO,GAGT,GAAG3Q,EAAM,OAAO2Q,CAAI,EAClB,OAAOA,EAAK,KAGd,GAAG3Q,EAAM,oBAAoB2Q,CAAI,EAK/B,OAAQ,MAJS,IAAI,QAAQnN,GAAS,OAAQ,CAC5C,OAAQ,OACR,KAAAmN,CACN,CAAK,EACsB,YAAW,GAAI,WAGxC,GAAG3Q,EAAM,kBAAkB2Q,CAAI,GAAK3Q,EAAM,cAAc2Q,CAAI,EAC1D,OAAOA,EAAK,WAOd,GAJG3Q,EAAM,kBAAkB2Q,CAAI,IAC7BA,EAAOA,EAAO,IAGb3Q,EAAM,SAAS2Q,CAAI,EACpB,OAAQ,MAAMX,GAAWW,CAAI,GAAG,UAEpC,EAEMC,GAAoB,MAAOvM,EAASsM,IAAS,CACjD,MAAMpC,EAASvO,EAAM,eAAeqE,EAAQ,iBAAkB,CAAA,EAE9D,OAAOkK,GAAiBmC,GAAcC,CAAI,CAC5C,EAEAE,GAAef,KAAqB,MAAOjQ,GAAW,CACpD,GAAI,CACF,IAAAqC,EACA,OAAA6C,EACA,KAAA1F,EACA,OAAAwP,EACA,YAAAiC,EACA,QAAAxC,EACA,mBAAAf,EACA,iBAAAD,EACA,aAAAD,EACA,QAAAhJ,EACA,gBAAA0M,EAAkB,cAClB,aAAAC,CACJ,EAAMvE,GAAc5M,CAAM,EAExBwN,EAAeA,GAAgBA,EAAe,IAAI,YAAa,EAAG,OAElE,IAAI4D,EAAiB7C,GAAe,CAACS,EAAQiC,GAAeA,EAAY,cAAa,CAAE,EAAGxC,CAAO,EAE7FxO,EAEJ,MAAM8O,EAAcqC,GAAkBA,EAAe,cAAgB,IAAM,CACvEA,EAAe,YAAW,CAChC,GAEE,IAAIC,EAEJ,GAAI,CACF,GACE5D,GAAoB4C,IAAyBnL,IAAW,OAASA,IAAW,SAC3EmM,EAAuB,MAAMN,GAAkBvM,EAAShF,CAAI,KAAO,EACpE,CACA,IAAI8R,EAAW,IAAI,QAAQjP,EAAK,CAC9B,OAAQ,OACR,KAAM7C,EACN,OAAQ,MAChB,CAAO,EAEG+R,EAMJ,GAJIpR,EAAM,WAAWX,CAAI,IAAM+R,EAAoBD,EAAS,QAAQ,IAAI,cAAc,IACpF9M,EAAQ,eAAe+M,CAAiB,EAGtCD,EAAS,KAAM,CACjB,KAAM,CAACzB,EAAY2B,CAAK,EAAI1G,GAC1BuG,EACAjH,GAAqBa,GAAewC,CAAgB,CAAC,CAC/D,EAEQjO,EAAOoQ,GAAY0B,EAAS,KAAMd,GAAoBX,EAAY2B,CAAK,CACxE,CACF,CAEIrR,EAAM,SAAS+Q,CAAe,IACjCA,EAAkBA,EAAkB,UAAY,QAKlD,MAAMO,EAAyB,gBAAiB,QAAQ,UACxDxR,EAAU,IAAI,QAAQoC,EAAK,CACzB,GAAG8O,EACH,OAAQC,EACR,OAAQlM,EAAO,YAAa,EAC5B,QAASV,EAAQ,UAAW,EAAC,OAAQ,EACrC,KAAMhF,EACN,OAAQ,OACR,YAAaiS,EAAyBP,EAAkB,MAC9D,CAAK,EAED,IAAIhR,EAAW,MAAM,MAAMD,CAAO,EAElC,MAAMyR,EAAmBjB,KAA2BjD,IAAiB,UAAYA,IAAiB,YAElG,GAAIiD,KAA2B/C,GAAuBgE,GAAoB3C,GAAe,CACvF,MAAM9N,EAAU,CAAA,EAEhB,CAAC,SAAU,aAAc,SAAS,EAAE,QAAQ5E,GAAQ,CAClD4E,EAAQ5E,CAAI,EAAI6D,EAAS7D,CAAI,CACrC,CAAO,EAED,MAAMsV,EAAwBxR,EAAM,eAAeD,EAAS,QAAQ,IAAI,gBAAgB,CAAC,EAEnF,CAAC2P,EAAY2B,CAAK,EAAI9D,GAAsB5C,GAChD6G,EACAvH,GAAqBa,GAAeyC,CAAkB,EAAG,EAAI,CAC9D,GAAI,GAELxN,EAAW,IAAI,SACb0P,GAAY1P,EAAS,KAAMsQ,GAAoBX,EAAY,IAAM,CAC/D2B,GAASA,EAAK,EACdzC,GAAeA,EAAW,CACpC,CAAS,EACD9N,CACR,CACK,CAEDuM,EAAeA,GAAgB,OAE/B,IAAIoE,EAAe,MAAMlB,GAAUvQ,EAAM,QAAQuQ,GAAWlD,CAAY,GAAK,MAAM,EAAEtN,EAAUF,CAAM,EAErG,OAAC0R,GAAoB3C,GAAeA,IAE7B,MAAM,IAAI,QAAQ,CAACpG,EAASC,IAAW,CAC5CF,GAAOC,EAASC,EAAQ,CACtB,KAAMgJ,EACN,QAAShL,GAAa,KAAK1G,EAAS,OAAO,EAC3C,OAAQA,EAAS,OACjB,WAAYA,EAAS,WACrB,OAAAF,EACA,QAAAC,CACR,CAAO,CACP,CAAK,CACF,OAAQkO,EAAK,CAGZ,MAFAY,GAAeA,EAAW,EAEtBZ,GAAOA,EAAI,OAAS,aAAe,qBAAqB,KAAKA,EAAI,OAAO,EACpE,OAAO,OACX,IAAItO,EAAW,gBAAiBA,EAAW,YAAaG,EAAQC,CAAO,EACvE,CACE,MAAOkO,EAAI,OAASA,CACrB,CACF,EAGGtO,EAAW,KAAKsO,EAAKA,GAAOA,EAAI,KAAMnO,EAAQC,CAAO,CAC5D,CACH,GC5NM4R,GAAgB,CACpB,KAAMtR,GACN,IAAK6M,GACL,MAAO4D,EACT,EAEA7Q,EAAM,QAAQ0R,GAAe,CAAC7Z,EAAIkG,IAAU,CAC1C,GAAIlG,EAAI,CACN,GAAI,CACF,OAAO,eAAeA,EAAI,OAAQ,CAAC,MAAAkG,CAAK,CAAC,CAC1C,MAAW,CAEX,CACD,OAAO,eAAelG,EAAI,cAAe,CAAC,MAAAkG,CAAK,CAAC,CACjD,CACH,CAAC,EAED,MAAM4T,GAAgBhD,GAAW,KAAKA,CAAM,GAEtCiD,GAAoBC,GAAY7R,EAAM,WAAW6R,CAAO,GAAKA,IAAY,MAAQA,IAAY,GAEpFC,GAAA,CACb,WAAaA,GAAa,CACxBA,EAAW9R,EAAM,QAAQ8R,CAAQ,EAAIA,EAAW,CAACA,CAAQ,EAEzD,KAAM,CAAC,OAAAvD,CAAM,EAAIuD,EACjB,IAAIC,EACAF,EAEJ,MAAMG,EAAkB,CAAA,EAExB,QAASxX,EAAI,EAAGA,EAAI+T,EAAQ/T,IAAK,CAC/BuX,EAAgBD,EAAStX,CAAC,EAC1B,IAAIiI,EAIJ,GAFAoP,EAAUE,EAEN,CAACH,GAAiBG,CAAa,IACjCF,EAAUH,IAAejP,EAAK,OAAOsP,CAAa,GAAG,YAAW,CAAE,EAE9DF,IAAY,QACd,MAAM,IAAInS,EAAW,oBAAoB+C,CAAE,GAAG,EAIlD,GAAIoP,EACF,MAGFG,EAAgBvP,GAAM,IAAMjI,CAAC,EAAIqX,CAClC,CAED,GAAI,CAACA,EAAS,CAEZ,MAAMI,EAAU,OAAO,QAAQD,CAAe,EAC3C,IAAI,CAAC,CAACvP,EAAIyP,CAAK,IAAM,WAAWzP,CAAE,KAChCyP,IAAU,GAAQ,sCAAwC,gCACrE,EAEM,IAAIC,EAAI5D,EACL0D,EAAQ,OAAS,EAAI;AAAA,EAAcA,EAAQ,IAAIN,EAAY,EAAE,KAAK;AAAA,CAAI,EAAI,IAAMA,GAAaM,EAAQ,CAAC,CAAC,EACxG,0BAEF,MAAM,IAAIvS,EACR,wDAA0DyS,EAC1D,iBACR,CACK,CAED,OAAON,CACR,EACD,SAAUH,EACZ,EC9DA,SAASU,GAA6BvS,EAAQ,CAK5C,GAJIA,EAAO,aACTA,EAAO,YAAY,mBAGjBA,EAAO,QAAUA,EAAO,OAAO,QACjC,MAAM,IAAIyI,GAAc,KAAMzI,CAAM,CAExC,CASe,SAASwS,GAAgBxS,EAAQ,CAC9C,OAAAuS,GAA6BvS,CAAM,EAEnCA,EAAO,QAAU4G,GAAa,KAAK5G,EAAO,OAAO,EAGjDA,EAAO,KAAOsI,GAAc,KAC1BtI,EACAA,EAAO,gBACX,EAEM,CAAC,OAAQ,MAAO,OAAO,EAAE,QAAQA,EAAO,MAAM,IAAM,IACtDA,EAAO,QAAQ,eAAe,oCAAqC,EAAK,EAG1DiS,GAAS,WAAWjS,EAAO,SAAWuE,GAAS,OAAO,EAEvDvE,CAAM,EAAE,KAAK,SAA6BE,EAAU,CACjE,OAAAqS,GAA6BvS,CAAM,EAGnCE,EAAS,KAAOoI,GAAc,KAC5BtI,EACAA,EAAO,kBACPE,CACN,EAEIA,EAAS,QAAU0G,GAAa,KAAK1G,EAAS,OAAO,EAE9CA,CACX,EAAK,SAA4B4O,EAAQ,CACrC,OAAKtG,GAASsG,CAAM,IAClByD,GAA6BvS,CAAM,EAG/B8O,GAAUA,EAAO,WACnBA,EAAO,SAAS,KAAOxG,GAAc,KACnCtI,EACAA,EAAO,kBACP8O,EAAO,QACjB,EACQA,EAAO,SAAS,QAAUlI,GAAa,KAAKkI,EAAO,SAAS,OAAO,IAIhE,QAAQ,OAAOA,CAAM,CAChC,CAAG,CACH,CChFO,MAAM2D,GAAU,QCKjBC,GAAa,CAAA,EAGnB,CAAC,SAAU,UAAW,SAAU,WAAY,SAAU,QAAQ,EAAE,QAAQ,CAAC/Z,EAAMgC,IAAM,CACnF+X,GAAW/Z,CAAI,EAAI,SAAmBH,EAAO,CAC3C,OAAO,OAAOA,IAAUG,GAAQ,KAAOgC,EAAI,EAAI,KAAO,KAAOhC,CACjE,CACA,CAAC,EAED,MAAMga,GAAqB,CAAA,EAW3BD,GAAW,aAAe,SAAsBE,EAAWC,EAAS/S,EAAS,CAC3E,SAASgT,EAAcC,EAAKC,EAAM,CAChC,MAAO,WAAaP,GAAU,0BAA6BM,EAAM,IAAOC,GAAQlT,EAAU,KAAOA,EAAU,GAC5G,CAGD,MAAO,CAAC5B,EAAO6U,EAAKE,IAAS,CAC3B,GAAIL,IAAc,GAChB,MAAM,IAAI/S,EACRiT,EAAcC,EAAK,qBAAuBF,EAAU,OAASA,EAAU,GAAG,EAC1EhT,EAAW,cACnB,EAGI,OAAIgT,GAAW,CAACF,GAAmBI,CAAG,IACpCJ,GAAmBI,CAAG,EAAI,GAE1B,QAAQ,KACND,EACEC,EACA,+BAAiCF,EAAU,yCAC5C,CACT,GAGWD,EAAYA,EAAU1U,EAAO6U,EAAKE,CAAI,EAAI,EACrD,CACA,EAEAP,GAAW,SAAW,SAAkBQ,EAAiB,CACvD,MAAO,CAAChV,EAAO6U,KAEb,QAAQ,KAAK,GAAGA,CAAG,+BAA+BG,CAAe,EAAE,EAC5D,GAEX,EAYA,SAASC,GAAclS,EAASmS,EAAQC,EAAc,CACpD,GAAI,OAAOpS,GAAY,SACrB,MAAM,IAAIpB,EAAW,4BAA6BA,EAAW,oBAAoB,EAEnF,MAAMjF,EAAO,OAAO,KAAKqG,CAAO,EAChC,IAAItG,EAAIC,EAAK,OACb,KAAOD,KAAM,GAAG,CACd,MAAMoY,EAAMnY,EAAKD,CAAC,EACZiY,EAAYQ,EAAOL,CAAG,EAC5B,GAAIH,EAAW,CACb,MAAM1U,EAAQ+C,EAAQ8R,CAAG,EACnB3Z,EAAS8E,IAAU,QAAa0U,EAAU1U,EAAO6U,EAAK9R,CAAO,EACnE,GAAI7H,IAAW,GACb,MAAM,IAAIyG,EAAW,UAAYkT,EAAM,YAAc3Z,EAAQyG,EAAW,oBAAoB,EAE9F,QACD,CACD,GAAIwT,IAAiB,GACnB,MAAM,IAAIxT,EAAW,kBAAoBkT,EAAKlT,EAAW,cAAc,CAE1E,CACH,CAEA,MAAe+S,GAAA,CACb,cAAAO,GACF,WAAET,EACF,ECvFMA,GAAaE,GAAU,WAS7B,MAAMU,EAAM,CACV,YAAYC,EAAgB,CAC1B,KAAK,SAAWA,GAAkB,GAClC,KAAK,aAAe,CAClB,QAAS,IAAI9Q,GACb,SAAU,IAAIA,EACpB,CACG,CAUD,MAAM,QAAQ+Q,EAAaxT,EAAQ,CACjC,GAAI,CACF,OAAO,MAAM,KAAK,SAASwT,EAAaxT,CAAM,CAC/C,OAAQmO,EAAK,CACZ,GAAIA,aAAe,MAAO,CACxB,IAAIsF,EAAQ,CAAA,EAEZ,MAAM,kBAAoB,MAAM,kBAAkBA,CAAK,EAAKA,EAAQ,IAAI,MAGxE,MAAM7U,EAAQ6U,EAAM,MAAQA,EAAM,MAAM,QAAQ,QAAS,EAAE,EAAI,GAC/D,GAAI,CACGtF,EAAI,MAGEvP,GAAS,CAAC,OAAOuP,EAAI,KAAK,EAAE,SAASvP,EAAM,QAAQ,YAAa,EAAE,CAAC,IAC5EuP,EAAI,OAAS;AAAA,EAAOvP,GAHpBuP,EAAI,MAAQvP,CAKf,MAAW,CAEX,CACF,CAED,MAAMuP,CACP,CACF,CAED,SAASqF,EAAaxT,EAAQ,CAGxB,OAAOwT,GAAgB,UACzBxT,EAASA,GAAU,GACnBA,EAAO,IAAMwT,GAEbxT,EAASwT,GAAe,GAG1BxT,EAASkM,GAAY,KAAK,SAAUlM,CAAM,EAE1C,KAAM,CAAC,aAAA6E,EAAc,iBAAA6O,EAAkB,QAAAlP,CAAO,EAAIxE,EAE9C6E,IAAiB,QACnB+N,GAAU,cAAc/N,EAAc,CACpC,kBAAmB6N,GAAW,aAAaA,GAAW,OAAO,EAC7D,kBAAmBA,GAAW,aAAaA,GAAW,OAAO,EAC7D,oBAAqBA,GAAW,aAAaA,GAAW,OAAO,CAChE,EAAE,EAAK,EAGNgB,GAAoB,OAClBvT,EAAM,WAAWuT,CAAgB,EACnC1T,EAAO,iBAAmB,CACxB,UAAW0T,CACZ,EAEDd,GAAU,cAAcc,EAAkB,CACxC,OAAQhB,GAAW,SACnB,UAAWA,GAAW,QACvB,EAAE,EAAI,GAKP1S,EAAO,oBAAsB,SAEtB,KAAK,SAAS,oBAAsB,OAC7CA,EAAO,kBAAoB,KAAK,SAAS,kBAEzCA,EAAO,kBAAoB,IAG7B4S,GAAU,cAAc5S,EAAQ,CAC9B,QAAS0S,GAAW,SAAS,SAAS,EACtC,cAAeA,GAAW,SAAS,eAAe,CACnD,EAAE,EAAI,EAGP1S,EAAO,QAAUA,EAAO,QAAU,KAAK,SAAS,QAAU,OAAO,cAGjE,IAAI2T,EAAiBnP,GAAWrE,EAAM,MACpCqE,EAAQ,OACRA,EAAQxE,EAAO,MAAM,CAC3B,EAEIwE,GAAWrE,EAAM,QACf,CAAC,SAAU,MAAO,OAAQ,OAAQ,MAAO,QAAS,QAAQ,EACzD+E,GAAW,CACV,OAAOV,EAAQU,CAAM,CACtB,CACP,EAEIlF,EAAO,QAAU4G,GAAa,OAAO+M,EAAgBnP,CAAO,EAG5D,MAAMoP,EAA0B,CAAA,EAChC,IAAIC,EAAiC,GACrC,KAAK,aAAa,QAAQ,QAAQ,SAAoCC,EAAa,CAC7E,OAAOA,EAAY,SAAY,YAAcA,EAAY,QAAQ9T,CAAM,IAAM,KAIjF6T,EAAiCA,GAAkCC,EAAY,YAE/EF,EAAwB,QAAQE,EAAY,UAAWA,EAAY,QAAQ,EACjF,CAAK,EAED,MAAMC,EAA2B,CAAA,EACjC,KAAK,aAAa,SAAS,QAAQ,SAAkCD,EAAa,CAChFC,EAAyB,KAAKD,EAAY,UAAWA,EAAY,QAAQ,CAC/E,CAAK,EAED,IAAIE,EACArZ,EAAI,EACJE,EAEJ,GAAI,CAACgZ,EAAgC,CACnC,MAAMI,EAAQ,CAACzB,GAAgB,KAAK,IAAI,EAAG,MAAS,EAOpD,IANAyB,EAAM,QAAQ,MAAMA,EAAOL,CAAuB,EAClDK,EAAM,KAAK,MAAMA,EAAOF,CAAwB,EAChDlZ,EAAMoZ,EAAM,OAEZD,EAAU,QAAQ,QAAQhU,CAAM,EAEzBrF,EAAIE,GACTmZ,EAAUA,EAAQ,KAAKC,EAAMtZ,GAAG,EAAGsZ,EAAMtZ,GAAG,CAAC,EAG/C,OAAOqZ,CACR,CAEDnZ,EAAM+Y,EAAwB,OAE9B,IAAI/G,EAAY7M,EAIhB,IAFArF,EAAI,EAEGA,EAAIE,GAAK,CACd,MAAMqZ,EAAcN,EAAwBjZ,GAAG,EACzCwZ,EAAaP,EAAwBjZ,GAAG,EAC9C,GAAI,CACFkS,EAAYqH,EAAYrH,CAAS,CAClC,OAAQzM,EAAO,CACd+T,EAAW,KAAK,KAAM/T,CAAK,EAC3B,KACD,CACF,CAED,GAAI,CACF4T,EAAUxB,GAAgB,KAAK,KAAM3F,CAAS,CAC/C,OAAQzM,EAAO,CACd,OAAO,QAAQ,OAAOA,CAAK,CAC5B,CAKD,IAHAzF,EAAI,EACJE,EAAMkZ,EAAyB,OAExBpZ,EAAIE,GACTmZ,EAAUA,EAAQ,KAAKD,EAAyBpZ,GAAG,EAAGoZ,EAAyBpZ,GAAG,CAAC,EAGrF,OAAOqZ,CACR,CAED,OAAOhU,EAAQ,CACbA,EAASkM,GAAY,KAAK,SAAUlM,CAAM,EAC1C,MAAMoU,EAAWvI,GAAc7L,EAAO,QAASA,EAAO,IAAKA,EAAO,iBAAiB,EACnF,OAAOoC,GAASgS,EAAUpU,EAAO,OAAQA,EAAO,gBAAgB,CACjE,CACH,CAGAG,EAAM,QAAQ,CAAC,SAAU,MAAO,OAAQ,SAAS,EAAG,SAA6B+E,EAAQ,CAEvFoO,GAAM,UAAUpO,CAAM,EAAI,SAAS7C,EAAKrC,EAAQ,CAC9C,OAAO,KAAK,QAAQkM,GAAYlM,GAAU,CAAA,EAAI,CAC5C,OAAAkF,EACA,IAAA7C,EACA,MAAOrC,GAAU,CAAA,GAAI,IACtB,CAAA,CAAC,CACN,CACA,CAAC,EAEDG,EAAM,QAAQ,CAAC,OAAQ,MAAO,OAAO,EAAG,SAA+B+E,EAAQ,CAG7E,SAASmP,EAAmBC,EAAQ,CAClC,OAAO,SAAoBjS,EAAK7C,EAAMQ,EAAQ,CAC5C,OAAO,KAAK,QAAQkM,GAAYlM,GAAU,CAAA,EAAI,CAC5C,OAAAkF,EACA,QAASoP,EAAS,CAChB,eAAgB,qBAC1B,EAAY,CAAE,EACN,IAAAjS,EACA,KAAA7C,CACD,CAAA,CAAC,CACR,CACG,CAED8T,GAAM,UAAUpO,CAAM,EAAImP,EAAkB,EAE5Cf,GAAM,UAAUpO,EAAS,MAAM,EAAImP,EAAmB,EAAI,CAC5D,CAAC,EAED,MAAAE,GAAejB,GCtOf,MAAMkB,EAAY,CAChB,YAAYC,EAAU,CACpB,GAAI,OAAOA,GAAa,WACtB,MAAM,IAAI,UAAU,8BAA8B,EAGpD,IAAIC,EAEJ,KAAK,QAAU,IAAI,QAAQ,SAAyB/L,EAAS,CAC3D+L,EAAiB/L,CACvB,CAAK,EAED,MAAMrJ,EAAQ,KAGd,KAAK,QAAQ,KAAK+O,GAAU,CAC1B,GAAI,CAAC/O,EAAM,WAAY,OAEvB,IAAI3E,EAAI2E,EAAM,WAAW,OAEzB,KAAO3E,KAAM,GACX2E,EAAM,WAAW3E,CAAC,EAAE0T,CAAM,EAE5B/O,EAAM,WAAa,IACzB,CAAK,EAGD,KAAK,QAAQ,KAAOqV,GAAe,CACjC,IAAIC,EAEJ,MAAMZ,EAAU,IAAI,QAAQrL,GAAW,CACrCrJ,EAAM,UAAUqJ,CAAO,EACvBiM,EAAWjM,CACnB,CAAO,EAAE,KAAKgM,CAAW,EAEnB,OAAAX,EAAQ,OAAS,UAAkB,CACjC1U,EAAM,YAAYsV,CAAQ,CAClC,EAEaZ,CACb,EAEIS,EAAS,SAAgB3U,EAASE,EAAQC,EAAS,CAC7CX,EAAM,SAKVA,EAAM,OAAS,IAAImJ,GAAc3I,EAASE,EAAQC,CAAO,EACzDyU,EAAepV,EAAM,MAAM,EACjC,CAAK,CACF,CAKD,kBAAmB,CACjB,GAAI,KAAK,OACP,MAAM,KAAK,MAEd,CAMD,UAAU+K,EAAU,CAClB,GAAI,KAAK,OAAQ,CACfA,EAAS,KAAK,MAAM,EACpB,MACD,CAEG,KAAK,WACP,KAAK,WAAW,KAAKA,CAAQ,EAE7B,KAAK,WAAa,CAACA,CAAQ,CAE9B,CAMD,YAAYA,EAAU,CACpB,GAAI,CAAC,KAAK,WACR,OAEF,MAAM3I,EAAQ,KAAK,WAAW,QAAQ2I,CAAQ,EAC1C3I,IAAU,IACZ,KAAK,WAAW,OAAOA,EAAO,CAAC,CAElC,CAED,eAAgB,CACd,MAAMiN,EAAa,IAAI,gBAEjBkG,EAAS1G,GAAQ,CACrBQ,EAAW,MAAMR,CAAG,CAC1B,EAEI,YAAK,UAAU0G,CAAK,EAEpBlG,EAAW,OAAO,YAAc,IAAM,KAAK,YAAYkG,CAAK,EAErDlG,EAAW,MACnB,CAMD,OAAO,QAAS,CACd,IAAIN,EAIJ,MAAO,CACL,MAJY,IAAImG,GAAY,SAAkBnd,EAAG,CACjDgX,EAAShX,CACf,CAAK,EAGC,OAAAgX,CACN,CACG,CACH,CAEA,MAAAyG,GAAeN,GC/GA,SAASO,GAAOC,EAAU,CACvC,OAAO,SAAcpY,EAAK,CACxB,OAAOoY,EAAS,MAAM,KAAMpY,CAAG,CACnC,CACA,CChBe,SAASqY,GAAaC,EAAS,CAC5C,OAAO/U,EAAM,SAAS+U,CAAO,GAAMA,EAAQ,eAAiB,EAC9D,CCbA,MAAMC,GAAiB,CACrB,SAAU,IACV,mBAAoB,IACpB,WAAY,IACZ,WAAY,IACZ,GAAI,IACJ,QAAS,IACT,SAAU,IACV,4BAA6B,IAC7B,UAAW,IACX,aAAc,IACd,eAAgB,IAChB,YAAa,IACb,gBAAiB,IACjB,OAAQ,IACR,gBAAiB,IACjB,iBAAkB,IAClB,MAAO,IACP,SAAU,IACV,YAAa,IACb,SAAU,IACV,OAAQ,IACR,kBAAmB,IACnB,kBAAmB,IACnB,WAAY,IACZ,aAAc,IACd,gBAAiB,IACjB,UAAW,IACX,SAAU,IACV,iBAAkB,IAClB,cAAe,IACf,4BAA6B,IAC7B,eAAgB,IAChB,SAAU,IACV,KAAM,IACN,eAAgB,IAChB,mBAAoB,IACpB,gBAAiB,IACjB,WAAY,IACZ,qBAAsB,IACtB,oBAAqB,IACrB,kBAAmB,IACnB,UAAW,IACX,mBAAoB,IACpB,oBAAqB,IACrB,OAAQ,IACR,iBAAkB,IAClB,SAAU,IACV,gBAAiB,IACjB,qBAAsB,IACtB,gBAAiB,IACjB,4BAA6B,IAC7B,2BAA4B,IAC5B,oBAAqB,IACrB,eAAgB,IAChB,WAAY,IACZ,mBAAoB,IACpB,eAAgB,IAChB,wBAAyB,IACzB,sBAAuB,IACvB,oBAAqB,IACrB,aAAc,IACd,YAAa,IACb,8BAA+B,GACjC,EAEA,OAAO,QAAQA,EAAc,EAAE,QAAQ,CAAC,CAACra,EAAKoD,CAAK,IAAM,CACvDiX,GAAejX,CAAK,EAAIpD,CAC1B,CAAC,EAED,MAAAsa,GAAeD,GC3Cf,SAASE,GAAeC,EAAe,CACrC,MAAMna,EAAU,IAAImY,GAAMgC,CAAa,EACjCC,EAAWxd,GAAKub,GAAM,UAAU,QAASnY,CAAO,EAGtDgF,OAAAA,EAAM,OAAOoV,EAAUjC,GAAM,UAAWnY,EAAS,CAAC,WAAY,EAAI,CAAC,EAGnEgF,EAAM,OAAOoV,EAAUpa,EAAS,KAAM,CAAC,WAAY,EAAI,CAAC,EAGxDoa,EAAS,OAAS,SAAgBhC,EAAgB,CAChD,OAAO8B,GAAenJ,GAAYoJ,EAAe/B,CAAc,CAAC,CACpE,EAESgC,CACT,CAGA,MAAMC,GAAQH,GAAe9Q,EAAQ,EAGrCiR,GAAM,MAAQlC,GAGdkC,GAAM,cAAgB/M,GACtB+M,GAAM,YAAchB,GACpBgB,GAAM,SAAWhN,GACjBgN,GAAM,QAAU/C,GAChB+C,GAAM,WAAazU,GAGnByU,GAAM,WAAa3V,EAGnB2V,GAAM,OAASA,GAAM,cAGrBA,GAAM,IAAM,SAAaC,EAAU,CACjC,OAAO,QAAQ,IAAIA,CAAQ,CAC7B,EAEAD,GAAM,OAAST,GAGfS,GAAM,aAAeP,GAGrBO,GAAM,YAActJ,GAEpBsJ,GAAM,aAAe5O,GAErB4O,GAAM,WAAahd,GAASwL,GAAe7D,EAAM,WAAW3H,CAAK,EAAI,IAAI,SAASA,CAAK,EAAIA,CAAK,EAEhGgd,GAAM,WAAavD,GAAS,WAE5BuD,GAAM,eAAiBL,GAEvBK,GAAM,QAAUA,GAGhB,MAAeE,GAAAF,GCxFf,6BAEA,SAASG,GAAQ5W,EAAQ,CACvB,QAASpE,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CACzC,IAAImE,EAAS,UAAUnE,CAAC,EACxB,QAASG,KAAOgE,EACdC,EAAOjE,CAAG,EAAIgE,EAAOhE,CAAG,CAE3B,CACD,OAAOiE,CACT,CAIA,IAAI6W,GAAmB,CACrB,KAAM,SAAU1X,EAAO,CACrB,OAAIA,EAAM,CAAC,IAAM,MACfA,EAAQA,EAAM,MAAM,EAAG,EAAE,GAEpBA,EAAM,QAAQ,mBAAoB,kBAAkB,CAC5D,EACD,MAAO,SAAUA,EAAO,CACtB,OAAO,mBAAmBA,CAAK,EAAE,QAC/B,2CACA,kBACD,CACF,CACH,EAKA,SAAS2X,GAAMC,EAAWC,EAAmB,CAC3C,SAASC,EAAKjY,EAAMG,EAAO+X,EAAY,CACrC,GAAI,SAAO,SAAa,KAIxB,CAAAA,EAAaN,GAAO,CAAA,EAAII,EAAmBE,CAAU,EAEjD,OAAOA,EAAW,SAAY,WAChCA,EAAW,QAAU,IAAI,KAAK,KAAK,IAAG,EAAKA,EAAW,QAAU,KAAK,GAEnEA,EAAW,UACbA,EAAW,QAAUA,EAAW,QAAQ,YAAW,GAGrDlY,EAAO,mBAAmBA,CAAI,EAC3B,QAAQ,uBAAwB,kBAAkB,EAClD,QAAQ,QAAS,MAAM,EAE1B,IAAImY,EAAwB,GAC5B,QAASC,KAAiBF,EACnBA,EAAWE,CAAa,IAI7BD,GAAyB,KAAOC,EAE5BF,EAAWE,CAAa,IAAM,KAWlCD,GAAyB,IAAMD,EAAWE,CAAa,EAAE,MAAM,GAAG,EAAE,CAAC,IAGvE,OAAQ,SAAS,OACfpY,EAAO,IAAM+X,EAAU,MAAM5X,EAAOH,CAAI,EAAImY,EAC/C,CAED,SAASE,EAAKrY,EAAM,CAClB,GAAI,SAAO,SAAa,KAAgB,UAAU,QAAU,CAACA,GAQ7D,SAFIqN,EAAU,SAAS,OAAS,SAAS,OAAO,MAAM,IAAI,EAAI,GAC1DiL,EAAM,CAAA,EACD,EAAI,EAAG,EAAIjL,EAAQ,OAAQ,IAAK,CACvC,IAAIkL,EAAQlL,EAAQ,CAAC,EAAE,MAAM,GAAG,EAC5BlN,EAAQoY,EAAM,MAAM,CAAC,EAAE,KAAK,GAAG,EAEnC,GAAI,CACF,IAAIC,EAAQ,mBAAmBD,EAAM,CAAC,CAAC,EAGvC,GAFAD,EAAIE,CAAK,EAAIT,EAAU,KAAK5X,EAAOqY,CAAK,EAEpCxY,IAASwY,EACX,KAEV,MAAkB,CAAE,CACf,CAED,OAAOxY,EAAOsY,EAAItY,CAAI,EAAIsY,EAC3B,CAED,OAAO,OAAO,OACZ,CACE,IAAAL,EACA,IAAAI,EACA,OAAQ,SAAUrY,EAAMkY,EAAY,CAClCD,EACEjY,EACA,GACA4X,GAAO,CAAE,EAAEM,EAAY,CACrB,QAAS,EACrB,CAAW,CACX,CACO,EACD,eAAgB,SAAUA,EAAY,CACpC,OAAOJ,GAAK,KAAK,UAAWF,GAAO,CAAA,EAAI,KAAK,WAAYM,CAAU,CAAC,CACpE,EACD,cAAe,SAAUH,EAAW,CAClC,OAAOD,GAAKF,GAAO,GAAI,KAAK,UAAWG,CAAS,EAAG,KAAK,UAAU,CACnE,CACF,EACD,CACE,WAAY,CAAE,MAAO,OAAO,OAAOC,CAAiB,CAAG,EACvD,UAAW,CAAE,MAAO,OAAO,OAAOD,CAAS,CAAG,CAC/C,CACF,CACH,CAEA,IAAIU,GAAMX,GAAKD,GAAkB,CAAE,KAAM,GAAG,CAAE,EC7H9C,MAAMa,GAAgB,IAAM,CAE1B,MAAoB,kBAClB,MAAuB,CAAA,EAAA,kBAIzB,GAA2B,OAAO,SAAS,WAAa,aAAe,OAAO,SAAS,WAAa,YAClG,MAAO,4BAIT,GAAI,OAAO,SAAS,WAAa,aAAe,OAAO,SAAS,WAAa,YAE3E,MAAO,OAIT,MAAMnI,EAAW,OAAO,SAAS,SAC3BoI,EAAW,OAAO,SAAS,SAGjC,MAAO,GAAGpI,CAAQ,KAAKoI,CAAQ,WACjC,EAEMC,GAAeF,GAAa,EAG5BD,EAAMhB,GAAM,OAAO,CACvB,QAASmB,GACT,QAAS,IACT,gBAAiB,GACjB,QAAS,CACP,eAAgB,kBACjB,CACH,CAAC,EAED,IAAIC,GAAe,GACfC,GAAc,CAAA,EAElB,MAAMC,GAAe,CAAC1W,EAAOd,EAAQ,OAAS,CAC5CuX,GAAY,QAAQE,GAAQ,CACtB3W,EACF2W,EAAK,OAAO3W,CAAK,EAEjB2W,EAAK,QAAQzX,CAAK,CAExB,CAAG,EAEDuX,GAAc,CAAA,CAChB,EAGMG,GAAe,IAAM,CACzBC,GAAQ,OAAO,cAAc,EAC7BA,GAAQ,OAAO,eAAe,EAG9B,GAAI,CACF,aAAa,QAAQ,aAAc,KAAK,UAAU,CAChD,KAAM,SACN,UAAW,KAAK,IAAK,CACtB,CAAA,CAAC,EAGF,WAAW,IAAM,CACf,aAAa,WAAW,YAAY,CACrC,EAAE,GAAG,CACP,OAAQ7W,EAAO,CACd,QAAQ,KAAK,6CAA8CA,CAAK,CACjE,CACH,EAoBAoW,EAAI,aAAa,QAAQ,IACtBxW,GAAW,CACV,MAAMV,EAAQ2X,GAAQ,IAAI,cAAc,EAGxC,OAAI3X,IACFU,EAAO,QAAQ,cAAgB,UAAUV,CAAK,IAIzCU,CACR,EACAI,GACQ,QAAQ,OAAOA,CAAK,CAE/B,EAGAoW,EAAI,aAAa,SAAS,IACvBtW,GACQA,EAET,MAAOE,GAAU,mBACf,MAAM8W,EAAkB9W,EAAM,OAG9B,KAAI+W,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,UAAW,KAAO,CAACD,EAAgB,OAAQ,CAE7D,GAAIN,GACF,OAAO,IAAI,QAAQ,CAACjO,EAASC,IAAW,CACtCiO,GAAY,KAAK,CAAE,QAAAlO,EAAS,OAAAC,CAAQ,CAAA,CAC9C,CAAS,EAAE,KAAKtJ,GACFA,GACF4X,EAAgB,QAAQ,cAAgB,UAAU5X,CAAK,GAChDkX,EAAIU,CAAe,GAErB,QAAQ,OAAO9W,CAAK,CAC5B,EAAE,MAAM+N,GACA,QAAQ,OAAOA,CAAG,CAC1B,EAIH+I,EAAgB,OAAS,GACzBN,GAAe,GAEf,GAAI,CACF,MAAMQ,EAAeH,GAAQ,IAAI,eAAe,EAEhD,GAAI,CAACG,EACH,MAAM,IAAI,MAAM,4BAA4B,EAI9C,MAAMlX,EAAW,MAAMsV,GAAM,KAAK,GAAGmB,EAAY,gBAAiB,GAAI,CACpE,QAAS,CACP,cAAe,UAAUS,CAAY,EACtC,EACD,QAAS,GACnB,CAAS,EAED,GAAIlX,EAAS,KAAK,QAAS,CACzB,KAAM,CAAE,aAAAmX,CAAc,EAAGnX,EAAS,KAAK,KAGvC+W,OAAAA,GAAQ,IAAI,eAAgBI,EAAc,CAAE,QAAS,CAAC,CAAE,EAGxDP,GAAa,KAAMO,CAAY,EAG/BH,EAAgB,QAAQ,cAAgB,UAAUG,CAAY,GACvDb,EAAIU,CAAe,CACpC,KACU,OAAM,IAAI,MAAM,gBAAgB,CAEnC,OAAQI,EAAc,CACrB,eAAQ,KAAK,wBAAyBA,EAAa,OAAO,EAG1DR,GAAaQ,EAAc,IAAI,EAC/BN,KAGK,OAAO,SAAS,SAAS,SAAS,QAAQ,GAE7C,WAAW,IAAM,CACf,OAAO,SAAS,KAAO,QACxB,EAAE,GAAG,EAGD,QAAQ,OAAOM,CAAY,CAC1C,QAAgB,CACRV,GAAe,EAChB,CACF,CAGD,KAAIW,EAAAnX,EAAM,WAAN,YAAAmX,EAAgB,UAAW,KAAO,CAACL,EAAgB,OAAQ,CAC7D,MAAMpX,IAAU0X,GAAAC,EAAArX,EAAM,WAAN,YAAAqX,EAAgB,OAAhB,YAAAD,EAAsB,UAAW,2BAG3CE,EAAW,IAAGC,EAAAvX,EAAM,SAAN,YAAAuX,EAAc,GAAG,KAAIC,EAAAxX,EAAM,WAAN,YAAAwX,EAAgB,MAAM,IAAI9X,CAAO,GACpE+X,IAAgBC,EAAA,OAAO,iBAAP,YAAAA,EAAwBJ,KAAa,EACrDlO,EAAM,KAAK,MAEbA,EAAMqO,EAAgB,MACxBE,EAAM,MAAMjY,CAAO,EAEd,OAAO,iBAAgB,OAAO,eAAiB,CAAA,GACpD,OAAO,eAAe4X,CAAQ,EAAIlO,EAErC,CAED,OAAO,QAAQ,OAAOpJ,CAAK,CAC5B,CACH,EAGI,OAAO,OAAW,KACpB,OAAO,iBAAiB,UAAY1I,GAAM,CACxC,GAAIA,EAAE,MAAQ,cAAgBA,EAAE,SAC9B,GAAI,CACY,KAAK,MAAMA,EAAE,QAAQ,EAEzB,OAAS,WAEjBuf,GAAQ,OAAO,cAAc,EAC7BA,GAAQ,OAAO,eAAe,EAGzB,OAAO,SAAS,SAAS,SAAS,QAAQ,IAC7C,OAAO,SAAS,KAAO,UAG5B,OAAQ7W,EAAO,CACd,QAAQ,KAAK,oCAAqCA,CAAK,CACxD,CAEP,CAAG,ECxOI,MAAM4X,GAAc,CACzB,MAAM,MAAMC,EAAOC,EAAU,SAC3B,GAAI,CACF,MAAMhY,EAAW,MAAMsW,EAAI,KAAK,cAAe,CAAE,MAAAyB,EAAO,SAAAC,CAAQ,CAAE,EAC5D,CAAE,aAAAb,EAAc,cAAAc,EAAe,KAAAC,CAAM,EAAGlY,EAAS,KAAK,KAG5D+W,OAAAA,GAAQ,IAAI,eAAgBI,EAAc,CAAE,QAAS,CAAC,CAAE,EACxDJ,GAAQ,IAAI,gBAAiBkB,EAAe,CAAE,QAAS,CAAC,CAAE,EAEnD,CAAE,QAAS,GAAM,KAAAC,EAAM,QAASlY,EAAS,KAAK,QACtD,OAAQE,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,qBAClD,CACK,CACF,EAED,MAAM,SAASc,EAAU,SACvB,GAAI,CACF,MAAMnY,EAAW,MAAMsW,EAAI,KAAK,iBAAkB6B,CAAQ,EAC1D,MAAO,CAAE,QAAS,GAAM,KAAMnY,EAAS,KAAK,KAAK,KAAM,QAASA,EAAS,KAAK,OAAO,CACtF,OAAQE,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,2BAClD,CACK,CACF,EAED,QAAS,CACPN,GAAQ,OAAO,cAAc,EAC7BA,GAAQ,OAAO,eAAe,EAC9B,OAAO,SAAS,KAAO,QACxB,EAED,iBAAkB,CAChB,MAAO,CAAC,CAACA,GAAQ,IAAI,cAAc,CACpC,EAED,MAAM,qBAAqBgB,EAAO,SAChC,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,SADP,MAAMzB,EAAI,KAAK,+BAAgC,CAAE,MAAAyB,CAAK,CAAE,GAC/B,KAAK,QAChD,OAAQ7X,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,kCAClD,CACK,CACF,EAED,MAAM,cAAcjY,EAAO4Y,EAAU,SACnC,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,SADP,MAAM1B,EAAI,KAAK,uBAAwB,CAAE,MAAAlX,EAAO,SAAA4Y,CAAQ,CAAE,GACjC,KAAK,QAChD,OAAQ9X,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,yBAClD,CACK,CACF,CACH,EChEae,GAAc,CACzB,MAAM,YAAa,SACjB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAM9B,EAAI,IAAI,gBAAgB,GACR,KAAK,KAC7C,OAAQpW,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,uBAClD,CACK,CACF,EAED,MAAM,cAAcc,EAAU,SAC5B,GAAI,CACF,MAAMnY,EAAW,MAAMsW,EAAI,IAAI,iBAAkB6B,CAAQ,EACzD,MAAO,CAAE,QAAS,GAAM,KAAMnY,EAAS,KAAK,KAAM,QAASA,EAAS,KAAK,OAAO,CACjF,OAAQE,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,0BAClD,CACK,CACF,EAED,MAAM,eAAegB,EAAc,SACjC,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,SADP,MAAM/B,EAAI,KAAK,yBAA0B+B,CAAY,GAC5B,KAAK,QAChD,OAAQnY,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,uBAClD,CACK,CACF,EAED,MAAM,kBAAmB,SACvB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMf,EAAI,IAAI,kBAAkB,GACV,KAAK,KAC7C,OAAQpW,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,mCAClD,CACK,CACF,EAED,MAAM,qBAAqBiB,EAAQ,SACjC,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMhC,EAAI,IAAI,UAAUgC,CAAM,EAAE,GACV,KAAK,KAC7C,OAAQpY,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,+BAClD,CACK,CACF,CACH,EC1DMkB,GAAcC,EAAc,cAAA,EAErBC,GAAU,IAAM,CACrB,MAAAxd,EAAUyd,aAAWH,EAAW,EACtC,GAAI,CAACtd,EACG,MAAA,IAAI,MAAM,kDAAkD,EAE7D,OAAAA,CACT,EAEa0d,GAAe,CAAC,CAAE,SAAAC,KAAe,CAC5C,KAAM,CAACV,EAAMW,CAAO,EAAIC,WAAS,IAAI,EAC/B,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACG,EAAiBC,CAAkB,EAAIJ,WAAS,EAAK,EACtD,CAACK,EAAeC,CAAgB,EAAIN,WAAS,CAAC,EAG9CO,EAAsB,EAAI,GAAK,IAG/BC,EAAY,MAAOC,EAAQ,KAAU,CACnC,MAAAjQ,EAAM,KAAK,MAGjB,GAAI,CAACiQ,GAAUjQ,EAAM6P,EAAiBE,GAAuBnB,EAC3D,OAKF,GAAI,CAFUnB,GAAQ,IAAI,cAAc,EAE5B,CACV8B,EAAQ,IAAI,EACZK,EAAmB,EAAK,EACxBF,EAAW,EAAK,EAChBI,EAAiB9P,CAAG,EACpB,MACF,CAEI,GAAA,CAEI,MAAApQ,EAAS,MAAMkf,GAAY,aAE7Blf,EAAO,SACD2f,EAAA3f,EAAO,KAAK,IAAI,EACxBggB,EAAmB,EAAI,EACvBE,EAAiB9P,CAAG,IAGpByN,GAAQ,OAAO,cAAc,EAC7BA,GAAQ,OAAO,eAAe,EAC9B8B,EAAQ,IAAI,EACZK,EAAmB,EAAK,EACxBE,EAAiB9P,CAAG,SAEfpJ,EAAO,CACN,QAAA,MAAM,kCAAmCA,CAAK,EAEtD6W,GAAQ,OAAO,cAAc,EAC7BA,GAAQ,OAAO,eAAe,EAC9B8B,EAAQ,IAAI,EACZK,EAAmB,EAAK,EACxBE,EAAiB9P,CAAG,CACtB,CAEA0P,EAAW,EAAK,CAAA,EAGlBQ,EAAAA,UAAU,IAAM,CACJF,IAGJ,MAAAG,EAAuBjiB,GAAM,EAC7BA,EAAE,MAAQ,gBAAkBA,EAAE,MAAQ,kBACxC8hB,EAAU,EAAI,CAChB,EAIII,EAAyB,IAAM,CAC9B,SAAS,QACA,KAAK,MACNP,EAAiBE,GAChBC,GAEd,EAIK,OAAA,iBAAiB,UAAWG,CAAmB,EAC7C,SAAA,iBAAiB,mBAAoBC,CAAsB,EAG9D,MAAAC,EAAoB,YAAY,IAAM,CACtCV,GACQK,GACZ,EACC,GAAK,GAAK,GAAI,EAEjB,MAAO,IAAM,CACJ,OAAA,oBAAoB,UAAWG,CAAmB,EAChD,SAAA,oBAAoB,mBAAoBC,CAAsB,EACvE,cAAcC,CAAiB,CAAA,CACjC,EACC,CAACR,EAAeF,CAAe,CAAC,EAmEnC,MAAMjb,EAAQ,CACZ,KAAAka,EACA,MAnEY,MAAOH,EAAOC,IAAa,CACnC,GAAA,CACF,MAAM9e,EAAS,MAAM4e,GAAY,MAAMC,EAAOC,CAAQ,EAEtD,OAAI9e,EAAO,UACT2f,EAAQ3f,EAAO,IAAI,EACnBggB,EAAmB,EAAI,EACNE,EAAA,KAAK,KAAK,EAGpB,OAAA,cAAc,IAAI,aAAa,UAAW,CAC/C,IAAK,cACL,SAAU,YACV,IAAK,OAAO,SAAS,IACtB,CAAA,CAAC,GAGGlgB,QACAgH,EAAO,CACN,eAAA,MAAM,iBAAkBA,CAAK,EAC9B,CAAE,QAAS,GAAO,QAAS,uBAAwB,CAC5D,CAAA,EA+CA,SA5Ce,MAAOiY,GAAa,CAC/B,GAAA,CAEK,OADQ,MAAML,GAAY,SAASK,CAAQ,QAE3CjY,EAAO,CACN,eAAA,MAAM,oBAAqBA,CAAK,EACjC,CAAE,QAAS,GAAO,QAAS,0BAA2B,CAC/D,CAAA,EAsCA,OAnCa,IAAM,CAEnB2Y,EAAQ,IAAI,EACZK,EAAmB,EAAK,EACxBE,EAAiB,CAAC,EAGlBrC,GAAQ,OAAO,cAAc,EAC7BA,GAAQ,OAAO,eAAe,EAGvB,OAAA,cAAc,IAAI,aAAa,UAAW,CAC/C,IAAK,cACL,SAAU,aACV,IAAK,OAAO,SAAS,IACtB,CAAA,CAAC,EAGF,OAAO,SAAS,KAAO,QAAA,EAkBvB,WAdkB6C,GAAoB,CACtCf,EAAqBgB,IAAA,CACnB,GAAGA,EACH,GAAGD,CACH,EAAA,EAEeR,EAAA,KAAK,KAAK,CAAA,EAS3B,QAAAL,EACA,gBAAAE,EACA,UAAW,IAAMK,EAAU,EAAI,CAAA,EAGjC,OACGQ,EAAAA,IAAAvB,GAAY,SAAZ,CAAqB,MAAAva,EACnB,SAAA4a,CACH,CAAA,CAEJ,EC7LamB,GAAc,CACzB,MAAM,SAAShY,EAAS,GAAI,SAC1B,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMuU,EAAI,IAAI,SAAU,CAAE,OAAAvU,CAAM,CAAE,GACZ,KAAK,KAC7C,OAAQ7B,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,sBAClD,CACK,CACF,EAED,MAAM,QAAQ2C,EAAQ,SACpB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAM1D,EAAI,IAAI,UAAU0D,CAAM,EAAE,GACV,KAAK,KAC7C,OAAQ9Z,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,qBAClD,CACK,CACF,EAED,MAAM,kBAAmB,SACvB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMf,EAAI,IAAI,iBAAiB,GACT,KAAK,KAC7C,OAAQpW,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,kCAClD,CACK,CACF,CACH,ECnCM4C,GAAczB,EAAc,cAAA,EAErB0B,GAAW,IAAM,CACtB,MAAAjf,EAAUyd,aAAWuB,EAAW,EACtC,GAAI,CAAChf,EACG,MAAA,IAAI,MAAM,mDAAmD,EAE9D,OAAAA,CACT,EAEakf,GAAe,CAAC,CAAE,SAAAvB,KAAe,CAC5C,KAAM,CAACwB,EAAOC,CAAQ,EAAIvB,EAAA,SAAS,CAAE,CAAA,EAC/B,CAACwB,EAAeC,CAAgB,EAAIzB,EAAA,SAAS,CAAE,CAAA,EAC/C,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAK,EAEtC0B,EAAa,MAAOzY,EAAS,KAAO,CACxCiX,EAAW,EAAI,EACf,MAAM9f,EAAS,MAAM6gB,GAAY,SAAShY,CAAM,EAChD,OAAI7I,EAAO,SACAmhB,EAAAnhB,EAAO,KAAK,KAAK,EAE5B8f,EAAW,EAAK,EACT9f,CAAA,EAGHuhB,EAAqB,SAAY,CAC/B,MAAAvhB,EAAS,MAAM6gB,GAAY,mBACjC,OAAI7gB,EAAO,SACQqhB,EAAArhB,EAAO,KAAK,cAAc,EAEtCA,CAAA,EAITsgB,EAAAA,UAAU,IAAM,CACHgB,IACQC,GACrB,EAAG,CAAE,CAAA,EAEL,MAAMzc,EAAQ,CACZ,MAAAoc,EACA,cAAAE,EACA,QAAAvB,EACA,WAAAyB,EACA,mBAAAC,CAAA,EAGF,OACGX,EAAAA,IAAAG,GAAY,SAAZ,CAAqB,MAAAjc,EACnB,SAAA4a,CACH,CAAA,CAEJ,ECrDa8B,GAAc,CAEzB,QAAS,SAAY,SACnB,GAAI,CAEF,OADiB,MAAMpE,EAAI,IAAI,OAAO,GACtB,IACjB,OAAQpW,EAAO,CACd,eAAQ,MAAM,2BAA4BA,CAAK,EACxC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,yBAClD,CACK,CACF,EAGD,UAAW,MAAOsD,EAAMC,EAAW,IAAM,SACvC,GAAI,CAKF,OAJiB,MAAMtE,EAAI,KAAK,YAAa,CAC3C,MAAOqE,EACP,SAAAC,CACR,CAAO,GACe,IACjB,OAAQ1a,EAAO,CACd,eAAQ,MAAM,iCAAkCA,CAAK,EAC9C,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,+BAClD,CACK,CACF,EAGD,eAAgB,MAAOsD,EAAMC,IAAa,SACxC,GAAI,CAIF,OAHiB,MAAMtE,EAAI,IAAI,gBAAgBqE,CAAI,GAAI,CACrD,SAAAC,CACR,CAAO,GACe,IACjB,OAAQ1a,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EACvC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,wBAClD,CACK,CACF,EAGD,eAAgB,MAAOsD,GAAS,SAC9B,GAAI,CAEF,OADiB,MAAMrE,EAAI,OAAO,gBAAgBqE,CAAI,EAAE,GACxC,IACjB,OAAQza,EAAO,CACd,eAAQ,MAAM,wBAAyBA,CAAK,EACrC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,sBAClD,CACK,CACF,EAGD,UAAW,SAAY,SACrB,GAAI,CAEF,OADiB,MAAMf,EAAI,OAAO,aAAa,GAC/B,IACjB,OAAQpW,EAAO,CACd,eAAQ,MAAM,2BAA4BA,CAAK,EACxC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,yBAClD,CACK,CACF,EAGD,aAAc,SAAY,SACxB,GAAI,CAEF,OADiB,MAAMf,EAAI,IAAI,gBAAgB,GAC/B,IACjB,OAAQpW,EAAO,CACd,eAAQ,MAAM,4BAA6BA,CAAK,EACzC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,0BAClD,CACK,CACF,EAGD,aAAc,SAAY,SACxB,GAAI,CAEF,OADiB,MAAMf,EAAI,IAAI,aAAa,GAC5B,IACjB,OAAQpW,EAAO,CACd,eAAQ,MAAM,wBAAyBA,CAAK,EACrC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,sBAClD,CACK,CACF,CACH,ECnGMwD,GAAcrC,EAAc,cAAA,EAErBsC,GAAU,IAAM,CACrB,MAAA7f,EAAUyd,aAAWmC,EAAW,EACtC,GAAI,CAAC5f,EACG,MAAA,IAAI,MAAM,kDAAkD,EAE7D,OAAAA,CACT,EAEa8f,GAAe,CAAC,CAAE,SAAAnC,KAAe,CAC5C,KAAM,CAAE,gBAAAK,EAAiB,KAAAf,CAAK,EAAIO,GAAQ,EACpC,CAACuC,EAAMC,CAAO,EAAInC,EAAS,SAAA,CAAE,MAAO,CAAI,EAAA,YAAa,EAAG,YAAa,CAAG,CAAA,EACxE,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAK,EAGtC,CAACoC,EAAWC,CAAY,EAAIrC,EAAAA,SAAS,IAAI,GAAK,EAGpDU,EAAAA,UAAU,IAAM,CACVP,GACF,QAAQ,IAAI,2CAA2C,EAC9CmC,MAET,QAAQ,IAAI,4CAA4C,EAChDH,EAAA,CAAE,MAAO,GAAI,YAAa,EAAG,YAAa,EAAG,EACxCE,EAAA,IAAI,GAAK,EACxB,EACC,CAAClC,CAAe,CAAC,EAEpB,MAAMmC,EAAW,SAAY,OAC3B,GAAI,CAACnC,EAAiB,CACpB,QAAQ,IAAI,oDAAoD,EACxDgC,EAAA,CAAE,MAAO,GAAI,YAAa,EAAG,YAAa,EAAG,EACxCE,EAAA,IAAI,GAAK,EACtB,MACF,CAEAnC,EAAW,EAAI,EAEX,GAAA,CACF,QAAQ,IAAI,+CAA+C,EAErD,MAAA9f,EAAS,MAAMwhB,GAAY,UAIjC,GAFQ,QAAA,IAAI,iCAAkCxhB,CAAM,EAEhDA,EAAO,QAAS,CACZ,MAAAmiB,EAAWniB,EAAO,MAAQ,GAExB,QAAA,IAAI,kCAAmCmiB,CAAQ,EAGvD,IAAIC,EAAQ,CAAA,EAERD,EAAS,MAAQ,MAAM,QAAQA,EAAS,KAAK,KAAK,GACpDC,EAAQD,EAAS,KAAK,MACtB,QAAQ,IAAI,yCAAyC,GAC5CA,EAAS,OAAS,MAAM,QAAQA,EAAS,KAAK,GACvDC,EAAQD,EAAS,MACjB,QAAQ,IAAI,oCAAoC,GACvC,MAAM,QAAQA,CAAQ,GACvBC,EAAAD,EACR,QAAQ,IAAI,yCAAyC,IAErD,QAAQ,IAAI,wDAAwD,EACpEC,EAAQ,CAAA,GAGV,QAAQ,IAAI,kCAAkCA,EAAM,MAAM,EAAE,EAG5D,MAAMC,EAAkBD,EAAM,IAAI,CAACE,EAAMha,IAAU,kEACjD,QAAQ,IAAI,uBAAuBA,EAAQ,CAAC,IAAKga,CAAI,EAErD,MAAMC,EAAiB,CACrB,IAAKD,EAAK,KAAOA,EAAK,IAAM,QAAQha,CAAK,GACzC,MAAOga,EAAK,OAASA,EAAK,KAC1B,SAAU,SAASA,EAAK,QAAQ,GAAK,EACrC,eAAgB,WAAWA,EAAK,gBAAkBA,EAAK,OAAS,CAAC,EACjE,WAAYA,EAAK,YAAkB,IAAA,KAAA,EAAO,YAAY,EACtD,WAAYA,EAAK,YAAkB,IAAA,KAAA,EAAO,YAAY,EACtD,WAAYA,EAAK,WAGjB,YAAa,CACX,QAAOvE,EAAAuE,EAAK,cAAL,YAAAvE,EAAkB,QACrBuE,EAAK,SACLnE,EAAAmE,EAAK,KAAL,YAAAnE,EAAS,QACT,kBAEJ,YAAWE,EAAAiE,EAAK,cAAL,YAAAjE,EAAkB,YACzBiE,EAAK,aACL/D,GAAAH,EAAAkE,EAAK,KAAL,YAAAlE,EAAS,OAAT,YAAAG,EAAe,SACfC,GAAA8D,EAAK,OAAL,YAAA9D,GAAW,OACX,wBAEJ,WAAUE,EAAA4D,EAAK,cAAL,YAAA5D,EAAkB,WACxB4D,EAAK,YACLE,EAAAF,EAAK,KAAL,YAAAE,EAAS,WACT,2BAEJ,YAAWC,GAAAH,EAAK,cAAL,YAAAG,GAAkB,YACzBH,EAAK,aACLI,EAAAJ,EAAK,KAAL,YAAAI,EAAS,YACT,QAEJ,YAAWC,EAAAL,EAAK,cAAL,YAAAK,EAAkB,YACzBL,EAAK,aACLM,EAAAN,EAAK,KAAL,YAAAM,EAAS,cACTC,IAAAC,EAAAR,EAAK,KAAL,YAAAQ,EAAS,OAAT,YAAAD,GAAe,YACf,KAEJ,kBAAiBE,GAAAT,EAAK,cAAL,YAAAS,GAAkB,kBAC/BT,EAAK,mBACLU,IAAAC,GAAAX,EAAK,KAAL,YAAAW,GAAS,OAAT,YAAAD,GAAe,aACfE,GAAAZ,EAAK,SAAL,YAAAY,GAAa,WACb,WAEJ,YAAWC,GAAAb,EAAK,cAAL,YAAAa,GAAkB,YACzBb,EAAK,aACLc,GAAAd,EAAK,KAAL,YAAAc,GAAS,YACTC,IAAAC,GAAAhB,EAAK,KAAL,YAAAgB,GAAS,OAAT,YAAAD,GAAe,KAEnB,cAAaE,GAAAjB,EAAK,cAAL,YAAAiB,GAAkB,cAC3BjB,EAAK,eACLkB,GAAAlB,EAAK,KAAL,YAAAkB,GAAS,cACT,EACN,CAAA,EAGF,eAAQ,IAAI,UAAUlb,EAAQ,CAAC,gBAAiBia,CAAc,EACvDA,CAAA,CACR,EAGKkB,EAAcpB,EAAgB,OAAO,CAACqB,EAAKpB,IAASoB,EAAMpB,EAAK,SAAU,CAAC,EAC1EqB,EAActB,EAAgB,OAAO,CAACqB,EAAKpB,IACxCoB,EAAOpB,EAAK,eAAiBA,EAAK,SACxC,CAAC,EAEEsB,EAAiB,CACrB,MAAOvB,EACP,YAAAoB,EACA,YAAAE,CAAA,EAGM,QAAA,IAAI,iCAAkCC,CAAc,EAC5D7B,EAAQ6B,CAAc,EAGhB,MAAAC,EAAQ,IAAI,IAAIxB,EAAgB,IAAYC,GAAAA,EAAK,KAAK,CAAC,EAC7DL,EAAa4B,CAAK,EAClB,QAAQ,IAAI,mCAAoC,MAAM,KAAKA,CAAK,CAAC,EAG1D,OAAA,cAAc,IAAI,YAAY,eAAgB,CACnD,OAAQD,CACT,CAAA,CAAC,CAAA,MAEM,QAAA,MAAM,+BAAgC5jB,EAAO,OAAO,EACpD+hB,EAAA,CAAE,MAAO,GAAI,YAAa,EAAG,YAAa,EAAG,EACxCE,EAAA,IAAI,GAAK,GAGjBlE,EAAA/d,EAAO,UAAP,MAAA+d,EAAgB,cAAc,SAAS,UACpCY,EAAA,MAAM3e,EAAO,OAAO,QAGvBgH,EAAO,CACN,QAAA,MAAM,gCAAiCA,CAAK,EAC5C+a,EAAA,CAAE,MAAO,GAAI,YAAa,EAAG,YAAa,EAAG,EACxCE,EAAA,IAAI,GAAK,EACtBtD,EAAM,MAAM,2BAA2B,CACzC,CAEAmB,EAAW,EAAK,CAAA,EAGZgE,EAAY,MAAOC,EAAIrC,EAAW,IAAM,CAC5C,GAAI,CAAC3B,EACHpB,OAAAA,EAAM,KAAK,6CAA6C,EACjD,CAAE,QAAS,GAAO,QAAS,kBAAmB,EAGvD,QAAQ,IAAI,6BAA8B,CAAE,GAAIoF,EAAG,IAAK,SAAArC,EAAU,EAE9D,GAAA,CACF,MAAM1hB,EAAS,MAAMwhB,GAAY,UAAUuC,EAAG,IAAKrC,CAAQ,EAEnD,eAAA,IAAI,4BAA6B1hB,CAAM,EAE3CA,EAAO,SAEIiiB,EAAA+B,OAAY,IAAI,CAAC,GAAGA,EAAMD,EAAG,GAAG,CAAC,CAAC,EAG/C,MAAM7B,EAAS,EACTvD,EAAA,QAAQ3e,EAAO,SAAW,6BAA6B,GAEvD2e,EAAA,MAAM3e,EAAO,OAAO,EAGrBA,QACAgH,EAAO,CACN,eAAA,MAAM,oCAAqCA,CAAK,EACxD2X,EAAM,MAAM,+BAA+B,EACpC,CAAE,QAAS,GAAO,QAAS,cAAe,CACnD,CAAA,EAGIsF,EAAiB,MAAOxC,EAAMC,IAAa,CAC/C,QAAQ,IAAI,mCAAoC,CAAE,KAAAD,EAAM,SAAAC,CAAU,CAAA,EAE9D,GAAA,CACF,MAAM1hB,EAAS,MAAMwhB,GAAY,eAAeC,EAAMC,CAAQ,EAE9D,OAAI1hB,EAAO,SAEL0hB,IAAa,GACfO,EAAqB+B,GAAA,CACb,MAAAE,EAAW,IAAI,IAAIF,CAAI,EAC7B,OAAAE,EAAS,OAAOzC,CAAI,EACbyC,CAAA,CACR,EAGH,MAAMhC,EAAS,EACTvD,EAAA,QAAQ3e,EAAO,SAAW,uBAAuB,GAEjD2e,EAAA,MAAM3e,EAAO,OAAO,EAGrBA,QACAgH,EAAO,CACN,eAAA,MAAM,6BAA8BA,CAAK,EACjD2X,EAAM,MAAM,wBAAwB,EAC7B,CAAE,QAAS,GAAO,QAAS,cAAe,CACnD,CAAA,EAGIwF,EAAiB,MAAO1C,GAAS,CAC7B,QAAA,IAAI,2BAA4BA,CAAI,EAExC,GAAA,CACF,MAAMzhB,EAAS,MAAMwhB,GAAY,eAAeC,CAAI,EAEpD,OAAIzhB,EAAO,SAETiiB,EAAqB+B,GAAA,CACb,MAAAE,EAAW,IAAI,IAAIF,CAAI,EAC7B,OAAAE,EAAS,OAAOzC,CAAI,EACbyC,CAAA,CACR,EAED,MAAMhC,EAAS,EACTvD,EAAA,QAAQ3e,EAAO,SAAW,eAAe,GAEzC2e,EAAA,MAAM3e,EAAO,OAAO,EAGrBA,QACAgH,EAAO,CACN,eAAA,MAAM,2BAA4BA,CAAK,EAC/C2X,EAAM,MAAM,sBAAsB,EAC3B,CAAE,QAAS,GAAO,QAAS,cAAe,CACnD,CAAA,EAGIyF,EAAY,SAAY,CAC5B,QAAQ,IAAI,yBAAyB,EAEjC,GAAA,CACI,MAAApkB,EAAS,MAAMwhB,GAAY,YAEjC,OAAIxhB,EAAO,SACD+hB,EAAA,CAAE,MAAO,GAAI,YAAa,EAAG,YAAa,EAAG,EACxCE,EAAA,IAAI,GAAK,EAChBtD,EAAA,QAAQ3e,EAAO,SAAW,gBAAgB,EAGzC,OAAA,cAAc,IAAI,YAAY,eAAgB,CACnD,OAAQ,CAAE,MAAO,GAAI,YAAa,EAAG,YAAa,CAAE,CACrD,CAAA,CAAC,GAEI2e,EAAA,MAAM3e,EAAO,OAAO,EAGrBA,QACAgH,EAAO,CACN,eAAA,MAAM,8BAA+BA,CAAK,EAClD2X,EAAM,MAAM,yBAAyB,EAC9B,CAAE,QAAS,GAAO,QAAS,cAAe,CACnD,CAAA,EAGI0F,EAAe,SAAY,OAC/B,QAAQ,IAAI,0BAA0B,EAElC,GAAA,CACI,MAAArkB,EAAS,MAAMwhB,GAAY,eAEjC,OAAIxhB,EAAO,WACL+d,EAAA/d,EAAO,OAAP,YAAA+d,EAAa,eAAgB,IAC/BY,EAAM,QAAQ,GAAG3e,EAAO,KAAK,aAAa,mDAAmD,EAC7F,MAAMkiB,EAAS,GAIZliB,QACAgH,EAAO,CACN,eAAA,MAAM,+BAAgCA,CAAK,EAC5C,CAAE,QAAS,GAAO,QAAS,0BAA2B,CAC/D,CAAA,EAIIsd,EAAY7C,GAAS,CACzB,GAAI,CAACA,EAAa,MAAA,GAGd,GAAAO,EAAU,IAAIP,CAAI,EACb,MAAA,GAIT,GAAI,CAACK,EAAK,OAAS,CAAC,MAAM,QAAQA,EAAK,KAAK,EAAU,MAAA,GACtD,MAAMyC,EAASzC,EAAK,MAAM,KAAaQ,GAAAA,EAAK,QAAUb,CAAI,EAG1D,OAAI8C,GACWtC,EAAA+B,OAAY,IAAI,CAAC,GAAGA,EAAMvC,CAAI,CAAC,CAAC,EAGxC8C,CAAA,EAGHC,EAAuB/C,GAAS,CACpC,GAAI,CAACK,EAAK,OAAS,CAAC,MAAM,QAAQA,EAAK,KAAK,EAAU,MAAA,GAChD,MAAAQ,EAAOR,EAAK,MAAM,KAAKQ,GAAQA,EAAK,QAAUb,CAAI,EACjD,OAAAa,EAAOA,EAAK,SAAW,CAAA,EAI1BmC,EAAqB,IAAM,CAC3B,GAAA,CAAC3C,EAAK,OAAS,CAAC,MAAM,QAAQA,EAAK,KAAK,EACnC,MAAA,CACL,MAAO,CAAC,EACR,YAAa,EACb,YAAa,EACb,QAAS,CAAC,CAAA,EAKd,MAAM4C,EAAgB5C,EAAK,MAAM,IAAaQ,IAAA,CAC5C,MAAOA,EAAK,MACZ,SAAUA,EAAK,SACf,MAAOA,EAAK,eACZ,MAAOA,EAAK,YAAY,MACxB,UAAWA,EAAK,YAAY,UAC5B,UAAWA,EAAK,YAAY,UAC5B,YAAaA,EAAK,YAAY,gBAC9B,UAAWA,EAAK,YAAY,SAC5B,EAAA,EAGIqC,EAAgB,CAAC,GAAG,IAAI,IAAID,EAAc,IAAYpC,GAAAA,EAAK,SAAS,CAAC,CAAC,EAAE,OAAO,OAAO,EAErF,MAAA,CACL,MAAOoC,EACP,YAAa5C,EAAK,YAClB,YAAaA,EAAK,YAClB,QAAS6C,EACT,aAAcA,EAAc,MAAA,CAC9B,EAIFrE,EAAAA,UAAU,IAAM,GAYb,CAACwB,EAAME,EAAWnC,EAASE,CAAe,CAAC,EAE9C,MAAMjb,EAAQ,CACZ,KAAAgd,EACA,QAAAjC,EACA,SAAAqC,EACA,UAAA4B,EACA,eAAAG,EACA,eAAAE,EACA,UAAAC,EACA,aAAAC,EACA,SAAAC,EACA,oBAAAE,EACA,mBAAAC,CAAA,EAGF,OACK7D,EAAAA,IAAAe,GAAY,SAAZ,CAAqB,MAAA7c,EACnB,SAAA4a,CACH,CAAA,CAEN,EC7WakF,GAAS,KACb,CACL,IAAK,MAAO3b,EAAKrC,EAAS,KAAO,OAC/B,GAAI,CAEF,OADiB,MAAMwW,EAAI,IAAInU,EAAKrC,CAAM,GAC1B,IACjB,OAAQI,EAAO,CACd,cAAQ,MAAM,mBAAkB+W,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAQ/W,EAAM,OAAO,EAC/DA,CACP,CACF,EACD,KAAM,MAAOiC,EAAK7C,EAAO,CAAA,EAAIQ,EAAS,CAAA,IAAO,OAC3C,GAAI,CAEF,OADiB,MAAMwW,EAAI,KAAKnU,EAAK7C,EAAMQ,CAAM,GACjC,IACjB,OAAQI,EAAO,CACd,cAAQ,MAAM,oBAAmB+W,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAQ/W,EAAM,OAAO,EAChEA,CACP,CACF,EACD,IAAK,MAAOiC,EAAK7C,EAAO,CAAA,EAAIQ,EAAS,CAAA,IAAO,OAC1C,GAAI,CAEF,OADiB,MAAMwW,EAAI,IAAInU,EAAK7C,EAAMQ,CAAM,GAChC,IACjB,OAAQI,EAAO,CACd,cAAQ,MAAM,mBAAkB+W,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAQ/W,EAAM,OAAO,EAC/DA,CACP,CACF,EACD,OAAQ,MAAOiC,EAAKrC,EAAS,KAAO,OAClC,GAAI,CAEF,OADiB,MAAMwW,EAAI,OAAOnU,EAAKrC,CAAM,GAC7B,IACjB,OAAQI,EAAO,CACd,cAAQ,MAAM,sBAAqB+W,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAQ/W,EAAM,OAAO,EAClEA,CACP,CACF,CACL,GCzFa6d,GAAc,CAAC/f,EAAOggB,IAAU,CAC3C,KAAM,CAACC,EAAgBC,CAAiB,EAAIpF,EAAQ,SAAC9a,CAAK,EAE1Dwb,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAM2E,EAAU,WAAW,IAAM,CAC/BD,EAAkBlgB,CAAK,CACxB,EAAEggB,CAAK,EAER,MAAO,IAAM,CACX,aAAaG,CAAO,CAC1B,CACA,EAAK,CAACngB,EAAOggB,CAAK,CAAC,EAEVC,CACT,ECMMG,GAAS,IAAM,CACnB,KAAM,CAAE,KAAAlG,EAAM,OAAAmG,EAAQ,gBAAApF,GAAoBR,GAAQ,EAC5C,CAAE,KAAAuC,GAASF,KACX,CAAE,WAAAN,GAAeN,KACjBoE,EAAWC,KAGX,CAACC,EAAYC,CAAa,EAAI3F,WAAS,EAAK,EAC5C,CAAC4F,EAAgBC,CAAiB,EAAI7F,WAAS,EAAK,EACpD,CAAC8F,EAAoBC,CAAqB,EAAI/F,WAAS,EAAK,EAC5D,CAACgG,EAAYC,CAAa,EAAIjG,WAAS,EAAE,EACzC,CAACkG,EAAeC,CAAgB,EAAInG,EAAA,SAAS,CAAE,CAAA,EAC/C,CAACoG,EAAmBC,CAAoB,EAAIrG,WAAS,EAAK,EAC1D,CAACsG,EAAeC,CAAgB,EAAIvG,WAAS,EAAK,EAClD,CAACwG,EAAeC,CAAgB,EAAIzG,EAAA,SAAS,CAAE,CAAA,EAC/C,CAAC0G,EAAaC,CAAc,EAAI3G,WAAS,CAAC,EAG1C4G,EAAYC,SAAO,IAAI,EACvBC,EAAcD,SAAO,IAAI,EACzBE,EAAkBF,SAAO,IAAI,EAC7BG,EAAkB/B,GAAYe,EAAY,GAAG,EAGnDtF,EAAAA,UAAU,IAAM,CACVsG,EAAgB,QAAU,EAC5BC,EAAaD,CAAe,GAE5Bb,EAAiB,CAAE,CAAA,EACnBE,EAAqB,EAAK,EAC5B,EACC,CAACW,CAAe,CAAC,EAGpBtG,EAAAA,UAAU,IAAM,CACd,GAAIP,GAAmBf,EAAM,CACT8H,IAEZ,MAAAC,EAAW,YAAYD,EAAmB,GAAK,EAC9C,MAAA,IAAM,cAAcC,CAAQ,CACrC,CAAA,EACC,CAAChH,EAAiBf,CAAI,CAAC,EAG1BsB,EAAAA,UAAU,IAAM,CACR,MAAA0G,EAAsBC,GAAU,CAChCT,EAAU,SAAW,CAACA,EAAU,QAAQ,SAASS,EAAM,MAAM,GAC/DhB,EAAqB,EAAK,EAExBS,EAAY,SAAW,CAACA,EAAY,QAAQ,SAASO,EAAM,MAAM,GACnExB,EAAkB,EAAK,EAErBkB,EAAgB,SAAW,CAACA,EAAgB,QAAQ,SAASM,EAAM,MAAM,GAC3EtB,EAAsB,EAAK,CAC7B,EAGO,gBAAA,iBAAiB,YAAaqB,CAAkB,EAClD,IAAM,SAAS,oBAAoB,YAAaA,CAAkB,CAC3E,EAAG,CAAE,CAAA,EAGC,MAAAH,EAAe,MAAOK,GAAS,CACnCf,EAAiB,EAAI,EACjB,GAAA,CACI,MAAAnmB,EAAS,MAAMshB,EAAW,CAAE,OAAQ4F,EAAM,MAAO,EAAG,EACtDlnB,EAAO,UACT+lB,EAAiB/lB,EAAO,KAAK,OAAS,CAAE,CAAA,EACxCimB,EAAqB,EAAI,SAEpBjf,EAAO,CACN,QAAA,MAAM,iBAAkBA,CAAK,CAAA,QACrC,CACAmf,EAAiB,EAAK,CACxB,CAAA,EAGIgB,EAAe,IAAM,CAClBhC,IACPM,EAAkB,EAAK,EACvBF,EAAc,EAAK,EACnBH,EAAS,GAAG,CAAA,EAGRgC,EAAsBtG,GAAW,CACrC+E,EAAc,EAAE,EAChBI,EAAqB,EAAK,EAC1BV,EAAc,EAAK,EACVH,EAAA,UAAUtE,CAAM,EAAE,CAAA,EAGvBuG,EAAgB,IAAM,CAC1B9B,EAAc,EAAK,EACnBE,EAAkB,EAAK,EACvBE,EAAsB,EAAK,CAAA,EAIvBmB,EAAoB,SAAY,CAChC,GAAA,CAEF,MAAMQ,EAAoB,CACxB,CACE,GAAI,EACJ,KAAM,QACN,MAAO,uBACP,QAAS,sDACT,UAAW,IAAI,KAAK,KAAK,IAAI,EAAI,GAAS,EAC1C,KAAM,GACN,KAAM,SACR,EACA,CACE,GAAI,EACJ,KAAM,UACN,MAAO,gBACP,QAAS,6CACT,UAAW,IAAI,KAAK,KAAK,IAAI,EAAI,GAAU,EAC3C,KAAM,GACN,KAAM,YACR,EACA,CACE,GAAI,EACJ,KAAM,WACN,MAAO,qBACP,QAAS,wCACT,UAAW,IAAI,KAAK,KAAK,MAAQ,IAAc,EAC/C,KAAM,GACN,KAAM,YACR,CAAA,EAGFjB,EAAiBiB,CAAiB,EAClCf,EAAee,EAAkB,OAAOxpB,GAAK,CAACA,EAAE,IAAI,EAAE,MAAM,QACrDkJ,EAAO,CACN,QAAA,MAAM,iCAAkCA,CAAK,CACvD,CAAA,EAGIugB,EAAcC,GAAmB,CACrCnB,KACErC,EAAK,IAAIlmB,IACPA,GAAE,KAAO0pB,EAAiB,CAAE,GAAG1pB,GAAG,KAAM,EAAA,EAASA,EACnD,CAAA,EAEFyoB,KAAuB,KAAK,IAAI,EAAGvC,EAAO,CAAC,CAAC,CAAA,EAGxCyD,EAAgB,IAAM,CACTpB,EAAArC,GAAQA,EAAK,IAAUlmB,IAAA,CAAE,GAAGA,EAAG,KAAM,EAAK,EAAE,CAAC,EAC9DyoB,EAAe,CAAC,CAAA,EAGZmB,EAA0BhX,GAAc,CAE5C,MAAMiX,OADU,KACGjX,EACbkX,EAAU,KAAK,MAAMD,GAAO,GAAK,EACjCE,EAAQ,KAAK,MAAMD,EAAU,EAAE,EAC/BE,EAAO,KAAK,MAAMD,EAAQ,EAAE,EAElC,OAAIC,EAAO,EAAU,GAAGA,CAAI,IACxBD,EAAQ,EAAU,GAAGA,CAAK,IAC1BD,EAAU,EAAU,GAAGA,CAAO,IAC3B,OAAA,EAIHG,IAAgBjG,GAAA,YAAAA,EAAM,cAAe,EAE3C,aACG,SAAO,CAAA,UAAU,uCAChB,SAACkG,EAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCAEb,SAAA,CAAApH,EAAA,IAACqH,EAAA,CACC,GAAG,IACH,UAAU,yEACV,QAASZ,EACV,SAAA,WAAA,CAED,EAGAzG,EAAAA,IAAC,OAAI,UAAU,sCAAsC,IAAK4F,EACxD,SAAAwB,EAAA,KAAC,MAAI,CAAA,UAAU,kBACb,SAAA,CAACpH,EAAAA,IAAAsH,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FtH,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,kBACZ,MAAOgF,EACP,SAAWtnB,GAAMunB,EAAcvnB,EAAE,OAAO,KAAK,EAC7C,UAAU,wIACV,QAAS,IAAM,CACTwnB,EAAc,OAAS,GACzBG,EAAqB,EAAI,CAE7B,CAAA,CACF,EAGCD,GACEpF,EAAAA,IAAA,MAAA,CAAI,UAAU,2HACZ,SAAAsF,QACE,MAAI,CAAA,UAAU,gCAAgC,SAAA,cAAW,EACxDJ,EAAc,OAAS,EACzBA,EAAc,IAAKqC,GACjBvH,EAAA,IAAC,SAAA,CAEC,UAAU,qHACV,QAAS,IAAMwG,EAAmBe,EAAK,GAAG,EAE1C,SAAAH,EAAA,KAAC,MAAI,CAAA,UAAU,oBACZ,SAAA,CAAAG,EAAK,WACJvH,EAAA,IAAC,MAAA,CACC,IAAKuH,EAAK,UACV,IAAKA,EAAK,KACV,UAAU,qCAAA,CACZ,SAED,MACC,CAAA,SAAA,CAAAvH,EAAA,IAAC,MAAI,CAAA,UAAU,4BAA6B,SAAAuH,EAAK,KAAK,EACrDA,EAAK,aACJvH,EAAA,IAAC,OAAI,UAAU,iCACZ,WAAK,YACR,CAAA,EAEJ,CAAA,EACF,CAAA,EApBKuH,EAAK,GAAA,CAsBb,EAEDvH,EAAAA,IAAC,OAAI,UAAU,gCAAgC,iCAE/C,CAAA,EAEJ,CAAA,CAAA,CAEJ,CACF,CAAA,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,wCAEb,SAAA,CAAApH,EAAA,IAACqH,EAAA,CACC,GAAG,SACH,UAAU,sDACX,SAAA,OAAA,CAED,EAEClI,EAGGiI,EAAA,KAAAI,WAAA,CAAA,SAAA,CAAAJ,EAAA,KAACC,EAAA,CACC,GAAG,aACH,UAAU,oGAEV,SAAA,CAACrH,EAAAA,IAAAyH,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,UAAA,CAAA,CAEnC,EAGAL,EAAA,KAACC,EAAA,CACC,GAAG,QACH,UAAU,mEAEV,SAAA,CAACrH,EAAAA,IAAA0H,GAAA,CAAa,UAAU,SAAU,CAAA,EACjCP,GAAgB,GACdnH,MAAA,OAAA,CAAK,UAAU,+GACb,SAAAmH,GAAgB,EAAI,KAAOA,EAC9B,CAAA,CAAA,CAAA,CAEJ,EAGCC,EAAA,KAAA,MAAA,CAAI,UAAU,WAAW,IAAKrB,EAC7B,SAAA,CAAAqB,EAAA,KAAC,SAAA,CACC,QAAS,IAAMrC,EAAsB,CAACD,CAAkB,EACxD,UAAU,mEAEV,SAAA,CAAC9E,EAAAA,IAAA2H,GAAA,CAAK,UAAU,SAAU,CAAA,EACzBjC,EAAc,GACZ1F,MAAA,OAAA,CAAK,UAAU,wHACb,SAAA0F,EAAc,EAAI,KAAOA,CAC5B,CAAA,CAAA,CAAA,CAEJ,EAGCZ,GACCsC,EAAA,KAAC,MAAI,CAAA,UAAU,qHAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,uEACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,8BAA8B,SAAY,eAAA,EACvD0F,EAAc,GACb1F,EAAA,IAAC,SAAA,CACC,QAAS6G,EACT,UAAU,8DACX,SAAA,yBAAA,CAED,CAAA,EAEJ,EAGA7G,EAAAA,IAAC,MAAI,CAAA,UAAU,2BACZ,SAAAwF,EAAc,OAAS,EACtBA,EAAc,IAAKoC,GACjB5H,EAAA,IAAC,MAAA,CAEC,UAAW,kFACR4H,EAAa,KAAsB,GAAf,YACvB,GACA,QAAS,IAAM,CACRA,EAAa,MAChBjB,EAAWiB,EAAa,EAAE,EAE5BpD,EAASoD,EAAa,IAAI,EAC1B7C,EAAsB,EAAK,CAC7B,EAEA,SAAAqC,EAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAW,oBACd4H,EAAa,OAAS,QAAU,8BAChCA,EAAa,OAAS,UAAY,4BAClC,yBACF,GACG,WAAa,OAAS,QAAU,KAChCA,EAAa,OAAS,UAAY,KAAO,IAC5C,CAAA,EACAR,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAAApH,EAAA,IAAC,IAAE,CAAA,UAAU,6CACV,SAAA4H,EAAa,MAChB,QACC,OAAK,CAAA,UAAU,wBACb,SAAuBd,EAAAc,EAAa,SAAS,EAChD,CAAA,EACF,EACC5H,EAAA,IAAA,IAAA,CAAE,UAAU,0CACV,WAAa,QAChB,EACC,CAAC4H,EAAa,MACZ5H,EAAA,IAAA,MAAA,CAAI,UAAU,wCAAwC,CAAA,EAE3D,CAAA,EACF,CAAA,EArCK4H,EAAa,EAAA,CAuCrB,EAEAR,EAAA,KAAA,MAAA,CAAI,UAAU,gCACb,SAAA,CAACpH,EAAAA,IAAA2H,GAAA,CAAK,UAAU,sCAAuC,CAAA,EACvD3H,EAAAA,IAAC,KAAE,SAAmB,qBAAA,CAAA,CAAA,CAAA,CACxB,CAEJ,CAAA,EAGCwF,EAAc,OAAS,GACrBxF,EAAA,IAAA,MAAA,CAAI,UAAU,2CACb,SAAAA,EAAA,IAACqH,EAAA,CACC,GAAG,iBACH,UAAU,8DACV,QAAS,IAAMtC,EAAsB,EAAK,EAC3C,SAAA,2BAAA,CAAA,EAGH,CAAA,EAEJ,CAAA,EAEJ,EAGCqC,EAAA,KAAA,MAAA,CAAI,UAAU,WAAW,IAAKtB,EAC7B,SAAA,CAAAsB,EAAA,KAAC,SAAA,CACC,QAAS,IAAMvC,EAAkB,CAACD,CAAc,EAChD,UAAU,iFAEV,SAAA,CAAA5E,EAAA,IAAC,MAAI,CAAA,UAAU,oEACZ,SAAA5B,GAAA,MAAAA,EAAM,YACL4B,EAAA,IAAC,MAAA,CACC,IAAK5B,EAAK,YACV,IAAI,UACJ,UAAU,mCAAA,CAAA,EAGZ4B,EAAAA,IAAC6H,EAAK,CAAA,UAAU,wBAAwB,CAE5C,CAAA,EACA7H,EAAAA,IAAC8H,GAAY,CAAA,UAAU,uBAAwB,CAAA,CAAA,CAAA,CACjD,EAGClD,GACCwC,EAAA,KAAC,MAAI,CAAA,UAAU,4FAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,qCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,4BACZ,SAAA,CAAMhJ,GAAA,YAAAA,EAAA,WAAW,IAAEA,GAAA,YAAAA,EAAM,SAAA,EAC5B,EACAgJ,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,IAAEhJ,GAAA,YAAAA,EAAM,QAAA,EAAS,CAAA,EAC1D,EAGAgJ,EAAA,KAACC,EAAA,CACC,GAAG,aACH,UAAU,gFACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAA+H,GAAA,CAAU,UAAU,cAAe,CAAA,EAAE,WAAA,CAAA,CAExC,EAEAX,EAAA,KAACC,EAAA,CACC,GAAG,WACH,UAAU,gFACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAA6H,EAAA,CAAK,UAAU,cAAe,CAAA,EAAE,YAAA,CAAA,CAEnC,EAEAT,EAAA,KAACC,EAAA,CACC,GAAG,UACH,UAAU,gFACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAAgI,GAAA,CAAY,UAAU,cAAe,CAAA,EAAE,cAAA,CAAA,CAE1C,EAEAZ,EAAA,KAACC,EAAA,CACC,GAAG,aACH,UAAU,gFACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAAiI,GAAA,CAAM,UAAU,cAAe,CAAA,EAAE,WAAA,CAAA,CAEpC,EAEAb,EAAA,KAACC,EAAA,CACC,GAAG,WACH,UAAU,gFACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAA2H,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,SAAA,CAAA,CAEnC,GAECvJ,GAAA,YAAAA,EAAM,QAAS,SACdgJ,EAAA,KAACC,EAAA,CACC,GAAG,SACH,UAAU,gFACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAAkI,GAAA,CAAS,UAAU,cAAe,CAAA,EAAE,eAAA,CAAA,CAEvC,EAGFlI,EAAAA,IAAC,MAAI,CAAA,UAAU,qCACb,SAAAoH,EAAA,KAAC,SAAA,CACC,QAASb,EACT,UAAU,oFAEV,SAAA,CAACvG,EAAAA,IAAAmI,GAAA,CAAO,UAAU,cAAe,CAAA,EAAE,MAAA,CAAA,CAAA,EAGvC,CAAA,EACF,CAAA,EAEJ,CAAA,EACF,EAGAf,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAAApH,EAAA,IAACqH,EAAA,CACC,GAAG,SACH,UAAU,sDACX,SAAA,QAAA,CAED,EACArH,EAAA,IAACqH,EAAA,CACC,GAAG,YACH,UAAU,kFACX,SAAA,WAAA,CAED,CAAA,EACF,CAAA,EAEJ,EAGArH,EAAA,IAAC,SAAA,CACC,QAAS,IAAM2E,EAAc,CAACD,CAAU,EACxC,UAAU,oEAET,SAAAA,QAAc0D,GAAE,CAAA,UAAU,UAAU,EAAKpI,EAAA,IAACqI,GAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CACtE,CAAA,EACF,EAGC3D,GACC0C,EAAA,KAAC,MAAI,CAAA,UAAU,0CAEb,SAAA,CAAAA,EAAA,KAAC,MAAI,CAAA,UAAU,OAAO,IAAKxB,EACzB,SAAA,CAACwB,EAAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAsH,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FtH,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,kBACZ,MAAOgF,EACP,SAAWtnB,GAAMunB,EAAcvnB,EAAE,OAAO,KAAK,EAC7C,UAAU,8GAAA,CACZ,CAAA,EACF,EAGC0nB,GAAqBF,EAAc,OAAS,GAC3ClF,EAAAA,IAAC,MAAI,CAAA,UAAU,qFACZ,SAAAkF,EAAc,IAAKqC,GAClBvH,EAAA,IAAC,SAAA,CAEC,UAAU,iFACV,QAAS,IAAMwG,EAAmBe,EAAK,GAAG,EAE1C,SAACvH,EAAAA,IAAA,MAAA,CAAI,UAAU,4BAA6B,WAAK,KAAK,CAAA,EAJjDuH,EAAK,GAMb,CAAA,EACH,CAAA,EAEJ,EAGAH,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAApH,EAAA,IAACqH,EAAA,CACC,GAAG,SACH,UAAU,+EACV,QAASZ,EACV,SAAA,OAAA,CAED,EAECtH,EAEGiI,EAAA,KAAAI,WAAA,CAAA,SAAA,CAAAJ,EAAA,KAACC,EAAA,CACC,GAAG,aACH,UAAU,+EACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAAyH,GAAA,CAAK,UAAU,qBAAsB,CAAA,EAAE,eAAA,CAAA,CAE1C,EAGAL,EAAA,KAACC,EAAA,CACC,GAAG,QACH,UAAU,2FACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAA0H,GAAA,CAAa,UAAU,cAAe,CAAA,EAAE,WAExCP,GAAgB,GACfnH,EAAAA,IAAC,OAAK,CAAA,UAAU,8FACb,SACHmH,GAAA,CAAA,CAAA,CAEJ,EAEAC,EAAA,KAACC,EAAA,CACC,GAAG,aACH,UAAU,+EACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAA+H,GAAA,CAAU,UAAU,qBAAsB,CAAA,EAAE,WAAA,CAAA,CAE/C,EAEAX,EAAA,KAACC,EAAA,CACC,GAAG,UACH,UAAU,+EACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAAgI,GAAA,CAAY,UAAU,qBAAsB,CAAA,EAAE,cAAA,CAAA,CAEjD,EAEAZ,EAAA,KAACC,EAAA,CACC,GAAG,aACH,UAAU,+EACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAAiI,GAAA,CAAM,UAAU,qBAAsB,CAAA,EAAE,WAAA,CAAA,CAE3C,EAEAb,EAAA,KAACC,EAAA,CACC,GAAG,WACH,UAAU,+EACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAA2H,GAAA,CAAK,UAAU,qBAAsB,CAAA,EAAE,SAAA,CAAA,CAE1C,GAECvJ,GAAA,YAAAA,EAAM,QAAS,SACdgJ,EAAA,KAACC,EAAA,CACC,GAAG,SACH,UAAU,+EACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAAkI,GAAA,CAAS,UAAU,qBAAsB,CAAA,EAAE,eAAA,CAAA,CAE9C,EAGFd,EAAA,KAACC,EAAA,CACC,GAAG,WACH,UAAU,+EACV,QAASZ,EAET,SAAA,CAACzG,EAAAA,IAAA6H,EAAA,CAAK,UAAU,qBAAsB,CAAA,EAAE,QAAA,CAAA,CAE1C,EAEAT,EAAA,KAAC,SAAA,CACC,QAASb,EACT,UAAU,6FAEV,SAAA,CAACvG,EAAAA,IAAAmI,GAAA,CAAO,UAAU,qBAAsB,CAAA,EAAE,MAAA,CAAA,CAE5C,CAAA,CAAA,CACF,EAGEf,EAAAA,KAAAI,EAAA,SAAA,CAAA,SAAA,CAAAxH,EAAA,IAACqH,EAAA,CACC,GAAG,SACH,UAAU,+EACV,QAASZ,EACV,SAAA,QAAA,CAED,EACAzG,EAAA,IAACqH,EAAA,CACC,GAAG,YACH,UAAU,wFACV,QAASZ,EACV,SAAA,WAAA,CAED,CAAA,EACF,CAAA,EAEJ,CAAA,EACF,CAAA,CAEJ,CAAA,CACF,CAAA,CAEJ,ECpqBM6B,GAAS,UAEV,SAAO,CAAA,UAAU,yBAChB,SAAClB,EAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,yBAAyB,SAAS,YAAA,EAC/CA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,uEAAA,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,KAAA,CAAG,UAAU,qBAAqB,SAAa,gBAAA,EAChDoH,EAAAA,KAAC,KAAG,CAAA,UAAU,YACZ,SAAA,CAACpH,EAAAA,IAAA,KAAA,CAAG,eAACqH,EAAK,CAAA,GAAG,SAAS,UAAU,iCAAiC,iBAAK,CAAO,CAAA,EAC7ErH,EAAAA,IAAC,MAAG,SAACA,EAAA,IAAAqH,EAAA,CAAK,GAAG,aAAa,UAAU,iCAAiC,SAAA,eAAA,CAAa,CAAO,CAAA,EACzFrH,EAAAA,IAAC,MAAG,SAACA,EAAA,IAAAqH,EAAA,CAAK,GAAG,aAAa,UAAU,iCAAiC,SAAA,WAAA,CAAS,CAAO,CAAA,CAAA,EACvF,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACrH,EAAA,IAAA,KAAA,CAAG,UAAU,qBAAqB,SAAO,UAAA,EAC1CoH,EAAAA,KAAC,KAAG,CAAA,UAAU,YACZ,SAAA,CAACpH,EAAAA,IAAA,KAAA,CAAG,eAAC,IAAE,CAAA,KAAK,IAAI,UAAU,iCAAiC,4BAAgB,CAAI,CAAA,EAC/EA,EAAAA,IAAC,MAAG,SAACA,EAAA,IAAA,IAAA,CAAE,KAAK,IAAI,UAAU,iCAAiC,SAAA,SAAA,CAAO,CAAI,CAAA,EACtEA,EAAAA,IAAC,MAAG,SAACA,EAAA,IAAA,IAAA,CAAE,KAAK,IAAI,UAAU,iCAAiC,SAAA,eAAA,CAAa,CAAI,CAAA,CAAA,EAC9E,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,KAAA,CAAG,UAAU,qBAAqB,SAAa,gBAAA,EAChDoH,EAAAA,KAAC,KAAG,CAAA,UAAU,YACZ,SAAA,CAACpH,EAAAA,IAAA,KAAA,CAAG,eAAC,IAAE,CAAA,KAAK,IAAI,UAAU,iCAAiC,oBAAQ,CAAI,CAAA,EACvEA,EAAAA,IAAC,MAAG,SAACA,EAAA,IAAA,IAAA,CAAE,KAAK,IAAI,UAAU,iCAAiC,SAAA,SAAA,CAAO,CAAI,CAAA,EACtEA,EAAAA,IAAC,MAAG,SAACA,EAAA,IAAA,IAAA,CAAE,KAAK,IAAI,UAAU,iCAAiC,SAAA,WAAA,CAAS,CAAI,CAAA,CAAA,EAC1E,CAAA,EACF,CAAA,EACF,EAEAA,EAAAA,IAAC,OAAI,UAAU,iDACb,eAAC,IAAE,CAAA,UAAU,gBAAgB,SAAA,iDAAA,CAE7B,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EC7CEuI,GAAS,CAAC,CAAE,SAAAzJ,KAEdsI,EAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAAApH,EAAA,IAACsE,GAAO,EAAA,EACPtE,EAAAA,IAAA,OAAA,CAAK,UAAU,SACb,SAAAlB,CACH,CAAA,QACCwJ,GAAO,EAAA,CACV,CAAA,CAAA,ECTSE,GAAY,CACvB,MAAM,OAAOvgB,EAAS,GAAI,SACxB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMuU,EAAI,IAAI,OAAQ,CAAE,OAAAvU,CAAM,CAAE,GACV,KAAK,KAC7C,OAAQ7B,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,yBAClD,CACK,CACF,EAED,MAAM,cAActV,EAAS,GAAI,SAC/B,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMuU,EAAI,IAAI,eAAgB,CAAE,OAAAvU,CAAM,CAAE,GAClB,KAAK,KAC7C,OAAQ7B,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,qCAClD,CACK,CACF,EAED,MAAM,MAAMsD,EAAM,SAChB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMrE,EAAI,IAAI,QAAQqE,CAAI,EAAE,GACN,KAAK,KAC7C,OAAQza,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,wBAClD,CACK,CACF,EAED,MAAM,SAASkL,EAAQ,SACrB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMjM,EAAI,KAAK,OAAQiM,CAAM,GACP,KAAK,KAC7C,OAAQriB,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,uBAClD,CACK,CACF,EAED,MAAM,SAASsD,EAAM4H,EAAQ,SAC3B,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,SADP,MAAMjM,EAAI,IAAI,QAAQqE,CAAI,GAAI4H,CAAM,GACX,KAAK,QAChD,OAAQriB,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,2BAClD,CACK,CACF,EAED,MAAM,SAASsD,EAAM,SACnB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,SADP,MAAMrE,EAAI,OAAO,QAAQqE,CAAI,EAAE,GACN,KAAK,QAChD,OAAQza,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,yBAClD,CACK,CACF,EAED,MAAM,SAAStV,EAAS,GAAI,SAC1B,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMuU,EAAI,IAAI,cAAe,CAAE,OAAAvU,CAAM,CAAE,GACjB,KAAK,KAC7C,OAAQ7B,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,8BAClD,CACK,CACF,EAED,MAAM,WAAWiB,EAAQvW,EAAS,GAAI,SACpC,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMuU,EAAI,IAAI,aAAagC,CAAM,GAAI,CAAE,OAAAvW,CAAM,CAAE,GACzB,KAAK,KAC7C,OAAQ7B,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,oCAClD,CACK,CACF,EAGD,MAAM,OAAOsD,EAAM,SACjB,GAAI,CACF,MAAM3a,EAAW,MAAMsW,EAAI,KAAK,QAAQqE,CAAI,OAAO,EACnD,MAAO,CAAE,QAAS,GAAM,KAAM3a,EAAS,KAAK,KAAM,QAASA,EAAS,KAAK,OAAO,CACjF,OAAQE,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,wBAClD,CACK,CACF,EAED,MAAM,WAAWsD,EAAM,SACrB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMrE,EAAI,IAAI,QAAQqE,CAAI,QAAQ,GACZ,KAAK,KAC7C,OAAQza,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,yBAClD,CACK,CACF,EAGD,MAAM,aAAasD,EAAM,SACvB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMrE,EAAI,IAAI,QAAQqE,CAAI,OAAO,GACX,KAAK,KAC7C,OAAQza,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,oCAClD,CACK,CACF,CACH,ECvIMmL,EAAiB,CAAC,CAAE,KAAAC,EAAO,QAAW,CAC1C,MAAMC,EAAc,CAClB,GAAI,UACJ,GAAI,UACJ,GAAI,WAAA,EAGN,OACG5I,EAAAA,IAAA,MAAA,CAAI,UAAU,mCACb,SAACA,EAAAA,IAAA,MAAA,CAAI,UAAW,wDAAwD4I,EAAYD,CAAI,CAAC,EAAA,CAAI,CAC/F,CAAA,CAEJ,ECPME,GAAO,IAAM,CACjB,KAAM,CAAE,cAAArI,EAAe,QAASsI,GAAiB1I,GAAS,EACpD,CAAC2I,EAAYC,CAAa,EAAIhK,EAAA,SAAS,CAAE,CAAA,EACzC,CAACiK,EAAYC,CAAa,EAAIlK,WAAS,EAAK,EAElDU,OAAAA,EAAAA,UAAU,IAAM,EACU,SAAY,CAClCwJ,EAAc,EAAI,EAClB,MAAM9pB,EAAS,MAAMopB,GAAU,cAAc,CAAE,MAAO,EAAG,EACrDppB,EAAO,SACK4pB,EAAA5pB,EAAO,KAAK,WAAW,EAEvC8pB,EAAc,EAAK,CAAA,IAIvB,EAAG,CAAE,CAAA,EAGH9B,EAAA,KAAC,MAAI,CAAA,UAAU,eAEb,SAAA,CAAApH,EAAAA,IAAC,WAAQ,UAAU,gEACjB,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,qCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,0BAA0B,SAExC,yBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,iCAAiC,SAG9C,qJAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAApH,EAAA,IAACqH,EAAA,CACC,GAAG,SACH,UAAU,6GACX,SAAA,gBAAA,CAED,EACArH,EAAA,IAACqH,EAAA,CACC,GAAG,YACH,UAAU,wIACX,SAAA,eAAA,CAED,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,QAGC,UAAQ,CAAA,UAAU,mBACjB,SAACD,EAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,wCACZ,SAAA,CAACpH,EAAAA,IAAAmJ,GAAA,CAAK,UAAU,qCAAsC,CAAA,EAAE,mBAAA,EAE1D,EACCnJ,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAA2C,8CAAA,CAAA,EAC1E,EAEC8I,EACC9I,EAAA,IAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,EAEzB1I,EAAA,IAAA,MAAA,CAAI,UAAU,uDACZ,SAAcQ,EAAA,IAAK+G,GAClBH,EAAA,KAACC,EAAA,CAEC,GAAI,UAAUE,EAAK,GAAG,GACtB,UAAU,kFAEV,SAAA,CAAAvH,EAAA,IAAC,MAAI,CAAA,UAAU,oDACZ,SAAAuH,EAAK,UACJvH,EAAA,IAAC,MAAA,CACC,IAAKuH,EAAK,UACV,IAAKA,EAAK,KACV,UAAU,4BAAA,CAAA,EAGVvH,EAAAA,IAACoJ,GAAQ,CAAA,UAAU,0BAA0B,CAEnD,CAAA,EACAhC,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,6BAA8B,SAAAuH,EAAK,KAAK,EACrDvH,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAyB,WAAK,YAAY,CAAA,EACzD,CAAA,CAAA,EAlBKuH,EAAK,GAoBb,CAAA,EACH,CAAA,CAAA,CAEJ,CACF,CAAA,QAGC,UAAQ,CAAA,UAAU,QACjB,SAACH,EAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,wCACZ,SAAA,CAACpH,EAAAA,IAAAqJ,GAAA,CAAW,UAAU,oCAAqC,CAAA,EAAE,sBAAA,EAE/D,EACCrJ,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAA6B,gCAAA,CAAA,EAC5D,EAECiJ,EACCjJ,EAAA,IAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,EAEzB1I,EAAA,IAAA,MAAA,CAAI,UAAU,uDACZ,SAAW+I,EAAA,IAAK5F,GACfiE,EAAA,KAACC,EAAA,CAEC,GAAI,QAAQlE,EAAG,GAAG,GAClB,UAAU,6GAEV,SAAA,CAACnD,EAAA,IAAA,MAAA,CAAI,UAAU,gEAAgE,SAE/E,aAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,6BAA8B,SAAAmD,EAAG,MAAM,EACpDnD,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA8B,WAAG,YAAY,EAC1DoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,OAAA,CAAK,UAAU,oCAAoC,SAAA,CAAA,MAC9CjE,EAAG,KAAA,EACT,EACCnD,EAAA,IAAA,OAAA,CAAK,UAAU,sDACb,WAAG,QACN,CAAA,EACF,CAAA,EACF,CAAA,CAAA,EAlBKmD,EAAG,GAoBX,CAAA,EACH,CAAA,CAAA,CAEJ,CACF,CAAA,QAGC,UAAQ,CAAA,UAAU,+BACjB,SAACiE,EAAA,KAAA,MAAA,CAAI,UAAU,qCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,0BAA0B,SAExC,uBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,eAAe,SAE5B,8DAAA,EACAA,EAAA,IAACqH,EAAA,CACC,GAAG,YACH,UAAU,6GACX,SAAA,oBAAA,CAED,CAAA,CAAA,CACF,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,EC/JA,SAASiC,GAAE5rB,EAAE,CAAC,IAAI,EAAEb,EAAEK,EAAE,GAAG,GAAa,OAAOQ,GAAjB,UAA8B,OAAOA,GAAjB,SAAmBR,GAAGQ,UAAoB,OAAOA,GAAjB,SAAmB,GAAG,MAAM,QAAQA,CAAC,EAAE,CAAC,IAAI6rB,EAAE7rB,EAAE,OAAO,IAAI,EAAE,EAAE,EAAE6rB,EAAE,IAAI7rB,EAAE,CAAC,IAAIb,EAAEysB,GAAE5rB,EAAE,CAAC,CAAC,KAAKR,IAAIA,GAAG,KAAKA,GAAGL,EAAE,KAAM,KAAIA,KAAKa,EAAEA,EAAEb,CAAC,IAAIK,IAAIA,GAAG,KAAKA,GAAGL,GAAG,OAAOK,CAAC,CAAQ,SAASssB,IAAM,CAAC,QAAQ9rB,EAAE,EAAEb,EAAE,EAAEK,EAAE,GAAGqsB,EAAE,UAAU,OAAO1sB,EAAE0sB,EAAE1sB,KAAKa,EAAE,UAAUb,CAAC,KAAK,EAAEysB,GAAE5rB,CAAC,KAAKR,IAAIA,GAAG,KAAKA,GAAG,GAAG,OAAOA,CAAC,CCG/W,MAAMusB,EAAS,CAAC,CACd,SAAA3K,EACA,QAAA4K,EAAU,UACV,KAAAf,EAAO,KACP,QAAA1J,EAAU,GACV,SAAA0K,EAAW,GACX,UAAAC,EAAY,GACZ,GAAG9nB,CACL,IAAM,CACJ,MAAM+nB,EAAc,uIAEdC,EAAW,CACf,QAAS,+DACT,UAAW,+DACX,QAAS,4EACT,OAAQ,2DAAA,EAGJC,EAAQ,CACZ,GAAI,sBACJ,GAAI,YACJ,GAAI,mBAAA,EAIJ,OAAA/J,EAAA,IAAC,SAAA,CACC,UAAWwJ,GACTK,EACAC,EAASJ,CAAO,EAChBK,EAAMpB,CAAI,EACV,CACE,gCAAiCgB,GAAY1K,CAC/C,EACA2K,CACF,EACA,SAAUD,GAAY1K,EACrB,GAAGnd,EAEH,SACCmd,EAAAmI,OAAC,MAAI,CAAA,UAAU,2BACb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,gEAAiE,CAAA,EAAM,eAAA,CAAA,CAExF,EAEAlB,CAAA,CAAA,CAIR,EC5CMkL,GAAQ,IAAM,CAClB,KAAM,CAAE,MAAA1J,EAAO,QAAArB,EAAS,WAAAyB,GAAeN,GAAS,EAC1C,CAAC4E,EAAYC,CAAa,EAAIjG,WAAS,EAAE,EACzC,CAACiL,EAAeC,CAAgB,EAAIlL,EAAA,SAAS,CAAE,CAAA,EAC/C,CAACmL,EAAaC,CAAc,EAAIpL,WAAS,EAAK,EAEpDU,EAAAA,UAAU,IAAM,CACVY,EAAM,SAAW,GACRI,GACb,EACC,CAACJ,EAAOI,CAAU,CAAC,EAEtBhB,EAAAA,UAAU,IAAM,CACd,MAAM2K,EAAW/J,EAAM,OAAOiH,GAC5BA,EAAK,KAAK,cAAc,SAASvC,EAAW,aAAa,CAAA,EAE3DkF,EAAiBG,CAAQ,CAAA,EACxB,CAAC/J,EAAO0E,CAAU,CAAC,EAEhB,MAAAiB,EAAgBvoB,GAAM,CAC1BA,EAAE,eAAe,EACNgjB,EAAA,CAAE,OAAQsE,CAAA,CAAY,CAAA,EAGnC,aACG,MAAI,CAAA,UAAU,+BACb,SAACoC,EAAA,KAAA,MAAA,CAAI,UAAU,yBAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,oBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,iFAAA,CAAA,EACF,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,yCACb,SAAA,CAAAA,EAAA,KAAC,OAAK,CAAA,SAAUnB,EAAc,UAAU,kCACtC,SAAA,CAACmB,EAAAA,KAAA,MAAA,CAAI,UAAU,kBACb,SAAA,CAACpH,EAAAA,IAAAsH,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FtH,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,kBACZ,MAAOgF,EACP,SAAWtnB,GAAMunB,EAAcvnB,EAAE,OAAO,KAAK,EAC7C,UAAU,8GAAA,CACZ,CAAA,EACF,EACCsiB,EAAA,IAAAyJ,EAAA,CAAO,KAAK,SAAS,SAEtB,SAAA,EACArC,EAAA,KAACqC,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAAS,IAAMW,EAAe,CAACD,CAAW,EAE1C,SAAA,CAACnK,EAAAA,IAAAsK,GAAA,CAAO,UAAU,cAAe,CAAA,EAAE,SAAA,CAAA,CAErC,CAAA,EACF,EAGCH,SACE,MAAI,CAAA,UAAU,qCACb,SAAC/C,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,SAAA,EACAoH,EAAAA,KAAC,SAAO,CAAA,UAAU,yGAChB,SAAA,CAACpH,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAgB,mBAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAI,OAAA,EAC1BA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAQ,WAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAG,MAAA,EACtBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAQ,WAAA,EAC9BA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAO,UAAA,CAAA,EAChC,CAAA,EACF,SACC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,aAAA,EACAoH,EAAAA,KAAC,SAAO,CAAA,UAAU,yGAChB,SAAA,CAACpH,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAoB,uBAAA,EACpCA,EAAA,IAAA,SAAA,CAAO,MAAM,KAAK,SAAE,KAAA,EACpBA,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAa,gBAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAa,gBAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAI,OAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAe,kBAAA,CAAA,EACxC,CAAA,EACF,SACC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,cAAA,EACAoH,EAAAA,KAAC,SAAO,CAAA,UAAU,yGAChB,SAAA,CAACpH,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAI,OAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,aAAa,SAAY,eAAA,EACtCA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAa,gBAAA,CAAA,EACtC,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EAEJ,EAGCf,EACEe,EAAAA,IAAA,MAAA,CAAI,UAAU,yCACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,EAC5B,EACEuB,EAAc,SAAW,EAC1B7C,OAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAoJ,GAAA,CAAQ,UAAU,sCAAuC,CAAA,EACzDpJ,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,yBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,6CAAA,CACF,CAAA,CAAA,QAEC,MAAI,CAAA,UAAU,sEACZ,SAAciK,EAAA,IAAK1C,GAClBH,EAAA,KAACC,EAAA,CAEC,GAAI,UAAUE,EAAK,GAAG,GACtB,UAAU,kFAEV,SAAA,CAAAvH,EAAA,IAAC,MAAI,CAAA,UAAU,oDACZ,SAAAuH,EAAK,UACJvH,EAAA,IAAC,MAAA,CACC,IAAKuH,EAAK,UACV,IAAKA,EAAK,KACV,UAAU,4BAAA,CAAA,EAGZvH,EAAAA,IAACoJ,GAAQ,CAAA,UAAU,0BAA0B,CAEjD,CAAA,EACAhC,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,2CACX,SAAAuH,EAAK,KACR,EACCA,EAAK,aACJvH,EAAA,IAAC,KAAE,UAAU,0CACV,WAAK,YACR,EAEFoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,oCAAoC,SAEpD,eAAA,EACCuH,EAAK,aACJvH,EAAAA,IAAC,OAAK,CAAA,UAAU,+DAA+D,SAE/E,aAAA,CAAA,EAEJ,CAAA,EACF,CAAA,CAAA,EAlCKuH,EAAK,GAoCb,CAAA,EACH,EAID0C,EAAc,OAAS,GACrBjK,EAAAA,IAAA,MAAA,CAAI,UAAU,2BACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAApH,MAACyJ,EAAO,CAAA,QAAQ,UAAU,SAAQ,GAAC,SAEnC,WAAA,EACAzJ,EAAAA,IAACyJ,GAAO,SAAC,GAAA,CAAA,EACRzJ,EAAA,IAAAyJ,EAAA,CAAO,QAAQ,UAAU,SAAC,IAAA,EAC1BzJ,EAAA,IAAAyJ,EAAA,CAAO,QAAQ,UAAU,SAAC,IAAA,EAC1BzJ,EAAA,IAAAyJ,EAAA,CAAO,QAAQ,UAAU,SAE1B,UAAA,CAAA,CAAA,CACF,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAEJ,EC/Lac,GAAmB,CAC9B,MAAM,aAAatiB,EAAS,GAAI,SAC9B,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMuU,EAAI,IAAI,aAAc,CAAE,OAAAvU,CAAM,CAAE,GAChB,KAAK,KAC7C,OAAQ7B,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,0BAClD,CACK,CACF,EAED,MAAM,eAAesD,EAAM,SACzB,GAAI,CACF,MAAM3a,EAAW,MAAMsW,EAAI,KAAK,cAAcqE,CAAI,EAAE,EACpD,MAAO,CAAE,QAAS,GAAM,KAAM3a,EAAS,KAAK,KAAM,QAASA,EAAS,KAAK,OAAO,CACjF,OAAQE,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,iCAClD,CACK,CACF,EAED,MAAM,oBAAoBsD,EAAM,SAC9B,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,SADP,MAAMrE,EAAI,OAAO,cAAcqE,CAAI,EAAE,GACZ,KAAK,QAChD,OAAQza,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,+BAClD,CACK,CACF,EAED,MAAM,eAAesD,EAAM,SACzB,GAAI,CACF,MAAM3a,EAAW,MAAMsW,EAAI,KAAK,cAAcqE,CAAI,SAAS,EAC3D,MAAO,CACL,QAAS,GACT,KAAM3a,EAAS,KAAK,KACpB,QAASA,EAAS,KAAK,OAC/B,CACK,OAAQE,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,0BAClD,CACK,CACF,EAGD,MAAM,gBAAgBsD,EAAM,WAC1B,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMrE,EAAI,IAAI,cAAcqE,CAAI,QAAQ,GAClB,KAAK,KAC7C,OAAQza,EAAO,CAEd,QAAI+W,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,UAAW,IACtB,CAAE,QAAS,GAAM,KAAM,CAAE,aAAc,EAAK,GAG9C,CACL,QAAS,GACT,UAASM,GAAAF,EAAAnX,EAAM,WAAN,YAAAmX,EAAgB,OAAhB,YAAAE,EAAsB,UAAW,4BAClD,CACK,CACF,CACH,ECtEa+M,GAAe,CAC1B,MAAM,YAAYC,EAAW,SAC3B,GAAI,CACF,MAAMvkB,EAAW,MAAMsW,EAAI,KAAK,UAAWiO,CAAS,EACpD,MAAO,CAAE,QAAS,GAAM,KAAMvkB,EAAS,KAAK,KAAM,QAASA,EAAS,KAAK,OAAO,CACjF,OAAQE,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,sBAClD,CACK,CACF,EAGD,MAAM,gBAAgBmN,EAAc,SAClC,GAAI,CACF,MAAMxkB,EAAW,MAAMsW,EAAI,KAAK,mBAAoBkO,CAAY,EAChE,MAAO,CAAE,QAAS,GAAM,KAAMxkB,EAAS,KAAK,KAAM,QAASA,EAAS,KAAK,OAAO,CACjF,OAAQE,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,kBAClD,CACK,CACF,EAGD,MAAM,SAASmN,EAAc,CAC3B,OAAO,KAAK,gBAAgBA,CAAY,CACzC,EAED,MAAM,UAAUziB,EAAS,GAAI,SAC3B,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMuU,EAAI,IAAI,UAAW,CAAE,OAAAvU,CAAM,CAAE,GACb,KAAK,KAC7C,OAAQ7B,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,wBAClD,CACK,CACF,EAED,MAAM,SAASoN,EAAS,SACtB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMnO,EAAI,IAAI,WAAWmO,CAAO,EAAE,GACZ,KAAK,KAC7C,OAAQvkB,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,uBAClD,CACK,CACF,EAED,MAAM,kBAAkBoN,EAAS1f,EAAQ2f,EAAO,KAAM,SACpD,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,SADP,MAAMpO,EAAI,IAAI,WAAWmO,CAAO,UAAW,CAAE,OAAA1f,EAAQ,KAAA2f,CAAM,CAAA,GAClC,KAAK,QAChD,OAAQxkB,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,0BAClD,CACK,CACF,EAED,MAAM,eAAgB,SACpB,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMf,EAAI,IAAI,eAAe,GACP,KAAK,KAC7C,OAAQpW,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,6BAClD,CACK,CACF,EAED,MAAM,SAAStV,EAAS,GAAI,SAC1B,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMuU,EAAI,IAAI,gBAAiB,CAAE,OAAAvU,CAAM,CAAE,GACnB,KAAK,KAC7C,OAAQ7B,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,uBAClD,CACK,CACF,EAED,MAAM,aAAatV,EAAS,GAAI,SAC9B,GAAI,CAEF,MAAO,CAAE,QAAS,GAAM,MADP,MAAMuU,EAAI,IAAI,oBAAqB,CAAE,OAAAvU,CAAM,CAAE,GACvB,KAAK,KAC7C,OAAQ7B,EAAO,CACd,MAAO,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,wBAClD,CACK,CACF,CACH,ECtGasN,GAAiB,CAE5B,MAAM,aAAarlB,EAAM,SACvB,GAAI,CACF,MAAMU,EAAW,MAAMsW,EAAI,KAAK,mBAAoBhX,CAAI,EAExD,MAAO,CACL,QAAS,GACT,KAAMU,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,2BAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,2BAA4BA,CAAK,EAExC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,sBACnE,CACK,CACF,EAED,MAAM,eAAe6B,EAAS,GAAI,SAChC,GAAI,CACF,MAAM/B,EAAW,MAAMsW,EAAI,IAAI,mBAAoB,CAAE,OAAAvU,CAAM,CAAE,EAE7D,MAAO,CACL,QAAS,GACT,KAAM/B,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,gCAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,4BAA6BA,CAAK,EAEzC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,2BAC3D,KAAM,CAAE,QAAS,EAAI,CAC7B,CACK,CACF,EAED,MAAM,oBAAoB0kB,EAAgB,SACxC,GAAI,CAGF,MAAO,CACL,QAAS,GACT,MAJe,MAAMtO,EAAI,IAAI,6BAA6BsO,CAAc,EAAE,GAI3D,KACf,QAAS,mBACjB,CACK,OAAQ1kB,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EAEvC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,uBACnE,CACK,CACF,EAED,MAAM,cAAc2kB,EAAU,SAC5B,GAAI,CACF,MAAM7kB,EAAW,MAAMsW,EAAI,IAAI,oBAAoBuO,CAAQ,EAAE,EAE7D,MAAO,CACL,QAAS,GACT,KAAM7kB,EAAS,KAAK,MAAQA,EAAS,KACrC,QAAS,mBACjB,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,2BAA4BA,CAAK,EAExC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,uBACnE,CACK,CACF,EAED,MAAM,eAAe2kB,EAAUjlB,EAAS,SACtC,GAAI,CACF,MAAMI,EAAW,MAAMsW,EAAI,KAAK,oBAAoBuO,CAAQ,SAAU,CAAE,QAAAjlB,CAAO,CAAE,EAEjF,MAAO,CACL,QAAS,GACT,KAAMI,EAAS,KAAK,MAAQA,EAAS,KACrC,QAAS,iCACjB,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,wBAAyBA,CAAK,EAErC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,4BACnE,CACK,CACF,EAED,MAAM,mBAAmB2kB,EAAU9f,EAAQ,SACzC,GAAI,CAGF,MAAO,CACL,QAAS,GACT,MAJe,MAAMuR,EAAI,MAAM,oBAAoBuO,CAAQ,UAAW,CAAE,OAAA9f,CAAM,CAAE,GAIjE,KACf,QAAS,+BACjB,CACK,OAAQ7E,EAAO,CACd,eAAQ,MAAM,kCAAmCA,CAAK,EAE/C,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,0BACnE,CACK,CACF,EAGD,MAAM,cAAc6B,EAAS,GAAI,SAC/B,GAAI,CACF,MAAM/B,EAAW,MAAMsW,EAAI,IAAI,yBAA0B,CAAE,OAAAvU,CAAM,CAAE,EAEnE,MAAO,CACL,QAAS,GACT,KAAM/B,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,gCAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,kCAAmCA,CAAK,EAE/C,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,2BAC3D,KAAM,CAAE,QAAS,EAAI,CAC7B,CACK,CACF,EAED,MAAM,aAAa2kB,EAAUvlB,EAAM,SACjC,GAAI,CACF,MAAMU,EAAW,MAAMsW,EAAI,IAAI,0BAA0BuO,CAAQ,GAAIvlB,CAAI,EAEzE,MAAO,CACL,QAAS,GACT,KAAMU,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,+BAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,iCAAkCA,CAAK,EAE9C,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,0BACnE,CACK,CACF,EAGD,WAAaZ,GAASgX,EAAI,KAAK,uBAAwBhX,CAAI,EAC3D,WAAY,CAAC0a,EAAQ1a,IAASgX,EAAI,IAAI,wBAAwB0D,CAAM,GAAI1a,CAAI,EAC5E,WAAa0a,GAAW1D,EAAI,OAAO,wBAAwB0D,CAAM,EAAE,EAGnE,cAAe,IAAM1D,EAAI,IAAI,2BAA2B,EACxD,eAAiBhX,GAASgX,EAAI,KAAK,4BAA6BhX,CAAI,EACpE,eAAgB,CAACwlB,EAAYxlB,IAASgX,EAAI,IAAI,6BAA6BwO,CAAU,GAAIxlB,CAAI,EAC7F,eAAiBwlB,GAAexO,EAAI,OAAO,6BAA6BwO,CAAU,EAAE,EAGpF,aAAc,CAACL,EAASnlB,IAASgX,EAAI,KAAK,oBAAoBmO,CAAO,GAAInlB,CAAI,EAG7E,MAAM,eAAgB,SACpB,GAAI,CACF,MAAMU,EAAW,MAAMsW,EAAI,IAAI,sBAAsB,EAErD,MAAO,CACL,QAAS,GACT,KAAMtW,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,qCAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,gCAAiCA,CAAK,EAE7C,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,gCAC3D,KAAM,CAAE,CAChB,CACK,CACF,EAGD,mBAAmBZ,EAAM,SACvB,MAAMylB,EAAS,CAAA,EAEf,OAAI,CAACzlB,EAAK,SAAWA,EAAK,QAAQ,KAAM,EAAC,OAAS,IAChDylB,EAAO,KAAK,0CAA0C,GAGpD,CAACzlB,EAAK,SAAWA,EAAK,QAAQ,KAAM,EAAC,OAAS,KAChDylB,EAAO,KAAK,4CAA4C,EAGrD,CAAC,UAAW,YAAa,UAAW,SAAS,EAAE,SAASzlB,EAAK,QAAQ,GACxEylB,EAAO,KAAK,oBAAoB,EAG7B,CAAC,MAAO,SAAU,OAAQ,QAAQ,EAAE,SAASzlB,EAAK,QAAQ,GAC7DylB,EAAO,KAAK,qBAAqB,EAG5B,CACL,QAASA,EAAO,SAAW,EAC3B,OAAAA,EACA,KAAM,CACJ,SAAS9N,EAAA3X,EAAK,UAAL,YAAA2X,EAAc,OACvB,SAASI,EAAA/X,EAAK,UAAL,YAAA+X,EAAc,OACvB,SAAU/X,EAAK,SACf,SAAUA,EAAK,QAChB,CACP,CACG,CACH,ECzNM0lB,GAAc,IAAM,CAClB,KAAA,CAAE,OAAAhL,GAAWiL,KACb,CAAC5D,EAAM6D,CAAO,EAAIpM,WAAS,IAAI,EAC/B,CAACqM,EAAKC,CAAM,EAAItM,EAAA,SAAS,CAAE,CAAA,EAC3B,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACiK,EAAYC,CAAa,EAAIlK,WAAS,EAAK,EAC5C,CAACuM,EAAcC,CAAe,EAAIxM,WAAS,KAAK,EAChD,CAACyM,EAAWC,CAAY,EAAI1M,WAAS,KAAK,EAEhDU,EAAAA,UAAU,IAAM,CACd,MAAMiM,EAAmB,SAAY,CACnCzM,EAAW,EAAI,EAEf,MAAM0M,EAAa,MAAM3L,GAAY,QAAQC,CAAM,EAC/C0L,EAAW,QACLR,EAAAQ,EAAW,KAAK,IAAI,EAEtB7N,EAAA,MAAM6N,EAAW,OAAO,EAGhC1M,EAAW,EAAK,CAAA,EAGZ2M,EAAe,SAAY,CAC/B3C,EAAc,EAAI,EAElB,MAAM4C,EAAY,MAAMtD,GAAU,OAAO,CAAE,QAAStI,EAAQ,EACxD4L,EAAU,QACLR,EAAAQ,EAAU,KAAK,GAAG,EAEnB/N,EAAA,MAAM+N,EAAU,OAAO,EAG/B5C,EAAc,EAAK,CAAA,EAGJyC,IACJE,GAAA,EACZ,CAAC3L,CAAM,CAAC,EAEX,MAAM6L,EAAuBV,EAC1B,OAAOlI,GAAMoI,IAAiB,OAASpI,EAAG,UAAYoI,CAAY,EAClE,KAAK,CAACjuB,EAAGE,IACJiuB,IAAc,OACRnuB,EAAE,OAAS,IAAME,EAAE,OAAS,IAE5BA,EAAE,OAAS,IAAMF,EAAE,OAAS,EAEvC,EAEH,OAAI2hB,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAICnB,QAcF,MAAI,CAAA,UAAU,+BACb,SAACH,EAAA,KAAA,MAAA,CAAI,UAAU,yBAEb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,qDACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,UACb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,mBACb,SAAAA,EAAA,IAAC,OAAI,UAAU,6EACZ,WAAK,UACJA,EAAA,IAAC,MAAA,CACC,IAAKuH,EAAK,UACV,IAAKA,EAAK,KACV,UAAU,4BAAA,CAAA,EAGXvH,EAAAA,IAAAoJ,GAAA,CAAQ,UAAU,yBAA0B,CAAA,CAEjD,CAAA,EACF,EACAhC,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,wCACX,SAAAuH,EAAK,KACR,EACCA,EAAK,aACHH,OAAA,OAAA,CAAK,UAAU,iFACd,SAAA,CAACpH,EAAAA,IAAAmJ,GAAA,CAAK,UAAU,2BAA4B,CAAA,EAAE,UAAA,EAEhD,CAAA,EAEJ,EAEC5B,EAAK,aACJvH,EAAA,IAAC,KAAE,UAAU,qCACV,WAAK,YACR,EAGFA,EAAA,IAAC,MAAI,CAAA,UAAU,uBACb,SAAAA,EAAA,IAACqH,EAAK,CAAA,GAAI,mBAAmBnH,CAAM,GACjC,SAAAkH,OAACqC,EACC,CAAA,SAAA,CAACzJ,EAAAA,IAAAyH,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,8BAAA,CAEnC,CAAA,CACF,CAAA,EACF,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EAGAL,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,mCAAmC,SAAA,CAAA,iBAChCG,EAAK,KAAK,KAAGwE,EAAqB,OAAO,GAAA,EAC1D,EACA3E,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAAA,EAAA,KAAC,SAAA,CACC,MAAOmE,EACP,SAAW7tB,GAAM8tB,EAAgB9tB,EAAE,OAAO,KAAK,EAC/C,UAAU,kGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAc,iBAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAK,QAAA,EAC1BA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAK,QAAA,EAC1BA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAO,UAAA,CAAA,CAAA,CACjC,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOqE,EACP,SAAW/tB,GAAMguB,EAAahuB,EAAE,OAAO,KAAK,EAC5C,UAAU,kGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAW,cAAA,EAC9BA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAW,cAAA,CAAA,CAAA,CAClC,CAAA,EACF,CAAA,EACF,EAECiJ,EACCjJ,EAAAA,IAAC,MAAI,CAAA,UAAU,2BACb,SAACA,MAAA0I,EAAA,CAAe,CAAA,CAClB,CAAA,EACEqD,EAAqB,SAAW,EACjC3E,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,OACb,eAACoJ,GAAQ,CAAA,UAAU,kCAAkC,CACvD,CAAA,EACCpJ,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,4BAAA,EACAA,EAAAA,IAAC,KAAE,UAAU,qBACV,WAAI,SAAW,EACZ,qDACA,sDAEN,CAAA,QACCqH,EAAK,CAAA,GAAI,mBAAmBnH,CAAM,GACjC,gBAACuJ,EACC,CAAA,SAAA,CAACzJ,EAAAA,IAAAyH,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,eAAA,CAAA,CAEnC,CACF,CAAA,CACF,CAAA,CAAA,QAEC,MAAI,CAAA,UAAU,uDACZ,SAAqBsE,EAAA,IAAK5I,GACzBiE,EAAA,KAACC,EAAA,CAEC,GAAI,QAAQlE,EAAG,GAAG,GAClB,UAAU,0EAET,SAAA,CAAAA,EAAG,WACFnD,MAAC,MAAI,CAAA,UAAU,OACb,SAAAA,EAAA,IAAC,MAAA,CACC,IAAKmD,EAAG,UACR,IAAKA,EAAG,MACR,UAAU,kCAAA,CAAA,EAEd,EAGFiE,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,+DACX,SAAAmD,EAAG,MACN,EACAiE,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAAApH,MAAC,OAAK,CAAA,UAAW,8CACfmD,EAAG,UAAY,QACX,8BACAA,EAAG,UAAY,QACf,4BACA,+BACN,GACG,WAAG,QACN,EACCA,EAAG,YACFnD,EAAAA,IAAC,OAAK,CAAA,UAAU,2EAA2E,SAE3F,IAAA,CAAA,EAEJ,CAAA,EACF,EAECA,EAAA,IAAA,IAAA,CAAE,UAAU,0CACV,WAAG,YACN,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,4CACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,gBACZ,SAAA,CAAAjE,EAAG,OACFiE,OAAC,OAAK,CAAA,UAAU,mCAAmC,SAAA,CAAA,MAC7CjE,EAAG,KAAA,EACT,EAEDnD,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAiB,WAAG,SAAS,CAAA,EAC/C,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAACpH,EAAAA,IAAA,OAAA,CAAK,UAAU,gBACb,SAAI,IAAA,KAAKmD,EAAG,UAAU,EAAE,mBAAmB,OAAO,CACrD,CAAA,EACAiE,EAAAA,KAAC,OAAK,CAAA,UAAU,wBACb,SAAA,CAAGjE,EAAA,WAAW,QAAA,EACjB,CAAA,EACF,CAAA,EACF,CAAA,CAAA,EAzDKA,EAAG,GA2DX,CAAA,EACH,CAAA,EAEJ,CAAA,CACF,CAAA,CACF,CAAA,QAtLG,MAAI,CAAA,UAAU,gDACb,SAACiE,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAAmB,sBAAA,QACxEqH,EAAK,CAAA,GAAG,SAAS,UAAU,oCAAoC,SAEhE,uBAAA,CAAA,CACF,CAAA,CACF,CAAA,CAiLN,ECpPM2E,GAAQ,IAAM,CACZ,KAAA,CAAE,MAAAC,GAAUtN,KACZ6F,EAAWC,KACXyH,EAAWC,KACX,CAACC,EAAcC,CAAe,EAAIrN,WAAS,EAAK,EAChD,CAACsN,EAAWC,CAAY,EAAIvN,WAAS,EAAK,EAE1C,CACJ,SAAAwN,EACA,aAAAC,EACA,UAAW,CAAE,OAAAxB,CAAO,GAClByB,GAAQ,EAENC,EAAW,MAAOnnB,GAAS,SAC/B+mB,EAAa,EAAI,EAEjB,MAAMntB,EAAS,MAAM6sB,EAAMzmB,EAAK,MAAOA,EAAK,QAAQ,EAEpD,GAAIpG,EAAO,QAAS,CAClB2e,EAAM,QAAQ,8BAA8B,EAC5C,MAAM6O,IAAOrP,GAAAJ,EAAA+O,EAAS,QAAT,YAAA/O,EAAgB,OAAhB,YAAAI,EAAsB,WAAY,aAC/CiH,EAASoI,EAAM,CAAE,QAAS,EAAM,CAAA,CAAA,MAE1B7O,EAAA,MAAM3e,EAAO,OAAO,EAG5BmtB,EAAa,EAAK,CAAA,EAGpB,aACG,MAAI,CAAA,UAAU,sFACb,SAACnF,EAAA,KAAA,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,yDAAyD,SAEvE,sBAAA,EACAoH,EAAAA,KAAC,IAAE,CAAA,UAAU,yCAAyC,SAAA,CAAA,KACjD,IACHpH,EAAA,IAACqH,EAAA,CACC,GAAG,YACH,UAAU,gDACX,SAAA,yBAAA,CAED,CAAA,EACF,CAAA,EACF,SAEC,OAAK,CAAA,UAAU,iBAAiB,SAAUoF,EAAaE,CAAQ,EAC9D,SAAA,CAACvF,EAAAA,KAAA,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAAApH,MAAC,QAAM,CAAA,QAAQ,QAAQ,UAAU,0CAA0C,SAE3E,QAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC6M,GAAK,CAAA,UAAU,wBAAwB,CAC1C,CAAA,EACA7M,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,QAAS,CACpB,SAAU,sBACV,QAAS,CACP,MAAO,2CACP,QAAS,gBACX,CAAA,CACD,EACD,KAAK,QACL,UAAW,yHACTvB,EAAO,MAAQ,iBAAmB,iBACpC,GACA,YAAY,eAAA,CACd,CAAA,EACF,EACCA,EAAO,OACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,MAAM,OAAQ,CAAA,CAAA,EAEnE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,WAAW,UAAU,0CAA0C,SAE9E,QAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC8M,GAAK,CAAA,UAAU,wBAAwB,CAC1C,CAAA,EACA9M,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,WAAY,CACvB,SAAU,sBACV,UAAW,CACT,MAAO,EACP,QAAS,wCACX,CAAA,CACD,EACD,KAAMJ,EAAe,OAAS,WAC9B,UAAW,0HACTnB,EAAO,SAAW,iBAAmB,iBACvC,GACA,YAAY,WAAA,CACd,EACAjL,EAAAA,IAAC,MAAI,CAAA,UAAU,oDACb,SAAAA,EAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMqM,EAAgB,CAACD,CAAY,EAC5C,UAAU,oCAET,SAAAA,QAAgBW,GAAO,CAAA,UAAU,UAAU,EAAK/M,EAAA,IAACgN,GAAI,CAAA,UAAU,SAAU,CAAA,CAAA,CAAA,EAE9E,CAAA,EACF,EACC/B,EAAO,UACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,SAAS,OAAQ,CAAA,CAAA,EAEtE,CAAA,EACF,QAEC,MAAI,CAAA,UAAU,oCACb,SAACjL,MAAA,MAAA,CAAI,UAAU,UACb,SAAAA,EAAA,IAACqH,EAAA,CACC,GAAG,mBACH,UAAU,gDACX,SAAA,qBAAA,GAGH,CACF,CAAA,QAEC,MACC,CAAA,SAAArH,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,QAAS6C,EACT,UAAU,SACV,KAAK,KACN,SAAA,QAAA,CAAA,EAGH,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EC9IMW,GAAW,IAAM,CACrB,KAAM,CAAE,SAAUC,CAAa,EAAIvO,GAAQ,EACrC6F,EAAWC,KACX,CAAC2H,EAAcC,CAAe,EAAIrN,WAAS,EAAK,EAChD,CAACmO,EAAqBC,CAAsB,EAAIpO,WAAS,EAAK,EAC9D,CAACsN,EAAWC,CAAY,EAAIvN,WAAS,EAAK,EAE1C,CACJ,SAAAwN,EACA,aAAAC,EACA,MAAAY,EACA,UAAW,CAAE,OAAApC,CAAO,GAClByB,GAAQ,EAENxO,EAAWmP,EAAM,UAAU,EAE3BV,EAAW,MAAOnnB,GAAS,CAC/B+mB,EAAa,EAAI,EAEX,MAAAntB,EAAS,MAAM8tB,EAAa,CAChC,SAAU1nB,EAAK,SACf,MAAOA,EAAK,MACZ,SAAUA,EAAK,SACf,WAAYA,EAAK,WACjB,UAAWA,EAAK,SAAA,CACjB,EAEGpG,EAAO,SACT2e,EAAM,QAAQ,sDAAsD,EACpEyG,EAAS,QAAQ,GAEXzG,EAAA,MAAM3e,EAAO,OAAO,EAG5BmtB,EAAa,EAAK,CAAA,EAGpB,aACG,MAAI,CAAA,UAAU,sFACb,SAACnF,EAAA,KAAA,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,yDAAyD,SAEvE,mBAAA,EACAoH,EAAAA,KAAC,IAAE,CAAA,UAAU,yCAAyC,SAAA,CAAA,KACjD,IACHpH,EAAA,IAACqH,EAAA,CACC,GAAG,SACH,UAAU,gDACX,SAAA,mCAAA,CAED,CAAA,EACF,CAAA,EACF,SAEC,OAAK,CAAA,UAAU,iBAAiB,SAAUoF,EAAaE,CAAQ,EAC9D,SAAA,CAACvF,EAAAA,KAAA,MAAA,CAAI,UAAU,YAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAAApH,MAAC,QAAM,CAAA,QAAQ,aAAa,UAAU,0CAA0C,SAEhF,OAAA,EACAA,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,aAAc,CACzB,SAAU,oBAAA,CACX,EACD,KAAK,OACL,UAAW,wHACTvB,EAAO,WAAa,iBAAmB,iBACzC,GACA,YAAY,MAAA,CACd,EACCA,EAAO,YACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,WAAW,OAAQ,CAAA,CAAA,EAExE,SAEC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,YAAY,UAAU,0CAA0C,SAE/E,YAAA,EACAA,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,YAAa,CACxB,SAAU,yBAAA,CACX,EACD,KAAK,OACL,UAAW,wHACTvB,EAAO,UAAY,iBAAmB,iBACxC,GACA,YAAY,WAAA,CACd,EACCA,EAAO,WACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,UAAU,OAAQ,CAAA,CAAA,EAEvE,CAAA,EACF,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,WAAW,UAAU,0CAA0C,SAE9E,kBAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC6H,EAAK,CAAA,UAAU,wBAAwB,CAC1C,CAAA,EACA7H,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,WAAY,CACvB,SAAU,gCACV,UAAW,CACT,MAAO,EACP,QAAS,kDACX,CAAA,CACD,EACD,KAAK,OACL,UAAW,yHACTvB,EAAO,SAAW,iBAAmB,iBACvC,GACA,YAAY,gBAAA,CACd,CAAA,EACF,EACCA,EAAO,UACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,SAAS,OAAQ,CAAA,CAAA,EAEtE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,QAAQ,UAAU,0CAA0C,SAE3E,QAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC6M,GAAK,CAAA,UAAU,wBAAwB,CAC1C,CAAA,EACA7M,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,QAAS,CACpB,SAAU,sBACV,QAAS,CACP,MAAO,2CACP,QAAS,gBACX,CAAA,CACD,EACD,KAAK,QACL,UAAW,yHACTvB,EAAO,MAAQ,iBAAmB,iBACpC,GACA,YAAY,eAAA,CACd,CAAA,EACF,EACCA,EAAO,OACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,MAAM,OAAQ,CAAA,CAAA,EAEnE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,WAAW,UAAU,0CAA0C,SAE9E,QAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC8M,GAAK,CAAA,UAAU,wBAAwB,CAC1C,CAAA,EACA9M,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,WAAY,CACvB,SAAU,sBACV,UAAW,CACT,MAAO,EACP,QAAS,wCACX,CAAA,CACD,EACD,KAAMJ,EAAe,OAAS,WAC9B,UAAW,0HACTnB,EAAO,SAAW,iBAAmB,iBACvC,GACA,YAAY,WAAA,CACd,EACAjL,EAAAA,IAAC,MAAI,CAAA,UAAU,oDACb,SAAAA,EAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMqM,EAAgB,CAACD,CAAY,EAC5C,UAAU,oCAET,SAAAA,QAAgBW,GAAO,CAAA,UAAU,UAAU,EAAK/M,EAAA,IAACgN,GAAI,CAAA,UAAU,SAAU,CAAA,CAAA,CAAA,EAE9E,CAAA,EACF,EACC/B,EAAO,UACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,SAAS,OAAQ,CAAA,CAAA,EAEtE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,kBAAkB,UAAU,0CAA0C,SAErF,kBAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,uEACb,eAAC8M,GAAK,CAAA,UAAU,wBAAwB,CAC1C,CAAA,EACA9M,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,kBAAmB,CAC9B,SAAU,qCACV,SAAmBtoB,GAAAA,IAAUga,GAAY,sBAAA,CAC1C,EACD,KAAMiP,EAAsB,OAAS,WACrC,UAAW,0HACTlC,EAAO,gBAAkB,iBAAmB,iBAC9C,GACA,YAAY,oBAAA,CACd,EACAjL,EAAAA,IAAC,MAAI,CAAA,UAAU,oDACb,SAAAA,EAAA,IAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAMoN,EAAuB,CAACD,CAAmB,EAC1D,UAAU,oCAET,SAAAA,QAAuBJ,GAAO,CAAA,UAAU,UAAU,EAAK/M,EAAA,IAACgN,GAAI,CAAA,UAAU,SAAU,CAAA,CAAA,CAAA,EAErF,CAAA,EACF,EACC/B,EAAO,iBACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,gBAAgB,OAAQ,CAAA,CAAA,EAE7E,CAAA,EACF,QAEC,MACC,CAAA,SAAAjL,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,QAAS6C,EACT,UAAU,SACV,KAAK,KACN,SAAA,aAAA,CAAA,EAGH,EAEAlF,EAAAA,KAAC,MAAI,CAAA,UAAU,oCAAoC,SAAA,CAAA,+CACJ,UAC5CC,EAAK,CAAA,GAAG,SAAS,UAAU,oCAAoC,SAEhE,gBAAA,EAAQ,IAAI,IACV,UACDA,EAAK,CAAA,GAAG,WAAW,UAAU,oCAAoC,SAElE,0BAAA,CAAA,EACF,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,ECpQaiG,GAAmB,CAE9B,MAAM,eAAezM,EAAM,SACzB,GAAI,CAGF,GAFA,QAAQ,IAAI,sCAAuCA,CAAI,EAEnD,CAACA,EACH,MAAM,IAAI,MAAM,6BAA6B,EAG/C,MAAM3a,EAAW,MAAMsW,EAAI,IAAI,oBAAoBqE,CAAI,YAAY,EAEnE,eAAQ,IAAI,6BAA8B3a,EAAS,IAAI,EAEhD,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,KAAMA,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,sBAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,8BAA+BA,CAAK,EAE3C,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,6BAC3D,KAAM,CAAE,UAAW,EAAI,CAC/B,CACK,CACF,EAGD,MAAM,YAAYya,EAAM0M,EAAUC,EAAW,GAAM,SACjD,GAAI,CAGF,GAFA,QAAQ,IAAI,wBAAyB,CAAE,KAAA3M,EAAM,SAAA0M,EAAU,SAAAC,CAAQ,CAAE,EAE7D,CAAC3M,GAAQ,CAAC0M,EACZ,MAAM,IAAI,MAAM,2CAA2C,EAG7D,GAAIA,EAAS,OAAO,OAAS,GAC3B,MAAM,IAAI,MAAM,4CAA4C,EAG9D,MAAMja,EAAc,CAClB,SAAUia,EAAS,KAAM,EACzB,UAAWC,CACnB,EAEM,QAAQ,IAAI,0BAA2Bla,CAAW,EAElD,MAAMpN,EAAW,MAAMsW,EAAI,KAAK,oBAAoBqE,CAAI,YAAavN,CAAW,EAEhF,eAAQ,IAAI,wBAAyBpN,EAAS,IAAI,EAE3C,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,KAAMA,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,8BAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,6BAA8BA,CAAK,EAG7CA,EAAM,WACR,QAAQ,MAAM,6BAA8BA,EAAM,SAAS,IAAI,EAC/D,QAAQ,MAAM,kBAAmBA,EAAM,SAAS,MAAM,GAGjD,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,yBACnE,CACK,CACF,EAGD,MAAM,eAAeqnB,EAAYC,EAAQ,SACvC,GAAI,CAGF,GAFA,QAAQ,IAAI,wBAAyB,CAAE,WAAAD,EAAY,OAAAC,CAAQ,CAAA,EAEvD,CAACD,GAAc,CAACC,EAClB,MAAM,IAAI,MAAM,4CAA4C,EAG9D,GAAIA,EAAO,OAAO,OAAS,EACzB,MAAM,IAAI,MAAM,2CAA2C,EAG7D,MAAMpa,EAAc,CAClB,OAAQoa,EAAO,KAAM,CAC7B,EAEYxnB,EAAW,MAAMsW,EAAI,KAAK,0BAA0BiR,CAAU,UAAWna,CAAW,EAE1F,eAAQ,IAAI,oCAAqCpN,EAAS,IAAI,EAEvD,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,KAAMA,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,8BAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,6BAA8BA,CAAK,EAE1C,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,yBACnE,CACK,CACF,EAGD,MAAM,eAAeqnB,EAAY,SAC/B,GAAI,CAGF,GAFA,QAAQ,IAAI,0BAA2BA,CAAU,EAE7C,CAACA,EACH,MAAM,IAAI,MAAM,8BAA8B,EAGhD,MAAMvnB,EAAW,MAAMsW,EAAI,OAAO,0BAA0BiR,CAAU,EAAE,EAExE,eAAQ,IAAI,0BAA2BvnB,EAAS,IAAI,EAE7C,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,QAASA,EAAS,KAAK,SAAW,+BAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,8BAA+BA,CAAK,EAE3C,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,0BACnE,CACK,CACF,EAGD,MAAM,yBAAyBqnB,EAAY,SACzC,GAAI,CAGF,GAFA,QAAQ,IAAI,8BAA+BA,CAAU,EAEjD,CAACA,EACH,MAAM,IAAI,MAAM,8BAA8B,EAGhD,MAAMvnB,EAAW,MAAMsW,EAAI,IAAI,0BAA0BiR,CAAU,aAAa,EAEhF,eAAQ,IAAI,4BAA6BvnB,EAAS,IAAI,EAE/C,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,KAAMA,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,mCAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,kCAAmCA,CAAK,EAE/C,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,8BACnE,CACK,CACF,EAGD,MAAM,iBAAiBzH,EAAO,QAAS,SACrC,GAAI,CAGF,GAFA,QAAQ,IAAI,oCAAqCA,CAAI,EAEjD,CAAC,CAAC,QAAS,UAAU,EAAE,SAASA,CAAI,EACtC,MAAM,IAAI,MAAM,qCAAqC,EAGvD,MAAMuH,EAAW,MAAMsW,EAAI,IAAI,qCAAqC7d,CAAI,EAAE,EAE1E,eAAQ,IAAI,2BAA4BuH,EAAS,IAAI,EAE9C,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,KAAMA,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,sBAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,yCAA0CA,CAAK,EAEtD,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,6BAC3D,KAAM,CAAE,UAAW,EAAI,CAC/B,CACK,CACF,EAGD,MAAM,iBAAiB6B,EAAS,GAAI,SAClC,GAAI,CACF,QAAQ,IAAI,2CAA4CA,CAAM,EAE9D,MAAM/B,EAAW,MAAMsW,EAAI,IAAI,6BAA8B,CAAE,OAAAvU,CAAM,CAAE,EAEvE,eAAQ,IAAI,kCAAmC/B,EAAS,IAAI,EAErD,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,KAAMA,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,sBAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,gDAAiDA,CAAK,EAE7D,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAWnX,EAAM,SAAW,6BAC3D,KAAM,CAAE,UAAW,EAAI,CAC/B,CACK,CACF,EAGD,MAAM,iBAAkB,CACtB,GAAI,CACF,QAAQ,IAAI,6CAA6C,EAGzD,MAAMF,EAAW,MAAMsW,EAAI,IAAI,SAAS,EAExC,eAAQ,IAAI,gBAAiBtW,EAAS,IAAI,EAEnC,CACL,QAAS,GACT,QAAS,uBACT,KAAMA,EAAS,IACvB,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,sBAAuBA,CAAK,EAEnC,CACL,QAAS,GACT,QAAS,6BACT,MAAOA,EAAM,OACrB,CACK,CACF,EAGD,qBAAqBmnB,EAAUC,EAAU,CACvC,MAAMvC,EAAS,CAAA,EAEf,GAAI,CAACsC,GAAY,OAAOA,GAAa,SACnCtC,EAAO,KAAK,mCAAmC,MAC1C,CACL,MAAM0C,EAAUJ,EAAS,OACrBI,EAAQ,OAAS,IACnB1C,EAAO,KAAK,4CAA4C,EAEtD0C,EAAQ,OAAS,KACnB1C,EAAO,KAAK,8CAA8C,CAE7D,CAED,OAAI,OAAOuC,GAAa,WACtBvC,EAAO,KAAK,2CAA2C,EAGlD,CACL,QAASA,EAAO,SAAW,EAC3B,OAAAA,EACA,KAAM,CACJ,SAAUsC,GAAA,YAAAA,EAAU,OACpB,UAAWC,CACZ,CACP,CACG,EAGD,mBAAmBE,EAAQ,CACzB,MAAMzC,EAAS,CAAA,EAEf,GAAI,CAACyC,GAAU,OAAOA,GAAW,SAC/BzC,EAAO,KAAK,mCAAmC,MAC1C,CACL,MAAM0C,EAAUD,EAAO,OACnBC,EAAQ,OAAS,GACnB1C,EAAO,KAAK,2CAA2C,EAErD0C,EAAQ,OAAS,KACnB1C,EAAO,KAAK,+CAA+C,CAE9D,CAED,MAAO,CACL,QAASA,EAAO,SAAW,EAC3B,OAAAA,EACA,KAAM,CACJ,OAAQyC,GAAA,YAAAA,EAAQ,MACjB,CACP,CACG,CACH,EC5SME,EAAQ,CAAC,CACb,SAAA9O,EACA,QAAA4K,EAAU,UACV,KAAAf,EAAO,UACP,UAAAiB,EAAY,GACZ,GAAG9nB,CACL,IAAM,CACJ,MAAM+rB,EAAiB,CACrB,QAAS,4BACT,QAAS,4BACT,UAAW,4BACX,QAAS,8BACT,QAAS,gCACT,OAAQ,0BACR,KAAM,2BAAA,EAGFjF,EAAc,CAClB,GAAI,oBACJ,QAAS,wBACT,GAAI,qBAAA,EAIJ,OAAA5I,EAAA,IAAC,OAAA,CACC,UAAWwJ,GACT,oDACAqE,EAAenE,CAAO,EACtBd,EAAYD,CAAI,EAChBiB,CACF,EACC,GAAG9nB,EAEH,SAAAgd,CAAA,CAAA,CAGP,ECrBMgP,GAAc,IAAM,CACPnP,GAAQ,EACzB,KAAM,CAACoP,EAAWC,CAAY,EAAIhP,EAAA,SAAS,CAAE,CAAA,EACvC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAAC7c,EAAQ8rB,CAAS,EAAIjP,WAAS,KAAK,EACpC,CAACkP,EAAkBC,CAAmB,EAAInP,WAAS,IAAI,EACvD,CAACoP,EAAYC,CAAa,EAAIrP,WAAS,EAAE,EACzC,CAACsP,EAAkBC,CAAmB,EAAIvP,WAAS,EAAK,EAE9DU,EAAAA,UAAU,IAAM,CACA8O,GAChB,EAAG,CAAE,CAAA,EAEL9O,EAAAA,UAAU,IAAM,CACA8O,GAAA,EACb,CAACrsB,CAAM,CAAC,EAEX,MAAMqsB,EAAgB,SAAY,CAChCtP,EAAW,EAAI,EAEX,GAAA,CACI,MAAA9f,EAAS,MAAMkuB,GAAiB,iBAAiB,CACrD,MAAO,GACP,KAAM,EACN,OAAQnrB,IAAW,MAAQ,OAAYA,CAAA,CACxC,EAEG/C,EAAO,QACT4uB,EAAa5uB,EAAO,KAAK,WAAa,CAAE,CAAA,EAElC2e,EAAA,MAAM3e,EAAO,OAAO,QAErBgH,EAAO,CACN,QAAA,MAAM,8BAA+BA,CAAK,EAClD2X,EAAM,MAAM,4BAA4B,CAC1C,CAEAmB,EAAW,EAAK,CAAA,EAGZuP,EAAuB,MAAOhB,GAAe,CAC7C,GAAA,CAACW,EAAW,OAAQ,CACtBrQ,EAAM,MAAM,qBAAqB,EACjC,MACF,CAEAwQ,EAAoB,EAAI,EAEpB,GAAA,CACF,MAAMnvB,EAAS,MAAMkuB,GAAiB,eAAeG,EAAYW,CAAU,EAEvEhvB,EAAO,SACT4uB,KACE5K,EAAK,IAAIhmB,GACPA,EAAE,MAAQqwB,EACN,CACE,GAAGrwB,EACH,OAAQgxB,EACR,OAAQ,WACR,YAAa,IAAI,KAAK,EAAE,YAAY,EACpC,WAAY,IAAI,KAAK,EAAE,YAAY,CAAA,EAErChxB,CACN,CAAA,EAGF2gB,EAAM,QAAQ,+BAA+B,EAC7CoQ,EAAoB,IAAI,EACxBE,EAAc,EAAE,GAEVtQ,EAAA,MAAM3e,EAAO,OAAO,OAEd,CACd2e,EAAM,MAAM,yBAAyB,CACvC,CAEAwQ,EAAoB,EAAK,CAAA,EAGrBG,EAAc5e,GAAc,CAC1B,MAAA6e,EAAO,IAAI,KAAK7e,CAAS,EAEzBiX,MADU,KACG4H,EACb3H,EAAU,KAAK,MAAMD,EAAO,GAAK,EACjCE,EAAQ,KAAK,MAAMD,EAAU,EAAE,EAC/BE,EAAO,KAAK,MAAMD,EAAQ,EAAE,EAElC,OAAIC,EAAO,EAAU,GAAGA,CAAI,OAAOA,EAAO,EAAI,IAAM,EAAE,SAClDD,EAAQ,EAAU,GAAGA,CAAK,QAAQA,EAAQ,EAAI,IAAM,EAAE,SACtDD,EAAU,EAAU,GAAGA,CAAO,UAAUA,EAAU,EAAI,IAAM,EAAE,SAC3D,aAAA,EAGH4H,EAAoBb,EAAU,OAAmBR,GACjDprB,IAAW,UAAkBorB,EAAS,SAAW,UACjDprB,IAAW,WAAmBorB,EAAS,SAAW,WAC/C,EACR,EAUKsB,GARkB,KACf,CACL,IAAKd,EAAU,OACf,QAASA,EAAU,UAAY3wB,EAAE,SAAW,SAAS,EAAE,OACvD,SAAU2wB,EAAU,UAAY3wB,EAAE,SAAW,UAAU,EAAE,MAAA,MAM7D,OAAI6hB,EAEAe,EAAA,IAAC,OAAI,UAAU,yCACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAKFtB,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,oCACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,uBAAwB,CAAA,SAChD,MACC,CAAA,SAAA,CAAC9O,EAAA,IAAA,KAAA,CAAG,UAAU,mCAAmC,SAEjD,yBAAA,EACAoH,EAAAA,KAAC,IAAE,CAAA,UAAU,gBACV,SAAA,CAAOyH,EAAA,QAAQ,YAAUA,EAAO,UAAY,EAAI,IAAM,GAAG,OAAKA,EAAO,IAAI,QAAA,EAC5E,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EAGA7O,EAAAA,IAAC,MAAI,CAAA,UAAU,uBACZ,SAAA,CACC,CAAE,IAAK,MAAO,MAAO,QAAS,MAAO6O,EAAO,GAAI,EAChD,CAAE,IAAK,UAAW,MAAO,YAAa,MAAOA,EAAO,OAAQ,EAC5D,CAAE,IAAK,WAAY,MAAO,cAAe,MAAOA,EAAO,QAAS,CAAA,EAChE,IACAE,GAAA3H,EAAA,KAAC,SAAA,CAEC,QAAS,IAAM6G,EAAUc,EAAa,GAAG,EACzC,UAAW,8DACT5sB,IAAW4sB,EAAa,IACpB,yBACA,gEACN,GAEC,SAAA,CAAaA,EAAA,MAAM,KAAGA,EAAa,MAAM,GAAA,CAAA,EARrCA,EAAa,GAUrB,CAAA,EACH,EAGA/O,EAAAA,IAAC,MAAI,CAAA,UAAU,YACZ,SAAA4O,EAAkB,OAAS,EAC1BA,EAAkB,IAAKrB,GACrBnG,EAAA,KAAC,MAAA,CAEC,UAAU,iEAGV,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,sEACZ,SAAAuN,EAAS,KAAK,YACbvN,EAAA,IAAC,MAAA,CACC,IAAKuN,EAAS,KAAK,YACnB,IAAKA,EAAS,KAAK,SACnB,UAAU,qCAAA,CAAA,EAGZvN,EAAAA,IAAC6H,EAAK,CAAA,UAAU,wBAAwB,CAE5C,CAAA,SACC,MACC,CAAA,SAAA,CAACT,EAAAA,KAAA,MAAA,CAAI,UAAU,4BACZ,SAAA,CAAAmG,EAAS,KAAK,WAAW,IAAEA,EAAS,KAAK,SAAA,EAC5C,EACAnG,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,IACnCmG,EAAS,KAAK,QAAA,EAClB,CAAA,EACF,CAAA,EACF,EAEAnG,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,wBAAwB,SAAe,kBAAA,EACtDA,EAAA,IAAA,KAAA,CAAG,UAAU,8BACX,WAAS,SACZ,CAAA,EACF,CAAA,EACF,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAACpH,EAAA,IAAA4N,EAAA,CAAM,QAASL,EAAS,SAAW,UAAY,UAAY,UACzD,SAAAA,EAAS,SAAW,UAEjBnG,EAAAA,KAAAI,EAAAA,SAAA,CAAA,SAAA,CAACxH,EAAAA,IAAAgP,GAAA,CAAM,UAAU,cAAe,CAAA,EAAE,UAAA,CAAA,CAEpC,EAGE5H,EAAAA,KAAAI,EAAA,SAAA,CAAA,SAAA,CAACxH,EAAAA,IAAAiP,GAAA,CAAY,UAAU,cAAe,CAAA,EAAE,YAAA,CAAA,CAE1C,CAEJ,CAAA,EAEA7H,EAAAA,KAAC,MAAI,CAAA,UAAU,0CACb,SAAA,CAACpH,EAAAA,IAAAkP,GAAA,CAAS,UAAU,cAAe,CAAA,EAClCR,EAAWnB,EAAS,UAAU,CAAA,EACjC,CAAA,EACF,CAAA,EACF,EAGCvN,MAAA,MAAA,CAAI,UAAU,OACb,eAAC,MAAI,CAAA,UAAU,4BACb,SAAAA,MAAC,KAAE,UAAU,gBAAiB,SAASuN,EAAA,QAAA,CAAS,CAClD,CAAA,EACF,EAGCA,EAAS,SAAW,WAClBvN,EAAAA,IAAA,MAAA,CAAI,UAAU,mDACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,kFACb,eAAC6H,EAAK,CAAA,UAAU,qBAAqB,CACvC,CAAA,EACAT,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCAAyC,SAAA,CAAA,kBACtCsH,EAAWnB,EAAS,WAAW,CAAA,EACjD,EACCvN,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAiB,WAAS,OAAO,CAAA,EAChD,CAAA,CACF,CAAA,CACF,CAAA,EAECA,EAAA,IAAA,MAAA,CAAI,UAAU,gCACZ,SAAqBkO,IAAAX,EAAS,IAC7BnG,OAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAApH,EAAA,IAAC,WAAA,CACC,MAAOoO,EACP,SAAW1wB,GAAM2wB,EAAc3wB,EAAE,OAAO,KAAK,EAC7C,YAAY,yBACZ,UAAU,sGACV,KAAK,GAAA,CACP,EACA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACC,QAAS,IAAMgF,EAAqBlB,EAAS,GAAG,EAChD,SAAUe,GAAoB,CAACF,EAAW,KAAK,EAC/C,KAAK,KAEL,SAAA,CAACpO,EAAAA,IAAAmP,GAAA,CAAK,UAAU,cAAe,CAAA,EAC9Bb,EAAmB,cAAgB,iBAAA,CAAA,CACtC,EACAtO,EAAA,IAACyJ,EAAA,CACC,QAAQ,UACR,QAAS,IAAM,CACb0E,EAAoB,IAAI,EACxBE,EAAc,EAAE,CAClB,EACA,KAAK,KACN,SAAA,UAAA,CAED,CAAA,EACF,CAAA,CAAA,CACF,EAEAjH,EAAA,KAACqC,EAAA,CACC,QAAS,IAAM0E,EAAoBZ,EAAS,GAAG,EAC/C,QAAQ,UACR,KAAK,KAEL,SAAA,CAACvN,EAAAA,IAAA8O,GAAA,CAAc,UAAU,cAAe,CAAA,EAAE,WAAA,CAAA,CAAA,EAIhD,CAAA,CAAA,EA1HGvB,EAAS,GAAA,CA6HjB,EAEAnG,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,sCAAuC,CAAA,EAChE9O,EAAAA,IAAC,KAAG,CAAA,UAAU,yCACX,SAAA7d,IAAW,UAAY,4BACvBA,IAAW,WAAa,8BACxB,6BACH,CAAA,QACC,IAAE,CAAA,UAAU,gBACV,SAAWA,IAAA,MACR,2CACA,4CAEN,CAAA,CAAA,CACF,CAEJ,CAAA,CACF,CAAA,CAAA,CAEJ,ECzSMitB,GAAY,IAAM,OAChB,KAAA,CAAE,KAAAhR,GAASO,KACX6F,EAAWC,KACXyH,EAAWC,KACX,CAACkD,EAAWC,CAAY,EAAItQ,WAAS,UAAU,EAC/C,CAACuQ,EAAeC,CAAgB,EAAIxQ,WAAS,IAAI,EACjD,CAACyQ,EAASC,CAAU,EAAI1Q,EAAA,SAAS,CAAE,CAAA,EACnC,CAAC2Q,EAAQC,CAAS,EAAI5Q,EAAA,SAAS,CAAE,CAAA,EACjC,CAAC6Q,EAAYC,CAAa,EAAI9Q,WAAS,IAAI,EAC3C,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACiK,EAAYC,CAAa,EAAIlK,WAAS,EAAK,EAC5C,CAAC+Q,EAAeC,CAAgB,EAAIhR,WAAS,EAAK,EAGlDiR,EAAO,CACX,CAAE,GAAI,WAAY,MAAO,cAAe,KAAM5G,EAAW,EACzD,CAAE,GAAI,MAAO,MAAO,gBAAiB,KAAM6G,EAAQ,EACnD,CAAE,GAAI,YAAa,MAAO,YAAa,KAAMpB,EAAc,EAC3D,CAAE,GAAI,QAAS,MAAO,SAAU,KAAMqB,EAAW,EACjD,CAAE,GAAI,YAAa,MAAO,UAAW,KAAMnI,EAAY,EACvD,CAAE,GAAI,UAAW,MAAO,SAAU,KAAMoI,EAAM,CAAA,EAGhD1Q,EAAAA,UAAU,IAAM,CAGR,MAAA2Q,EADY,IAAI,gBAAgBnE,EAAS,MAAM,EAC/B,IAAI,KAAK,EAC3BmE,GAAOJ,EAAK,QAAUK,EAAE,KAAOD,CAAG,GACpCf,EAAae,CAAG,CAClB,EACC,CAACnE,CAAQ,CAAC,EAEbxM,EAAAA,UAAU,IAAM,CACK6Q,GACrB,EAAG,CAAE,CAAA,EAEL7Q,EAAAA,UAAU,IAAM,CACV2P,IAAc,MACHmB,KACJnB,IAAc,SAAWA,IAAc,cACpCoB,GACd,EACC,CAACpB,CAAS,CAAC,EAEd,MAAMkB,EAAqB,SAAY,CACrCrR,EAAW,EAAI,EAEX,GAAA,CAEI,MAAAwR,EAAkB,MAAMpS,GAAY,mBACtCoS,EAAgB,SAClBlB,EAAiBkB,EAAgB,IAAI,EAIjC,MAAAC,EAAc,MAAMnG,GAAa,gBACnCmG,EAAY,SACdb,EAAca,EAAY,IAAI,OAElB,CACd5S,EAAM,MAAM,qCAAqC,CACnD,CAEAmB,EAAW,EAAK,CAAA,EAGZsR,EAAe,SAAY,CAC/BtH,EAAc,EAAI,EACZ,MAAA9pB,EAAS,MAAMopB,GAAU,WAC3BppB,EAAO,SACEswB,EAAAtwB,EAAO,KAAK,GAAG,EAE5B8pB,EAAc,EAAK,CAAA,EAGfuH,EAAc,SAAY,CAC9BT,EAAiB,EAAI,EAEjB,GAAA,CACE,IAAA5wB,EACAiwB,IAAc,QACPjwB,EAAA,MAAMorB,GAAa,WAEnBprB,EAAA,MAAMorB,GAAa,eAG1BprB,EAAO,SACTwwB,EAAUxwB,EAAO,KAAK,OAASA,EAAO,KAAK,WAAa,CAAA,CAAE,OAE9C,CACd2e,EAAM,MAAM,0BAA0B,CACxC,CAEAiS,EAAiB,EAAK,CAAA,EAGlBY,EAAgB/P,GAAS,CACpB2D,EAAA,QAAQ3D,CAAI,OAAO,CAAA,EAGxBgQ,EAAiB,MAAOhQ,GAAS,CACjC,GAAA,OAAO,QAAQ,8CAA8C,EAAG,CAClEqI,EAAc,EAAI,EAElB,MAAM9pB,EAAS,MAAMopB,GAAU,SAAS3H,CAAI,EACxCzhB,EAAO,SACT2e,EAAM,QAAQ,+BAA+B,EAC7C2R,EAAWD,EAAQ,OAAOtM,GAAMA,EAAG,MAAQtC,CAAI,CAAC,EAC7B0P,KAEbxS,EAAA,MAAM3e,EAAO,OAAO,EAG5B8pB,EAAc,EAAK,CACrB,CAAA,EAGI4H,EAAkB7lB,IACP,CACb,QAAS,gCACT,KAAM,4BACN,QAAS,gCACT,UAAW,8BACX,UAAW,yBAAA,GAECA,CAAM,GAAK,4BAGrB8lB,EAAiB9lB,GAAW,CAQ1B,MAAA+lB,EAPQ,CACZ,QAAShC,GACT,KAAMC,GACN,QAASiB,GACT,UAAWjB,GACX,UAAWgC,EAAA,EAEMhmB,CAAM,GAAK+jB,GACvB,OAAAhP,EAAA,IAACgR,EAAK,CAAA,UAAU,SAAU,CAAA,CAAA,EAG7BE,EAAmB,IAAM,0BAC7B,OAAQ7B,EAAW,CACjB,IAAK,WAED,OAAAjI,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,uDACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,oCACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,+BACb,eAACkQ,GAAQ,CAAA,UAAU,wBAAwB,CAC7C,CAAA,EACA9I,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAe,kBAAA,QAC/D,IAAE,CAAA,UAAU,mCACV,WAAe7C,EAAAoS,GAAA,YAAAA,EAAA,QAAA,YAAApS,EAAO,aAAc,EACvC,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,oCACb,SAACiK,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,gCACb,eAACmQ,GAAW,CAAA,UAAU,yBAAyB,CACjD,CAAA,EACA/I,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAM,SAAA,QACtD,IAAE,CAAA,UAAU,mCACV,WAAYzC,EAAAsS,GAAA,YAAAA,EAAA,eAAA,YAAAtS,EAAc,YAAa,EAC1C,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,oCACb,SAAC6J,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,iCACb,eAACgI,GAAY,CAAA,UAAU,0BAA0B,CACnD,CAAA,EACAZ,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAO,UAAA,QACvD,IAAE,CAAA,UAAU,mCACV,WAAYvC,EAAAoS,GAAA,YAAAA,EAAA,cAAA,YAAApS,EAAa,YAAa,EACzC,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,oCACb,SAAC2J,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,iCACb,eAACgN,GAAI,CAAA,UAAU,0BAA0B,CAC3C,CAAA,EACA5F,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAa,gBAAA,QAC7D,IAAE,CAAA,UAAU,mCACV,WAAexC,EAAA+R,GAAA,YAAAA,EAAA,QAAA,YAAA/R,EAAO,cAAe,EACxC,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,EAGA4J,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAAa,gBAAA,EACtEoH,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAApH,EAAAA,IAACqH,GAAK,GAAG,aACP,SAACD,EAAA,KAAAqC,EAAA,CAAO,UAAU,0CAChB,SAAA,CAACzJ,EAAAA,IAAAyH,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,oBAAA,CAAA,CAEnC,CACF,CAAA,EACAzH,EAAAA,IAACqH,GAAK,GAAG,UACP,gBAACoC,EAAO,CAAA,QAAQ,UAAU,UAAU,0CAClC,SAAA,CAACzJ,EAAAA,IAAAgI,GAAA,CAAY,UAAU,cAAe,CAAA,EAAE,sBAAA,CAAA,CAE1C,CACF,CAAA,EACAhI,EAAAA,IAACqH,GAAK,GAAG,WACP,gBAACoC,EAAO,CAAA,QAAQ,UAAU,UAAU,0CAClC,SAAA,CAACzJ,EAAAA,IAAAoQ,GAAA,CAAM,UAAU,cAAe,CAAA,EAAE,eAAA,CAAA,CAEpC,CACF,CAAA,CAAA,EACF,CAAA,EACF,EAGCP,GACCzI,EAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAEzD,mBAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAgB,mBAAA,EAChDoH,EAAAA,KAAC,OAAK,CAAA,UAAU,cAAc,SAAA,CAAA,QAAIzJ,EAAAkS,EAAW,gBAAX,YAAAlS,EAA0B,QAAQ,KAAM,MAAA,EAAO,CAAA,EACnF,EACAyJ,EAAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAkB,qBAAA,QACjD,OAAK,CAAA,UAAU,cAAe,WAAWpC,EAAAiS,EAAA,eAAA,YAAAjS,EAAc,UAAW,EAAE,CAAA,EACvE,EACAwJ,EAAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAkB,qBAAA,QACjD,OAAK,CAAA,UAAU,cAAe,WAAWlC,EAAA+R,EAAA,eAAA,YAAA/R,EAAc,YAAa,EAAE,CAAA,EACzE,CAAA,EACF,CAAA,EACF,EAEAsJ,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAEzD,oBAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAY,eAAA,EAC5CoH,EAAAA,KAAC,OAAK,CAAA,UAAU,cAAc,SAAA,CAAA,QAAIxF,GAAAiO,EAAW,cAAX,YAAAjO,GAAwB,QAAQ,KAAM,MAAA,EAAO,CAAA,EACjF,EACAwF,EAAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAkB,qBAAA,QACjD,OAAK,CAAA,UAAU,cAAe,WAAW6B,EAAAgO,EAAA,cAAA,YAAAhO,EAAa,UAAW,EAAE,CAAA,EACtE,EACAuF,EAAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAkB,qBAAA,QACjD,OAAK,CAAA,UAAU,cAAe,WAAW8B,EAAA+N,EAAA,cAAA,YAAA/N,EAAa,YAAa,EAAE,CAAA,EACxE,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAEJ,CAAA,CAAA,EAGJ,IAAK,MAED,OAAAsF,EAAA,KAAC,MAAI,CAAA,UAAU,gCACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,+BACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAAa,gBAAA,QAChEqH,EAAK,CAAA,GAAG,aACP,SAACD,EAAA,KAAAqC,EAAA,CAAO,KAAK,KACX,SAAA,CAACzJ,EAAAA,IAAAyH,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,cAAA,CAAA,CAEnC,CACF,CAAA,CAAA,CAAA,CACF,CACF,CAAA,EAECwB,EACCjJ,EAAAA,IAAC,MAAI,CAAA,UAAU,2BACb,SAACA,MAAA0I,EAAA,CAAe,CAAA,CAClB,CAAA,EACE+G,EAAQ,SAAW,EACpBrI,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAkQ,GAAA,CAAQ,UAAU,sCAAuC,CAAA,EACzDlQ,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,4BAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAElC,yDAAA,EACCA,MAAAqH,EAAA,CAAK,GAAG,aACP,gBAACoC,EACC,CAAA,SAAA,CAACzJ,EAAAA,IAAAyH,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,wBAAA,CAAA,CAEnC,CACF,CAAA,CACF,CAAA,CAAA,QAEC,MAAI,CAAA,UAAU,kBACb,SAACL,EAAAA,KAAA,QAAA,CAAM,UAAU,sCACf,SAAA,CAAApH,MAAC,QAAM,CAAA,UAAU,aACf,SAAAoH,EAAA,KAAC,KACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,UAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,OAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,CAAA,CAAA,CACF,CACF,CAAA,EACAA,EAAAA,IAAC,SAAM,UAAU,oCACd,WAAQ,IAAKmD,GACZiE,OAAAA,OAAAA,EAAAA,KAAC,KACC,CAAA,SAAA,CAAApH,EAAAA,IAAC,MAAG,UAAU,YACZ,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oBACZ,SAAA,CAAAjE,EAAG,WACFnD,EAAA,IAAC,MAAA,CACC,IAAKmD,EAAG,UACR,IAAKA,EAAG,MACR,UAAU,qCAAA,CACZ,SAED,MACC,CAAA,SAAA,CAAAnD,EAAA,IAAC,MAAI,CAAA,UAAU,oCACZ,SAAAmD,EAAG,MACN,EACAiE,EAAAA,KAAC,MAAI,CAAA,UAAU,wBACZ,SAAA,EAAAjK,EAAAgG,EAAG,OAAH,YAAAhG,EAAS,KAAK,MAAIgG,EAAG,QAAA,EACxB,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EACCnD,EAAA,IAAA,KAAA,CAAG,UAAU,8BACZ,SAACA,EAAAA,IAAA,OAAA,CAAK,UAAW,4DACfmD,EAAG,UAAY,QACX,8BACAA,EAAG,UAAY,QACf,4BACA,+BACN,GACG,SAAAA,EAAG,QAAQ,OAAO,CAAC,EAAE,YAAY,EAAIA,EAAG,QAAQ,MAAM,CAAC,CAC1D,CAAA,EACF,EACAnD,EAAAA,IAAC,KAAG,CAAA,UAAU,oDACX,SAAAmD,EAAG,MAAQ,MAAMA,EAAG,KAAK,GAAK,GACjC,CAAA,QACC,KAAG,CAAA,UAAU,8BACZ,SAACnD,EAAA,IAAA,OAAA,CAAK,UAAW,4DACfmD,EAAG,SAAW,SACV,8BACA,yBACN,GACG,SAAAA,EAAG,SAAW,SAAW,QAAU,UACtC,CACF,CAAA,QACC,KAAG,CAAA,UAAU,oDACX,SAAAA,EAAG,YAAc,EACpB,QACC,KAAG,CAAA,UAAU,kDACZ,SAACiE,EAAA,KAAA,MAAA,CAAI,UAAU,iBACb,SAAA,CAAApH,EAAA,IAACqH,EAAA,CACC,GAAI,QAAQlE,EAAG,GAAG,GAClB,UAAU,oCACV,MAAM,cAEN,SAAAnD,EAAAA,IAACgN,GAAI,CAAA,UAAU,SAAU,CAAA,CAAA,CAC3B,EACAhN,EAAA,IAAC,SAAA,CACC,UAAU,wCACV,MAAM,iBACN,QAAS,IAAM4Q,EAAazN,EAAG,GAAG,EAClC,SAAU8F,EAEV,SAAAjJ,EAAAA,IAACmR,GAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CAC5B,EACAnR,EAAA,IAAC,SAAA,CACC,UAAU,kCACV,MAAM,kBACN,QAAS,IAAM6Q,EAAe1N,EAAG,GAAG,EACpC,SAAU8F,EAEV,SAAAjJ,EAAAA,IAACoR,GAAO,CAAA,UAAU,SAAU,CAAA,CAAA,CAC9B,CAAA,CAAA,CACF,CACF,CAAA,CAxEO,CAAA,EAAAjO,EAAG,GAyEZ,EACD,EACH,CAAA,CAAA,CACF,CACF,CAAA,CAEJ,CAAA,CAAA,EAGJ,IAAK,QACL,IAAK,YACH,MAAMkO,GAAehC,IAAc,QAEjC,OAAAjI,EAAA,KAAC,MAAI,CAAA,UAAU,gCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,+BACb,SAAA,CAAApH,MAAC,KAAG,CAAA,UAAU,sCACX,SAAAqR,GAAe,gBAAkB,iBACpC,QACC,IAAE,CAAA,UAAU,qBACV,SAAAA,GACG,iCACA,kCAEN,CAAA,EACF,EAECtB,EACC/P,EAAAA,IAAC,MAAI,CAAA,UAAU,2BACb,SAACA,MAAA0I,EAAA,CAAe,CAAA,CAClB,CAAA,EACEiH,EAAO,SAAW,EACnBvI,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAgI,GAAA,CAAY,UAAU,sCAAuC,CAAA,EAC9DZ,EAAAA,KAAC,KAAG,CAAA,UAAU,yCAAyC,SAAA,CAAA,UAC7CiK,GAAe,QAAU,SAAS,aAAA,EAC5C,QACC,IAAE,CAAA,UAAU,gBACV,SAAAA,GACG,6DACA,oDAEN,CACF,CAAA,CAAA,QAEC,MAAI,CAAA,UAAU,kBACb,SAACjK,EAAAA,KAAA,QAAA,CAAM,UAAU,sCACf,SAAA,CAAApH,MAAC,QAAM,CAAA,UAAU,aACf,SAAAoH,EAAA,KAAC,KACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,QACC,KAAG,CAAA,UAAU,iFACX,SAAAqR,GAAe,YAAc,WAChC,EACCrR,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,OAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,CAAA,CAAA,CACF,CACF,CAAA,EACAA,EAAAA,IAAC,SAAM,UAAU,oCACd,WAAO,IAAKsR,GACXlK,oBAAAA,OAAAA,EAAAA,KAAC,KACC,CAAA,SAAA,CAAApH,MAAC,KAAG,CAAA,UAAU,YACZ,SAAAoH,EAAA,KAAC,MACC,CAAA,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,oCACZ,UAAA7C,EAAAmU,EAAM,cAAN,YAAAnU,EAAmB,MACtB,EACAiK,EAAAA,KAAC,MAAI,CAAA,UAAU,wBACZ,SAAA,EAAA7J,EAAA+T,EAAM,cAAN,YAAA/T,EAAmB,UAAU,WAAS+T,EAAM,QAAA,EAC/C,CAAA,CAAA,CACF,CACF,CAAA,EACAlK,EAAAA,KAAC,KAAG,CAAA,UAAU,YACZ,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wBACZ,SAAA,EAAA3J,EAAA6T,EAAM,aAAN,YAAA7T,EAAkB,WAAW,KAAED,GAAA8T,EAAM,aAAN,YAAA9T,GAAkB,SAAA,EACpD,EACA4J,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,KACnCzJ,GAAA2T,EAAM,aAAN,YAAA3T,GAAkB,QAAA,EACtB,CAAA,EACF,EACAyJ,EAAAA,KAAC,KAAG,CAAA,UAAU,gEAAgE,SAAA,CAAA,OACxExJ,GAAA0T,EAAM,cAAN,YAAA1T,GAAmB,QAAQ,EAAC,EAClC,EACCoC,EAAA,IAAA,KAAA,CAAG,UAAU,8BACZ,SAACoH,EAAAA,KAAA,OAAA,CAAK,UAAW,yEAAyE0J,EAAeQ,EAAM,MAAM,CAAC,GACnH,SAAA,CAAAP,EAAcO,EAAM,MAAM,EAC1BtR,EAAA,IAAA,OAAA,CAAK,UAAU,OAAQ,WAAM,OAAO,CAAA,CAAA,CACvC,CACF,CAAA,EACAA,EAAAA,IAAC,KAAG,CAAA,UAAU,oDACX,SAAA,IAAI,KAAKsR,EAAM,UAAU,EAAE,mBAAmB,OAAO,CACxD,CAAA,EACAtR,EAAAA,IAAC,KAAG,CAAA,UAAU,kDACZ,SAAAA,EAAA,IAACqH,EAAA,CACC,GAAI,WAAWiK,EAAM,GAAG,GACxB,UAAU,oCACX,SAAA,cAAA,CAAA,EAGH,CAtCO,CAAA,EAAAA,EAAM,GAuCf,EACD,EACH,CAAA,CAAA,CACF,CACF,CAAA,CAEJ,CAAA,CAAA,EAGJ,IAAK,YACH,aAAQxD,GAAY,CAAA,CAAA,EAEtB,IAAK,UAED,OAAA1G,EAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAAuB,0BAAA,EAChFoH,EAAAA,KAAC,MAAI,CAAA,UAAU,cACb,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAElC,sDAAA,EACCA,MAAAqH,EAAA,CAAK,GAAG,WACP,gBAACoC,EACC,CAAA,SAAA,CAACzJ,EAAAA,IAAAoQ,GAAA,CAAM,UAAU,cAAe,CAAA,EAAE,yBAAA,CAAA,CAEpC,CACF,CAAA,CAAA,EACF,CACF,CAAA,CAAA,EAGJ,QACS,OAAApQ,EAAA,IAAC,OAAI,SAAkB,oBAAA,CAAA,CAClC,CAAA,EAGF,OAAIf,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,QAKD,MAAI,CAAA,UAAU,+BACb,SAACtB,EAAA,KAAA,MAAA,CAAI,UAAU,yBAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,YAAA,EACAoH,EAAAA,KAAC,IAAE,CAAA,UAAU,gBAAgB,SAAA,CAAA,UACrBjK,EAAAoS,GAAA,YAAAA,EAAe,OAAf,YAAApS,EAAqB,cAAciB,GAAA,YAAAA,EAAM,UAAS,oCAAA,EAC1D,CAAA,EACF,EAGC4B,MAAA,MAAA,CAAI,UAAU,qCACb,eAAC,MAAI,CAAA,UAAU,2BACb,SAAAA,EAAA,IAAC,OAAI,UAAU,6CACZ,SAAKiQ,EAAA,IAAKI,GAAQ,CACjB,MAAMW,EAAOX,EAAI,KAEf,OAAAjJ,EAAA,KAAC,SAAA,CAEC,QAAS,IAAMkI,EAAae,EAAI,EAAE,EAClC,UAAW,0FACThB,IAAcgB,EAAI,GACd,gCACA,4EACN,GAEA,SAAA,CAACrQ,EAAAA,IAAAgR,EAAA,CAAK,UAAU,SAAU,CAAA,EAC1BhR,EAAAA,IAAC,OAAM,CAAA,SAAAqQ,EAAI,KAAM,CAAA,CAAA,CAAA,EATZA,EAAI,EAAA,CAUX,CAEH,CACH,CAAA,CACF,CAAA,EACF,EAGCa,EAAiB,CAAA,CACpB,CAAA,CACF,CAAA,CAEJ,ECpnBMK,GAAQ,CAAC,CACb,OAAAC,EACA,QAAAC,EACA,MAAAC,EACA,SAAA5S,EACA,OAAA6S,EACA,KAAAhJ,EAAO,KACP,gBAAAiJ,EAAkB,EACpB,IAAM,CACJ,GAAI,CAACJ,EAAe,OAAA,KAEpB,MAAM5I,EAAc,CAClB,GAAI,WACJ,GAAI,WACJ,GAAI,YACJ,GAAI,YACJ,KAAM,iBAAA,EAGFiJ,EAAuBn0B,GAAM,CAC7Bk0B,GAAmBl0B,EAAE,SAAWA,EAAE,eAC5B+zB,GACV,EAIA,OAAAzR,EAAA,IAAC,MAAA,CACC,UAAU,qFACV,QAAS6R,EAET,gBAAC,MAAI,CAAA,UAAW,wCAAwCjJ,EAAYD,CAAI,CAAC,8BAEvE,SAAA,CAACvB,EAAAA,KAAA,MAAA,CAAI,UAAU,iEACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAuC,SAAM0R,EAAA,EAC3D1R,EAAA,IAAC,SAAA,CACC,QAASyR,EACT,UAAU,uEAEV,SAAAzR,EAAAA,IAACoI,GAAE,CAAA,UAAU,SAAU,CAAA,CAAA,CACzB,CAAA,EACF,EAGCpI,EAAAA,IAAA,MAAA,CAAI,UAAU,MACZ,SAAAlB,CACH,CAAA,EAGC6S,GACC3R,EAAA,IAAC,MAAI,CAAA,UAAU,qEACZ,SACH2R,EAAA,CAAA,EAEJ,CAAA,CAAA,CAGN,ECvDMG,GAAqB,CAAC,CAC1B,aAAAC,EACA,eAAAC,EACA,KAAArJ,EAAO,KACP,UAAAiB,EAAY,EACd,IAAM,CACJ,KAAM,CAACqI,EAAWC,CAAY,EAAIlT,WAAS,EAAK,EAC1C,CAACmT,EAAcC,CAAe,EAAIpT,WAAS+S,CAAY,EAEvDnJ,EAAc,CAClB,GAAI,YACJ,GAAI,YACJ,GAAI,YACJ,GAAI,WAAA,EAGAyJ,EAAmB,MAAOC,GAAS,SAGvC,GAAI,CADiB,CAAC,YAAa,aAAc,YAAa,YAAa,YAAY,EACrE,SAASA,EAAK,IAAI,EAAG,CACrCvU,EAAM,MAAM,+BAA+B,EAC3C,MACF,CAEM,MAAAwU,EAAU,EAAI,KAAO,KACvB,GAAAD,EAAK,KAAOC,EAAS,CACvBxU,EAAM,MAAM,mCAAmC,EAC/C,MACF,CAEAmU,EAAa,EAAI,EAEb,GAAA,CACI,MAAAlrB,EAAW,IAAI,SAIrB,GAHSA,EAAA,OAAO,QAASsrB,CAAI,EAGzBH,EAAc,CAChB,MAAMK,EAAmBL,EAAa,MAAM,GAAG,EAAE,IAAI,EAC5CnrB,EAAA,OAAO,mBAAoBwrB,CAAgB,CACtD,CAEA,MAAMtsB,EAAW,MAAMsW,EAAI,KAAK,wBAAyBxV,EAAU,CACjE,QAAS,CACP,eAAgB,qBAClB,CAAA,CACD,EAEG,GAAAd,EAAS,KAAK,QAAS,CACnB,MAAAusB,EAAYvsB,EAAS,KAAK,KAChCksB,EAAgBK,EAAU,QAAQ,EAE9BT,GACFA,EAAeS,EAAU,QAAQ,EAGnC1U,EAAM,QAAQ,wCAAwC,CAAA,MAEtDA,EAAM,MAAM7X,EAAS,KAAK,SAAW,gBAAgB,QAEhDE,EAAO,CACN,QAAA,MAAM,kBAAmBA,CAAK,EACtC2X,EAAM,QAAMR,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,uBAAuB,CAAA,QACpE,CACA2U,EAAa,EAAK,CACpB,CAAA,EAGIQ,EAAoBrM,GAAU,CAClC,MAAMiM,EAAOjM,EAAM,OAAO,MAAM,CAAC,EAC7BiM,GACFD,EAAiBC,CAAI,CACvB,EAGF,OACGlL,EAAA,KAAA,MAAA,CAAI,UAAW,yBAAyBwC,CAAS,GAEhD,SAAA,CAAA5J,EAAA,IAAC,QAAA,CACC,KAAK,OACL,OAAO,sDACP,SAAU0S,EACV,UAAU,SACV,GAAG,sBAAA,CACL,SAGC,MAAI,CAAA,UAAW,GAAG9J,EAAYD,CAAI,CAAC,2GACjC,SAAA,CACCwJ,EAAAnS,EAAA,IAAC,MAAA,CACC,IAAKmS,EACL,IAAI,iBACJ,UAAU,4BAAA,CAGZ,EAAAnS,EAAA,IAAC6H,EAAK,CAAA,UAAU,2BAA4B,CAAA,EAI9C7H,EAAA,IAAC,QAAA,CACC,QAAQ,uBACR,UAAU,+IAET,SAAAiS,QACE,MAAI,CAAA,UAAU,4DAA4D,EAE3EjS,EAAA,IAAC2S,GAAO,CAAA,UAAU,sFAAuF,CAAA,CAAA,CAE7G,CAAA,EACF,EAGA3S,EAAA,IAAC,QAAA,CACC,QAAQ,uBACR,UAAU,mIAEV,SAAAA,EAAAA,IAAC2S,GAAO,CAAA,UAAU,SAAU,CAAA,CAAA,CAC9B,EAGCV,SACE,MAAI,CAAA,UAAU,wFACb,SAACjS,EAAA,IAAA,MAAA,CAAI,UAAU,2DAAA,CAA4D,CAC7E,CAAA,CAEJ,CAAA,CAAA,CAEJ,ECzHM4S,GAAU,IAAM,SACOjU,GAAQ,EACnC,KAAM,CAACN,EAAUwU,CAAW,EAAI7T,WAAS,IAAI,EACvC,CAAC8T,EAAWC,CAAY,EAAI/T,WAAS,EAAK,EAC1C,CAACsN,EAAWC,CAAY,EAAIvN,WAAS,EAAK,EAC1C,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACgU,EAAmBC,CAAoB,EAAIjU,WAAS,EAAK,EAC1D,CAACkU,EAAiBC,CAAkB,EAAInU,WAAS,IAAI,EAErD,CACJ,SAAAwN,EACA,aAAAC,EACA,MAAA2G,EACA,UAAW,CAAE,OAAAnI,CAAO,GAClByB,GAAQ,EAEN,CACJ,SAAU2G,EACV,aAAcC,EACd,MAAOC,EACP,MAAAlG,EACA,UAAW,CAAE,OAAQmG,CAAe,GAClC9G,GAAQ,EAEN+G,EAAcpG,EAAM,cAAc,EAExC3N,EAAAA,UAAU,IAAM,EACW,SAAY,CACnCR,EAAW,EAAI,EAET,MAAA9f,EAAS,MAAMkf,GAAY,aAC7Blf,EAAO,SACGyzB,EAAAzzB,EAAO,KAAK,IAAI,EACT+zB,EAAA/zB,EAAO,KAAK,KAAK,WAAW,EACzCg0B,EAAA,CACJ,WAAYh0B,EAAO,KAAK,KAAK,YAAc,GAC3C,UAAWA,EAAO,KAAK,KAAK,WAAa,GACzC,MAAOA,EAAO,KAAK,KAAK,OAAS,GACjC,MAAOA,EAAO,KAAK,KAAK,OAAS,GACjC,SAAUA,EAAO,KAAK,KAAK,UAAY,GACvC,IAAKA,EAAO,KAAK,KAAK,KAAO,EAAA,CAC9B,GAEK2e,EAAA,MAAM3e,EAAO,OAAO,EAG5B8f,EAAW,EAAK,CAAA,IAGD,EAChB,CAACkU,CAAK,CAAC,EAEJ,MAAAM,EAA4BC,GAAgB,CAChDR,EAAmBQ,CAAW,EAE1BtV,GACUwU,EAAA,CACV,GAAGxU,EACH,YAAasV,CAAA,CACd,CACH,EAGIhH,EAAW,MAAOnnB,GAAS,CAC/B+mB,EAAa,EAAI,EAEjB,MAAMntB,EAAS,MAAMkf,GAAY,cAAc9Y,CAAI,EAC/CpG,EAAO,SACGyzB,EAAAzzB,EAAO,KAAK,IAAI,EACtB2e,EAAA,QAAQ3e,EAAO,OAAO,EAC5B2zB,EAAa,EAAK,GAEZhV,EAAA,MAAM3e,EAAO,OAAO,EAG5BmtB,EAAa,EAAK,CAAA,EAGdqH,EAAmB,MAAOpuB,GAAS,CACvC+mB,EAAa,EAAI,EAEX,MAAAntB,EAAS,MAAMkf,GAAY,eAAe,CAC9C,iBAAkB9Y,EAAK,iBACvB,aAAcA,EAAK,YAAA,CACpB,EAEGpG,EAAO,SACH2e,EAAA,QAAQ3e,EAAO,OAAO,EAC5B6zB,EAAqB,EAAK,EACZM,KAERxV,EAAA,MAAM3e,EAAO,OAAO,EAG5BmtB,EAAa,EAAK,CAAA,EAGdsH,EAAe,IAAM,CACrBxV,GACI+U,EAAA,CACJ,WAAY/U,EAAS,YAAc,GACnC,UAAWA,EAAS,WAAa,GACjC,MAAOA,EAAS,OAAS,GACzB,MAAOA,EAAS,OAAS,GACzB,SAAUA,EAAS,UAAY,GAC/B,IAAKA,EAAS,KAAO,EAAA,CACtB,EAEH0U,EAAa,EAAK,CAAA,EAGpB,OAAI9T,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAICrK,EAYH+I,EAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,gDAEb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,yDACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBAEb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,OACb,SAAAA,EAAA,IAAC8R,GAAA,CACC,aAAcoB,EACd,eAAgBQ,EAChB,KAAK,IAAA,CAAA,EAET,EACAtM,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,qBACX,SAAA,CAAS/I,EAAA,WAAW,IAAEA,EAAS,SAAA,EAClC,EACA+I,EAAAA,KAAC,IAAE,CAAA,UAAU,gBAAgB,SAAA,CAAA,IAAE/I,EAAS,QAAA,EAAS,EACjD+I,EAAAA,KAAC,IAAE,CAAA,UAAU,gBAAgB,SAAA,CAAA,gBACb,IAAI,KAAK/I,EAAS,UAAU,EAAE,mBAAmB,QAAS,CACtE,MAAO,OACP,KAAM,SAAA,CACP,CAAA,EACH,CAAA,EACF,CAAA,EACF,QACC,MAAI,CAAA,UAAU,wBACb,SAAC+I,EAAA,KAAA,MAAA,CAAI,UAAU,UACb,SAAA,CAAAA,OAAC,MAAI,CAAA,SAAA,CAAA,OAAGjK,EAAAkB,EAAS,gBAAT,YAAAlB,EAAwB,QAAQ,KAAM,MAAM,eAAA,EAAa,SAChE,MAAI,CAAA,SAAA,CAAA,OAAGI,EAAAc,EAAS,eAAT,YAAAd,EAAuB,QAAQ,KAAM,MAAM,gBAAA,EAAc,SAChE,MAAK,CAAA,SAAA,CAAAc,EAAS,WAAa,EAAE,sBAAA,EAAoB,SACjD,MAAK,CAAA,SAAA,CAAAA,EAAS,YAAc,EAAE,kBAAA,EAAgB,CAAA,CAAA,CACjD,CACF,CAAA,CAAA,CAAA,CACF,CACF,CAAA,EAGA+I,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAEpD,uBAAA,EACE8S,EASA1L,EAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACC,QAASgD,EAAaE,CAAQ,EAC9B,QAASL,EACT,KAAK,KAEL,SAAA,CAACtM,EAAAA,IAAA8T,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,QAAA,CAAA,CAEnC,EACA1M,EAAA,KAACqC,EAAA,CACC,QAASoK,EACT,QAAQ,UACR,KAAK,KAEL,SAAA,CAAC7T,EAAAA,IAAAoI,GAAA,CAAE,UAAU,cAAe,CAAA,EAAE,UAAA,CAAA,CAEhC,CAAA,EACF,EAzBAhB,EAAA,KAACqC,EAAA,CACC,QAAS,IAAMsJ,EAAa,EAAI,EAChC,QAAQ,UAER,SAAA,CAAC/S,EAAAA,IAAAmR,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,eAAA,CAAA,CAInC,CAiBA,EAEJ,SAEC,OAAK,CAAA,SAAU1E,EAAaE,CAAQ,EAAG,UAAU,YAEhD,SAAA,CAACvF,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,OAAA,EACAA,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,aAAc,CAAE,SAAU,qBAAsB,EAC7D,KAAK,OACL,SAAU,CAACsG,EACX,UAAW,sCACTA,EACI,sEACA,4BACN,EAAA,CACF,EACC7H,EAAO,YACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,WAAW,OAAQ,CAAA,CAAA,EAExE,SAEC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,YAAA,EACAA,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,YAAa,CAAE,SAAU,0BAA2B,EACjE,KAAK,OACL,SAAU,CAACsG,EACX,UAAW,sCACTA,EACI,sEACA,4BACN,EAAA,CACF,EACC7H,EAAO,WACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,UAAU,OAAQ,CAAA,CAAA,EAEvE,CAAA,EACF,SAGC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,QAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAA6M,GAAA,CAAK,UAAU,0EAA2E,CAAA,EAC3F7M,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,QAAS,CACpB,SAAU,sBACV,QAAS,CACP,MAAO,2CACP,QAAS,gBACX,CAAA,CACD,EACD,KAAK,QACL,SAAU,GACV,UAAU,qEAAA,CACZ,CAAA,EACF,EACCxM,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAA6B,gCAAA,CAAA,EACzE,SAGC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,WAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAA+T,GAAA,CAAM,UAAU,0EAA2E,CAAA,EAC5F/T,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,OAAO,EACpB,KAAK,MACL,SAAU,CAACsG,EACX,UAAW,4CACTA,EACI,sEACA,4BACN,GACA,YAAY,iBAAA,CACd,CAAA,EACF,CAAA,EACF,SAGC,MACC,CAAA,SAAA,CAAC9S,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,cAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAgU,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FhU,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,UAAU,EACvB,KAAK,OACL,SAAU,CAACsG,EACX,UAAW,4CACTA,EACI,sEACA,4BACN,GACA,YAAY,gBAAA,CACd,CAAA,EACF,CAAA,EACF,SAGC,MACC,CAAA,SAAA,CAAC9S,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,YAAA,EACAA,EAAA,IAAC,WAAA,CACE,GAAGwM,EAAS,KAAK,EAClB,KAAM,EACN,SAAU,CAACsG,EACX,UAAW,sCACTA,EACI,sEACA,4BACN,GACA,YAAY,yDAAA,CACd,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAGA1L,EAAAA,KAAC,MAAI,CAAA,UAAU,yCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAEzD,yBAAA,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,kEACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,4BAA4B,SAAa,gBAAA,EACtDA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAA+C,kDAAA,CAAA,EACtF,EACAoH,EAAA,KAACqC,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAMwJ,EAAqB,EAAI,EAExC,SAAA,CAACjT,EAAAA,IAAA8M,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,SAAA,CAAA,CAEnC,CAAA,EACF,EAEA1F,EAAAA,KAAC,MAAI,CAAA,UAAU,kEACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,4BAA4B,SAAc,iBAAA,EACvDA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAAuC,0CAAA,CAAA,EAC9E,QACC,MAAI,CAAA,UAAU,wBACZ,SAAAkT,EAAkB,gBAAkB,WACvC,CAAA,EACF,EAEA9L,EAAAA,KAAC,MAAI,CAAA,UAAU,kEACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,4BAA4B,SAAsB,yBAAA,EAC/DA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAAuC,0CAAA,CAAA,EAC9E,EACAoH,EAAAA,KAAC,QAAM,CAAA,UAAU,mDACf,SAAA,CAAApH,MAAC,SAAM,KAAK,WAAW,UAAU,eAAe,eAAc,GAAC,EAC/DA,EAAAA,IAAC,MAAI,CAAA,UAAU,yXAA0X,CAAA,CAAA,EAC3Y,CAAA,EACF,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,yCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2BAA2B,SAAa,gBAAA,EACrDA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAAiD,oDAAA,CAAA,EACxF,EACAA,EAAA,IAACyJ,EAAA,CACC,QAAQ,SACR,KAAK,KACL,QAAS,IAAM1L,EAAM,KAAK,mCAAmC,EAC9D,SAAA,SAAA,CAED,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAGAiC,EAAA,IAACuR,GAAA,CACC,OAAQyB,EACR,QAAS,IAAMC,EAAqB,EAAK,EACzC,MAAM,gBACN,OAEI7L,EAAA,KAAAI,WAAA,CAAA,SAAA,CAAAxH,EAAA,IAACyJ,EAAA,CACC,QAAQ,UACR,QAAS,IAAMwJ,EAAqB,EAAK,EAC1C,SAAA,UAAA,CAED,EACAjT,EAAA,IAACyJ,EAAA,CACC,QAAS6J,EAAqBM,CAAgB,EAC9C,QAAStH,EACV,SAAA,eAAA,CAED,CAAA,EACF,EAGF,gBAAC,OAAK,CAAA,SAAUgH,EAAqBM,CAAgB,EAAG,UAAU,YAChE,SAAA,CAAAxM,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,cAAA,EACAA,EAAA,IAAC,QAAA,CACE,GAAGqT,EAAiB,mBAAoB,CAAE,SAAU,4BAA6B,EAClF,KAAK,WACL,UAAU,wGAAA,CACZ,EACCG,EAAe,kBACbxT,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAwT,EAAe,iBAAiB,OAAQ,CAAA,CAAA,EAEtF,SAEC,MACC,CAAA,SAAA,CAACxT,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,aAAA,EACAA,EAAA,IAAC,QAAA,CACE,GAAGqT,EAAiB,eAAgB,CACnC,SAAU,2BACV,UAAW,CACT,MAAO,EACP,QAAS,6CACX,CAAA,CACD,EACD,KAAK,WACL,UAAU,wGAAA,CACZ,EACCG,EAAe,cACbxT,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAwT,EAAe,aAAa,OAAQ,CAAA,CAAA,EAElF,SAEC,MACC,CAAA,SAAA,CAACxT,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,uBAAA,EACAA,EAAA,IAAC,QAAA,CACE,GAAGqT,EAAiB,mBAAoB,CACvC,SAAU,4BACV,SAAmBnvB,GAAAA,IAAUuvB,GAAe,sBAAA,CAC7C,EACD,KAAK,WACL,UAAU,wGAAA,CACZ,EACCD,EAAe,kBACbxT,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAwT,EAAe,iBAAiB,OAAQ,CAAA,CAAA,EAEtF,CAAA,EACF,CAAA,CACF,CACF,CAAA,CAAA,QA5VG,MAAI,CAAA,UAAU,gDACb,SAACpM,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAAuB,0BAAA,EAC5EA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAiD,oDAAA,CAAA,CAChF,CAAA,CACF,CAAA,CAyVN,EC7dMiU,GAAc,CAAC,CACnB,gBAAAC,EACA,aAAAnC,EAAe,KACf,SAAAoC,EAAW,MACX,UAAAvK,EAAY,GACZ,QAAA2I,EAAU,GACV,cAAA6B,EAAgB,CAAC,YAAa,aAAc,YAAa,YAAa,YAAY,EAClF,YAAAC,EAAc,iDACd,YAAAC,EAAc,EAChB,IAAM,CACJ,KAAM,CAACrC,EAAWC,CAAY,EAAIlT,WAAS,EAAK,EAC1C,CAACmT,EAAcC,CAAe,EAAIpT,WAAS+S,CAAY,EACvD,CAACwC,EAAUC,CAAW,EAAIxV,WAAS,EAAK,EACxCyV,EAAe5O,SAAO,IAAI,EAE1B6O,EAAgBpC,GAEf8B,EAAc,SAAS9B,EAAK,IAAI,EAMlBA,EAAK,MAAQ,KAAO,MACtBC,GACTxU,EAAA,MAAM,gCAAgCwU,CAAO,KAAK,EACjD,IAGF,IAXLxU,EAAM,MAAM,2DAA2D,EAChE,IAaLsU,EAAmB,MAAOC,GAAS,SACnC,GAACoC,EAAapC,CAAI,EAEtB,CAAAJ,EAAa,EAAI,EAEb,GAAA,CACI,MAAAlrB,EAAW,IAAI,SAIrB,GAHSA,EAAA,OAAO,QAASsrB,CAAI,EAGzBH,EAAc,CAEhB,MAAMK,EAAmBL,EAAa,MAAM,GAAG,EAAE,IAAI,EAC5CnrB,EAAA,OAAO,mBAAoBwrB,CAAgB,CACtD,CAEM,MAAAmC,EAAWR,IAAa,WAAa,wBAA0B,mBAC/DjuB,EAAW,MAAMsW,EAAI,KAAKmY,EAAU3tB,EAAU,CAClD,QAAS,CACP,eAAgB,qBAClB,CAAA,CACD,EAEG,GAAAd,EAAS,KAAK,QAAS,CACnB,MAAAusB,EAAYvsB,EAAS,KAAK,KAChCksB,EAAgBK,EAAU,QAAQ,EAE9ByB,GACFA,EAAgBzB,CAAS,EAG3B1U,EAAM,QAAQ7X,EAAS,KAAK,SAAW,6BAA6B,CAAA,MAEpE6X,EAAM,MAAM7X,EAAS,KAAK,SAAW,gBAAgB,QAEhDE,EAAO,CACN,QAAA,MAAM,kBAAmBA,CAAK,EACtC2X,EAAM,QAAMR,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,uBAAuB,CAAA,QACpE,CACA2U,EAAa,EAAK,CACpB,EAAA,EAGIQ,EAAoBrM,GAAU,CAClC,MAAMiM,EAAOjM,EAAM,OAAO,MAAM,CAAC,EAC7BiM,GACFD,EAAiBC,CAAI,CACvB,EAGIsC,EAAcvO,GAAU,CAC5BA,EAAM,eAAe,EACrBmO,EAAY,EAAK,EAEX,MAAAK,EAAQxO,EAAM,aAAa,MAC7BwO,EAAM,OAAS,GACAxC,EAAAwC,EAAM,CAAC,CAAC,CAC3B,EAGIC,EAAkBzO,GAAU,CAChCA,EAAM,eAAe,EACrBmO,EAAY,EAAI,CAAA,EAGZO,EAAmB1O,GAAU,CACjCA,EAAM,eAAe,EACrBmO,EAAY,EAAK,CAAA,EAGbQ,EAAc,IAAM,CACxB5C,EAAgB,IAAI,EAChB8B,GACFA,EAAgB,IAAI,EAElBO,EAAa,UACfA,EAAa,QAAQ,MAAQ,GAC/B,EAGIQ,EAAmB,IAAM,CACzBR,EAAa,SACfA,EAAa,QAAQ,OACvB,EAGF,OACGrN,EAAA,KAAA,MAAA,CAAI,UAAW,YAAYwC,CAAS,GAEnC,SAAA,CAAA5J,EAAA,IAAC,QAAA,CACC,IAAKyU,EACL,KAAK,OACL,OAAQL,EAAc,KAAK,GAAG,EAC9B,SAAU1B,EACV,UAAU,QAAA,CACZ,EAGAtL,EAAA,KAAC,MAAA,CACC,QAAS6N,EACT,OAAQL,EACR,WAAYE,EACZ,YAAaC,EACb,UAAW;AAAA;AAAA,YAEPR,EACE,6BACA,uCACJ;AAAA,YACEtC,EAAY,iCAAmC,EAAE;AAAA,UAGpD,SAAA,CAAAE,EAEC/K,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAAApH,EAAA,IAAC,MAAA,CACC,IAAKmS,EACL,IAAI,UACJ,UAAU,qCAAA,CACZ,EAGA/K,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACZ,SAAA,CACCkN,GAAAtU,EAAA,IAAC,SAAA,CACC,QAAUtiB,GAAM,CACdA,EAAE,gBAAgB,EACNs3B,GACd,EACA,UAAU,4EACV,MAAM,iBAEN,SAAAhV,EAAAA,IAACoR,GAAO,CAAA,UAAU,SAAU,CAAA,CAAA,CAC9B,EAEFpR,EAAA,IAAC,SAAA,CACC,QAAUtiB,GAAM,CACdA,EAAE,gBAAgB,EACDu3B,GACnB,EACA,UAAU,8EACV,MAAM,gBAEN,SAAAjV,EAAAA,IAAC2S,GAAO,CAAA,UAAU,SAAU,CAAA,CAAA,CAC9B,CAAA,EACF,QAGC,MAAI,CAAA,UAAU,qIACb,SAACvL,EAAA,KAAA,MAAA,CAAI,UAAU,yEACb,SAAA,CAACpH,EAAAA,IAAA2S,GAAA,CAAO,UAAU,sBAAuB,CAAA,EACxC3S,EAAA,IAAA,IAAA,CAAE,UAAU,UAAU,SAAkB,qBAAA,CAAA,CAAA,CAC3C,CACF,CAAA,CAAA,EACF,EAGAA,EAAAA,IAAC,OAAI,UAAU,OACZ,WACEoH,EAAAA,KAAA,MAAA,CAAI,UAAU,6BACb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,qEAAsE,CAAA,EACpFA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAAkB,qBAAA,CAAA,CACzD,CAAA,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,OACb,eAACkV,GAAU,CAAA,UAAU,0BAA0B,CACjD,CAAA,EACClV,EAAA,IAAA,IAAA,CAAE,UAAU,6BACV,SACHqU,EAAA,EACAjN,EAAAA,KAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,CAAA,6BACRmL,EAAQ,IAAA,EACrC,CAAA,CAAA,CACF,CAEJ,CAAA,EAIDgC,SACE,MAAI,CAAA,UAAU,yFACb,SAACnN,EAAAA,KAAA,MAAA,CAAI,UAAU,gBACb,SAAA,CAACpH,EAAAA,IAAAmV,GAAA,CAAO,UAAU,sBAAuB,CAAA,EACxCnV,EAAA,IAAA,IAAA,CAAE,UAAU,sBAAsB,SAAmB,sBAAA,CAAA,CAAA,CACxD,CACF,CAAA,CAAA,CAAA,CAEJ,EAGC,CAACmS,GACAnS,EAAA,IAAC,IAAE,CAAA,UAAU,yCAAyC,SAEtD,8DAAA,CAEJ,CAAA,CAAA,CAEJ,EChOMoV,GAAW,IAAM,CACrB,MAAM5Q,EAAWC,KACX,CAAE,MAAAnE,EAAO,WAAAI,CAAW,EAAIN,GAAS,EACjC,CAACkM,EAAWC,CAAY,EAAIvN,WAAS,EAAK,EAC1C,CAACqW,EAAeC,CAAgB,EAAItW,WAAS,IAAI,EAEjD,CACJ,SAAAwN,EACA,aAAAC,EACA,MAAAY,EACA,UAAW,CAAE,OAAApC,CAAO,GAClByB,GAAQ,EAEN6I,EAASlI,EAAM,SAAS,EAE9B3N,EAAAA,UAAU,IAAM,CACVY,EAAM,SAAW,GACRI,GACb,EACC,CAACJ,EAAOI,CAAU,CAAC,EAEhB,MAAAiM,EAAW,MAAOnnB,GAAS,CAC/B+mB,EAAa,EAAI,EAEb,GAAA,CAEF,MAAM9D,EAAS,CACb,GAAGjjB,EACH,WAAW6vB,GAAA,YAAAA,EAAe,WAAY,IAAA,EAGlCj2B,EAAS,MAAMopB,GAAU,SAASC,CAAM,EAE1CrpB,EAAO,SACT2e,EAAM,QAAQ,6BAA6B,EAC3CyG,EAAS,YAAY,GAEfzG,EAAA,MAAM3e,EAAO,OAAO,OAEd,CACd2e,EAAM,MAAM,uBAAuB,CACrC,CAEAwO,EAAa,EAAK,CAAA,EAGdiJ,EAAuB/C,GAAc,CACzC6C,EAAiB7C,CAAS,CAAA,EAI1B,OAAAzS,EAAAA,IAAC,MAAI,CAAA,UAAU,+BACb,SAAAA,EAAAA,IAAC,MAAI,CAAA,UAAU,mCACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,qBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,4DAAA,CAAA,EACF,SAEC,OAAK,CAAA,SAAUyM,EAAaE,CAAQ,EAAG,UAAU,YAEhD,SAAA,CAAAvF,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,kBAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACb,SAAA,CAACA,EAAAA,KAAA,QAAA,CAAM,UAAU,0EACf,SAAA,CAAApH,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,UAAW,CAAE,SAAU,8BAA+B,EACnE,KAAK,QACL,MAAM,QACN,UAAU,MAAA,CACZ,SACC,MACC,CAAA,SAAA,CAACxM,EAAA,IAAA,MAAA,CAAI,UAAU,cAAc,SAAK,QAAA,EACjCA,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAa,gBAAA,CAAA,EACtD,CAAA,EACF,EAEAoH,EAAAA,KAAC,QAAM,CAAA,UAAU,0EACf,SAAA,CAAApH,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,UAAW,CAAE,SAAU,8BAA+B,EACnE,KAAK,QACL,MAAM,QACN,UAAU,MAAA,CACZ,SACC,MACC,CAAA,SAAA,CAACxM,EAAA,IAAA,MAAA,CAAI,UAAU,cAAc,SAAK,QAAA,EACjCA,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAgB,mBAAA,CAAA,EACzD,CAAA,EACF,EAEAoH,EAAAA,KAAC,QAAM,CAAA,UAAU,0EACf,SAAA,CAAApH,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,UAAW,CAAE,SAAU,8BAA+B,EACnE,KAAK,QACL,MAAM,UACN,UAAU,MAAA,CACZ,SACC,MACC,CAAA,SAAA,CAACxM,EAAA,IAAA,MAAA,CAAI,UAAU,cAAc,SAAO,UAAA,EACnCA,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAqB,wBAAA,CAAA,EAC9D,CAAA,EACF,CAAA,EACF,EACCiL,EAAO,SACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,QAAQ,OAAQ,CAAA,CAAA,EAErE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,UAAU,UAAU,+CAA+C,SAElF,OAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAoJ,GAAA,CAAQ,UAAU,0EAA2E,CAAA,EAC9FhC,EAAA,KAAC,SAAA,CACE,GAAGoF,EAAS,UAAW,CAAE,SAAU,oBAAqB,EACzD,UAAW,yHACTvB,EAAO,QAAU,iBAAmB,iBACtC,GAEA,SAAA,CAACjL,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAiB,oBAAA,EACjCM,EAAM,IAAKiH,GACTvH,EAAAA,IAAA,SAAA,CAAsB,MAAOuH,EAAK,IAChC,SAAAA,EAAK,IADK,EAAAA,EAAK,GAElB,CACD,CAAA,CAAA,CACH,CAAA,EACF,EACC0D,EAAO,SACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,QAAQ,OAAQ,CAAA,CAAA,EAErE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,QAAQ,UAAU,+CAA+C,SAEhF,oBAAA,EACAA,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,QAAS,CACpB,SAAU,uBACV,UAAW,CACT,MAAO,GACP,QAAS,0CACX,CAAA,CACD,EACD,KAAK,OACL,UAAW,mHACTvB,EAAO,MAAQ,iBAAmB,iBACpC,GACA,YAAY,gDAAA,CACd,EACCA,EAAO,OACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,MAAM,OAAQ,CAAA,CAAA,EAEnE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,cAAc,UAAU,+CAA+C,SAEtF,YAAA,EACAA,EAAA,IAAC,WAAA,CACE,GAAGwM,EAAS,cAAe,CAC1B,SAAU,0BACV,UAAW,CACT,MAAO,GACP,QAAS,6CACX,CAAA,CACD,EACD,KAAM,EACN,UAAW,mHACTvB,EAAO,YAAc,iBAAmB,iBAC1C,GACA,YAAY,qEAAA,CACd,EACCA,EAAO,aACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,YAAY,OAAQ,CAAA,CAAA,EAEzE,SAGC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,kBAAA,EACAA,EAAA,IAACiU,GAAA,CACC,gBAAiBuB,EACjB,SAAS,MACT,YAAY,0DACZ,UAAU,QAAA,CACZ,EACCxV,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAE1C,2DAAA,CAAA,EACF,EAGCuV,IAAW,SACVnO,EAAAA,KAAC,MACC,CAAA,SAAA,CAAApH,MAAC,QAAM,CAAA,QAAQ,QAAQ,UAAU,+CAA+C,SAEhF,aAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAmQ,GAAA,CAAW,UAAU,0EAA2E,CAAA,EACjGnQ,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,QAAS,CACpB,SAAU+I,IAAW,QAAU,kCAAoC,GACnE,IAAK,CACH,MAAO,EACP,QAAS,+BACX,CAAA,CACD,EACD,KAAK,SACL,KAAK,OACL,UAAW,yHACTtK,EAAO,MAAQ,iBAAmB,iBACpC,GACA,YAAY,MAAA,CACd,CAAA,EACF,EACCA,EAAO,OACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,MAAM,OAAQ,CAAA,CAAA,EAEnE,EAIDsK,IAAW,SACVnO,EAAAA,KAAC,MACC,CAAA,SAAA,CAAApH,MAAC,QAAM,CAAA,QAAQ,gBAAgB,UAAU,+CAA+C,SAExF,6BAAA,EACAA,EAAA,IAAC,WAAA,CACE,GAAGwM,EAAS,gBAAiB,CAC5B,SAAU+I,IAAW,QAAU,wCAA0C,EAAA,CAC1E,EACD,KAAM,EACN,UAAW,mHACTtK,EAAO,cAAgB,iBAAmB,iBAC5C,GACA,YAAY,sDAAA,CACd,EACCA,EAAO,eACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,cAAc,OAAQ,CAAA,CAAA,EAE3E,SAID,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,WAAW,UAAU,+CAA+C,SAEnF,aAAA,EACAoH,EAAA,KAAC,SAAA,CACE,GAAGoF,EAAS,WAAY,CAAE,SAAU,yBAA0B,EAC/D,UAAW,mHACTvB,EAAO,SAAW,iBAAmB,iBACvC,GAEA,SAAA,CAACjL,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAsB,yBAAA,EACtCA,EAAA,IAAA,SAAA,CAAO,MAAM,KAAK,SAAE,KAAA,EACpBA,EAAA,IAAA,SAAA,CAAO,MAAM,gBAAgB,SAAa,gBAAA,EAC1CA,EAAA,IAAA,SAAA,CAAO,MAAM,gBAAgB,SAAa,gBAAA,EAC1CA,EAAA,IAAA,SAAA,CAAO,MAAM,kBAAkB,SAAe,kBAAA,EAC9CA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAQ,WAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,kBAAkB,SAAe,kBAAA,CAAA,CAAA,CACjD,EACCiL,EAAO,UACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,SAAS,OAAQ,CAAA,CAAA,EAEtE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,YAAY,UAAU,+CAA+C,SAEpF,iBAAA,EACAoH,EAAA,KAAC,SAAA,CACE,GAAGoF,EAAS,YAAa,CAAE,SAAU,6BAA8B,EACpE,UAAW,mHACTvB,EAAO,UAAY,iBAAmB,iBACxC,GAEA,SAAA,CAACjL,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAkB,qBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAc,iBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAA2B,8BAAA,EACnDA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAkB,qBAAA,EACvCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAA2B,8BAAA,CAAA,CAAA,CACrD,EACCiL,EAAO,WACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,UAAU,OAAQ,CAAA,CAAA,EAEvE,EAGA7D,EAAAA,KAAC,MAAI,CAAA,UAAU,kCACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAAS,IAAMjF,EAAS,YAAY,EACrC,SAAA,UAAA,CAED,EACAxE,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,QAAS6C,EACV,SAAA,eAAA,CAED,CAAA,EACF,CAAA,EACF,CAAA,EACF,EACF,CACF,CAAA,CAEJ,ECnUMmJ,GAAS,IAAM,CACb,KAAA,CAAE,KAAA5U,GAASsK,KACX3G,EAAWC,KACX,CAAE,MAAAnE,EAAO,WAAAI,CAAW,EAAIN,GAAS,EACjC,CAACkM,EAAWC,CAAY,EAAIvN,WAAS,EAAK,EAC1C,CAAC0W,EAAaC,CAAc,EAAI3W,WAAS,EAAI,EAC7C,CAACqW,EAAeC,CAAgB,EAAItW,WAAS,IAAI,EACjD,CAAC4W,EAAiBC,CAAkB,EAAI7W,WAAS,IAAI,EAErD,CACJ,SAAAwN,EACA,aAAAC,EACA,MAAAY,EACA,MAAA+F,EACA,UAAW,CAAE,OAAAnI,CAAO,GAClByB,GAAQ,EAEN6I,EAASlI,EAAM,SAAS,EAE9B3N,EAAAA,UAAU,IAAM,CACd,MAAMoW,EAAa,SAAY,CAC7BH,EAAe,EAAI,EAEf,GAAA,CAEF,MAAMv2B,EAAS,MAAMopB,GAAU,aAAa3H,CAAI,EAChD,GAAIzhB,EAAO,QAAS,CACZ,MAAA+jB,EAAK/jB,EAAO,KAAK,GAGjBg0B,EAAA,CACJ,QAASjQ,EAAG,QACZ,MAAOA,EAAG,MACV,YAAaA,EAAG,YAChB,QAASA,EAAG,QACZ,SAAUA,EAAG,SACb,UAAWA,EAAG,UACd,MAAOA,EAAG,OAAS,GACnB,cAAeA,EAAG,eAAiB,EAAA,CACpC,EAGGA,EAAG,WACL0S,EAAmB1S,EAAG,SAAS,CACjC,MAEMpF,EAAA,MAAM3e,EAAO,OAAO,EAC1BolB,EAAS,YAAY,OAET,CACdzG,EAAM,MAAM,0BAA0B,EACtCyG,EAAS,YAAY,CACvB,CAEAmR,EAAe,EAAK,CAAA,EAGlBrV,EAAM,SAAW,GACRI,IAGFoV,GAAA,EACV,CAACjV,EAAMP,EAAOI,EAAY0S,EAAO5O,CAAQ,CAAC,EAEvC,MAAAgR,EAAuB/C,GAAc,CACzC6C,EAAiB7C,CAAS,EAExBoD,EADEpD,EACiBA,EAAU,SAEV,IAFkB,CAGvC,EAGI9F,EAAW,MAAOnnB,GAAS,CAC/B+mB,EAAa,EAAI,EAEb,GAAA,CAEF,MAAMwJ,EAAa,CACjB,GAAGvwB,EACH,WAAW6vB,GAAA,YAAAA,EAAe,WAAYO,GAAmB,IAAA,EAGrDx2B,EAAS,MAAMopB,GAAU,SAAS3H,EAAMkV,CAAU,EAEpD32B,EAAO,SACT2e,EAAM,QAAQ,iCAAiC,EAC/CyG,EAAS,YAAY,GAEfzG,EAAA,MAAM3e,EAAO,OAAO,OAEd,CACd2e,EAAM,MAAM,2BAA2B,CACzC,CAEAwO,EAAa,EAAK,CAAA,EAGpB,OAAImJ,EAEA1V,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAKF1I,EAAAA,IAAC,MAAI,CAAA,UAAU,+BACb,SAAAA,EAAAA,IAAC,MAAI,CAAA,UAAU,mCACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,iBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,yCAAA,CAAA,EACF,SAEC,OAAK,CAAA,SAAUyM,EAAaE,CAAQ,EAAG,UAAU,YAEhD,SAAA,CAAAvF,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,kBAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACb,SAAA,CAACA,EAAAA,KAAA,QAAA,CAAM,UAAU,0EACf,SAAA,CAAApH,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,UAAW,CAAE,SAAU,8BAA+B,EACnE,KAAK,QACL,MAAM,QACN,UAAU,MAAA,CACZ,SACC,MACC,CAAA,SAAA,CAACxM,EAAA,IAAA,MAAA,CAAI,UAAU,cAAc,SAAK,QAAA,EACjCA,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAa,gBAAA,CAAA,EACtD,CAAA,EACF,EAEAoH,EAAAA,KAAC,QAAM,CAAA,UAAU,0EACf,SAAA,CAAApH,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,UAAW,CAAE,SAAU,8BAA+B,EACnE,KAAK,QACL,MAAM,QACN,UAAU,MAAA,CACZ,SACC,MACC,CAAA,SAAA,CAACxM,EAAA,IAAA,MAAA,CAAI,UAAU,cAAc,SAAK,QAAA,EACjCA,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAgB,mBAAA,CAAA,EACzD,CAAA,EACF,EAEAoH,EAAAA,KAAC,QAAM,CAAA,UAAU,0EACf,SAAA,CAAApH,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,UAAW,CAAE,SAAU,8BAA+B,EACnE,KAAK,QACL,MAAM,UACN,UAAU,MAAA,CACZ,SACC,MACC,CAAA,SAAA,CAACxM,EAAA,IAAA,MAAA,CAAI,UAAU,cAAc,SAAO,UAAA,EACnCA,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAqB,wBAAA,CAAA,EAC9D,CAAA,EACF,CAAA,EACF,EACCiL,EAAO,SACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,QAAQ,OAAQ,CAAA,CAAA,EAErE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,UAAU,UAAU,+CAA+C,SAElF,OAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAoJ,GAAA,CAAQ,UAAU,0EAA2E,CAAA,EAC9FhC,EAAA,KAAC,SAAA,CACE,GAAGoF,EAAS,UAAW,CAAE,SAAU,oBAAqB,EACzD,UAAW,yHACTvB,EAAO,QAAU,iBAAmB,iBACtC,GAEA,SAAA,CAACjL,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAiB,oBAAA,EACjCM,EAAM,IAAKiH,GACTvH,EAAAA,IAAA,SAAA,CAAsB,MAAOuH,EAAK,IAChC,SAAAA,EAAK,IADK,EAAAA,EAAK,GAElB,CACD,CAAA,CAAA,CACH,CAAA,EACF,EACC0D,EAAO,SACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,QAAQ,OAAQ,CAAA,CAAA,EAErE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,QAAQ,UAAU,+CAA+C,SAEhF,oBAAA,EACAA,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,QAAS,CACpB,SAAU,uBACV,UAAW,CACT,MAAO,GACP,QAAS,0CACX,CAAA,CACD,EACD,KAAK,OACL,UAAW,mHACTvB,EAAO,MAAQ,iBAAmB,iBACpC,GACA,YAAY,gDAAA,CACd,EACCA,EAAO,OACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,MAAM,OAAQ,CAAA,CAAA,EAEnE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,cAAc,UAAU,+CAA+C,SAEtF,YAAA,EACAA,EAAA,IAAC,WAAA,CACE,GAAGwM,EAAS,cAAe,CAC1B,SAAU,0BACV,UAAW,CACT,MAAO,GACP,QAAS,6CACX,CAAA,CACD,EACD,KAAM,EACN,UAAW,mHACTvB,EAAO,YAAc,iBAAmB,iBAC1C,GACA,YAAY,qEAAA,CACd,EACCA,EAAO,aACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,YAAY,OAAQ,CAAA,CAAA,EAEzE,SAGC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,qBAAA,EACAA,EAAA,IAACiU,GAAA,CACC,gBAAiBuB,EACjB,aAAcI,EACd,SAAS,MACT,YAAY,2CACZ,UAAU,SACV,YAAa,EAAA,CACf,EACC5V,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAE1C,sEAAA,CAAA,EACF,EAGCuV,IAAW,SACVnO,EAAAA,KAAC,MACC,CAAA,SAAA,CAAApH,MAAC,QAAM,CAAA,QAAQ,QAAQ,UAAU,+CAA+C,SAEhF,aAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAmQ,GAAA,CAAW,UAAU,0EAA2E,CAAA,EACjGnQ,EAAA,IAAC,QAAA,CACE,GAAGwM,EAAS,QAAS,CACpB,SAAU+I,IAAW,QAAU,kCAAoC,GACnE,IAAK,CACH,MAAO,EACP,QAAS,+BACX,CAAA,CACD,EACD,KAAK,SACL,KAAK,OACL,UAAW,yHACTtK,EAAO,MAAQ,iBAAmB,iBACpC,GACA,YAAY,MAAA,CACd,CAAA,EACF,EACCA,EAAO,OACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,MAAM,OAAQ,CAAA,CAAA,EAEnE,EAIDsK,IAAW,SACVnO,EAAAA,KAAC,MACC,CAAA,SAAA,CAAApH,MAAC,QAAM,CAAA,QAAQ,gBAAgB,UAAU,+CAA+C,SAExF,6BAAA,EACAA,EAAA,IAAC,WAAA,CACE,GAAGwM,EAAS,gBAAiB,CAC5B,SAAU+I,IAAW,QAAU,wCAA0C,EAAA,CAC1E,EACD,KAAM,EACN,UAAW,mHACTtK,EAAO,cAAgB,iBAAmB,iBAC5C,GACA,YAAY,sDAAA,CACd,EACCA,EAAO,eACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,cAAc,OAAQ,CAAA,CAAA,EAE3E,SAID,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,WAAW,UAAU,+CAA+C,SAEnF,aAAA,EACAoH,EAAA,KAAC,SAAA,CACE,GAAGoF,EAAS,WAAY,CAAE,SAAU,yBAA0B,EAC/D,UAAW,mHACTvB,EAAO,SAAW,iBAAmB,iBACvC,GAEA,SAAA,CAACjL,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAsB,yBAAA,EACtCA,EAAA,IAAA,SAAA,CAAO,MAAM,KAAK,SAAE,KAAA,EACpBA,EAAA,IAAA,SAAA,CAAO,MAAM,gBAAgB,SAAa,gBAAA,EAC1CA,EAAA,IAAA,SAAA,CAAO,MAAM,gBAAgB,SAAa,gBAAA,EAC1CA,EAAA,IAAA,SAAA,CAAO,MAAM,kBAAkB,SAAe,kBAAA,EAC9CA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAQ,WAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,kBAAkB,SAAe,kBAAA,CAAA,CAAA,CACjD,EACCiL,EAAO,UACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,SAAS,OAAQ,CAAA,CAAA,EAEtE,SAGC,MACC,CAAA,SAAA,CAAAjL,MAAC,QAAM,CAAA,QAAQ,YAAY,UAAU,+CAA+C,SAEpF,iBAAA,EACAoH,EAAA,KAAC,SAAA,CACE,GAAGoF,EAAS,YAAa,CAAE,SAAU,6BAA8B,EACpE,UAAW,mHACTvB,EAAO,UAAY,iBAAmB,iBACxC,GAEA,SAAA,CAACjL,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAkB,qBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAc,iBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAA2B,8BAAA,EACnDA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAkB,qBAAA,EACvCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAA2B,8BAAA,CAAA,CAAA,CACrD,EACCiL,EAAO,WACLjL,MAAA,IAAA,CAAE,UAAU,4BAA6B,SAAAiL,EAAO,UAAU,OAAQ,CAAA,CAAA,EAEvE,EAGA7D,EAAAA,KAAC,MAAI,CAAA,UAAU,kCACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAAS,IAAMjF,EAAS,YAAY,EACrC,SAAA,UAAA,CAED,EACAxE,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,QAAS6C,EACV,SAAA,mBAAA,CAED,CAAA,EACF,CAAA,EACF,CAAA,EACF,EACF,CACF,CAAA,CAEJ,EChYM0J,GAAkB,CAAC,CACE,GAAA7S,EACA,UAAAyG,EAAY,GACZ,KAAAjB,EAAO,KACP,QAAAe,EAAU,UACV,aAAAuM,EAAe,GACf,YAAAC,EAAc,EAChB,IAAM,OAC7B,KAAM,CAAE,gBAAA/W,EAAiB,KAAAf,CAAK,EAAIO,GAAQ,EACpC,CAAE,SAAA+E,EAAU,oBAAAE,EAAqB,UAAAV,EAAW,eAAAG,EAAgB,eAAAE,CAAA,EAAmBvC,KAE/E,CAACmV,EAAcC,CAAe,EAAIpX,WAAS,EAAK,EAChD,CAACqX,EAAiBC,CAAkB,EAAItX,WAAS,CAAC,EAClD,CAAC2E,EAAQ4S,CAAS,EAAIvX,WAAS,EAAK,EAGpCwX,EAAeC,GAAM,QAAQ,IAAM,OAKnC,MAJA,GAACtT,GACD,CAAChE,GACDgE,EAAG,UAAY,SACfA,EAAG,SAAW,UACd/E,IAASA,EAAK,MAAQ+E,EAAG,SAAW/E,EAAK,QAAQjB,EAAAgG,EAAG,OAAH,YAAAhG,EAAS,MAE7D,EAAA,CAACgG,EAAIhE,EAAiBf,CAAI,CAAC,EAG9BsB,EAAAA,UAAU,IAAM,CACV,GAAAyD,GAAA,MAAAA,EAAI,KAAOhE,EAAiB,CACxB,MAAAuX,EAAahT,EAASP,EAAG,GAAG,EAC5BrC,EAAW8C,EAAoBT,EAAG,GAAG,EAE3C,QAAQ,IAAI,yCAA0C,CACpD,KAAMA,EAAG,IACT,WAAAuT,EACA,SAAA5V,EACA,aAAA0V,CAAA,CACD,EAEDD,EAAUG,CAAU,EACpBJ,EAAmBxV,CAAQ,CAAA,MAE3ByV,EAAU,EAAK,EACfD,EAAmB,CAAC,CACtB,EACC,CAACnT,GAAA,YAAAA,EAAI,IAAKhE,EAAiBuE,EAAUE,CAAmB,CAAC,EAG5D,MAAM+S,EAAkB,SAAY,OAClC,GAAI,CAACH,EAAc,CACZrX,EAEMgE,EAAG,UAAY,QACxBpF,EAAM,KAAK,4DAA4D,EAC9DK,IAASA,EAAK,MAAQ+E,EAAG,SAAW/E,EAAK,QAAQjB,EAAAgG,EAAG,OAAH,YAAAhG,EAAS,MACnEY,EAAM,KAAK,yDAAyD,EAEpEA,EAAM,KAAK,+CAA+C,EAN1DA,EAAM,KAAK,6CAA6C,EAQ1D,MACF,CAEAqY,EAAgB,EAAI,EAEhB,GAAA,EACa,MAAMlT,EAAUC,EAAI,CAAC,GAEzB,SAET,QAAQ,IAAI,+BAA+B,QAEtC/c,EAAO,CACN,QAAA,MAAM,mCAAoCA,CAAK,EACvD2X,EAAM,MAAM,+BAA+B,CAC7C,CAEAqY,EAAgB,EAAK,CAAA,EAIjBQ,EAAuB,MAAOC,GAAgB,CAC9C,GAAA,EAAAA,EAAc,GAAKA,EAAcX,GAErC,CAAAE,EAAgB,EAAI,EAEhB,GAAA,CACES,IAAgB,GACH,MAAMtT,EAAeJ,EAAG,GAAG,GAC/B,SACT,QAAQ,IAAI,6BAA6B,GAG5B,MAAME,EAAeF,EAAG,IAAK0T,CAAW,GAC5C,SACT,QAAQ,IAAI,yBAAyB,QAGlCzwB,EAAO,CACN,QAAA,MAAM,kCAAmCA,CAAK,EACtD2X,EAAM,MAAM,8BAA8B,CAC5C,CAEAqY,EAAgB,EAAK,EAAA,EAIjBU,EAAuB,SAAY,CACvCV,EAAgB,EAAI,EAEhB,GAAA,EACa,MAAM7S,EAAeJ,EAAG,GAAG,GAC/B,SACT,QAAQ,IAAI,6BAA6B,QAEpC/c,EAAO,CACN,QAAA,MAAM,iCAAkCA,CAAK,EACrD2X,EAAM,MAAM,6BAA6B,CAC3C,CAEAqY,EAAgB,EAAK,CAAA,EAIvB,OAAKI,EA+CD7S,GAAU0S,EAAkB,GAAKJ,EAE9B7O,EAAA,KAAA,MAAA,CAAI,UAAW,4BAA4BwC,CAAS,GACnD,SAAA,CAAA5J,EAAA,IAACyJ,EAAA,CACG,QAAS,IAAMmN,EAAqBP,EAAkB,CAAC,EACvD,SAAUF,GAAgBE,GAAmB,EAC7C,QAAQ,UACR,KAAA1N,EACA,UAAU,4BAEZ,SAAA3I,EAAAA,IAAC+W,GAAM,CAAA,UAAU,SAAU,CAAA,CAAA,CAC7B,EAEA/W,EAAAA,IAAC,OAAI,UAAU,sGACb,eAAC,OAAK,CAAA,UAAU,8BAA+B,SAAAqW,CAAA,CAAgB,CACjE,CAAA,EAEArW,EAAA,IAACyJ,EAAA,CACG,QAAS,IAAMmN,EAAqBP,EAAkB,CAAC,EACvD,SAAUF,GAAgBE,GAAmBH,EAC7C,QAAQ,UACR,KAAAvN,EACA,UAAU,4BAEZ,SAAA3I,EAAAA,IAACyH,GAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CAC5B,EAEAzH,EAAA,IAACyJ,EAAA,CACG,QAASqN,EACT,SAAUX,EACV,QAAQ,SACR,KAAAxN,EACA,UAAU,OACV,MAAM,sBAER,SAAA3I,EAAAA,IAACoI,GAAE,CAAA,UAAU,SAAU,CAAA,CAAA,CACzB,CACF,CAAA,CAAA,EAKFzE,GAAU0S,EAAkB,GAAK,CAACJ,EAEhC7O,EAAA,KAACqC,EAAA,CACG,QAASqN,EACT,SAAUX,EACV,QAAQ,UACR,KAAAxN,EACA,UAAAiB,EAEF,SAAA,CAAC5J,EAAAA,IAAAgX,GAAA,CAAM,UAAU,cAAe,CAAA,EAAE,gBACpBX,EAAgB,GAAA,CAAA,CAAA,EAOlCjP,EAAA,KAACqC,EAAA,CACG,QAASkN,EACT,SAAUR,EACV,QAAAzM,EACA,KAAAf,EACA,UAAAiB,EACA,QAASuM,EAEX,SAAA,CAACnW,EAAAA,IAAA0H,GAAA,CAAa,UAAU,cAAe,CAAA,EAAE,uBAAA,CAAA,CAAA,EAjHxCvI,EAcDf,IAASA,EAAK,OAAQ+E,GAAA,YAAAA,EAAI,UAAW/E,EAAK,QAAQjB,EAAAgG,GAAA,YAAAA,EAAI,OAAJ,YAAAhG,EAAU,MAE1DiK,EAAA,KAACqC,EAAA,CACG,SAAQ,GACR,QAAQ,UACR,KAAAd,EACA,UAAW,GAAGiB,CAAS,iCAEzB,SAAA,CAAC5J,EAAAA,IAAAoI,GAAA,CAAE,UAAU,cAAe,CAAA,EAAE,aAAA,CAAA,CAAA,GAMlCjF,GAAA,YAAAA,EAAI,WAAY,QAEdiE,EAAA,KAACqC,EAAA,CACG,SAAQ,GACR,QAAQ,UACR,KAAAd,EACA,UAAW,GAAGiB,CAAS,iCAEzB,SAAA,CAAC5J,EAAAA,IAAAoI,GAAA,CAAE,UAAU,cAAe,CAAA,EAAE,cAAA,CAAA,CAAA,EAM/B,KAxCDhB,EAAA,KAACqC,EAAA,CACG,QAAS,IAAM1L,EAAM,KAAK,uCAAuC,EACjE,QAAQ,UACR,KAAA4K,EACA,UAAAiB,EAEF,SAAA,CAAC5J,EAAAA,IAAA0H,GAAA,CAAa,UAAU,cAAe,CAAA,EAAE,YAAA,CAAA,CAAA,CA6GrD,ECvPMuP,GAAa,IAAM,CAEvB,MAAoB,oBAClB,MAAuB,CAAA,EAAA,oBAIzB,GAA2B,OAAO,SAAS,WAAa,aAAe,OAAO,SAAS,WAAa,YAClG,MAAO,mCAIT,GAAI,OAAO,SAAS,WAAa,aAAe,OAAO,SAAS,WAAa,YAE3E,MAAO,cAIT,MAAM3iB,EAAW,OAAO,SAAS,SAC3BoI,EAAW,OAAO,SAAS,SAGjC,MAAO,GAAGpI,CAAQ,KAAKoI,CAAQ,kBACjC,EAEMwa,GAAWD,GAAU,EAEdE,GAAa,CAExB,SAAU,CACR,KAAM,GAAGD,EAAQ,qCACjB,GAAI,GAAGA,EAAQ,+BACf,KAAM,GAAGA,EAAQ,4BAClB,EAGD,YAAYE,EAAWz4B,EAAO,KAAMgqB,EAAO,SAAU,CAEnD,MAAI,CAACyO,GAAaA,IAAc,IAAMA,IAAc,KAC3C,KAAK,SAASz4B,CAAI,EAIvBy4B,EAAU,WAAW,GAAGF,EAAQ,GAAG,EAC9BE,EAILA,EAAU,WAAW,oCAAoC,EACpDA,EAAU,QAAQ,gBAAiB,cAAc,EAItDA,EAAU,WAAW,MAAM,EACtB,KAAK,SAASz4B,CAAI,EAIpB,GAAGu4B,EAAQ,IAAIv4B,CAAI,IAAIgqB,CAAI,IAAIyO,CAAS,EAChD,EAGD,UAAUA,EAAWz4B,EAAO,KAAM,CAChC,MAAM04B,EAAU,KAAK,YAAYD,EAAWz4B,EAAM,QAAQ,EACpD24B,EAAWD,EAAQ,QAAQ,WAAY,GAAG,EAC1CE,EAAW,KAAK,YAAYF,CAAO,EAEzC,MAAO,CACL,GAAGC,CAAQ,aAAaC,CAAQ,QAChC,GAAGD,CAAQ,UAAUC,CAAQ,QAC7B,GAAGD,CAAQ,SAASC,CAAQ,QAClC,EAAM,KAAK,IAAI,CACZ,EAGD,YAAYlvB,EAAK,CACf,OAAOA,EAAI,MAAM,GAAG,EAAE,IAAG,CAC1B,EAGD,MAAM,iBAAiBA,EAAK,CAC1B,GAAI,CAEF,OADiB,MAAM,MAAMA,EAAK,CAAE,OAAQ,MAAM,CAAE,GACpC,EACtB,MAAY,CACN,MAAO,EACR,CACF,EAGD,kBAAkBiqB,EAAMkF,EAAY,GAAI,CAGtC,MAFqB,CAAC,YAAa,aAAc,YAAa,YAAa,YAAY,EAErE,SAASlF,EAAK,IAAI,EAIjBA,EAAK,MAAQ,KAAO,MACtBkF,EACR,CAAE,MAAO,GAAO,MAAO,gCAAgCA,CAAS,OAGlE,CAAE,MAAO,IARP,CAAE,MAAO,GAAO,MAAO,2DAA2D,CAS5F,EAGD,MAAM,gBAAgBlF,EAAMmF,EAAW,KAAMC,EAAY,IAAKC,EAAU,GAAK,CAC3E,OAAO,IAAI,QAAShpB,GAAY,CAC9B,MAAMipB,EAAS,SAAS,cAAc,QAAQ,EACxCC,EAAMD,EAAO,WAAW,IAAI,EAC5BE,EAAM,IAAI,MAEhBA,EAAI,OAAS,IAAM,CAEjB,GAAI,CAAE,MAAAC,EAAO,OAAAC,CAAQ,EAAGF,EAEpBC,EAAQN,IACVO,EAAUA,EAASP,EAAYM,EAC/BA,EAAQN,GAGNO,EAASN,IACXK,EAASA,EAAQL,EAAaM,EAC9BA,EAASN,GAIXE,EAAO,MAAQG,EACfH,EAAO,OAASI,EAChBH,EAAI,UAAUC,EAAK,EAAG,EAAGC,EAAOC,CAAM,EAGtCJ,EAAO,OAAOjpB,EAAS,aAAcgpB,CAAO,CACpD,EAEMG,EAAI,IAAM,IAAI,gBAAgBxF,CAAI,CACxC,CAAK,CACF,CACH,ECxIM2F,GAAY,CAAC,CACjB,IAAAC,EACA,IAAAC,EACA,KAAAx5B,EAAO,KACP,KAAAgqB,EAAO,SACP,UAAAiB,EAAY,GACZ,aAAAwO,EAAe,KACf,GAAGt2B,CACL,IAAM,CACJ,KAAM,CAACu2B,EAAUC,CAAW,EAAItZ,WAAS,EAAK,EACxC,CAACsN,EAAWC,CAAY,EAAIvN,WAAS,EAAI,EAEzCuZ,EAAWF,EAAWlB,GAAW,SAASx4B,CAAI,EAAIw4B,GAAW,YAAYe,EAAKv5B,EAAMgqB,CAAI,EAExF6P,EAAc,IAAM,CACnBH,IACHC,EAAY,EAAI,EAChB/L,EAAa,EAAK,EACpB,EAGIkM,EAAa,IAAM,CACvBlM,EAAa,EAAK,CAAA,EAGpB,OACGnF,EAAA,KAAA,MAAA,CAAI,UAAW,YAAYwC,CAAS,GAClC,SAAA,CACC0C,GAAAtM,EAAAA,IAAC,MAAI,CAAA,UAAU,oDAAqD,CAAA,EAGtEA,EAAA,IAAC,MAAA,CACC,IAAKuY,EACL,IAAAJ,EACA,QAASK,EACT,OAAQC,EACR,UAAW,GAAG7O,CAAS,IAAI0C,EAAY,YAAc,aAAa,mCACjE,GAAGxqB,CAAA,CACN,EAECu2B,GAAYD,GACXpY,EAAAA,IAAC,MAAI,CAAA,UAAU,wEACZ,SACHoY,EAAA,CAEJ,CAAA,CAAA,CAEJ,EC/BMM,GAAc,CAAC,CAAE,GAAAvV,EAAI,QAAAwV,EAAU,MAAY,CAC/C,KAAM,CAAE,gBAAAxZ,EAAiB,KAAAf,CAAK,EAAIO,GAAQ,EACpC,CAACoP,EAAWC,CAAY,EAAIhP,EAAA,SAAS,CAAE,CAAA,EACvC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAAC4Z,EAAaC,CAAc,EAAI7Z,WAAS,EAAE,EAC3C,CAAC8Z,EAAkBC,CAAmB,EAAI/Z,WAAS,EAAI,EACvD,CAACga,EAAoBC,CAAqB,EAAIja,WAAS,EAAK,EAC5D,CAACka,EAAmBC,CAAoB,EAAIna,WAAS,IAAI,EACzD,CAACoP,EAAYC,CAAa,EAAIrP,WAAS,EAAE,EAGzC,CAACoa,EAAWC,CAAY,EAAIra,WAAS,IAAI,EAE/CU,EAAAA,UAAU,IAAM,CACVyD,GAAA,MAAAA,EAAI,MACE,QAAA,IAAI,wCAAyCA,EAAG,GAAG,EAC7CqL,IAChB,EACC,CAACrL,GAAA,YAAAA,EAAI,GAAG,CAAC,EAEZ,MAAMqL,EAAgB,SAAY,OAC5B,GAAA,EAACrL,GAAA,MAAAA,EAAI,KAAK,CACZ,QAAQ,IAAI,gCAAgC,EAC5C,MACF,CAEAjE,EAAW,EAAI,EAEX,GAAA,CACF,QAAQ,IAAI,yCAAyC,EAErD,MAAM9f,EAAS,MAAMkuB,GAAiB,eAAenK,EAAG,GAAG,EAiB3D,GAfQ,QAAA,IAAI,8BAA+B/jB,CAAM,EAe7CA,EAAO,QAAS,CAClB,MAAMk6B,IAAgBnc,EAAA/d,EAAO,OAAP,YAAA+d,EAAa,YAAa,CAAA,EAChD6Q,EAAasL,CAAa,EAE1B,QAAQ,IAAI,0BAA2B,CACrC,MAAOA,EAAc,OACrB,UAAWA,EAAc,IAAUl8B,IAAA,CACjC,GAAIA,EAAE,IACN,SAAUA,EAAE,SAAS,UAAU,EAAG,EAAE,EAAI,MACxC,OAAQA,EAAE,OACV,SAAUA,EAAE,SAAA,EACZ,CAAA,CACH,CAAA,MAEO,QAAA,MAAM,gCAAiCgC,EAAO,OAAO,EACvD2e,EAAA,MAAM3e,EAAO,OAAO,EAC1B4uB,EAAa,CAAE,CAAA,QAEV5nB,EAAO,CACN,QAAA,MAAM,yCAA0CA,CAAK,EAC7D2X,EAAM,MAAM,4BAA4B,EACxCiQ,EAAa,CAAE,CAAA,CACjB,CAEA9O,EAAW,EAAK,CAAA,EAGZqa,EAAoB,MAAO77B,GAAM,CAGrC,GAFAA,EAAE,eAAe,EAEb,CAACyhB,EAAiB,CACpBpB,EAAM,KAAK,iCAAiC,EAC5C,MACF,CAEI,GAAA,CAAC6a,EAAY,OAAQ,CACvB7a,EAAM,MAAM,qBAAqB,EACjC,MACF,CAEA,GAAI6a,EAAY,OAAO,OAAS,GAAI,CAClC7a,EAAM,MAAM,4CAA4C,EACxD,MACF,CAEAkb,EAAsB,EAAI,EAEtB,GAAA,CACF,QAAQ,IAAI,wBAAyB,CACnC,KAAM9V,EAAG,IACT,SAAUyV,EAAY,KAAK,EAC3B,SAAUE,EACV,OAAQ1a,EAAK,GAAA,CACd,EAEK,MAAAhf,EAAS,MAAMkuB,GAAiB,YAClCnK,EAAG,IACHyV,EAAY,KAAK,EACjBE,CAAA,EAGI,QAAA,IAAI,yBAA0B15B,CAAM,EAExCA,EAAO,SACH2e,EAAA,QAAQ3e,EAAO,SAAW,8BAA8B,EAC9Dy5B,EAAe,EAAE,EAGjB,WAAW,IAAM,CACDrK,KACb,GAAG,GAEAzQ,EAAA,MAAM3e,EAAO,OAAO,QAErBgH,EAAO,CACN,QAAA,MAAM,8BAA+BA,CAAK,EAClD2X,EAAM,MAAM,yBAAyB,CACvC,CAEAkb,EAAsB,EAAK,CAAA,EAGvBxK,EAAuB,MAAOhB,GAAe,CAC7C,GAAA,CAACW,EAAW,OAAQ,CACtBrQ,EAAM,MAAM,qBAAqB,EACjC,MACF,CAEA,GAAIqQ,EAAW,OAAO,OAAS,EAAG,CAChCrQ,EAAM,MAAM,2CAA2C,EACvD,MACF,CAEI,GAAA,CACF,QAAQ,IAAI,wBAAyB,CACnC,WAAA0P,EACA,OAAQW,EAAW,KAAK,CAAA,CACzB,EAED,MAAMhvB,EAAS,MAAMkuB,GAAiB,eAAeG,EAAYW,EAAW,MAAM,EAE9EhvB,EAAO,SACH2e,EAAA,QAAQ3e,EAAO,SAAW,8BAA8B,EAC9D+5B,EAAqB,IAAI,EACzB9K,EAAc,EAAE,EAGhB,WAAW,IAAM,CACDG,KACb,GAAG,GAEAzQ,EAAA,MAAM3e,EAAO,OAAO,QAErBgH,EAAO,CACN,QAAA,MAAM,iCAAkCA,CAAK,EACrD2X,EAAM,MAAM,4BAA4B,CAC1C,CAAA,EAGIyb,EAAuB,MAAO/L,GAAe,CACjD,GAAK,OAAO,QAAQ,+CAA+C,EAI/D,GAAA,CACF,MAAMruB,EAAS,MAAMkuB,GAAiB,eAAeG,CAAU,EAE3DruB,EAAO,SACH2e,EAAA,QAAQ3e,EAAO,SAAW,+BAA+B,EAG/D,WAAW,IAAM,CACDovB,KACb,GAAG,GAEAzQ,EAAA,MAAM3e,EAAO,OAAO,QAErBgH,EAAO,CACN,QAAA,MAAM,+BAAgCA,CAAK,EACnD2X,EAAM,MAAM,0BAA0B,CACxC,CAAA,EAGI0b,EAAyB,MAAOhM,GAAe,CAC/C,GAAA,CACF,MAAMruB,EAAS,MAAMkuB,GAAiB,yBAAyBG,CAAU,EAErEruB,EAAO,SACH2e,EAAA,QAAQ3e,EAAO,SAAW,uBAAuB,EAGvD,WAAW,IAAM,CACDovB,KACb,GAAG,GAEAzQ,EAAA,MAAM3e,EAAO,OAAO,QAErBgH,EAAO,CACN,QAAA,MAAM,mCAAoCA,CAAK,EACvD2X,EAAM,MAAM,8BAA8B,CAC5C,CAAA,EAGI2b,EAAcC,GACX,IAAI,KAAKA,CAAU,EAAE,mBAAmB,QAAS,CACtD,IAAK,UACL,MAAO,UACP,KAAM,UACN,KAAM,UACN,OAAQ,SAAA,CACT,EAGGC,EAAmBrM,GAClBnP,EAGD,GAAAua,GAGApL,EAAS,UAAYnP,EAAK,KANZ,GAYhB,OAAAgJ,EAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,4BAA6B,CAAA,EACrD9O,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAEpD,wBAAA,EACCA,EAAA,IAAA,OAAA,CAAK,UAAU,gEACf,WAAU,OACb,CAAA,EACA,EAGAA,EAAA,IAAC,SAAA,CACG,QAASwO,EACT,SAAUvP,EACV,UAAU,uEACV,MAAM,uBAER,eAAC4a,GAAU,CAAA,UAAW,WAAW5a,EAAU,eAAiB,EAAE,GAAI,CAAA,CACpE,CAAA,EACF,EAGC,GAgBAE,GAAmB,CAACwZ,GACjBvR,EAAAA,KAAC,QAAK,SAAUmS,EAAmB,UAAU,iCAC3C,SAAA,CAACvZ,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAkB,qBAAA,EAEjEA,EAAA,IAAC,WAAA,CACG,MAAO4Y,EACP,SAAWl7B,GAAMm7B,EAAen7B,EAAE,OAAO,KAAK,EAC9C,YAAY,4CACZ,UAAU,qHACV,KAAM,EACN,UAAW,GAAA,CACf,EAEA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,QAAA,CAAM,UAAU,oBACf,SAAA,CAAApH,EAAA,IAAC,QAAA,CACG,KAAK,WACL,QAAS8Y,EACT,SAAWp7B,GAAMq7B,EAAoBr7B,EAAE,OAAO,OAAO,EACrD,UAAU,MAAA,CACd,EACCsiB,EAAA,IAAA,OAAA,CAAK,UAAU,wBAAwB,SAE5C,+CAAA,CAAA,EACE,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACjB,SAAA,CAACA,EAAAA,KAAA,OAAA,CAAK,UAAU,wBACb,SAAA,CAAYwR,EAAA,OAAO,MAAA,EACtB,EACIxR,EAAA,KAACqC,EAAA,CACG,KAAK,SACL,QAASuP,EACT,SAAU,CAACJ,EAAY,KAAK,GAAKA,EAAY,OAAS,GACtD,KAAK,KACL,UAAU,2BAEZ,SAAA,CAAC5Y,EAAAA,IAAAmP,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,iBAAA,CAAA,CAEnC,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAIH,CAAChQ,GACGa,EAAA,IAAA,MAAA,CAAI,UAAU,wDACb,SAAAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA8Z,GAAA,CAAY,UAAU,4BAA6B,CAAA,EACpD1S,EAAAA,KAAC,OAAK,CAAA,UAAU,gBAClB,SAAA,CAAApH,MAAC,IAAE,CAAA,KAAK,SAAS,UAAU,8BAA8B,SAEzD,aAAA,EAAI,0CAAA,EACN,CAAA,CAAA,CACE,CACF,CAAA,EAIHf,EACGmI,EAAA,KAAC,MAAI,CAAA,UAAU,mBACb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,sEAAuE,CAAA,EACrFA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAAuB,0BAAA,CAAA,EAC3D,EACA+N,EAAU,SAAW,EACpB3G,OAAA,MAAA,CAAI,UAAU,mBACb,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,sCAAuC,CAAA,EAC/D9O,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAsB,yBAAA,EAClDA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAErC,2DAAA,CAAA,CACF,CAAA,EAEAA,EAAAA,IAAC,MAAI,CAAA,UAAU,YACZ,SAAA+N,EAAU,IAAKR,GACZ,eAAAnG,OAAAA,OAAC,MAAuB,CAAA,UAAU,0DAEhC,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,kCACb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,oEACZ,UAAA7C,EAAAoQ,EAAS,OAAT,MAAApQ,EAAe,YACZ6C,EAAA,IAAC,MAAA,CACG,IAAKuN,EAAS,KAAK,YACnB,IAAKA,EAAS,KAAK,SACnB,UAAU,mCAAA,CAAA,EAGdvN,EAAAA,IAAC6H,EAAK,CAAA,UAAU,wBAAwB,CAE9C,CAAA,EAEAT,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCACnB,SAAA,CAACpH,EAAAA,IAAA,OAAA,CAAK,UAAU,4BACb,WAAAzC,EAAAgQ,EAAS,OAAT,YAAAhQ,EAAe,eAAcE,EAAA8P,EAAS,OAAT,YAAA9P,EAAe,WAAY,SAC3D,CAAA,EACOuC,EAAA,IAAA,OAAA,CAAK,UAAU,wBAAwB,SAAS,YAAA,QAChD,OAAK,CAAA,UAAU,wBACnB,SAAW0Z,EAAAnM,EAAS,UAAU,EACjC,EAGMnG,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACZ,SAAA,CAAA,CAACmG,EAAS,WACPvN,EAAAA,IAAC+M,IAAO,UAAU,wBAAwB,MAAM,mBAAmB,EAEtEQ,EAAS,SAAW,WACjBvN,MAACgP,IAAM,UAAU,0BAA0B,MAAM,sBAAsB,EAE1EzB,EAAS,SAAW,YACjBvN,MAACiP,IAAY,UAAU,yBAAyB,MAAM,aAAa,CAAA,EAEzE,CAAA,EACF,EAECjP,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAiB,WAAS,SAAS,EAG/C4Z,EAAgBrM,CAAQ,GACpBnG,EAAA,KAAA,MAAA,CAAI,UAAU,mCACZ,SAAA,CAAAuR,GAEKvR,EAAA,KAAAI,WAAA,CAAA,SAAA,CAAAxH,EAAA,IAAC,SAAA,CACG,QAAS,IAAMyZ,EAAuBlM,EAAS,GAAG,EAClD,UAAU,8DAEX,SAAAA,EAAS,UAEJnG,EAAA,KAAAI,EAAA,SAAA,CAAA,SAAA,CAACxH,EAAAA,IAAA+M,GAAA,CAAO,UAAU,cAAe,CAAA,EAAE,gBAAA,CAAA,CAErC,EAGE3F,EAAAA,KAAAI,EAAA,SAAA,CAAA,SAAA,CAACxH,EAAAA,IAAAgN,GAAA,CAAI,UAAU,cAAe,CAAA,EAAE,gBAAA,EAElC,CAAA,CAEN,EAECO,EAAS,SAAW,WACjBvN,EAAA,IAAC,SAAA,CACG,QAAS,IAAMmZ,EAAqB5L,EAAS,GAAG,EAChD,UAAU,8CACb,SAAA,WAAA,CAED,CAAA,EAEN,EAGJnG,EAAA,KAAC,SAAA,CACG,QAAS,IAAMoS,EAAqBjM,EAAS,GAAG,EAChD,UAAU,4DAEZ,SAAA,CAACvN,EAAAA,IAAAoR,GAAA,CAAO,UAAU,cAAe,CAAA,EAAE,SAAA,CAAA,CAErC,CAAA,EACF,CAAA,EAEN,CAAA,EACF,EAGC8H,IAAsB3L,EAAS,KAC3BnG,EAAA,KAAA,MAAA,CAAI,UAAU,wCACrB,SAAA,CAAApH,EAAA,IAAC,WAAA,CACG,MAAOoO,EACP,SAAW1wB,GAAM2wB,EAAc3wB,EAAE,OAAO,KAAK,EAC7C,YAAY,yBACZ,UAAU,sHACV,KAAM,CAAA,CACV,EACQ0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,+CACb,SAAA,CAAApH,EAAA,IAAC,SAAA,CACG,QAAS,IAAM,CACbmZ,EAAqB,IAAI,EACzB9K,EAAc,EAAE,CAClB,EACA,UAAU,4CACb,SAAA,UAAA,CAED,EACArO,EAAA,IAACyJ,EAAA,CACG,QAAS,IAAMgF,EAAqBlB,EAAS,GAAG,EAChD,SAAU,CAACa,EAAW,KAAK,EAC3B,KAAK,KACR,SAAA,iBAAA,CAED,CAAA,EACF,CAAA,EACF,EAIHb,EAAS,SAAW,YAAcA,EAAS,QACvCnG,OAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCACrB,SAAA,CAACpH,EAAAA,IAAA,OAAA,CAAK,UAAU,6BACb,WAAAxC,EAAA+P,EAAS,mBAAT,YAAA/P,EAA2B,eAAcG,EAAA4P,EAAS,mBAAT,YAAA5P,EAA2B,WAAY,UACnF,CAAA,EACSqC,EAAA,IAAA,OAAA,CAAK,UAAU,wBAAwB,SAAS,YAAA,QAChD,OAAK,CAAA,UAAU,wBACrB,SAAW0Z,EAAAnM,EAAS,WAAW,EAClC,CAAA,EACM,EACCvN,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAiB,WAAS,OAAO,CAAA,EAChD,CAlII,CAAA,EAAAuN,EAAS,GAoInB,EACH,EACH,CAEN,CAAA,CAAA,CAEN,ECxdMwM,GAAY,IAAM,2CAChB,KAAA,CAAE,KAAAlZ,GAASsK,KACX3G,EAAWC,KACX,CAAE,KAAArG,EAAM,gBAAAe,CAAgB,EAAIR,GAAQ,EAEpC,CAACwE,EAAI6W,CAAK,EAAIhb,WAAS,IAAI,EAC3B,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACib,EAAcC,CAAe,EAAIlb,WAAS,EAAI,EAC/C,CAAC5Y,EAAO+zB,CAAQ,EAAInb,WAAS,IAAI,EACjC,CAACob,EAAUC,CAAW,EAAIrb,WAAS,EAAK,EACxC,CAACsb,EAAiBC,CAAkB,EAAIvb,WAAS,EAAK,EACtD,CAACwb,EAAcC,CAAe,EAAIzb,WAAS,EAAE,EAC7C,CAAC0b,EAAeC,CAAgB,EAAI3b,WAAS,EAAE,EAC/C,CAAC4b,EAAkBC,CAAmB,EAAI7b,WAAS,EAAK,EACxD,CAAC8b,EAAYC,CAAa,EAAI/b,EAAA,SAAS,CAAE,CAAA,EACzC,CAACgc,EAAgBC,CAAiB,EAAIjc,WAAS,EAAK,EAGpD,CAACkc,EAAWC,CAAY,EAAInc,WAAS,CAAC,EACtC,CAACoc,EAAgBC,CAAiB,EAAIrc,WAAS,CAAC,EAChD,CAACsc,EAAaC,CAAc,EAAIvc,WAAS,EAAK,EAEpDU,EAAAA,UAAU,IAAM,CACVmB,GACY2a,GAChB,EACC,CAAC3a,CAAI,CAAC,EAETnB,EAAAA,UAAU,IAAM,CACVyD,GAAMA,EAAG,SACIsY,GACjB,EACC,CAACtY,CAAE,CAAC,EAEP,MAAMqY,EAAgB,SAAY,CAChCtc,EAAW,EAAI,EACfib,EAAS,IAAI,EAET,GAAA,CACM,QAAA,IAAI,qCAAsCtZ,CAAI,EAEtD,MAAMzhB,EAAS,MAAMopB,GAAU,MAAM3H,CAAI,EAIzC,GAFQ,QAAA,IAAI,yBAA0BzhB,CAAM,EAExCA,EAAO,QAAS,CACZ,MAAAqpB,GAASrpB,EAAO,KAAK,GAEnB,QAAA,IAAI,uBAAwBqpB,EAAM,EAE1CuR,EAAMvR,EAAM,EACC0S,EAAA1S,GAAO,YAAc,CAAC,EAGjB4S,EAAA5S,GAAO,iBAAmB,CAAC,EAC7C8S,EAAe9S,GAAO,cAAgBA,GAAO,gBAAkB,EAAK,EAEpE,QAAQ,IAAI,2BAA4B,CACtC,MAAOA,GAAO,gBACd,YAAaA,GAAO,cAAgBA,GAAO,cAAA,CAC5C,CAAA,MAED0R,EAAS/6B,EAAO,OAAO,EACjB2e,EAAA,MAAM3e,EAAO,OAAO,QAErBgH,EAAO,CACN,QAAA,MAAM,+BAAgCA,CAAK,EACnD+zB,EAAS,0BAA0B,EACnCpc,EAAM,MAAM,0BAA0B,CACxC,CAEAmB,EAAW,EAAK,CAAA,EAGZuc,EAAiB,SAAY,CAC7B,GAAA,GAACtY,GAAM,CAACA,EAAG,SAEf,CAAA8X,EAAkB,EAAI,EAElB,GAAA,CACI,MAAA77B,EAAS,MAAMopB,GAAU,OAAO,CACpC,QAASrF,EAAG,QACZ,MAAO,EACP,KAAM,CAAA,CACP,EAED,GAAI/jB,EAAO,QAAS,CAElB,MAAMirB,GAAWjrB,EAAO,KAAK,IAC1B,OAAOs8B,IAAaA,GAAU,MAAQvY,EAAG,GAAG,EAC5C,MAAM,EAAG,CAAC,EACb4X,EAAc1Q,EAAQ,CACxB,QACOjkB,EAAO,CACN,QAAA,MAAM,uCAAwCA,CAAK,CAC7D,CAEA60B,EAAkB,EAAK,EAAA,EAGnBpK,EAAiB,SAAY,CACjC,GAAK,OAAO,QAAQ,8CAA8C,EAIlE,CAAAwJ,EAAY,EAAI,EAEZ,GAAA,CACF,MAAMj7B,EAAS,MAAMopB,GAAU,SAAS3H,CAAI,EAExCzhB,EAAO,SACT2e,EAAM,QAAQ,+BAA+B,EAC7CyG,EAAS,YAAY,GAEfzG,EAAA,MAAM3e,EAAO,OAAO,OAEd,CACd2e,EAAM,MAAM,yBAAyB,CACvC,CAEAsc,EAAY,EAAK,EAAA,EAIbsB,EAAuB,SAAY,CACvC,GAAI,CAACxc,EAAiB,CACpBpB,EAAM,KAAK,oCAAoC,EAC/C,MACF,CAEI,GAAA,CACF,MAAM3e,EAAS,MAAMmrB,GAAiB,eAAe1J,CAAI,EAEzD,GAAIzhB,EAAO,QAAS,CACZ,MAAAw8B,GAAiBx8B,EAAO,KAAK,aACnCm8B,EAAeK,EAAc,EAITP,EADhBO,GACgBxY,IAAQA,GAAO,MAEP,KAAK,IAAI,EAAGA,GAAO,CAAC,CAFZ,EAK9BrF,EAAA,QAAQ3e,EAAO,OAAO,CAAA,MAEtB2e,EAAA,MAAM3e,EAAO,OAAO,QAErBgH,EAAO,CACN,QAAA,MAAM,qBAAsBA,CAAK,EACzC2X,EAAM,MAAM,2BAA2B,CACzC,CAAA,EAGI8d,GAAc,SAAY,CAC9B,GAAI,UAAU,MACR,GAAA,CACF,MAAM,UAAU,MAAM,CACpB,MAAO1Y,EAAG,MACV,KAAM,yBAAyBA,EAAG,KAAK,GACvC,IAAK,OAAO,SAAS,IAAA,CACtB,OACa,CAEhB,MAGA,UAAU,UAAU,UAAU,OAAO,SAAS,IAAI,EAClDpF,EAAM,QAAQ,4CAA4C,CAC5D,EAGI+d,EAAe,SAAY,CAC/B,GAAI,CAAC3c,EAAiB,CACpBpB,EAAM,KAAK,mCAAmC,EAC9C,MACF,CAEI,GAAA,CAACyc,EAAa,OAAQ,CACxBzc,EAAM,MAAM,mCAAmC,EAC/C,MACF,CAEA8c,EAAoB,EAAI,EAEpB,GAAA,CAEF,MAAMkB,EAAa,CACjB,MAAOlb,EACP,OAAQ2Z,EACR,QAASE,EACT,YAAatc,EAAK,GAAA,EAGZ,QAAA,IAAI,kBAAmB2d,CAAU,EAGzC,MAAM,IAAI,QAAQptB,IAAW,WAAWA,GAAS,GAAI,CAAC,EAEtDoP,EAAM,QAAQ,wDAAwD,EACtEwc,EAAmB,EAAK,EACxBE,EAAgB,EAAE,EAClBE,EAAiB,EAAE,QACZv0B,EAAO,CACN,QAAA,MAAM,yBAA0BA,CAAK,EAC7C2X,EAAM,MAAM,yCAAyC,CACvD,CAEA8c,EAAoB,EAAK,CAAA,EAGrBmB,EAAgB,CACpB,CAAE,MAAO,OAAQ,MAAO,6BAA8B,EACtD,CAAE,MAAO,OAAQ,MAAO,2BAA4B,EACpD,CAAE,MAAO,gBAAiB,MAAO,uBAAwB,EACzD,CAAE,MAAO,OAAQ,MAAO,oBAAqB,EAC7C,CAAE,MAAO,iBAAkB,MAAO,qBAAsB,EACxD,CAAE,MAAO,QAAS,MAAO,cAAe,CAAA,EAGpCtC,GAAcC,GACX,IAAI,KAAKA,CAAU,EAAE,mBAAmB,QAAS,CACtD,IAAK,UACL,MAAO,UACP,KAAM,UACN,KAAM,UACN,OAAQ,SAAA,CACT,EAGGsC,EAAkBt9B,GAAS,CAC/B,OAAQA,EAAM,CACZ,IAAK,QACI,MAAA,UACT,IAAK,QACI,MAAA,UACT,IAAK,UACI,MAAA,UACT,QACS,MAAA,SACX,CAAA,EAGIu9B,EAAoBC,IACL,CACjB,KAAM,iBACN,SAAU,WACV,MAAO,QACP,QAAS,SAAA,GAEOA,CAAS,GAAKA,EAGlC,GAAIld,EAEE,OAAAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAIF,GAAAtiB,GAAS,CAAC+c,EACZ,aACK,MAAI,CAAA,UAAU,gDACb,SAACiE,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,wCACX,SAAA5Z,GAAS,yBACZ,QACCqjB,EAAO,CAAA,QAAS,IAAMjF,EAAS,QAAQ,EAAG,SAE3C,mBAAA,CAAA,CACF,CAAA,CACF,CAAA,EAIA,MAAAmU,EAAUxZ,GAAmBf,IAASA,EAAK,MAAQ+E,EAAG,SAAW/E,EAAK,QAAQjB,EAAAgG,EAAG,OAAH,YAAAhG,EAAS,MAGzF,OAAAiK,EAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCAEb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,OACb,SAAAoH,EAAA,KAAC,SAAA,CACG,QAAS,IAAM5C,EAAS,EAAE,EAC1B,UAAU,6EAEZ,SAAA,CAACxE,EAAAA,IAAAoc,GAAA,CAAU,UAAU,cAAe,CAAA,EAAE,QAAA,CAAA,CAAA,EAG1C,EAEAhV,EAAAA,KAAC,MAAI,CAAA,UAAU,wCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,0BAEb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,gDACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,WACZ,SAAA,CACG6S,GAAAja,EAAAA,IAAC,OAAI,UAAU,mFACb,eAACkQ,GAAQ,CAAA,UAAU,0BAA0B,CAC/C,CAAA,EAGHlQ,EAAA,IAAA,MAAA,CAAI,UAAU,2EACZ,WAAG,UACAA,EAAA,IAAC,MAAA,CACG,IAAKmD,EAAG,UACR,IAAKA,EAAG,MACR,UAAU,6BACV,OAAQ,IAAM+W,EAAgB,EAAK,EACnC,QAAUx8B,GAAM,CACN,QAAA,IAAI,6BAA8BylB,EAAG,SAAS,EACtD+W,EAAgB,EAAK,EACnBx8B,EAAA,OAAO,MAAM,QAAU,MAC3B,EACA,MAAO,CAAE,QAASu8B,EAAe,OAAS,OAAQ,CAAA,CAGtD,EAAA7S,EAAA,KAAC,MAAI,CAAA,UAAU,6DACb,SAAA,CAACpH,EAAAA,IAAAkQ,GAAA,CAAQ,UAAU,yBAA0B,CAAA,EAC5ClQ,EAAA,IAAA,OAAA,CAAK,UAAU,qBAAqB,SAAU,aAAA,CAAA,CAAA,CACjD,CAEN,CAAA,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,6CACb,SAAA,CAAApH,MAAC4N,GAAM,QAASqO,EAAe9Y,EAAG,OAAO,EAAG,KAAK,KAC9C,SAAGA,EAAA,UAAY,QAAU,QAAUA,EAAG,UAAY,QAAU,QAAU,UACzE,EAECA,EAAG,WACAnD,EAAAA,IAAC4N,EAAM,CAAA,QAAQ,YAAY,KAAK,KAC7B,SAAAsO,EAAiB/Y,EAAG,SAAS,CAChC,CAAA,CAAA,EAEN,EAGCwV,GACGvR,EAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAApH,EAAA,IAACqH,EAAA,CACG,GAAI,QAAQlE,EAAG,GAAG,QAClB,UAAU,kFACV,MAAM,iBAER,SAAAnD,EAAAA,IAACmR,GAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CAC5B,EACAnR,EAAA,IAAC,SAAA,CACG,QAAS6Q,EACT,SAAUuJ,EACV,UAAU,gGACV,MAAM,kBAER,SAAApa,EAAAA,IAACoR,GAAO,CAAA,UAAU,SAAU,CAAA,CAAA,CAC9B,CAAA,EACF,CAAA,CAAA,CAEN,CACF,CAAA,EAGAhK,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,SACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,wCACX,SAAAmD,EAAG,MACN,EAEAiE,EAAAA,KAAC,MAAI,CAAA,UAAU,yDACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAgN,GAAA,CAAI,UAAU,cAAe,CAAA,EAC7BkO,EAAU,gBAAA,EACb,EACA9T,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAkP,GAAA,CAAS,UAAU,cAAe,CAAA,EAClCwK,GAAWvW,EAAG,UAAU,CAAA,EAC3B,CAAA,EACF,CAAA,EACF,EAEAiE,EAAAA,KAAC,MAAI,CAAA,UAAU,8BAEb,SAAA,CAAAA,EAAA,KAAC,SAAA,CACG,QAASuU,EACT,SAAU,CAACxc,EACX,UAAW,6EACPmc,EACM,yDACA,4DACV,IAAKnc,EAAoD,iBAAlC,+BAAkD,GACzE,MAAOA,EAAmBmc,EAAc,wBAA0B,0BAA6B,4BAEjG,SAAA,CAAAtb,EAAA,IAACiI,GAAA,CACG,UAAW,WAAWqT,EAAc,4BAA8B,eAAe,EAAA,CACrF,EACCtb,EAAA,IAAA,OAAA,CAAK,UAAU,sBAAuB,SAAeob,EAAA,CAAA,CAAA,CACxD,EAEApb,EAAA,IAAC,SAAA,CACG,QAAS6b,GACT,UAAU,yFACV,MAAM,eAER,SAAA7b,EAAAA,IAACqc,GAAO,CAAA,UAAU,SAAU,CAAA,CAAA,CAC9B,CAAA,EACF,CAAA,EACF,EAIClZ,EAAG,OAASA,EAAG,UAAY,SACxBnD,EAAA,IAAC,MAAI,CAAA,UAAU,OACb,SAAAoH,OAAC,MAAI,CAAA,UAAU,oCAAoC,SAAA,CAAA,MAC7C,WAAWjE,EAAG,KAAK,EAAE,QAAQ,CAAC,CAAA,CAAA,CACpC,CACF,CAAA,EAIHA,EAAG,UAAY,SAAWA,EAAG,eACzBiE,OAAA,MAAA,CAAI,UAAU,wDACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,qDACZ,SAAA,CAACpH,EAAAA,IAAAsc,GAAA,CAAY,UAAU,cAAe,CAAA,EAAE,6BAAA,EAE1C,EACCtc,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAiB,WAAG,cAAc,CAAA,EACjD,EAIJoH,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAAS,YAAA,EACjEA,EAAA,IAAA,IAAA,CAAE,UAAU,oDACV,WAAG,YACN,CAAA,EACF,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,kEACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAI,OAAA,QAC1C,MAAI,CAAA,UAAU,8BACZ,WAAGzC,GAAA4F,EAAA,OAAA,YAAA5F,GAAM,OAAQ,gBACpB,CAAA,EACF,SACC,MACC,CAAA,SAAA,CAACyC,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAU,aAAA,QAChD,MAAI,CAAA,UAAU,8BACZ,SAAAmD,EAAG,UAAY,gBAClB,CAAA,EACF,SACC,MACC,CAAA,SAAA,CAACnD,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAM,SAAA,QAC5C,MAAI,CAAA,UAAU,8BACZ,SAAiBkc,EAAA/Y,EAAG,SAAS,EAChC,CAAA,EACF,SACC,MACC,CAAA,SAAA,CAACnD,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAM,SAAA,EAC5CA,EAAA,IAAA4N,EAAA,CAAM,QAASzK,EAAG,SAAW,SAAW,UAAY,YAClD,SAAGA,EAAA,SAAW,SAAW,QAAU,UACtC,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAGAnD,EAAAA,IAAC0Y,GAAY,CAAA,GAAAvV,EAAQ,QAAAwV,CAAkB,CAAA,EAGvCvR,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAEzD,qBAAA,EAECgb,QACE,MAAI,CAAA,UAAU,2BACb,SAAChb,EAAAA,IAAA,MAAA,CAAI,UAAU,8DAA+D,CAAA,CAChF,CAAA,EACE8a,EAAW,OAAS,EACrB9a,EAAA,IAAA,MAAA,CAAI,UAAU,wCACZ,SAAA8a,EAAW,IAAKY,GACftU,EAAA,KAAC,MAAA,CAEC,UAAU,iHACV,QAAS,IAAM5C,EAAS,QAAQkX,EAAU,GAAG,EAAE,EAE/C,SAAA,CAAA1b,EAAA,IAAC,MAAI,CAAA,UAAU,2CACZ,SAAA0b,EAAU,UACT1b,EAAA,IAAC,MAAA,CACC,IAAK0b,EAAU,UACf,IAAKA,EAAU,MACf,UAAU,oFAAA,CACZ,EAEC1b,EAAA,IAAA,MAAA,CAAI,UAAU,iDACb,eAACkQ,GAAQ,CAAA,UAAU,uBAAwB,CAAA,CAAA,CAC7C,CAEJ,CAAA,EAEA9I,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,0CACX,SAAA0b,EAAU,MACb,EAEA1b,EAAA,IAAC,MAAI,CAAA,UAAU,yCACb,SAAAA,EAAAA,IAAC,OAAK,CAAA,UAAW,kCACf0b,EAAU,UAAY,QAAU,8BAChCA,EAAU,UAAY,QAAU,4BAChC,+BACF,GACG,SAAAA,EAAU,UAAY,QAAU,QAChCA,EAAU,UAAY,QAAU,QAAU,SAC7C,CAAA,EACF,EAECA,EAAU,OAASA,EAAU,UAAY,SACvCtU,OAAA,IAAA,CAAE,UAAU,wCAAwC,SAAA,CAAA,MAC/C,WAAWsU,EAAU,KAAK,EAAE,QAAQ,CAAC,CAAA,EAC3C,EAGFtU,EAAAA,KAAC,MAAI,CAAA,UAAU,0DACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAgN,GAAA,CAAI,UAAU,cAAe,CAAA,EAC7B0O,EAAU,YAAc,CAAA,EAC3B,EACAtU,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAiI,GAAA,CAAM,UAAU,cAAe,CAAA,EAC/ByT,EAAU,iBAAmB,CAAA,EAChC,CAAA,EACF,CAAA,EACF,CAAA,CAAA,EAlDKA,EAAU,GAAA,CAoDlB,CACH,CAAA,EAECtU,OAAA,MAAA,CAAI,UAAU,mBACb,SAAA,CAACpH,EAAAA,IAAAkQ,GAAA,CAAQ,UAAU,sCAAuC,CAAA,EACzDlQ,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,oCAAA,CAAA,EACF,CAAA,EAEJ,CAAA,EACF,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,0BAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAA6H,EAAA,CAAK,UAAU,cAAe,CAAA,EAC9B1E,EAAG,UAAY,QAAU,WAAaA,EAAG,UAAY,QAAU,aAAe,WAAA,EACjF,EAEAiE,EAAAA,KAAC,MAAI,CAAA,UAAU,mCACb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,sEACZ,UAAAvC,GAAA0F,EAAG,OAAH,MAAA1F,GAAS,YACNuC,EAAA,IAAC,MAAA,CACG,IAAKmD,EAAG,KAAK,YACb,IAAKA,EAAG,KAAK,SACb,UAAU,qCAAA,CAAA,EAGdnD,EAAAA,IAAC6H,EAAK,CAAA,UAAU,wBAAwB,CAE9C,CAAA,SACC,MACC,CAAA,SAAA,CAACT,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACZ,SAAA,EAAA5J,GAAA2F,EAAG,OAAH,YAAA3F,GAAS,WAAW,KAAEG,GAAAwF,EAAG,OAAH,YAAAxF,GAAS,SAAA,EAClC,EACAyJ,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,KACnCxJ,GAAAuF,EAAG,OAAH,YAAAvF,GAAS,QAAA,EACb,CAAA,EACF,CAAA,EACF,EAGAwJ,EAAAA,KAAC,MAAI,CAAA,UAAU,uCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAmJ,GAAA,CAAK,UAAU,8BAA+B,CAAA,EAAE,iBACpCrL,GAAAqF,EAAG,OAAH,YAAArF,GAAS,gBAAiB,GAAG,QAAQ,CAAC,EAAE,MACnD8D,GAAAuB,EAAG,OAAH,YAAAvB,GAAS,cAAe,EAAE,OAAGC,GAAAsB,EAAG,OAAH,YAAAtB,GAAS,cAAe,KAAO,EAAI,QAAU,SAAS,GAAA,EACvF,EACAuF,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAgU,GAAA,CAAO,UAAU,cAAe,CAAA,GAChClS,GAAAqB,EAAG,OAAH,MAAArB,GAAS,QAAQC,GAAAoB,EAAG,OAAH,MAAApB,GAAS,OACrB,GAAGoB,EAAG,KAAK,IAAI,KAAKA,EAAG,KAAK,KAAK,KACjCnB,GAAAmB,EAAG,OAAH,YAAAnB,GAAS,WAAY,2BAAA,EAE7B,EACAoF,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAgP,GAAA,CAAM,UAAU,cAAe,CAAA,EAAE,kBACpB9M,GAAAiB,EAAG,OAAH,YAAAjB,GAAS,eAAoB,IAAA,KAAA,EAAO,YAAY,CAAA,EAChE,CAAA,EACF,EAEC,CAACyW,GACGvR,EAAAA,KAAA,MAAA,CAAI,UAAU,YACb,SAAA,CAAApH,EAAA,IAACqH,EAAA,CACG,GAAI,UAAUlE,EAAG,OAAO,GACxB,UAAU,2BAEZ,eAACsG,EAAO,CAAA,QAAQ,UAAU,UAAU,SAAS,SAE7C,aAAA,CAAA,CACF,EAEArC,EAAAA,KAACqC,EAAO,CAAA,UAAU,SAChB,SAAA,CAACzJ,EAAAA,IAAA8O,GAAA,CAAc,UAAU,cAAe,CAAA,EAAE,iBAAA,EAE5C,CAAA,EACF,CAAA,EAEN,EAIC,CAAC6J,GAAWxV,EAAG,UAAY,SAAWA,EAAG,SAAW,UACjDiE,EAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAEzD,eAAA,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAApH,EAAA,IAACgW,GAAA,CACG,GAAA7S,EACA,UAAU,SACV,KAAK,IAAA,CACT,QAECsG,EAAO,CAAA,QAAQ,UAAU,UAAU,SAAS,SAE7C,gBAAA,CAAA,EACF,QAEC,MAAI,CAAA,UAAU,0DACb,SAACrC,EAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAACpH,EAAA,IAAA,MAAA,CAAI,UAAU,qBAAqB,SAAoB,uBAAA,EACxDoH,EAAAA,KAAC,KAAG,CAAA,UAAU,oBACZ,SAAA,CAAApH,EAAAA,IAAC,MAAG,SAAkB,oBAAA,CAAA,EACtBA,EAAAA,IAAC,MAAG,SAAmB,qBAAA,CAAA,EACvBA,EAAAA,IAAC,MAAG,SAAkB,oBAAA,CAAA,CAAA,EACxB,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,EAIH,CAAC2Y,GACGvR,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAEzD,oBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAE1C,yCAAA,EACAoH,EAAA,KAACqC,EAAA,CACC,QAAQ,UACR,KAAK,KACL,UAAU,SACV,QAAS,IAAM8Q,EAAmB,EAAI,EACtC,SAAU,CAACpb,EAEX,SAAA,CAACa,EAAAA,IAAAuc,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,UAAA,CAAA,CAEnC,CAAA,EACF,CAAA,EAGN,CAAA,EACF,CAAA,EACF,EAGCjC,GACCta,EAAA,IAAC,MAAI,CAAA,UAAU,iFACb,SAAAA,EAAAA,IAAC,MAAI,CAAA,UAAU,mEACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAEpD,mBAAA,EACAA,EAAA,IAAC,SAAA,CACC,QAAS,IAAMua,EAAmB,EAAK,EACvC,UAAU,sDACX,SAAA,GAAA,CAED,CAAA,EACF,EAEAnT,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,qBAAA,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOoT,EACP,SAAW98B,GAAM+8B,EAAgB/8B,EAAE,OAAO,KAAK,EAC/C,UAAU,sGACV,SAAQ,GAER,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAmB,sBAAA,EACnCgc,EAAc,IAAKlnB,GACjBkL,EAAAA,IAAA,SAAA,CAA0B,MAAOlL,EAAO,MACtC,SAAAA,EAAO,KADG,EAAAA,EAAO,KAEpB,CACD,CAAA,CAAA,CACH,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACkL,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,sBAAA,EACAA,EAAA,IAAC,WAAA,CACC,MAAO0a,EACP,SAAWh9B,GAAMi9B,EAAiBj9B,EAAE,OAAO,KAAK,EAChD,YAAY,2CACZ,UAAU,sGACV,KAAK,GAAA,CACP,CAAA,EACF,EAEA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,sBACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,QAAQ,UACR,QAAS,IAAM8Q,EAAmB,EAAK,EACvC,UAAU,SACV,SAAUK,EACX,SAAA,UAAA,CAED,EACA5a,EAAA,IAACyJ,EAAA,CACC,QAASqS,EACT,UAAU,SACV,SAAUlB,GAAoB,CAACJ,EAAa,KAAK,EAEhD,WAAmB,cAAgB,eAAA,CACtC,CAAA,EACF,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ,CAAA,CAAA,CAEN,EC5wBMgC,GAAc,IAAM,SAClB,KAAA,CAAE,OAAAhe,GAAW2M,KACb,CAAC/M,EAAMW,CAAO,EAAIC,WAAS,IAAI,EAC/B,CAACyQ,EAASC,CAAU,EAAI1Q,EAAA,SAAS,CAAE,CAAA,EACnC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACiK,EAAYC,CAAa,EAAIlK,WAAS,EAAK,EAElDU,EAAAA,UAAU,IAAM,EACQ,SAAY,CAChCR,EAAW,EAAI,EAEX,GAAA,CAEF,MAAMud,EAAa,MAAMne,GAAY,qBAAqBE,CAAM,EAC5Die,EAAW,QACL1d,EAAA0d,EAAW,KAAK,IAAI,EAEtB1e,EAAA,MAAM0e,EAAW,OAAO,EAIhCvT,EAAc,EAAI,EACZ,MAAA4C,EAAY,MAAMtD,GAAU,WAAWhK,EAAQ,CAAE,MAAO,GAAI,EAC9DsN,EAAU,SACD4D,EAAA5D,EAAU,KAAK,GAAG,EAE/B5C,EAAc,EAAK,OACL,CACdnL,EAAM,MAAM,oCAAoC,CAClD,CAEAmB,EAAW,EAAK,CAAA,IAGJ,EACb,CAACV,CAAM,CAAC,EAEX,MAAMke,EAAgB,IAAM,CAC1B3e,EAAM,KAAK,8CAA8C,CAAA,EAG3D,OAAIkB,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAICtK,QAcF,MAAI,CAAA,UAAU,+BACb,SAACgJ,EAAA,KAAA,MAAA,CAAI,UAAU,mCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,qDACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,yDACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,wDACb,SAAA,CAAApH,EAAA,IAAC,MAAI,CAAA,UAAU,wFACZ,SAAA5B,EAAK,YACJ4B,EAAA,IAAC,MAAA,CACC,IAAK5B,EAAK,YACV,IAAI,UACJ,UAAU,qCAAA,CAAA,EAGZ4B,EAAAA,IAAC6H,EAAK,CAAA,UAAU,0BAA0B,CAE9C,CAAA,EAEAT,EAAAA,KAAC,MAAI,CAAA,UAAU,6CACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,0BACX,SAAA,CAAKhJ,EAAA,WAAW,IAAEA,EAAK,SAAA,EAC1B,EACAgJ,EAAAA,KAAC,IAAE,CAAA,UAAU,6BAA6B,SAAA,CAAA,IAAEhJ,EAAK,QAAA,EAAS,EAE1DgJ,EAAAA,KAAC,MAAI,CAAA,UAAU,kFACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAkP,GAAA,CAAS,UAAU,cAAe,CAAA,EAAE,gBACvB,IAAI,KAAK9Q,EAAK,UAAU,EAAE,mBAAmB,QAAS,CAClE,MAAO,OACP,KAAM,SAAA,CACP,CAAA,EACH,EACCA,EAAK,UACHgJ,OAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAgU,GAAA,CAAO,UAAU,cAAe,CAAA,EAChC5V,EAAK,QAAA,EACR,CAAA,EAEJ,EAECA,EAAK,KACJ4B,EAAA,IAAC,KAAE,UAAU,0BACV,WAAK,IACR,CAAA,EAEJ,EAEAA,EAAAA,IAAC,MAAI,CAAA,UAAU,yCACb,SAAAoH,EAAA,KAACqC,EAAA,CACC,QAASiT,EACT,UAAU,2CAEV,SAAA,CAAC1c,EAAAA,IAAA8O,GAAA,CAAc,UAAU,cAAe,CAAA,EAAE,mBAAA,CAAA,CAAA,EAG9C,CAAA,CAAA,CACF,CACF,CAAA,QAGC,MAAI,CAAA,UAAU,0BACb,SAAC1H,EAAA,KAAA,MAAA,CAAI,UAAU,wCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,mCAAoC,SAAA5B,EAAK,WAAa,EAAE,EACtE4B,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAmB,sBAAA,CAAA,EAC5D,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,cACb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,mCAAoC,SAAA5B,EAAK,YAAc,EAAE,EACvE4B,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAe,kBAAA,CAAA,EACxD,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,cACb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,mCAAoC,SAAA5B,EAAK,aAAe,EAAE,EACxE4B,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAoB,uBAAA,CAAA,EAC7D,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,cACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCAAmC,SAAA,CAAA,MAAIhJ,EAAK,aAAe,CAAA,EAAE,EAC3E4B,EAAA,IAAA,MAAA,CAAI,UAAU,wBAAwB,SAAqB,wBAAA,CAAA,EAC9D,CAAA,CAAA,CACF,CACF,CAAA,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAAU,aAAA,EACnEoH,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,+DACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,MAAA,CAAI,UAAU,qCAAqC,SAAa,gBAAA,EACjEoH,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACb,SAAA,CAACpH,EAAAA,IAAAmJ,GAAA,CAAK,UAAU,2CAA4C,CAAA,EAC5D/B,EAAAA,KAAC,OAAK,CAAA,UAAU,mCACb,SAAA,GAAKjK,EAAAiB,EAAA,gBAAA,YAAAjB,EAAe,QAAQ,KAAM,MAAM,IAAA,EAC3C,CAAA,EACF,CAAA,EACF,EACAiK,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACZ,SAAA,CAAAhJ,EAAK,sBAAwB,EAAE,aAAA,EAClC,CAAA,EACF,EAEAgJ,EAAAA,KAAC,MAAI,CAAA,UAAU,8DACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,MAAA,CAAI,UAAU,oCAAoC,SAAc,iBAAA,EACjEoH,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACb,SAAA,CAACpH,EAAAA,IAAAmJ,GAAA,CAAK,UAAU,2CAA4C,CAAA,EAC5D/B,EAAAA,KAAC,OAAK,CAAA,UAAU,kCACb,SAAA,GAAK7J,EAAAa,EAAA,eAAA,YAAAb,EAAc,QAAQ,KAAM,MAAM,IAAA,EAC1C,CAAA,EACF,CAAA,EACF,EACA6J,EAAAA,KAAC,MAAI,CAAA,UAAU,wBACZ,SAAA,CAAAhJ,EAAK,qBAAuB,EAAE,aAAA,EACjC,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAGAgJ,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,sCAAsC,SAAA,CAAA,eACrChJ,EAAK,UAAA,EACpB,EACAgJ,EAAAA,KAAC,OAAK,CAAA,UAAU,wBACb,SAAA,CAAQqI,EAAA,OAAO,WAAA,EAClB,CAAA,EACF,EAECxG,EACCjJ,EAAAA,IAAC,MAAI,CAAA,UAAU,2BACb,SAACA,MAAA0I,EAAA,CAAe,CAAA,CAClB,CAAA,EACE+G,EAAQ,SAAW,EACpBrI,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAqJ,GAAA,CAAW,UAAU,sCAAuC,CAAA,EAC5DrJ,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,4BAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,kDAAA,CACF,CAAA,CAAA,QAEC,MAAI,CAAA,UAAU,uDACZ,SAAQyP,EAAA,IAAKtM,GACZiE,EAAA,KAACC,EAAA,CAEC,GAAI,QAAQlE,EAAG,GAAG,GAClB,UAAU,0EAET,SAAA,CAAAA,EAAG,WACFnD,MAAC,MAAI,CAAA,UAAU,OACb,SAAAA,EAAA,IAAC,MAAA,CACC,IAAKmD,EAAG,UACR,IAAKA,EAAG,MACR,UAAU,kCAAA,CAAA,EAEd,EAGFiE,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,+DACX,SAAAmD,EAAG,MACN,EACAiE,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAAApH,MAAC,OAAK,CAAA,UAAW,8CACfmD,EAAG,UAAY,QACX,8BACAA,EAAG,UAAY,QACf,4BACA,+BACN,GACG,WAAG,QACN,EACCA,EAAG,YACFnD,EAAAA,IAAC,OAAK,CAAA,UAAU,2EAA2E,SAE3F,IAAA,CAAA,EAEJ,CAAA,EACF,EAECA,EAAA,IAAA,IAAA,CAAE,UAAU,0CACV,WAAG,YACN,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,4CACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,gBACZ,SAAA,CAAAjE,EAAG,OACFiE,OAAC,OAAK,CAAA,UAAU,mCAAmC,SAAA,CAAA,MAC7CjE,EAAG,KAAA,EACT,EAEDnD,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAiB,WAAG,SAAS,CAAA,EAC/C,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAACpH,EAAAA,IAAA,OAAA,CAAK,UAAU,gBACb,SAAI,IAAA,KAAKmD,EAAG,UAAU,EAAE,mBAAmB,OAAO,CACrD,CAAA,EACAiE,EAAAA,KAAC,OAAK,CAAA,UAAU,wBACb,SAAA,CAAGjE,EAAA,WAAW,QAAA,EACjB,CAAA,EACF,CAAA,EACF,CAAA,CAAA,EAzDKA,EAAG,GA2DX,CAAA,EACH,EAIDsM,EAAQ,QAAU,IAChBzP,EAAA,IAAA,MAAA,CAAI,UAAU,mBACb,SAAAA,EAAA,IAACyJ,EAAA,CACC,QAAQ,UACR,QAAS,IAAM1L,EAAM,KAAK,gDAAgD,EAC3E,SAAA,mBAAA,CAAA,EAGH,CAAA,EAEJ,CAAA,CACF,CAAA,CACF,CAAA,QA3OG,MAAI,CAAA,UAAU,gDACb,SAACqJ,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAAsB,yBAAA,QAC3EqH,EAAK,CAAA,GAAG,IAAI,UAAU,oCAAoC,SAE3D,+BAAA,CAAA,CACF,CAAA,CACF,CAAA,CAsON,ECpSMsV,GAAa,CAAC,CAClB,KAAM3L,EAAO5H,GACb,MAAAsI,EAAQ,kBACR,YAAAkL,EAAc,mDACd,WAAAC,EACA,SAAAC,EACA,SAAAhe,CACF,IAEIsI,EAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,OACb,eAACgR,EAAK,CAAA,UAAU,kCAAkC,CACpD,CAAA,EACChR,EAAA,IAAA,KAAA,CAAG,UAAU,yCACX,SACH0R,EAAA,EACC1R,EAAA,IAAA,IAAA,CAAE,UAAU,sCACV,SACH4c,EAAA,EACCC,GAAcC,GACb9c,EAAAA,IAACyJ,EAAO,CAAA,QAASqT,EACd,SACHD,EAAA,EAED/d,CACH,CAAA,CAAA,ECnBEie,GAAY,IAAM,CACtB,KAAM,CAACC,EAAWC,CAAY,EAAIje,EAAA,SAAS,CAAE,CAAA,EACvC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACke,EAAUC,CAAW,EAAIne,EAAA,SAAS,CAAE,CAAA,EACrC,CAACoe,EAAUC,CAAW,EAAIre,WAAS,MAAM,EACzC,CAAC7c,EAAQ8rB,CAAS,EAAIjP,WAAS,KAAK,EACpC,CAACse,EAAQC,CAAS,EAAIve,WAAS,QAAQ,EAE7CU,EAAAA,UAAU,IAAM,CACC8d,GACjB,EAAG,CAAE,CAAA,EAEL,MAAMA,EAAiB,SAAY,CACjCte,EAAW,EAAI,EACT,MAAA9f,EAAS,MAAMmrB,GAAiB,eAClCnrB,EAAO,QACT69B,EAAa79B,EAAO,KAAK,WAAa,CAAE,CAAA,EAElC2e,EAAA,MAAM3e,EAAO,OAAO,EAE5B8f,EAAW,EAAK,CAAA,EAGZue,EAAuB,MAAO5c,GAAS,CACvC,GAAA,OAAO,QAAQ,4DAA4D,EAAG,CACpEsc,EAAA/Z,IAAS,CAAE,GAAGA,EAAM,CAACvC,CAAI,EAAG,EAAO,EAAA,EAE/C,MAAMzhB,EAAS,MAAMmrB,GAAiB,oBAAoB1J,CAAI,EAC1DzhB,EAAO,SACT69B,EAAaD,EAAU,OAAOU,GAAOA,EAAI,GAAG,MAAQ7c,CAAI,CAAC,EACzD9C,EAAM,QAAQ,gCAAgC,GAExCA,EAAA,MAAM3e,EAAO,OAAO,EAGhB+9B,EAAA/Z,IAAS,CAAE,GAAGA,EAAM,CAACvC,CAAI,EAAG,EAAQ,EAAA,CAClD,CAAA,EAGI8c,EAA6BX,EAChC,OAAcU,GACTv7B,IAAW,MAAc,GACtBu7B,EAAI,GAAG,UAAYv7B,CAC3B,EACA,KAAK,CAAC7E,EAAGE,IAAM,CACd,OAAQ8/B,EAAQ,CACd,IAAK,YACH,OAAQhgC,EAAE,GAAG,OAAS,IAAME,EAAE,GAAG,OAAS,GAC5C,IAAK,aACH,OAAQA,EAAE,GAAG,OAAS,IAAMF,EAAE,GAAG,OAAS,GAC5C,IAAK,QACH,OAAOA,EAAE,GAAG,MAAM,cAAcE,EAAE,GAAG,KAAK,EAC5C,IAAK,SACL,QACS,OAAA,IAAI,KAAKA,EAAE,UAAU,EAAI,IAAI,KAAKF,EAAE,UAAU,CACzD,CAAA,CACD,EAEH,OAAI2hB,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,QAKD,MAAI,CAAA,UAAU,+BACb,SAACtB,EAAA,KAAA,MAAA,CAAI,UAAU,yBAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,iBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,2CAAA,CAAA,EACF,EAECgd,EAAU,SAAW,EACpBhd,EAAA,IAAC2c,GAAA,CACC,KAAM1U,GACN,MAAM,6BACN,YAAY,4FACZ,WAAW,iBACX,SAAU,IAAM,OAAO,SAAS,KAAO,QAAA,CAAA,EAKvCb,EAAA,KAAAI,WAAA,CAAA,SAAA,CAAAxH,EAAAA,IAAC,OAAI,UAAU,yCACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,qEACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,8BACb,SAACoH,EAAA,KAAA,OAAA,CAAK,UAAU,oCACb,SAAA,CAA2BuW,EAAA,OAAO,IAAEA,EAA2B,SAAW,EAAI,WAAa,WAAA,CAAA,CAC9F,CACF,CAAA,EAEAvW,EAAAA,KAAC,MAAI,CAAA,UAAU,8DAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACpH,EAAAA,IAAAsK,GAAA,CAAO,UAAU,uBAAwB,CAAA,EAC1ClD,EAAA,KAAC,SAAA,CACC,MAAOjlB,EACP,SAAWzE,GAAMuwB,EAAUvwB,EAAE,OAAO,KAAK,EACzC,UAAU,0GAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAc,iBAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAK,QAAA,EAC1BA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAK,QAAA,EAC1BA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAO,UAAA,CAAA,CAAA,CACjC,CAAA,EACF,EAGAoH,EAAA,KAAC,SAAA,CACC,MAAOkW,EACP,SAAW5/B,GAAM6/B,EAAU7/B,EAAE,OAAO,KAAK,EACzC,UAAU,0GAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAa,gBAAA,EACnCA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAQ,WAAA,EAC7BA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAW,cAAA,EACpCA,EAAA,IAAA,SAAA,CAAO,MAAM,aAAa,SAAW,cAAA,CAAA,CAAA,CACxC,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAAApH,EAAA,IAAC,SAAA,CACC,QAAS,IAAMqd,EAAY,MAAM,EACjC,UAAW,eACTD,IAAa,OACT,4BACA,mCACN,GAEA,SAAApd,EAAAA,IAAC4d,GAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CAC5B,EACA5d,EAAA,IAAC,SAAA,CACC,QAAS,IAAMqd,EAAY,MAAM,EACjC,UAAW,eACTD,IAAa,OACT,4BACA,mCACN,GAEA,SAAApd,EAAAA,IAAC6d,GAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CAC5B,CAAA,EACF,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EAGCT,IAAa,OACXpd,MAAA,MAAA,CAAI,UAAU,uDACZ,SAAA2d,EAA2B,IAAKG,GAC/B,OAAA1W,OAAAA,EAAA,KAAC,MAAA,CAEC,UAAW,iDACT8V,EAASY,EAAS,GAAG,GAAG,EAAI,aAAe,EAC7C,GAGC,SAAA,CAAAA,EAAS,GAAG,WACV9d,EAAA,IAAA,MAAA,CAAI,UAAU,mBACb,SAAAA,EAAA,IAAC,MAAA,CACC,IAAK8d,EAAS,GAAG,UACjB,IAAKA,EAAS,GAAG,MACjB,UAAU,4BAAA,CAAA,EAEd,EAGF1W,EAAAA,KAAC,MAAI,CAAA,UAAU,MAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,SACb,SAAA,CAAApH,MAAC,KAAG,CAAA,UAAU,wDACX,SAAA8d,EAAS,GAAG,MACf,QACC,IAAE,CAAA,UAAU,wBACV,UAAS3gB,EAAA2gB,EAAA,GAAG,OAAH,YAAA3gB,EAAS,KACrB,CAAA,EACF,EACAiK,EAAAA,KAAC,MAAI,CAAA,UAAU,yCACb,SAAA,CAAApH,MAAC,QAAK,UAAW,8CACf8d,EAAS,GAAG,UAAY,QACpB,8BACAA,EAAS,GAAG,UAAY,QACxB,4BACA,+BACN,GACG,SAAAA,EAAS,GAAG,QACf,EACCA,EAAS,GAAG,kBACV,OAAK,CAAA,UAAU,2EAA2E,SAE3F,IAAA,CAAA,EAEJ,CAAA,EACF,QAGC,IAAE,CAAA,UAAU,0CACV,SAAAA,EAAS,GAAG,YACf,EAGA1W,EAAAA,KAAC,MAAI,CAAA,UAAU,yCACb,SAAA,CAAAA,OAAC,MACE,CAAA,SAAA,CAAA0W,EAAS,GAAG,OACV1W,EAAA,KAAA,OAAA,CAAK,UAAU,mCAAmC,SAAA,CAAA,MAC7C0W,EAAS,GAAG,KAAA,EAClB,QAED,IAAE,CAAA,UAAU,wBAAyB,SAAAA,EAAS,GAAG,SAAS,CAAA,EAC7D,QACC,MAAI,CAAA,UAAU,aACb,SAAC1W,EAAA,KAAA,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,iBACpB,IAAI,KAAK0W,EAAS,UAAU,EAAE,mBAAmB,OAAO,CAAA,CAAA,CACzE,CACF,CAAA,CAAA,EACF,EAGA1W,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAAA,EAAA,KAACC,EAAA,CACC,GAAI,QAAQyW,EAAS,GAAG,GAAG,GAC3B,UAAU,8IAEV,SAAA,CAAC9d,EAAAA,IAAAgN,GAAA,CAAI,UAAU,cAAe,CAAA,EAAE,aAAA,CAAA,CAElC,EACAhN,EAAA,IAAC,SAAA,CACC,QAAS,IAAMyd,EAAqBK,EAAS,GAAG,GAAG,EACnD,SAAUZ,EAASY,EAAS,GAAG,GAAG,EAClC,UAAU,oGAEV,SAAA9d,EAAAA,IAACoR,GAAO,CAAA,UAAU,SAAU,CAAA,CAAA,CAC9B,CAAA,EACF,CAAA,EACF,CAAA,CAAA,EApFK0M,EAAS,GAsFjB,EAAA,EACH,EAGA9d,EAAA,IAAC,MAAI,CAAA,UAAU,gDACb,SAAAA,EAAA,IAAC,MAAI,CAAA,UAAU,kBACb,SAAAoH,OAAC,QAAM,CAAA,UAAU,sCACf,SAAA,CAAApH,MAAC,QAAM,CAAA,UAAU,aACf,SAAAoH,EAAA,KAAC,KACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,UAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,OAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,gBAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,CAAA,CAAA,CACF,CACF,CAAA,QACC,QAAM,CAAA,UAAU,oCACd,SAAA2d,EAA2B,IAAKG,GAC9B1W,OAAAA,OAAAA,EAAAA,KAAA,KAAA,CAAsB,UAAW8V,EAASY,EAAS,GAAG,GAAG,EAAI,aAAe,GAC3E,SAAA,CAAA9d,EAAAA,IAAC,MAAG,UAAU,YACZ,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oBACZ,SAAA,CAAA0W,EAAS,GAAG,WACX9d,EAAA,IAAC,MAAA,CACC,IAAK8d,EAAS,GAAG,UACjB,IAAKA,EAAS,GAAG,MACjB,UAAU,qCAAA,CACZ,SAED,MACC,CAAA,SAAA,CAAA9d,MAAC,MAAI,CAAA,UAAU,oCACZ,SAAA8d,EAAS,GAAG,MACf,EACA1W,EAAAA,KAAC,MAAI,CAAA,UAAU,wBACZ,SAAA,EAAAjK,EAAA2gB,EAAS,GAAG,OAAZ,YAAA3gB,EAAkB,KAAK,MAAI2gB,EAAS,GAAG,QAAA,EAC1C,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EACA9d,EAAAA,IAAC,MAAG,UAAU,8BACZ,eAAC,OAAK,CAAA,UAAW,4DACf8d,EAAS,GAAG,UAAY,QACpB,8BACAA,EAAS,GAAG,UAAY,QACxB,4BACA,+BACN,GACG,SAAAA,EAAS,GAAG,OAAA,CACf,CACF,CAAA,EACC9d,EAAA,IAAA,KAAA,CAAG,UAAU,oDACX,SAAS8d,EAAA,GAAG,MAAQ,MAAMA,EAAS,GAAG,KAAK,GAAK,IACnD,EACA9d,EAAAA,IAAC,KAAG,CAAA,UAAU,oDACX,SAAA,IAAI,KAAK8d,EAAS,UAAU,EAAE,mBAAmB,OAAO,CAC3D,CAAA,QACC,KAAG,CAAA,UAAU,kDACZ,SAAC1W,EAAA,KAAA,MAAA,CAAI,UAAU,iBACb,SAAA,CAAApH,EAAA,IAACqH,EAAA,CACC,GAAI,QAAQyW,EAAS,GAAG,GAAG,GAC3B,UAAU,oCAEV,SAAA9d,EAAAA,IAACgN,GAAI,CAAA,UAAU,SAAU,CAAA,CAAA,CAC3B,EACAhN,EAAA,IAAC,SAAA,CACC,QAAS,IAAMyd,EAAqBK,EAAS,GAAG,GAAG,EACnD,SAAUZ,EAASY,EAAS,GAAG,GAAG,EAClC,UAAU,sDAEV,SAAA9d,EAAAA,IAACoR,GAAO,CAAA,UAAU,SAAU,CAAA,CAAA,CAC9B,CAAA,CAAA,CACF,CACF,CAAA,CArDO,CAAA,EAAA0M,EAAS,GAsDlB,EACD,EACH,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAAA,EAEJ,CAAA,CAEJ,CAAA,CACF,CAAA,CAEJ,EC3UMC,GAAO,IAAM,CACjB,MAAMvZ,EAAWC,KACX,CACJ,KAAAvD,EACA,QAAAjC,EACA,eAAAoE,EACA,eAAAE,EACA,UAAAC,EACA,aAAAC,GACEzC,GAAQ,EAEN,CAACgd,EAAUC,CAAW,EAAIjf,EAAA,SAAS,CAAE,CAAA,EACrC,CAACkf,EAAYC,CAAa,EAAInf,WAAS,EAAK,EAElDU,EAAAA,UAAU,IAAM,CAEK0e,GACrB,EAAG,CAAE,CAAA,EAEC,MAAAxH,EAAuB,MAAO/V,EAAMgW,IAAgB,CACxD,GAAIA,EAAc,EAAG,CACnBwH,EAAiBxd,CAAI,EACrB,MACF,CAEYod,EAAA7a,IAAS,CAAE,GAAGA,EAAM,CAACvC,CAAI,EAAG,EAAO,EAAA,EAE3C,GAAA,CACI,MAAAwC,EAAexC,EAAMgW,CAAW,OACxB,CACd9Y,EAAM,MAAM,8BAA8B,CAC5C,CAEYkgB,EAAA7a,IAAS,CAAE,GAAGA,EAAM,CAACvC,CAAI,EAAG,EAAQ,EAAA,CAAA,EAG5Cwd,EAAmB,MAAOxd,GAAS,CACvC,GAAK,OAAO,QAAQ,uCAAuC,EAI/C,CAAAod,EAAA7a,IAAS,CAAE,GAAGA,EAAM,CAACvC,CAAI,EAAG,EAAO,EAAA,EAE3C,GAAA,CACF,MAAM0C,EAAe1C,CAAI,OACX,CACd9C,EAAM,MAAM,sBAAsB,CACpC,CAEYkgB,EAAA7a,IAAS,CAAE,GAAGA,EAAM,CAACvC,CAAI,EAAG,EAAQ,EAAA,EAAA,EAG5Cyd,EAAkB,SAAY,CAClC,GAAK,OAAO,QAAQ,gCAAgC,EAIhD,GAAA,CACF,MAAM9a,EAAU,OACF,CACdzF,EAAM,MAAM,yBAAyB,CACvC,CAAA,EAGIqgB,EAAqB,SAAY,CACrCD,EAAc,EAAI,EAEd,GAAA,CACF,MAAM1a,EAAa,OACL,CACd1F,EAAM,MAAM,0BAA0B,CACxC,CAEAogB,EAAc,EAAK,CAAA,EAGfI,EAAiB,IACdrd,EAAK,MAAM,OAAO,CAACxQ,EAAOgR,IACxBhR,EAASgR,EAAK,eAAiBA,EAAK,SAC1C,CAAC,EAGN,OAAIzC,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAIAxH,EAAK,MAAM,SAAW,QAErB,MAAI,CAAA,UAAU,+BACb,SAAClB,EAAA,IAAA,MAAA,CAAI,UAAU,yBACb,SAAAA,EAAA,IAAC2c,GAAA,CACC,KAAMjV,GACN,MAAM,0BACN,YAAY,uDACZ,WAAW,iBACX,SAAU,IAAMlD,EAAS,QAAQ,CAAA,CAAA,CAErC,CAAA,CACF,CAAA,QAKD,MAAI,CAAA,UAAU,+BACb,SAAC4C,EAAA,KAAA,MAAA,CAAI,UAAU,mCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,eAAA,EACAoH,EAAAA,KAAC,IAAE,CAAA,UAAU,gBACV,SAAA,CAAAlG,EAAK,MAAM,OAAO,IAAEA,EAAK,MAAM,SAAW,EAAI,OAAS,QAAQ,cAAA,EAClE,CAAA,EACF,EAEAkG,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACC,QAAS2U,EACT,QAASF,EACT,QAAQ,UACR,KAAK,KACL,UAAU,2BAEV,SAAA,CAACle,EAAAA,IAAA6Z,GAAA,CAAU,UAAU,cAAe,CAAA,EAAE,kBAAA,CAAA,CAExC,EAEC3Y,EAAK,MAAM,OAAS,GACnBkG,EAAA,KAACqC,EAAA,CACC,QAAS6U,EACT,QAAQ,SACR,KAAK,KACL,UAAU,2BAEV,SAAA,CAACte,EAAAA,IAAAoR,GAAA,CAAO,UAAU,cAAe,CAAA,EAAE,iBAAA,CAAA,CAErC,CAAA,EAEJ,CAAA,EACF,EAEAhK,EAAAA,KAAC,MAAI,CAAA,UAAU,wCAEb,SAAA,CAACpH,EAAA,IAAA,MAAA,CAAI,UAAU,0BACZ,SAAKkB,EAAA,MAAM,IAAKQ,GACf0F,uBAAAA,OAAAA,EAAAA,KAAC,MAAmB,CAAA,UAAU,oCAC5B,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,6BAEb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,iEACb,SAAAA,EAAA,IAAC,MAAA,CACC,MAAK7C,EAAAuE,EAAK,cAAL,YAAAvE,EAAkB,YAAa,wBACpC,KAAKI,EAAAmE,EAAK,cAAL,YAAAnE,EAAkB,MACvB,UAAU,4BAAA,CAAA,EAEd,EAGA6J,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAApH,MAAC,KAAG,CAAA,UAAU,mDACX,UAAAvC,EAAAiE,EAAK,cAAL,YAAAjE,EAAkB,MACrB,QACC,IAAE,CAAA,UAAU,6BACV,UAAAD,EAAAkE,EAAK,cAAL,YAAAlE,EAAkB,UACrB,EACA4J,EAAAA,KAAC,MAAI,CAAA,UAAU,yDACb,SAAA,CAAAA,OAAC,OAAK,CAAA,SAAA,CAAA,gBAAazJ,EAAA+D,EAAK,cAAL,YAAA/D,EAAkB,QAAA,EAAS,SAC7C,OAAK,CAAA,SAAA,CAAA,YAASC,EAAA8D,EAAK,cAAL,YAAA9D,EAAkB,SAAA,EAAU,CAAA,EAC7C,EACAwJ,EAAAA,KAAC,IAAE,CAAA,UAAU,6BAA6B,SAAA,CAAA,eAC5BtJ,EAAA4D,EAAK,cAAL,YAAA5D,EAAkB,eAAA,EAChC,CAAA,EACF,EAGAsJ,EAAAA,KAAC,MAAI,CAAA,UAAU,2BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wCAAwC,SAAA,CAAA,OACjDxF,EAAAF,EAAK,iBAAL,YAAAE,EAAqB,QAAQ,EAAC,EACpC,EAGAwF,EAAAA,KAAC,MAAI,CAAA,UAAU,mCACb,SAAA,CAAApH,EAAA,IAAC,SAAA,CACC,QAAS,IAAM4W,EAAqBlV,EAAK,MAAOA,EAAK,SAAW,CAAC,EACjE,SAAUsc,EAAStc,EAAK,KAAK,GAAKA,EAAK,UAAY,EACnD,UAAU,0GAEV,SAAA1B,EAAAA,IAAC+W,GAAM,CAAA,UAAU,SAAU,CAAA,CAAA,CAC7B,EAEC/W,EAAA,IAAA,OAAA,CAAK,UAAU,iCACb,WAAS0B,EAAK,KAAK,EAClB1B,EAAA,IAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,EAE1BhH,EAAK,SAET,EAEA1B,EAAA,IAAC,SAAA,CACC,QAAS,IAAM4W,EAAqBlV,EAAK,MAAOA,EAAK,SAAW,CAAC,EACjE,SAAUsc,EAAStc,EAAK,KAAK,EAC7B,UAAU,0GAEV,SAAA1B,EAAAA,IAACyH,GAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CAC5B,CAAA,EACF,EAGAL,EAAAA,KAAC,MAAI,CAAA,UAAU,6BAA6B,SAAA,CAAA,iBAC3B1F,EAAK,eAAiBA,EAAK,UAAU,QAAQ,CAAC,CAAA,EAC/D,EAGA0F,EAAA,KAAC,SAAA,CACC,QAAS,IAAMiX,EAAiB3c,EAAK,KAAK,EAC1C,SAAUsc,EAAStc,EAAK,KAAK,EAC7B,UAAU,gFAEV,SAAA,CAAC1B,EAAAA,IAAAoR,GAAA,CAAO,UAAU,cAAe,CAAA,EAAE,SAAA,CAAA,CAErC,CAAA,EACF,CAAA,EACF,EAGC1P,EAAK,eACH1B,EAAAA,IAAA,MAAA,CAAI,UAAU,4DACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA8Z,GAAA,CAAY,UAAU,8BAA+B,CAAA,EACtD1S,EAAAA,KAAC,OAAK,CAAA,UAAU,0BAA0B,SAAA,CAAA,4CACCvF,EAAAH,EAAK,gBAAL,YAAAG,EAAoB,QAAQ,EAAC,EACxE,CAAA,CAAA,CACF,CACF,CAAA,CAvFM,CAAA,EAAAH,EAAK,GAyFf,EACD,EACH,QAGC,MAAI,CAAA,UAAU,gBACb,SAAC0F,EAAA,KAAA,MAAA,CAAI,UAAU,iDACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAEzD,mBAAA,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAS,YAAA,EACzCoH,EAAAA,KAAC,OAAK,CAAA,UAAU,gBAAgB,SAAA,CAAA,MAAImX,EAAiB,EAAA,QAAQ,CAAC,CAAA,EAAE,CAAA,EAClE,EACAnX,EAAAA,KAAC,MAAI,CAAA,UAAU,6CACb,SAAA,CAAAA,OAAC,OAAK,CAAA,SAAA,CAAA,UAAQlG,EAAK,MAAM,OAAO,IAAA,EAAE,SACjC,OAAM,CAAA,SAAA,CAAKA,EAAA,MAAM,OAAO,CAAC4B,EAAKpB,IAASoB,EAAMpB,EAAK,SAAU,CAAC,EAAE,WAAA,EAAS,CAAA,EAC3E,QACC,MAAI,CAAA,UAAU,gBACb,SAAC0F,EAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAAApH,EAAAA,IAAC,QAAK,SAAM,QAAA,CAAA,EACZoH,EAAAA,KAAC,OAAK,CAAA,UAAU,iBAAiB,SAAA,CAAA,MAAImX,EAAiB,EAAA,QAAQ,CAAC,CAAA,EAAE,CAAA,CAAA,CACnE,CACF,CAAA,CAAA,EACF,EAEAnX,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAACpH,EAAAA,IAAAqH,EAAA,CAAK,GAAG,YACP,SAAAD,EAAAA,KAACqC,GAAO,UAAU,iDAAiD,KAAK,KAAK,SAAA,CAAA,mBAE3EzJ,EAAAA,IAACwe,GAAW,CAAA,UAAU,cAAe,CAAA,CAAA,CAAA,CACvC,CACF,CAAA,EAEAxe,EAAA,IAACqH,EAAK,CAAA,GAAG,SACP,SAAArH,EAAAA,IAACyJ,EAAO,CAAA,QAAQ,UAAU,UAAU,SAAS,SAAA,qBAE7C,CAAA,EACF,CAAA,EACF,EAEArC,EAAAA,KAAC,MAAI,CAAA,UAAU,iCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,mCAAmC,SAAQ,WAAA,EACzDoH,EAAAA,KAAC,KAAG,CAAA,UAAU,kCACZ,SAAA,CAAApH,EAAAA,IAAC,MAAG,SAA4C,8CAAA,CAAA,EAChDA,EAAAA,IAAC,MAAG,SAAkC,oCAAA,CAAA,EACtCA,EAAAA,IAAC,MAAG,SAAsC,wCAAA,CAAA,EAC1CA,EAAAA,IAAC,MAAG,SAA2B,6BAAA,CAAA,CAAA,EACjC,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EC/RMye,GAAW,IAAM,OACf,KAAA,CAAE,KAAArgB,GAASO,KACX6F,EAAWC,KACX,CAAE,KAAAvD,EAAM,UAAAsC,EAAW,aAAAC,EAAc,SAAAnC,CAAA,EAAaN,KAE9C,CAAC0d,EAAYC,CAAa,EAAI3f,WAAS,EAAK,EAC5C,CAAC0W,EAAaC,CAAc,EAAI3W,WAAS,EAAI,EAC7C,CAAC4f,EAAgBC,CAAiB,EAAI7f,WAAS,IAAI,EAEnD,CACJ,SAAAwN,EACA,aAAAC,EACA,UAAW,CAAE,OAAAxB,CAAO,GAClByB,GAAQ,CACV,cAAe,CACb,YAAYtO,GAAA,YAAAA,EAAM,aAAc,GAChC,WAAWA,GAAA,YAAAA,EAAM,YAAa,GAC9B,OAAOA,GAAA,YAAAA,EAAM,QAAS,GACtB,OAAOA,GAAA,YAAAA,EAAM,QAAS,EACxB,CAAA,CACD,EAEDsB,EAAAA,UAAU,IAAM,CACMof,GACtB,EAAG,CAAE,CAAA,EAEL,MAAMA,EAAsB,SAAY,CACtCnJ,EAAe,EAAI,EAEf,GAAA,CAQF,GANA,MAAMrU,EAAS,EAGf,MAAM,IAAI,QAAQ3S,GAAW,WAAWA,EAAS,GAAG,CAAC,EAGjD,CAACuS,EAAK,OAASA,EAAK,MAAM,SAAW,EAAG,CAC1CnD,EAAM,MAAM,gBAAgB,EAC5ByG,EAAS,OAAO,EAChB,MACF,CAGM,MAAAua,EAAa,MAAMtb,IACzBob,EAAkBE,CAAU,EAExBA,EAAW,SAAWA,EAAW,KAAK,cAAgB,GACxDhhB,EAAM,QAAQ,GAAGghB,EAAW,KAAK,aAAa,uCAAuC,QAGhF34B,EAAO,CACN,QAAA,MAAM,6BAA8BA,CAAK,EACjD2X,EAAM,MAAM,oCAAoC,EAChDyG,EAAS,OAAO,CAAA,QAChB,CACAmR,EAAe,EAAK,CACtB,CAAA,EAIIqJ,EAAgB,IAChB,EAAC9d,GAAA,MAAAA,EAAM,QAAS,CAAC,MAAM,QAAQA,EAAK,KAAK,EAAU,EAEhDA,EAAK,MAAM,OAAO,CAACxQ,EAAOgR,IAAS,CACxC,MAAMud,EAAQvd,EAAK,gBAAkBA,EAAK,OAAS,EAC7CZ,EAAWY,EAAK,UAAY,EAClC,OAAOhR,EAASuuB,EAAQne,GACvB,CAAC,EAIAoe,EAAgB,IAChB,EAAChe,GAAA,MAAAA,EAAM,QAAS,CAAC,MAAM,QAAQA,EAAK,KAAK,EAAU,EAEhDA,EAAK,MAAM,OAAO,CAACxQ,EAAOgR,IACxBhR,GAASgR,EAAK,UAAY,GAChC,CAAC,EAIAyd,EAAuB,IAAM,CACjC,GAAI,EAACje,GAAA,MAAAA,EAAM,QAAS,CAAC,MAAM,QAAQA,EAAK,KAAK,EAAU,MAAA,GAEjD,MAAAke,MAAc,IACf,OAAAle,EAAA,MAAM,QAAgBQ,GAAA,OACzB,MAAM2d,IAAWliB,EAAAuE,EAAK,cAAL,YAAAvE,EAAkB,YAAauE,EAAK,UACjD2d,GACFD,EAAQ,IAAIC,CAAQ,CACtB,CACD,EAEMD,EAAQ,IAAA,EAGXzS,EAAW,MAAOnnB,GAAS,CAC/B,GAAI,CAAC0b,EAAK,OAASA,EAAK,MAAM,SAAW,EAAG,CAC1CnD,EAAM,MAAM,qBAAqB,EACjC,MACF,CAEA4gB,EAAc,EAAI,EAEd,GAAA,CAEF,MAAMjU,EAAe,CACnB,WAAYxJ,EAAK,MAAM,IAAaQ,GAAA,OAAA,OAClC,MAAOA,EAAK,MACZ,SAAUA,EAAK,SACf,QAAOvE,EAAAuE,EAAK,cAAL,YAAAvE,EAAkB,QAAS,iBAAA,EAClC,EACF,iBAAkB,CAChB,OAAQ3X,EAAK,OACb,OAAQA,EAAK,OACb,WAAYA,EAAK,YAAc,GAC/B,aAAcA,EAAK,aACnB,KAAMA,EAAK,KACX,MAAOA,EAAK,MACZ,QAASA,EAAK,QAAQ,QAAQ,MAAO,EAAE,EACvC,QAAS,QACX,EACA,QAAS,CACP,WAAYA,EAAK,WACjB,UAAWA,EAAK,UAChB,MAAOA,EAAK,MACZ,MAAOA,EAAK,MAAM,QAAQ,MAAO,EAAE,CACrC,EACA,eAAgBA,EAAK,gBAAkB,SAAA,EAGjC,QAAA,IAAI,qBAAsBklB,CAAY,EAE9C,MAAMtrB,EAAS,MAAMorB,GAAa,gBAAgBE,CAAY,EAE1DtrB,EAAO,SAET,MAAMokB,EAAU,EAEhBzF,EAAM,QAAQ,8BAA8B,EAC5CyG,EAAS,UAAW,CAClB,MAAO,CACL,QAAS,0CACT,OAAQplB,EAAO,KAAK,QAAUA,EAAO,MACvC,CAAA,CACD,GAEK2e,EAAA,MAAM3e,EAAO,OAAO,QAErBgH,EAAO,CACN,QAAA,MAAM,oBAAqBA,CAAK,EACxC2X,EAAM,MAAM,2BAA2B,CAAA,QACvC,CACA4gB,EAAc,EAAK,CACrB,CAAA,EAIIW,EAAkB,CACtB,MAAO,CACL,SAAU,sBACV,QAAS,CACP,MAAO,2CACP,QAAS,gBACX,CACF,EACA,MAAO,CACL,SAAU,yBACV,QAAS,CACP,MAAO,6BACP,QAAS,0BACX,CACF,EACA,QAAS,CACP,SAAU,oBACV,QAAS,CACP,MAAO,iBACP,QAAS,oBACX,CACF,EACA,KAAM,CACJ,SAAU,qBACV,QAAS,CACP,MAAO,sBACP,QAAS,oCACX,CACF,EACA,MAAO,CACL,SAAU,uBACV,QAAS,CACP,MAAO,aACP,QAAS,0BACX,CACF,CAAA,EAIIC,EAAer7B,GAAU,CAC7B,GAAI,CAACA,EAAc,OAAAA,EAEb,MAAA6D,EADQ7D,EAAM,QAAQ,MAAO,EAAE,EACjB,MAAM,2BAA2B,EACrD,OAAI6D,EACK,IAAIA,EAAM,CAAC,CAAC,KAAKA,EAAM,CAAC,CAAC,IAAIA,EAAM,CAAC,CAAC,GAEvC7D,CAAA,EAGHs7B,EAAiBt7B,GAAU,CAC/B,GAAI,CAACA,EAAc,OAAAA,EAEb,MAAA6D,EADM7D,EAAM,QAAQ,MAAO,EAAE,EACjB,MAAM,kBAAkB,EAC1C,OAAI6D,EACK,GAAGA,EAAM,CAAC,CAAC,IAAIA,EAAM,CAAC,CAAC,GAEzB7D,CAAA,EAGT,OAAIwxB,EAEE1V,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAIF,CAACxH,EAAK,OAASA,EAAK,MAAM,SAAW,QAElC,MAAI,CAAA,UAAU,gDACb,SAACkG,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAAA,IAAA0H,GAAA,CAAa,UAAU,sCAAuC,CAAA,EAC9D1H,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAAc,iBAAA,EACnEA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAAqD,wDAAA,QACtFyJ,EAAO,CAAA,QAAS,IAAMjF,EAAS,QAAQ,EAAG,SAE3C,iBAAA,CAAA,CACF,CAAA,CACF,CAAA,QAKD,MAAI,CAAA,UAAU,8DACb,SAAC4C,EAAA,KAAA,MAAA,CAAI,UAAU,mCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAA,KAAC,SAAA,CACG,QAAS,IAAM5C,EAAS,OAAO,EAC/B,UAAU,6EAEZ,SAAA,CAACxE,EAAAA,IAAAoc,GAAA,CAAU,UAAU,cAAe,CAAA,EAAE,oBAAA,CAAA,CAExC,EAEAhV,EAAAA,KAAC,MAAI,CAAA,UAAU,cACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,sBAAA,EACAoH,EAAAA,KAAC,IAAE,CAAA,UAAU,wBACV,SAAA,CAAc8X,EAAA,EAAE,IAAEA,EAAoB,IAAA,EAAI,OAAS,QAAQ,KAC5D9X,EAAAA,KAAC,OAAK,CAAA,UAAU,oCAAoC,SAAA,CAAA,aACzC4X,EAAgB,EAAA,QAAQ,CAAC,CAAA,EACtC,CAAA,EACA,CAAA,EACF,CAAA,EACF,EAGCJ,KAAkBzhB,EAAAyhB,EAAe,OAAf,YAAAzhB,EAAqB,eAAgB,GACpD6C,EAAA,IAAC,MAAI,CAAA,UAAU,4EACb,SAAAoH,OAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,8BAA+B,CAAA,EACvDzf,EAAA,IAAA,OAAA,CAAK,UAAU,8BAA8B,SAElD,6EAAA,CAAA,CAAA,CACE,CACF,CAAA,EAGHmf,EAAyB,EAAA,GACrBnf,EAAA,IAAA,MAAA,CAAI,UAAU,wEACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAkQ,GAAA,CAAQ,UAAU,4BAA6B,CAAA,EAChD9I,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACjB,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,cAAc,SAE9B,mCAAA,EACIoH,EAAAA,KAAC,IAAE,CAAA,UAAU,eAAe,SAAA,CAAA,iCACK+X,EAAqB,EAAE,4CAAA,EACxD,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EAGJ/X,EAAAA,KAAC,MAAI,CAAA,UAAU,wCAEb,SAAA,CAACpH,EAAA,IAAA,MAAA,CAAI,UAAU,0BACb,SAACoH,EAAAA,KAAA,OAAA,CAAK,SAAUqF,EAAaE,CAAQ,EAAG,UAAU,YAGhD,SAAA,CAACvF,EAAAA,KAAA,MAAA,CAAI,UAAU,2DACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,8DACZ,SAAA,CAACpH,EAAAA,IAAA6H,EAAA,CAAK,UAAU,4BAA6B,CAAA,EAAE,wBAAA,EAEjD,EAEAT,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,SAAA,EACAA,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,aAAc8S,EAAgB,IAAI,EAC/C,KAAK,OACL,UAAW,8GACPrU,EAAO,WAAa,2BAA6B,uCACrD,GACA,YAAY,mBAAA,CAChB,EACCA,EAAO,YACH7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCxU,EAAO,WAAW,OAAA,EACrB,CAAA,EAEN,SAEC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,cAAA,EACAA,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,YAAa8S,EAAgB,IAAI,EAC9C,KAAK,OACL,UAAW,8GACPrU,EAAO,UAAY,2BAA6B,uCACpD,GACA,YAAY,eAAA,CAChB,EACCA,EAAO,WACH7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCxU,EAAO,UAAU,OAAA,EACpB,CAAA,EAEN,SAEC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,UAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAA6M,GAAA,CAAK,UAAU,0EAA2E,CAAA,EAC3F7M,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,QAAS8S,EAAgB,KAAK,EAC3C,KAAK,QACL,UAAW,oHACPrU,EAAO,MAAQ,2BAA6B,uCAChD,GACA,YAAY,eAAA,CAChB,CAAA,EACF,EACCA,EAAO,OACH7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCxU,EAAO,MAAM,OAAA,EAChB,CAAA,EAEN,SAEC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,aAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAA+T,GAAA,CAAM,UAAU,0EAA2E,CAAA,EAC5F/T,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,QAAS8S,EAAgB,KAAK,EAC3C,KAAK,MACL,UAAW,oHACPrU,EAAO,MAAQ,2BAA6B,uCAChD,GACA,YAAY,kBACZ,SAAWvtB,GAAM,CACfA,EAAE,OAAO,MAAQ6hC,EAAY7hC,EAAE,OAAO,KAAK,CAC7C,CAAA,CACJ,CAAA,EACF,EACCutB,EAAO,OACH7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCxU,EAAO,MAAM,OAAA,EAChB,CAAA,EAEN,CAAA,EACF,CAAA,EACF,EAGA7D,EAAAA,KAAC,MAAI,CAAA,UAAU,2DACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,8DACZ,SAAA,CAACpH,EAAAA,IAAAgU,GAAA,CAAO,UAAU,6BAA8B,CAAA,EAAE,qBAAA,EAEpD,EAEA5M,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,gBACb,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,QAAA,EACAA,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,UAAW8S,EAAgB,OAAO,EAC/C,KAAK,OACL,UAAW,+GACPrU,EAAO,QAAU,2BAA6B,wCAClD,GACA,YAAY,YACZ,SAAWvtB,GAAM,CACfA,EAAE,OAAO,MAAQ8hC,EAAc9hC,EAAE,OAAO,KAAK,CAC/C,CAAA,CACJ,EACCutB,EAAO,SACH7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCxU,EAAO,QAAQ,OAAA,EAClB,CAAA,EAEN,EAEA7D,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,WAAA,EACAA,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,QAAS8S,EAAgB,KAAK,EAC3C,KAAK,OACL,UAAW,+GACPrU,EAAO,MAAQ,2BAA6B,wCAChD,GACA,YAAY,KACZ,UAAW,EACX,MAAO,CAAE,cAAe,WAAY,CAAA,CACxC,EACCA,EAAO,OACH7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCxU,EAAO,MAAM,OAAA,EAChB,CAAA,EAEN,EAEA7D,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACb,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,QAAA,EACAA,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,SAAU,CAAE,SAAU,oBAAqB,EACxD,KAAK,OACL,UAAW,+GACPvB,EAAO,OAAS,2BAA6B,wCACjD,GACA,YAAY,aAAA,CAChB,EACCA,EAAO,QACH7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCxU,EAAO,OAAO,OAAA,EACjB,CAAA,EAEN,SAEC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,WAAA,EACAA,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,SAAU,CAAE,SAAU,uBAAwB,EAC3D,KAAK,OACL,UAAW,+GACPvB,EAAO,OAAS,2BAA6B,wCACjD,GACA,YAAY,KAAA,CAChB,EACCA,EAAO,QACH7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCxU,EAAO,OAAO,OAAA,EACjB,CAAA,EAEN,SAEC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,cAAA,EACAA,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,YAAY,EACzB,KAAK,OACL,UAAU,qJACV,YAAY,mBAAA,CAChB,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACxM,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,WAAA,EACAA,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,eAAgB,CAAE,SAAU,uBAAwB,EACjE,KAAK,OACL,UAAW,+GACPvB,EAAO,aAAe,2BAA6B,wCACvD,GACA,YAAY,gBAAA,CAChB,EACCA,EAAO,cACH7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCxU,EAAO,aAAa,OAAA,EACvB,CAAA,EAEN,SAEC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,iDAAiD,SAElE,WAAA,EACAA,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,OAAQ,CAAE,SAAU,uBAAwB,EACzD,KAAK,OACL,UAAW,+GACPvB,EAAO,KAAO,2BAA6B,wCAC/C,GACA,YAAY,gBAAA,CAChB,EACCA,EAAO,MACH7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCxU,EAAO,KAAK,OAAA,EACf,CAAA,EAEN,CAAA,EACF,CAAA,EACF,EAGA7D,EAAAA,KAAC,MAAI,CAAA,UAAU,2DACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,8DACZ,SAAA,CAACpH,EAAAA,IAAA0f,GAAA,CAAW,UAAU,8BAA+B,CAAA,EAAE,qBAAA,EAEzD,EAEAtY,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,yFACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAA,IAAC,QAAA,CACI,GAAGwM,EAAS,gBAAgB,EAC7B,KAAK,QACL,MAAM,UACN,eAAc,GACd,UAAU,cAAA,CACd,EACApF,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,0DACb,SAAA,CAACpH,EAAAA,IAAAmQ,GAAA,CAAW,UAAU,cAAe,CAAA,EAAE,oBAAA,EAEzC,EACCnQ,EAAA,IAAA,MAAA,CAAI,UAAU,+BAA+B,SAE9C,wFAAA,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,gEACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAA,IAAC,QAAA,CACG,KAAK,QACL,SAAQ,GACR,UAAU,cAAA,CACd,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wDACb,SAAA,CAACpH,EAAAA,IAAA0f,GAAA,CAAW,UAAU,cAAe,CAAA,EAAE,mBAAA,EAEzC,EACC1f,EAAA,IAAA,MAAA,CAAI,UAAU,6BAA6B,SAE5C,qDAAA,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,gEACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAA,IAAC,QAAA,CACG,KAAK,QACL,SAAQ,GACR,UAAU,cAAA,CACd,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wDACb,SAAA,CAACpH,EAAAA,IAAAkQ,GAAA,CAAQ,UAAU,cAAe,CAAA,EAAE,KAAA,EAEtC,EACClQ,EAAA,IAAA,MAAA,CAAI,UAAU,6BAA6B,SAE5C,+BAAA,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,CAAA,EACF,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,uEACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACG,KAAK,SACL,QAASiV,EACT,UAAU,mFACV,KAAK,KAEP,SAAA,CAAC1e,EAAAA,IAAA8M,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,mBAChBqS,EAAyB,EAAA,EAAI,IAAM,GAAG,SAAOH,EAAgB,EAAA,QAAQ,CAAC,CAAA,CAAA,CACzF,EACChf,EAAA,IAAA,IAAA,CAAE,UAAU,iDAAiD,SAE9D,yDAAA,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,QAGC,MAAI,CAAA,UAAU,gBACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,wEACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,8DACZ,SAAA,CAACpH,EAAAA,IAAA0H,GAAA,CAAa,UAAU,4BAA6B,CAAA,EAAE,kBAAA,EAEzD,EAGA1H,EAAAA,IAAC,OAAI,UAAU,0CACZ,oBAAM,OAAS,MAAM,QAAQkB,EAAK,KAAK,GAAKA,EAAK,MAAM,OAAS,EAC7DA,EAAK,MAAM,IAAKQ,GACZ0F,iBAAAA,OAAAA,EAAAA,KAAC,MAAiC,CAAA,UAAU,wDAC1C,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,iEACZ,cAAK,sBAAa,WAAa0B,EAAK,UACjC1B,EAAA,IAAC,MAAA,CACG,MAAKzC,EAAAmE,EAAK,cAAL,YAAAnE,EAAkB,YAAamE,EAAK,UACzC,MAAKjE,EAAAiE,EAAK,cAAL,YAAAjE,EAAkB,QAASiE,EAAK,MACrC,UAAU,4BAAA,CACd,EAEC1B,EAAA,IAAA,MAAA,CAAI,UAAU,iDACb,eAACkQ,GAAQ,CAAA,UAAU,uBAAwB,CAAA,CAAA,CAC7C,CAEN,CAAA,EACA9I,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAACpH,EAAAA,IAAA,IAAA,CAAE,UAAU,+CACV,WAAAxC,EAAAkE,EAAK,cAAL,YAAAlE,EAAkB,QAASkE,EAAK,OAAS,iBAC5C,CAAA,EACA0F,EAAAA,KAAC,IAAE,CAAA,UAAU,wBACV,SAAA,GAAKzJ,EAAA+D,EAAA,cAAA,YAAA/D,EAAa,YAAa+D,EAAK,WAAa,wBAAwB,WAASA,EAAK,UAAY,CAAA,EACtG,EACA0F,EAAAA,KAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,CAAA,UAC7BxJ,EAAA8D,EAAK,cAAL,YAAA9D,EAAkB,kBAAmB8D,EAAK,aAAe,UAAA,EACjE,EACA0F,EAAAA,KAAC,IAAE,CAAA,UAAU,4CAA4C,SAAA,CAAA,QACjD1F,EAAK,gBAAkBA,EAAK,OAAS,IAAMA,EAAK,UAAY,IAAI,QAAQ,CAAC,CAAA,EACjF,CAAA,EACF,CA3BQ,CAAA,EAAAA,EAAK,OAASA,EAAK,GA4B7B,EACH,EAED0F,EAAA,KAAC,MAAI,CAAA,UAAU,mBACb,SAAA,CAACpH,EAAAA,IAAAkQ,GAAA,CAAQ,UAAU,sCAAuC,CAAA,EACzDlQ,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAuB,0BAAA,CAAA,CAAA,CACtD,CAEN,CAAA,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,0CACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,+BACb,SAAA,CAACA,EAAAA,KAAA,OAAA,CAAK,UAAU,gBAAgB,SAAA,CAAA,aAAW8X,EAAc,EAAE,UAAA,EAAQ,EACnE9X,EAAAA,KAAC,OAAK,CAAA,UAAU,gBAAgB,SAAA,CAAA,MAAI4X,EAAgB,EAAA,QAAQ,CAAC,CAAA,EAAE,CAAA,EACjE,EACA5X,EAAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAM,SAAA,EACrCA,EAAA,IAAA,OAAA,CAAK,UAAU,8BAA8B,SAAU,aAAA,CAAA,EAC1D,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,kEACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,kCAAkC,SAAM,SAAA,EACxDoH,EAAAA,KAAC,OAAK,CAAA,UAAU,oCAAoC,SAAA,CAAA,MAChD4X,EAAgB,EAAA,QAAQ,CAAC,CAAA,EAC/B,CAAA,EACA,CAAA,EACF,EAGA5X,EAAAA,KAAC,MAAI,CAAA,UAAU,wFACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAACpH,EAAAA,IAAA2f,GAAA,CAAO,UAAU,6BAA8B,CAAA,EAC/C3f,EAAA,IAAA,OAAA,CAAK,UAAU,+BAA+B,SAAgB,mBAAA,CAAA,EACjE,EACAoH,EAAAA,KAAC,KAAG,CAAA,UAAU,mCACZ,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,oBACZ,SAAA,CAACpH,EAAAA,IAAAiP,GAAA,CAAY,UAAU,cAAe,CAAA,EAAE,gCAAA,EAE1C,EACA7H,EAAAA,KAAC,KAAG,CAAA,UAAU,oBACZ,SAAA,CAACpH,EAAAA,IAAAiP,GAAA,CAAY,UAAU,cAAe,CAAA,EAAE,4BAAA,EAE1C,EACA7H,EAAAA,KAAC,KAAG,CAAA,UAAU,oBACZ,SAAA,CAACpH,EAAAA,IAAAiP,GAAA,CAAY,UAAU,cAAe,CAAA,EAAE,yBAAA,EAE1C,CAAA,EACF,CAAA,EACF,EAGCkQ,IAAyB,GACrB/X,EAAA,KAAA,MAAA,CAAI,UAAU,wDACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAACpH,EAAAA,IAAA6H,EAAA,CAAK,UAAU,4BAA6B,CAAA,EAC7CT,EAAAA,KAAC,OAAK,CAAA,UAAU,8BACjB,SAAA,CAAqB+X,EAAA,EAAE,aAAA,EAC1B,CAAA,EACE,EACA/X,EAAAA,KAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,CAAA,iBACpB+X,EAAqB,EAAE,4CAAA,EACxC,CAAA,EACF,EAIJ/X,EAAAA,KAAC,MAAI,CAAA,UAAU,4DACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAACpH,EAAAA,IAAAmJ,GAAA,CAAK,UAAU,8BAA+B,CAAA,EAC9CnJ,EAAA,IAAA,OAAA,CAAK,UAAU,gCAAgC,SAAsB,yBAAA,CAAA,EACxE,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,0BAA0B,SAEvC,gFAAA,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEN,ECrvBM4f,GAAS,IAAM,CACnB,MAAM1T,EAAWC,KACX,CAACwD,EAAQC,CAAS,EAAI5Q,EAAA,SAAS,CAAE,CAAA,EACjC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACqQ,EAAWC,CAAY,EAAItQ,WAAS,KAAK,EAC1C,CAAC6gB,EAAcC,CAAe,EAAI9gB,WAAS,KAAK,EAChD,CAACoe,EAAUC,CAAW,EAAIre,WAAS,MAAM,EACzC,CAAC+gB,EAAOC,CAAQ,EAAIhhB,WAAS,IAAI,EAEvCU,EAAAA,UAAU,IAAM,CACF+Q,IACDwP,GAAA,EACV,CAAC5Q,CAAS,CAAC,EAEd3P,EAAAA,UAAU,IAAM,QACVvC,EAAA+O,EAAS,QAAT,MAAA/O,EAAgB,UACZY,EAAA,QAAQmO,EAAS,MAAM,OAAO,EACpC,OAAO,QAAQ,aAAa,CAAC,EAAG,SAAS,KAAK,EAChD,EACC,CAACA,CAAQ,CAAC,EAEb,MAAMuE,EAAc,SAAY,CAC9BvR,EAAW,EAAI,EAEX,GAAA,CACE,IAAA9f,EACAiwB,IAAc,QACPjwB,EAAA,MAAMorB,GAAa,WACnB6E,IAAc,YACdjwB,EAAA,MAAMorB,GAAa,eAEnBprB,EAAA,MAAMorB,GAAa,YAG1BprB,EAAO,QACCwwB,EAAAxwB,EAAO,KAAK,QAAUA,EAAO,KAAK,OAASA,EAAO,KAAK,WAAa,CAAE,CAAA,EAE1E2e,EAAA,MAAM3e,EAAO,OAAO,OAEd,CACd2e,EAAM,MAAM,0BAA0B,CACxC,CAEAmB,EAAW,EAAK,CAAA,EAGZ+gB,EAAa,SAAY,CACzB,GAAA,CACI,MAAA7gC,EAAS,MAAMorB,GAAa,gBAC9BprB,EAAO,SACT4gC,EAAS5gC,EAAO,IAAI,QAEfgH,EAAO,CACN,QAAA,MAAM,iCAAkCA,CAAK,CACvD,CAAA,EAGI85B,EAAiBvQ,EAAO,OAAgB2B,GACxCuO,IAAiB,MAAc,GAC5BvO,EAAM,SAAWuO,CACzB,EAEK/O,EAAkB7lB,IACP,CACb,QAAS,kDACT,KAAM,4CACN,QAAS,kDACT,UAAW,+CACX,UAAW,wCAAA,GAECA,CAAM,GAAK,4CAGrB8lB,EAAiB9lB,GAAW,CAQ1B,MAAA+lB,EAPQ,CACZ,QAAShC,GACT,KAAMC,GACN,QAASiB,GACT,UAAWjB,GACX,UAAWgC,EAAA,EAEMhmB,CAAM,GAAK+jB,GACvB,OAAAhP,EAAA,IAACgR,EAAK,CAAA,UAAU,SAAU,CAAA,CAAA,EAG7BmP,EAAkBl1B,IACP,CACb,QAAS,WACT,KAAM,OACN,QAAS,UACT,UAAW,WACX,UAAW,WAAA,GAECA,CAAM,GAAKA,EAGrBm1B,EAAgBxV,GACbA,IAAS,QAAU,SAAW,QAGjCyV,EAAezV,GACZA,IAAS,QAAU0V,GAAejX,GAGrCkX,EAAgB3V,GACbA,IAAS,QACZ,4CACA,+CAGAqF,EAAO,CACX,CACE,GAAI,MACJ,MAAO,QACP,KAAMjI,GACN,YAAa,qBACf,EACA,CACE,GAAI,YACJ,MAAO,iBACP,KAAMsY,GACN,YAAa,wBACf,EACA,CACE,GAAI,QACJ,MAAO,gBACP,KAAMjX,GACN,YAAa,uBACf,CAAA,EAGF,OAAIpK,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,QAKD,MAAI,CAAA,UAAU,+BACb,SAACtB,EAAA,KAAA,MAAA,CAAI,UAAU,yBAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,eAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,gDAAA,CAAA,EACF,EAGC+f,GACC3Y,EAAA,KAAC,MAAI,CAAA,UAAU,6CACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,oCACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,+BACb,eAACsgB,GAAa,CAAA,UAAU,wBAAwB,CAClD,CAAA,EACAlZ,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAa,gBAAA,QAC7D,IAAE,CAAA,UAAU,mCAAoC,SAAA+f,EAAM,YAAY,MAAM,CAAA,EAC3E,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,oCACb,SAAC3Y,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,gCACb,eAACqJ,GAAW,CAAA,UAAU,yBAAyB,CACjD,CAAA,EACAjC,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAY,eAAA,QAC5D,IAAE,CAAA,UAAU,mCAAoC,SAAA+f,EAAM,aAAa,MAAM,CAAA,EAC5E,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,oCACb,SAAC3Y,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,iCACb,eAACmQ,GAAW,CAAA,UAAU,0BAA0B,CAClD,CAAA,EACA/I,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAW,cAAA,EAC5DoH,EAAAA,KAAC,IAAE,CAAA,UAAU,mCAAmC,SAAA,CAAA,MAC1C2Y,EAAM,YAAY,QAAQ,CAAC,CAAA,EACjC,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,oCACb,SAAC3Y,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,iCACb,eAACmQ,GAAW,CAAA,UAAU,0BAA0B,CAClD,CAAA,EACA/I,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAoC,SAAa,gBAAA,EAC9DoH,EAAAA,KAAC,IAAE,CAAA,UAAU,mCAAmC,SAAA,CAAA,MAC1C2Y,EAAM,cAAc,QAAQ,CAAC,CAAA,EACnC,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,EAIF3Y,EAAAA,KAAC,MAAI,CAAA,UAAU,qCAEb,SAAA,CAACpH,EAAA,IAAA,MAAA,CAAI,UAAU,2BACb,SAACA,EAAAA,IAAA,MAAA,CAAI,UAAU,wBACZ,SAAAiQ,EAAK,IAAKI,GAAQ,CACjB,MAAMW,EAAOX,EAAI,KAEf,OAAArQ,EAAA,IAAC,SAAA,CAEC,QAAS,IAAMsP,EAAae,EAAI,EAAE,EAClC,UAAW,iFACThB,IAAcgB,EAAI,GACd,2CACA,6FACN,GAEA,SAAAjJ,EAAA,KAAC,MAAI,CAAA,UAAU,uCACb,SAAA,CAACpH,EAAAA,IAAAgR,EAAA,CAAK,UAAU,SAAU,CAAA,EACzBhR,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAiB,WAAI,MAAM,EAC1CA,EAAA,IAAA,OAAA,CAAK,UAAU,oCAAqC,WAAI,YAAY,CAAA,EACvE,CAAA,EAZKqQ,EAAI,EAAA,CAaX,CAEH,EACH,CACF,CAAA,QAGC,MAAI,CAAA,UAAU,MACb,SAACjJ,EAAA,KAAA,MAAA,CAAI,UAAU,qEACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACA,EAAAA,KAAA,OAAA,CAAK,UAAU,oCACb,SAAA,CAAe8Y,EAAA,OAAO,IAAEA,EAAe,SAAW,EAAI,SAAW,SAAA,EACpE,EACC7Q,IAAc,OACZrP,MAAA,OAAA,CAAK,UAAU,2DACb,SAAAqP,IAAc,YAAc,eAAiB,aAChD,CAAA,CAAA,EAEJ,EAEAjI,EAAAA,KAAC,MAAI,CAAA,UAAU,8DAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACpH,EAAAA,IAAAsK,GAAA,CAAO,UAAU,uBAAwB,CAAA,EAC1ClD,EAAA,KAAC,SAAA,CACC,MAAOyY,EACP,SAAWniC,GAAMoiC,EAAgBpiC,EAAE,OAAO,KAAK,EAC/C,UAAU,0GAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAe,kBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAQ,WAAA,EAC/BA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAI,OAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAO,UAAA,EAC9BA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAQ,WAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAS,YAAA,CAAA,CAAA,CACrC,CAAA,EACF,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,yDACb,SAAA,CAAApH,EAAA,IAAC,SAAA,CACC,QAAS,IAAMqd,EAAY,MAAM,EACjC,UAAW,eACTD,IAAa,OACT,mCACA,mCACN,GACA,MAAM,wBAEN,SAAApd,EAAAA,IAAC6d,GAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CAC5B,EACA7d,EAAA,IAAC,SAAA,CACC,QAAS,IAAMqd,EAAY,MAAM,EACjC,UAAW,eACTD,IAAa,OACT,mCACA,mCACN,GACA,MAAM,wBAEN,SAAApd,EAAAA,IAAC4d,GAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CAC5B,CAAA,EACF,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,EAGCsC,EAAe,SAAW,EACzBlgB,EAAA,IAAC2c,GAAA,CACC,KAAM3U,GACN,MAAM,2BACN,YACEqH,IAAc,QACV,mEACAA,IAAc,YACd,oDACA,oCAEN,WAAW,iBACX,SAAU,IAAM,OAAO,SAAS,KAAO,QAAA,GAEvC+N,IAAa,aAEd,MAAI,CAAA,UAAU,uDACZ,SAAe8C,EAAA,IAAK5O,GAAU,eACvB,MAAAkP,EAAWH,EAAY/O,EAAM,IAAI,EACvC,aACG,MAAoB,CAAA,UAAU,kFAC7B,SAAClK,EAAA,KAAA,MAAA,CAAI,UAAU,MAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,EAAAA,KAAC,QAAK,UAAW,gFAAgFmZ,EAAajP,EAAM,IAAI,CAAC,GACvH,SAAA,CAACtR,EAAAA,IAAAwgB,EAAA,CAAS,UAAU,cAAe,CAAA,EAClCJ,EAAa9O,EAAM,IAAI,CAAA,EAC1B,EACAlK,EAAAA,KAAC,QAAK,UAAW,gFAAgF0J,EAAeQ,EAAM,MAAM,CAAC,GAC1H,SAAA,CAAAP,EAAcO,EAAM,MAAM,QAC1B,OAAK,CAAA,UAAU,OAAQ,SAAe6O,EAAA7O,EAAM,MAAM,EAAE,CAAA,EACvD,CAAA,EACF,QAGC,KAAG,CAAA,UAAU,wDACX,UAAAnU,EAAAmU,EAAM,cAAN,YAAAnU,EAAmB,MACtB,QACC,IAAE,CAAA,UAAU,6BACV,UAAAI,EAAA+T,EAAM,cAAN,YAAA/T,EAAmB,UACtB,EAGA6J,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,+BACb,SAAA,CAAApH,EAAAA,IAAC,QAAK,UAAU,gBACb,WAAM,OAAS,QAAU,YAAc,YAC1C,CAAA,EACAoH,EAAAA,KAAC,OAAK,CAAA,UAAU,yBACb,SAAA,EAAA3J,EAAA6T,EAAM,aAAN,YAAA7T,EAAkB,WAAW,KAAED,EAAA8T,EAAM,aAAN,YAAA9T,EAAkB,SAAA,EACpD,CAAA,EACF,EACA4J,EAAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAW,cAAA,EAC1CA,EAAA,IAAA,OAAA,CAAK,UAAU,cAAe,WAAM,SAAS,CAAA,EAChD,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAM,SAAA,EACtCoH,EAAAA,KAAC,OAAK,CAAA,UAAU,2BAA2B,SAAA,CAAA,OAAIzJ,EAAA2T,EAAM,cAAN,YAAA3T,EAAmB,QAAQ,EAAC,EAAE,CAAA,EAC/E,EACAyJ,EAAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAK,QAAA,EACrCA,EAAAA,IAAC,OAAK,CAAA,UAAU,cACb,SAAA,IAAI,KAAKsR,EAAM,UAAU,EAAE,mBAAmB,OAAO,CACxD,CAAA,CAAA,EACF,CAAA,EACF,EAGCtR,EAAA,IAAAqH,EAAA,CAAK,GAAI,WAAWiK,EAAM,GAAG,GAC5B,SAAAlK,EAAA,KAACqC,EAAO,CAAA,UAAU,iDAAiD,KAAK,KACtE,SAAA,CAACzJ,EAAAA,IAAAgN,GAAA,CAAI,UAAU,cAAe,CAAA,EAAE,cAAA,CAAA,CAElC,CACF,CAAA,CACF,CAAA,CAAA,CAAA,EAvDQsE,EAAM,GAwDhB,CAEH,CAAA,EACH,EAGAtR,EAAA,IAAC,MAAI,CAAA,UAAU,gDACb,SAAAA,EAAA,IAAC,MAAI,CAAA,UAAU,kBACb,SAAAoH,OAAC,QAAM,CAAA,UAAU,sCACf,SAAA,CAAApH,MAAC,QAAM,CAAA,UAAU,aACf,SAAAoH,EAAA,KAAC,KACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,OAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,UAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,OAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,CAAA,CAAA,CACF,CACF,CAAA,QACC,QAAM,CAAA,UAAU,oCACd,SAAekgB,EAAA,IAAK5O,GAAU,iBACvB,MAAAkP,EAAWH,EAAY/O,EAAM,IAAI,EAErC,OAAAlK,EAAA,KAAC,KAAmB,CAAA,UAAU,mBAC5B,SAAA,CAAApH,MAAC,KAAG,CAAA,UAAU,YACZ,SAAAoH,EAAA,KAAC,MACC,CAAA,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,iDACZ,UAAA7C,EAAAmU,EAAM,cAAN,YAAAnU,EAAmB,MACtB,EACAiK,EAAAA,KAAC,MAAI,CAAA,UAAU,wBACZ,SAAA,EAAA7J,EAAA+T,EAAM,cAAN,YAAA/T,EAAmB,UAAU,WAAS+T,EAAM,QAAA,EAC/C,CAAA,CAAA,CACF,CACF,CAAA,EACCtR,EAAA,IAAA,KAAA,CAAG,UAAU,8BACZ,SAACoH,EAAAA,KAAA,OAAA,CAAK,UAAW,gFAAgFmZ,EAAajP,EAAM,IAAI,CAAC,GACvH,SAAA,CAACtR,EAAAA,IAAAwgB,EAAA,CAAS,UAAU,cAAe,CAAA,EAClCJ,EAAa9O,EAAM,IAAI,CAAA,CAAA,CAC1B,CACF,CAAA,EACAlK,EAAAA,KAAC,KAAG,CAAA,UAAU,YACZ,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wBACZ,SAAA,EAAA3J,EAAA6T,EAAM,aAAN,YAAA7T,EAAkB,WAAW,KAAED,EAAA8T,EAAM,aAAN,YAAA9T,EAAkB,SAAA,EACpD,EACA4J,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,KACnCzJ,EAAA2T,EAAM,aAAN,YAAA3T,EAAkB,QAAA,EACtB,CAAA,EACF,EACAyJ,EAAAA,KAAC,KAAG,CAAA,UAAU,iEAAiE,SAAA,CAAA,OACzExJ,EAAA0T,EAAM,cAAN,YAAA1T,EAAmB,QAAQ,EAAC,EAClC,EACCoC,EAAA,IAAA,KAAA,CAAG,UAAU,8BACZ,SAACoH,EAAAA,KAAA,OAAA,CAAK,UAAW,gFAAgF0J,EAAeQ,EAAM,MAAM,CAAC,GAC1H,SAAA,CAAAP,EAAcO,EAAM,MAAM,QAC1B,OAAK,CAAA,UAAU,OAAQ,SAAe6O,EAAA7O,EAAM,MAAM,EAAE,CAAA,CAAA,CACvD,CACF,CAAA,EACAtR,EAAAA,IAAC,KAAG,CAAA,UAAU,oDACX,SAAA,IAAI,KAAKsR,EAAM,UAAU,EAAE,mBAAmB,OAAO,CACxD,CAAA,EACAtR,EAAAA,IAAC,KAAG,CAAA,UAAU,kDACZ,SAAAoH,EAAA,KAACC,EAAA,CACC,GAAI,WAAWiK,EAAM,GAAG,GACxB,UAAU,6DAEV,SAAA,CAACtR,EAAAA,IAAAgN,GAAA,CAAI,UAAU,cAAe,CAAA,EAAE,cAAA,CAAA,CAAA,EAGpC,CAAA,GA7COsE,EAAM,GA8Cf,CAEH,CAAA,EACH,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAAA,CAEJ,CAAA,CACF,CAAA,CAEJ,ECzeA,MAAMmP,EAAY,CAChB,aAAc,CACZ,KAAK,OAAS,KACd,KAAK,YAAc,GACnB,KAAK,kBAAoB,EACzB,KAAK,qBAAuB,EAC5B,KAAK,kBAAoB,IAC1B,CAGD,QAAQn7B,EAAO,CACb,GAAI,CACF,QAAQ,IAAI,oCAAoC,EAE5C,KAAK,QACP,KAAK,WAAU,EAIjB,IAAIo7B,EACJ,GAAoB,CAAA,EAAA,YAClBA,EAA4B,CAAA,EAAA,oBACI,OAAO,SAAS,WAAa,aAAe,OAAO,SAAS,WAAa,YACzGA,EAAY,4BACP,CAEL,MAAMpsB,EAAW,OAAO,SAAS,WAAa,SAAW,SAAW,QAC9DoI,EAAW,OAAO,SAAS,SACjCgkB,EAAY,GAAGpsB,CAAQ,KAAKoI,CAAQ,OACrC,CAED,eAAQ,IAAI,iCAAkCgkB,CAAS,EAEvD,KAAK,OAASC,GAAGD,EAAW,CAC1B,KAAM,CAAE,MAAO,UAAUp7B,CAAK,EAAI,EAClC,WAAY,CAAC,YAAa,SAAS,EACnC,QAAS,GACT,gBAAiB,GACjB,QAAS,IACT,SAAU,EAClB,CAAO,EAED,KAAK,oBAAmB,EAEjB,KAAK,MACb,OAAQc,EAAO,CACd,eAAQ,MAAM,gCAAiCA,CAAK,EAC7C,IACR,CACF,CAGD,qBAAsB,CACf,KAAK,SAEV,KAAK,OAAO,GAAG,UAAW,IAAM,CAC9B,QAAQ,IAAI,+BAA+B,EAC3C,KAAK,YAAc,GACnB,KAAK,kBAAoB,EAErB,KAAK,oBACP,cAAc,KAAK,iBAAiB,EACpC,KAAK,kBAAoB,KAEjC,CAAK,EAED,KAAK,OAAO,GAAG,aAAe0O,GAAW,CACvC,QAAQ,IAAI,oCAAqCA,CAAM,EACvD,KAAK,YAAc,GAEfA,IAAW,wBAEb,KAAK,iBAAgB,CAE7B,CAAK,EAED,KAAK,OAAO,GAAG,gBAAkB1O,GAAU,CACzC,QAAQ,MAAM,+BAAgCA,CAAK,EACnD,KAAK,YAAc,GACnB,KAAK,iBAAgB,CAC3B,CAAK,EAED,KAAK,OAAO,GAAG,QAAUA,GAAU,CACjC,QAAQ,MAAM,uBAAwBA,CAAK,CACjD,CAAK,EAGD,KAAK,OAAO,GAAG,YAAcZ,GAAS,CACpC,QAAQ,IAAI,uBAAwBA,CAAI,CAC9C,CAAK,EAED,KAAK,OAAO,GAAG,cAAgBA,GAAS,CACtC,QAAQ,IAAI,kBAAmBA,CAAI,CACzC,CAAK,EAED,KAAK,OAAO,GAAG,cAAgBA,GAAS,CACtC,QAAQ,IAAI,6BAA8BA,CAAI,CACpD,CAAK,EAED,KAAK,OAAO,GAAG,cAAgBA,GAAS,CACtC,QAAQ,IAAI,wBAAyBA,CAAI,CAC/C,CAAK,EAED,KAAK,OAAO,GAAG,mBAAqBA,GAAS,CAC3C,QAAQ,IAAI,+BAAgCA,CAAI,CACtD,CAAK,EAED,KAAK,OAAO,GAAG,sBAAwBA,GAAS,CAC9C,QAAQ,IAAI,kCAAmCA,CAAI,CACzD,CAAK,EAED,KAAK,OAAO,GAAG,sBAAwBA,GAAS,CAC9C,QAAQ,IAAI,6BAA8BA,CAAI,CACpD,CAAK,EACF,CAGD,kBAAmB,CACjB,GAAI,KAAK,mBAAqB,KAAK,qBAAsB,CACvD,QAAQ,IAAI,8CAA8C,EAC1D,MACD,CAED,GAAI,KAAK,kBAAmB,OAE5B,KAAK,oBACL,MAAM0e,EAAQ,KAAK,IAAI,EAAG,KAAK,iBAAiB,EAAI,IAEpD,QAAQ,IAAI,6BAA6B,KAAK,iBAAiB,IAAI,KAAK,oBAAoB,OAAOA,CAAK,IAAI,EAE5G,KAAK,kBAAoB,WAAW,IAAM,CACxC,KAAK,kBAAoB,KACrB,KAAK,QACP,KAAK,OAAO,SAEf,EAAEA,CAAK,CACT,CAGD,YAAa,CACX,QAAQ,IAAI,uCAAuC,EAE/C,KAAK,oBACP,cAAc,KAAK,iBAAiB,EACpC,KAAK,kBAAoB,MAGvB,KAAK,SACP,KAAK,OAAO,aACZ,KAAK,OAAS,MAGhB,KAAK,YAAc,EACpB,CAGD,aAAc,CACZ,OAAO,KAAK,aAAe,KAAK,QAAU,KAAK,OAAO,SACvD,CAGD,SAAS0c,EAAQ,CACf,MAAI,CAAC,KAAK,YAAa,GAAI,CAACA,GAC1B,QAAQ,KAAK,kDAAkD,EACxD,KAGT,QAAQ,IAAI,uBAAwBA,CAAM,EAC1C,KAAK,OAAO,KAAK,iBAAkB,CAAE,QAASA,CAAM,CAAE,EAC/C,GACR,CAGD,UAAUA,EAAQ,CAChB,MAAI,CAAC,KAAK,YAAa,GAAI,CAACA,GAC1B,QAAQ,KAAK,gDAAgD,EACtD,KAGT,QAAQ,IAAI,qBAAsBA,CAAM,EACxC,KAAK,OAAO,KAAK,kBAAmB,CAAE,QAASA,CAAM,CAAE,EAChD,GACR,CAGD,YAAYA,EAAQl/B,EAAS,CAC3B,MAAI,CAAC,KAAK,YAAW,GAAM,CAACk/B,GAAU,CAACl/B,GACrC,QAAQ,KAAK,0DAA0D,EAChE,KAGT,QAAQ,IAAI,wBAAyB,CAAE,OAAAk/B,EAAQ,QAAAl/B,CAAS,CAAA,EACxD,KAAK,OAAO,KAAK,eAAgB,CAC/B,QAASk/B,EACT,QAASl/B,EAAQ,KAAM,CAC7B,CAAK,EACM,GACR,CAGD,YAAYk/B,EAAQ,CAClB,MAAI,CAAC,KAAK,YAAW,GAAM,CAACA,EAAe,IAE3C,KAAK,OAAO,KAAK,SAAU,CAAE,QAASA,CAAM,CAAE,EACvC,GACR,CAGD,WAAWA,EAAQ,CACjB,MAAI,CAAC,KAAK,YAAW,GAAM,CAACA,EAAe,IAE3C,KAAK,OAAO,KAAK,cAAe,CAAE,QAASA,CAAM,CAAE,EAC5C,GACR,CAGD,MAAO,CACL,OAAK,KAAK,YAAa,GAEvB,KAAK,OAAO,KAAK,OAAQ,CAAE,UAAW,KAAK,IAAK,CAAA,CAAE,EAC3C,IAHyB,EAIjC,CAKD,MAAM,cAAe,SACnB,GAAI,CACF,QAAQ,IAAI,8BAA8B,EAE1C,MAAM16B,EAAW,MAAMsW,EAAI,IAAI,aAAa,EAE5C,eAAQ,IAAI,oBAAqBtW,EAAS,IAAI,EAEvC,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,KAAMA,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,kBAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,0BAA2BA,CAAK,EAEvC,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,yBAC1C,KAAM,CAAE,MAAO,EAAI,CAC3B,CACK,CACF,CAGD,MAAM,iBAAiBoN,EAAS,SAC9B,GAAI,CACF,QAAQ,IAAI,8BAA+BA,CAAO,EAElD,MAAMzkB,EAAW,MAAMsW,EAAI,IAAI,cAAcmO,CAAO,EAAE,EAEtD,eAAQ,IAAI,qBAAsBzkB,EAAS,IAAI,EAExC,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,KAAMA,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,iBAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,mCAAoCA,CAAK,EAEhD,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,sBAC1C,KAAM,IACd,CACK,CACF,CAGD,MAAM,gBAAgBqjB,EAAQC,EAAQ,GAAIC,EAAO,EAAG,SAClD,GAAI,CACF,QAAQ,IAAI,iCAAkCF,CAAM,EAEpD,MAAM16B,EAAW,MAAMsW,EAAI,IAAI,cAAcokB,CAAM,mBAAmBC,CAAK,SAASC,CAAI,EAAE,EAE1F,eAAQ,IAAI,wBAAyB56B,EAAS,IAAI,EAE3C,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,KAAMA,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,sBAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,8BAA+BA,CAAK,EAE3C,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,6BAC1C,KAAM,CAAE,SAAU,EAAI,CAC9B,CACK,CACF,CAGD,MAAM,gBAAgBqjB,EAAQl/B,EAAS,SACrC,GAAI,CACF,QAAQ,IAAI,iCAAkC,CAAE,OAAAk/B,EAAQ,QAAAl/B,CAAS,CAAA,EAEjE,MAAMwE,EAAW,MAAMsW,EAAI,KAAK,cAAcokB,CAAM,WAAY,CAC9D,QAASl/B,EAAQ,KAAM,CAC/B,CAAO,EAED,eAAQ,IAAI,wBAAyBwE,EAAS,IAAI,EAE3C,CACL,QAASA,EAAS,KAAK,SAAW,GAClC,KAAMA,EAAS,KAAK,MAAQA,EAAS,KACrC,QAASA,EAAS,KAAK,SAAW,kBAC1C,CACK,OAAQE,EAAO,CACd,eAAQ,MAAM,sCAAuCA,CAAK,EAEnD,CACL,QAAS,GACT,UAASmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,yBAClD,CACK,CACF,CAGD,GAAG8I,EAAOrL,EAAU,CACd,KAAK,QACP,KAAK,OAAO,GAAGqL,EAAOrL,CAAQ,CAEjC,CAGD,IAAIqL,EAAOrL,EAAU,CACf,KAAK,QACP,KAAK,OAAO,IAAIqL,EAAOrL,CAAQ,CAElC,CAGD,qBAAsB,CACpB,MAAO,CACL,UAAW,KAAK,YAAa,EAC7B,OAAQ,CAAC,CAAC,KAAK,OACf,kBAAmB,KAAK,kBACxB,qBAAsB,KAAK,oBACjC,CACG,CACH,CAGO,MAAM+lB,GAAc,IAAIN,GClVzBO,GAAW,CAAC,CAAE,QAAArW,EAAS,QAAA8G,KAAc,CACnC,KAAA,CAAE,KAAArT,GAASO,KACX,CAACsiB,EAAMC,CAAO,EAAIliB,WAAS,IAAI,EAC/B,CAACmiB,EAAUC,CAAW,EAAIpiB,EAAA,SAAS,CAAE,CAAA,EACrC,CAACqiB,EAAYC,CAAa,EAAItiB,WAAS,EAAE,EACzC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACuiB,EAAWC,CAAY,EAAIxiB,WAAS,EAAK,EAC1C,CAACyiB,EAASC,CAAU,EAAI1iB,WAAS,EAAK,EACtC,CAAC2iB,EAAaC,CAAc,EAAI5iB,EAAAA,SAAS,IAAI,GAAK,EAClD,CAAC6iB,EAAQC,CAAS,EAAI9iB,WAAS,IAAI,EAEnC+iB,EAAiBlc,SAAO,IAAI,EAC5Bmc,EAAmBnc,SAAO,IAAI,EAC9Boc,EAAkBpc,SAAO,IAAI,EAEnCnG,EAAAA,UAAU,KACOwiB,IACR,IAAM,CACHC,GAAA,GAET,CAACxX,CAAO,CAAC,EAEZjL,EAAAA,UAAU,IAAM,CACC0iB,GAAA,EACd,CAACjB,CAAQ,CAAC,EAEb,MAAMe,EAAiB,SAAY,OACjChjB,EAAW,EAAI,EAEX,GAAA,CAEF,MAAMmjB,EAAa,MAAMtB,GAAY,iBAAiBpW,CAAO,EACzD,GAAA,CAAC0X,EAAW,QAAS,CACjBtkB,EAAA,MAAMskB,EAAW,OAAO,EAC9B,MACF,CAEQnB,EAAAmB,EAAW,KAAK,IAAI,EAGtB,MAAA/8B,EAAQ,aAAa,QAAQ,cAAc,KAAK6X,EAAA,SAAS,OAC5D,MAAM,IAAI,EACV,KAAYmlB,GAAAA,EAAI,WAAW,eAAe,CAAC,IAFQ,YAAAnlB,EAGlD,MAAM,KAAK,IAEf,GAAI7X,EAAO,CACH,MAAAi9B,EAAiBxB,GAAY,QAAQz7B,CAAK,EAChDw8B,EAAUS,CAAc,EAExBC,EAAqBD,EAAgBF,EAAW,KAAK,KAAK,GAAG,EAG9CE,EAAA,KAAK,iBAAkB,CAAE,QAASF,EAAW,KAAK,KAAK,IAAK,CAC7E,QAEOj8B,EAAO,CACN,QAAA,MAAM,4BAA6BA,CAAK,EAChD2X,EAAM,MAAM,uBAAuB,CACrC,CAEAmB,EAAW,EAAK,CAAA,EAGZsjB,EAAuB,CAACD,EAAgB3B,IAAW,CACxC2B,EAAA,GAAG,YAAa,IAAM,CACnCf,EAAa,EAAI,EACjB,QAAQ,IAAI,mBAAmB,CAAA,CAChC,EAEce,EAAA,GAAG,cAAgB/8B,GAAS,CACjC,QAAA,IAAI,kBAAmBA,CAAI,EACvB47B,EAAA57B,EAAK,UAAY,CAAA,CAAE,CAAA,CAChC,EAEc+8B,EAAA,GAAG,cAAgB/8B,GAAS,CACzC,MAAMM,EAAUN,EAAK,QACjBM,EAAQ,UAAY86B,IACtBQ,EAAoBhe,GAAA,CAAC,GAAGA,EAAMtd,CAAO,CAAC,EAGlCA,EAAQ,UAAYsY,EAAK,KACLqkB,IAE1B,CACD,EAEcF,EAAA,GAAG,cAAgB/8B,GAAS,CACrCA,EAAK,UAAY4Y,EAAK,MACTwjB,EAAAxe,OAAY,IAAI,CAAC,GAAGA,EAAM5d,EAAK,QAAQ,CAAC,CAAC,EAGxD,WAAW,IAAM,CACfo8B,EAAuBxe,GAAA,CACf,MAAAsf,EAAS,IAAI,IAAItf,CAAI,EACpB,OAAAsf,EAAA,OAAOl9B,EAAK,QAAQ,EACpBk9B,CAAA,CACR,GACA,GAAI,EACT,CACD,EAEcH,EAAA,GAAG,mBAAqB/8B,GAAS,CAC1CA,EAAK,UAAY4Y,EAAK,KACxBwjB,EAAuBxe,GAAA,CACf,MAAAsf,EAAS,IAAI,IAAItf,CAAI,EACpB,OAAAsf,EAAA,OAAOl9B,EAAK,QAAQ,EACpBk9B,CAAA,CACR,CACH,CACD,EAEcH,EAAA,GAAG,sBAAwB/8B,GAAS,CAC3CuY,EAAA,KAAKvY,EAAK,OAAO,CAAA,CACxB,EAEc+8B,EAAA,GAAG,QAAUn8B,GAAU,CAC5B,QAAA,MAAM,qBAAsBA,CAAK,EACnC2X,EAAA,MAAM3X,EAAM,SAAW,iBAAiB,CAAA,CAC/C,EAEcm8B,EAAA,GAAG,aAAc,IAAM,CACpCf,EAAa,EAAK,EAClB,QAAQ,IAAI,sBAAsB,CAAA,CACnC,CAAA,EAGGW,EAAU,IAAM,CAChBN,IACEZ,GACFY,EAAO,KAAK,kBAAmB,CAAE,QAASZ,EAAK,IAAK,EAEtDF,GAAY,WAAW,GAErBiB,EAAiB,SACnB,aAAaA,EAAiB,OAAO,CACvC,EAGII,EAAiB,IAAM,QAC3BjlB,EAAA4kB,EAAe,UAAf,MAAA5kB,EAAwB,eAAe,CAAE,SAAU,QAAU,EAAA,EAGzDslB,EAAwB,IAAM,CAC9B,GAAA,CACI,MAAAE,EAAQ,IAAI,MAAM,mBAAmB,EAC3CA,EAAM,OAAS,GACTA,EAAA,OAAO,MAAM,IAAM,CAAA,CAExB,OACa,CAEhB,CAAA,EAGIC,EAAoB,MAAOllC,GAAM,OAGrC,GAFAA,EAAE,eAAe,EAEb,GAAC2jC,EAAW,QAAUI,GAAW,CAACF,GAEtC,CAAAG,EAAW,EAAI,EAEX,GAAA,CAEEG,GAAUZ,IACZY,EAAO,KAAK,eAAgB,CAC1B,QAASZ,EAAK,IACd,QAASI,EAAW,KAAK,CAAA,CAC1B,EAEDC,EAAc,EAAE,GAChBnkB,EAAA8kB,EAAgB,UAAhB,MAAA9kB,EAAyB,eAEpB/W,EAAO,CACN,QAAA,MAAM,2BAA4BA,CAAK,EAC/C2X,EAAM,MAAM,yBAAyB,CACvC,CAEA2jB,EAAW,EAAK,EAAA,EAGZmB,EAAe,IAAM,CACrBhB,GAAUZ,GAAQM,IACpBM,EAAO,KAAK,SAAU,CAAE,QAASZ,EAAK,IAAK,EAGvCe,EAAiB,SACnB,aAAaA,EAAiB,OAAO,EAGtBA,EAAA,QAAU,WAAW,IAAM,CAC1CH,EAAO,KAAK,cAAe,CAAE,QAASZ,EAAK,IAAK,GAC/C,GAAI,EACT,EAGIvS,EAAciL,GAAe,CAC3B,MAAAhL,EAAO,IAAI,KAAKgL,CAAU,EAC1BnqB,MAAU,KAGhB,OAFgBmf,EAAK,aAAa,IAAMnf,EAAI,aAAa,EAGhDmf,EAAK,mBAAmB,QAAS,CACtC,KAAM,UACN,OAAQ,SAAA,CACT,EAEMA,EAAK,mBAAmB,QAAS,CACtC,IAAK,UACL,MAAO,UACP,KAAM,UACN,OAAQ,SAAA,CACT,CACH,EAGImU,EAAoBh9B,GAAY,OAChC,OAAAA,EAAQ,UAAYsY,EAAK,MACpBjB,EAAArX,EAAQ,UAAR,YAAAqX,EAAiB,QAAS,EAAI,OAAS,OAEzC,IAAA,EAGT,OAAI8B,QAEC,MAAI,CAAA,UAAU,wCACb,SAACmI,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAAA,IAAA+iB,GAAA,CAAO,UAAU,iDAAkD,CAAA,EACnE/iB,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAkB,qBAAA,CAAA,CACjD,CAAA,CACF,CAAA,EAKFoH,EAAA,KAAC,MAAI,CAAA,UAAU,mDAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,iEACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,uBAAwB,CAAA,SAChD,MACC,CAAA,SAAA,CAAC9O,EAAA,IAAA,KAAA,CAAG,UAAU,8BAA8B,SAAc,iBAAA,EAC1DoH,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAAApH,MAAC,OAAI,UAAW,wBAAwBuhB,EAAY,eAAiB,YAAY,GAAI,QACpF,OAAK,CAAA,UAAU,wBACb,SAAAA,EAAY,YAAc,eAC7B,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAEAna,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAAApH,EAAA,IAAC,SAAA,CACC,UAAU,uEACV,MAAM,4BAEN,SAAAA,EAAAA,IAAC+T,GAAM,CAAA,UAAU,SAAU,CAAA,CAAA,CAC7B,EACA/T,EAAA,IAAC,SAAA,CACC,UAAU,uEACV,MAAM,8BAEN,SAAAA,EAAAA,IAACgjB,GAAM,CAAA,UAAU,SAAU,CAAA,CAAA,CAC7B,EACAhjB,EAAA,IAAC,SAAA,CACC,UAAU,uEACV,MAAM,gBAEN,SAAAA,EAAAA,IAACkI,GAAS,CAAA,UAAU,SAAU,CAAA,CAAA,CAChC,CAAA,EACF,CAAA,EACF,EAGC,CAACqZ,GACCvhB,EAAA,IAAA,MAAA,CAAI,UAAU,oDACb,SAAAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACpH,EAAAA,IAAA8Z,GAAA,CAAY,UAAU,cAAe,CAAA,EACrC9Z,EAAA,IAAA,OAAA,CAAK,UAAU,UAAU,SAAuB,0BAAA,CAAA,CAAA,CACnD,CACF,CAAA,EAIFoH,EAAAA,KAAC,MAAI,CAAA,UAAU,uCACZ,SAAA,CAAA+Z,EAAS,SAAW,EAClB/Z,EAAA,KAAA,MAAA,CAAI,UAAU,mBACb,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,sCAAuC,CAAA,EAC/D9O,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAsB,yBAAA,EAClDA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAErC,sCAAA,CAAA,CAAA,CACF,EAEAmhB,EAAS,IAAI,CAACr7B,EAAS4B,IAAU,CACzB,MAAAu7B,EAAen9B,EAAQ,UAAYsY,EAAK,IACxC8kB,EAAkBp9B,EAAQ,UAG9B,OAAAka,EAAA,IAAC,MAAA,CAEC,UAAW,QACTkjB,EACI,iBACAD,EACA,cACA,eACN,GAEC,SACCC,EAAAljB,EAAA,IAAC,MAAI,CAAA,UAAU,+EACZ,SAAQla,EAAA,OACX,CAAA,EAEAshB,EAAAA,KAAC,OAAI,UAAW,wBAAwB6b,EAAe,QAAU,OAAO,GACrE,SAAA,CAAA,CAACA,GAAgBn9B,EAAQ,MACvBshB,EAAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,yEACZ,SAAAla,EAAQ,KAAK,YACZka,EAAA,IAAC,MAAA,CACC,IAAKla,EAAQ,KAAK,YAClB,IAAKA,EAAQ,KAAK,SAClB,UAAU,mCAAA,CAAA,EAGZka,EAAAA,IAAC6H,EAAK,CAAA,UAAU,wBAAwB,CAE5C,CAAA,EACA7H,EAAAA,IAAC,QAAK,UAAU,oCACb,WAAQ,KAAK,YAAcla,EAAQ,KAAK,QAC3C,CAAA,CAAA,EACF,EAGFshB,EAAA,KAAC,MAAA,CACC,UAAW,wBACT6b,EACI,yBACA,2BACN,GAEA,SAAA,CAAAjjB,EAAA,IAAC,IAAE,CAAA,UAAU,8BAA+B,SAAAla,EAAQ,QAAQ,SAE3D,MAAI,CAAA,UAAW,0CACdm9B,EAAe,gBAAkB,eACnC,GACE,SAAA,CAAAjjB,MAAC,QAAK,UAAU,UACb,SAAW0O,EAAA5oB,EAAQ,UAAU,EAChC,EAECm9B,GACEjjB,EAAAA,IAAA,MAAA,CAAI,UAAU,OACZ,SAAA8iB,EAAiBh9B,CAAO,IAAM,OAC5Bka,EAAAA,IAAAmjB,GAAA,CAAa,UAAU,SAAU,CAAA,QAEjCnU,GAAM,CAAA,UAAU,SAAU,CAAA,EAE/B,CAAA,EAEJ,CAAA,CAAA,CACF,CAAA,EACF,CAAA,EA7DGlpB,EAAQ,KAAO4B,CAAA,CA+DtB,CAEH,EAIFi6B,EAAY,KAAO,SACjB,MAAI,CAAA,UAAU,qBACb,SAAC3hB,MAAA,MAAA,CAAI,UAAU,6BACb,eAAC,MAAI,CAAA,UAAU,iDACb,SAACoH,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACA,EAAAA,KAAA,OAAA,CAAK,UAAU,UACb,SAAA,CAAA,MAAM,KAAKua,CAAW,EAAE,KAAK,IAAI,EAAE,IAAEA,EAAY,OAAS,EAAI,OAAS,QAAQ,YAAA,EAClF,EACAva,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,iDAAkD,CAAA,EACjEA,MAAC,OAAI,UAAU,kDAAkD,MAAO,CAAE,eAAgB,QAAU,EACpGA,MAAC,OAAI,UAAU,kDAAkD,MAAO,CAAE,eAAgB,QAAU,CAAA,EACtG,CAAA,EACF,CAAA,CACF,CACF,CAAA,EACF,EAGFA,EAAAA,IAAC,MAAI,CAAA,IAAK+hB,CAAgB,CAAA,CAAA,EAC5B,EAGA3a,EAAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAAAA,EAAA,KAAC,OAAK,CAAA,SAAUwb,EAAmB,UAAU,iBAC3C,SAAA,CAAA5iB,EAAA,IAAC,QAAA,CACC,IAAKiiB,EACL,KAAK,OACL,MAAOZ,EACP,SAAW3jC,GAAM,CACD4jC,EAAA5jC,EAAE,OAAO,KAAK,EACfmlC,GACf,EACA,YAAatB,EAAY,yBAA2B,wBACpD,UAAU,8HACV,SAAU,CAACA,EACX,UAAW,GAAA,CACb,EACAvhB,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,SAAU,CAAC4X,EAAW,KAAK,GAAKI,GAAW,CAACF,EAC5C,QAASE,EACT,KAAK,KACL,UAAU,OAEV,SAAAzhB,EAAAA,IAACmP,GAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CAC5B,CAAA,EACF,EAECkS,EAAW,OAAS,KAClBja,EAAA,KAAA,IAAA,CAAE,UAAU,6BACV,SAAA,CAAWia,EAAA,OAAO,kBAAA,EACrB,CAAA,EAEJ,CACF,CAAA,CAAA,CAEJ,ECvbM+B,GAAQ,CAAC,CACb,KAAAzkC,EAAO,OACP,MAAA+yB,EACA,SAAA5S,EACA,YAAAukB,EAAc,GACd,UAAAC,EACA,UAAA1Z,EAAY,EACd,IAAM,CACJ,MAAM2Z,EAAQ,CACZ,QAAStU,GACT,MAAOgC,GACP,QAAS6I,GACT,KAAM0J,EAAA,EAGFC,EAAc,CAClB,QAAS,8CACT,MAAO,wCACP,QAAS,iDACT,KAAM,0CAAA,EAGFC,EAAc,CAClB,QAAS,iBACT,MAAO,eACP,QAAS,kBACT,KAAM,eAAA,EAGF1S,EAAOuS,EAAM5kC,CAAI,EAEvB,OACGqhB,EAAAA,IAAA,MAAA,CAAI,UAAWwJ,GAAK,wBAAyBia,EAAY9kC,CAAI,EAAGirB,CAAS,EACxE,SAACxC,OAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAAApH,EAAA,IAAC,MAAI,CAAA,UAAU,gBACb,SAAAA,EAAAA,IAACgR,EAAK,CAAA,UAAWxH,GAAK,UAAWka,EAAY/kC,CAAI,CAAC,CAAG,CAAA,EACvD,EACAyoB,EAAAA,KAAC,MAAI,CAAA,UAAU,cACZ,SAAA,CAAAsK,GACE1R,EAAA,IAAA,KAAA,CAAG,UAAU,2BAA4B,SAAM0R,EAAA,EAEjD1R,EAAAA,IAAA,MAAA,CAAI,UAAU,UAAW,SAAAlB,CAAS,CAAA,CAAA,EACrC,EACCukB,SACE,MAAI,CAAA,UAAU,eACb,SAACrjB,EAAA,IAAA,MAAA,CAAI,UAAU,kBACb,SAAAA,EAAA,IAAC,SAAA,CACC,QAASsjB,EACT,UAAW9Z,GACT,mFACAka,EAAY/kC,CAAI,EAChB,qBACF,EAEA,SAAAqhB,EAAAA,IAACoI,GAAE,CAAA,UAAU,SAAU,CAAA,CAAA,GAE3B,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAAA,CAEJ,EC/DMub,GAAO,CAAC,CACZ,SAAA7kB,EACA,UAAA8K,EAAY,GACZ,QAAAga,EAAU,UACV,OAAAC,EAAS,UACT,QAAAC,EAAU,UACV,MAAAC,EAAQ,GACR,GAAGjiC,CACL,IAAM,CACJ,MAAMkiC,EAAiB,CACrB,KAAM,GACN,GAAI,MACJ,QAAS,MACT,GAAI,KAAA,EAGAC,EAAgB,CACpB,KAAM,GACN,GAAI,YACJ,QAAS,YACT,GAAI,YACJ,GAAI,WAAA,EAGAC,EAAiB,CACrB,KAAM,GACN,GAAI,aACJ,QAAS,aACT,GAAI,aACJ,KAAM,cAAA,EAIN,OAAAlkB,EAAA,IAAC,MAAA,CACC,UAAWwJ,GACT,WACAwa,EAAeJ,CAAO,EACtBK,EAAcJ,CAAM,EACpBK,EAAeJ,CAAO,EACtB,CACE,iDAAkDC,CACpD,EACAna,CACF,EACC,GAAG9nB,EAEH,SAAAgd,CAAA,CAAA,CAGP,EChDMqlB,GAAa,CAAC,CAClB,YAAAC,EACA,WAAAC,EACA,aAAAC,EACA,aAAAC,EAAe,GACf,gBAAAC,EAAkB,GAClB,eAAAC,EAAiB,CACnB,IAAM,CACJ,MAAMC,EAAkB,IAAM,CAC5B,MAAMC,EAAQ,CAAA,EACRC,EAAQ,KAAK,IAAI,EAAGR,EAAc,KAAK,MAAMK,EAAiB,CAAC,CAAC,EAChEnvB,EAAM,KAAK,IAAI+uB,EAAYO,EAAQH,EAAiB,CAAC,EAE3D,QAAS9jC,EAAIikC,EAAOjkC,GAAK2U,EAAK3U,IAC5BgkC,EAAM,KAAKhkC,CAAC,EAGP,OAAAgkC,CAAA,EAGT,OAAIN,GAAc,EACT,KAIPjd,EAAA,KAAC,MAAI,CAAA,UAAU,6CAEZ,SAAA,CACCmd,GAAAnd,EAAA,KAACqC,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAM6a,EAAaF,EAAc,CAAC,EAC3C,SAAUA,IAAgB,EAE1B,SAAA,CAACpkB,EAAAA,IAAA6kB,GAAA,CAAY,UAAU,cAAe,CAAA,EAAE,UAAA,CAAA,CAE1C,EAIDL,GAGIpd,EAAA,KAAAI,WAAA,CAAA,SAAA,CAAAkd,EAAA,EAAkB,CAAC,EAAI,GAEpBtd,EAAAA,KAAAI,EAAAA,SAAA,CAAA,SAAA,CAAAxH,EAAA,IAACyJ,EAAA,CACC,QAAe2a,IAAN,EAAoB,UAAY,UACzC,KAAK,KACL,QAAS,IAAME,EAAa,CAAC,EAC9B,SAAA,GAAA,CAED,EACCI,IAAkB,CAAC,EAAI,GAAM1kB,EAAA,IAAA,OAAA,CAAK,UAAU,OAAO,SAAG,KAAA,CAAA,CAAA,EACzD,EAID0kB,IAAkB,IAAKI,GACtB9kB,EAAA,IAACyJ,EAAA,CAEC,QAASqb,IAASV,EAAc,UAAY,UAC5C,KAAK,KACL,QAAS,IAAME,EAAaQ,CAAI,EAE/B,SAAAA,CAAA,EALIA,CAAA,CAOR,EAGAJ,IAAkBA,EAAgB,EAAE,OAAS,CAAC,EAAIL,GAE9Cjd,EAAA,KAAAI,WAAA,CAAA,SAAA,CAAAkd,EAAA,EAAkBA,EAAkB,EAAA,OAAS,CAAC,EAAIL,EAAa,GAC7DrkB,EAAAA,IAAA,OAAA,CAAK,UAAU,OAAO,SAAG,KAAA,CAAA,EAE5BA,EAAA,IAACyJ,EAAA,CACC,QAAS4a,IAAeD,EAAc,UAAY,UAClD,KAAK,KACL,QAAS,IAAME,EAAaD,CAAU,EAErC,SAAAA,CAAA,CACH,CAAA,EACF,CAAA,EAEJ,EAIDE,GACCnd,EAAA,KAACqC,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAM6a,EAAaF,EAAc,CAAC,EAC3C,SAAUA,IAAgBC,EAC3B,SAAA,CAAA,UAECrkB,EAAAA,IAAC+kB,GAAa,CAAA,UAAU,cAAe,CAAA,CAAA,CAAA,CACzC,CAEJ,CAAA,CAAA,CAEJ,ECpGMC,GAAc,CAAC,CAAE,OAAAxT,EAAQ,QAAAC,EAAS,MAAAH,EAAO,UAAA2T,KAAgB,SAC7D,KAAM,CAACC,EAAQC,CAAS,EAAInmB,WAAS,CAAC,EAChC,CAAComB,EAASC,CAAU,EAAIrmB,WAAS,EAAE,EACnC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAK,EACtC,CAAC5Y,EAAO+zB,CAAQ,EAAInb,WAAS,EAAE,EAC/B,CAACsmB,EAASC,CAAU,EAAIvmB,WAAS,EAAK,EAEtCyN,EAAe,MAAO/uB,GAAM,SAGhC,GAFAA,EAAE,eAAe,EAEbwnC,IAAW,EAAG,CAChB/K,EAAS,oCAAoC,EAC7C,MACF,CAEAjb,EAAW,EAAI,EACfib,EAAS,EAAE,EAEP,GAAA,CACI,MAAAtP,GAAe,aAAayG,EAAM,IAAK,CAC3C,OAAA4T,EACA,QAASE,EAAQ,KAAU,GAAA,MAAA,CAC5B,EAEDG,EAAW,EAAI,EACf,WAAW,IAAM,CACLN,IACFxT,IACE+T,KACT,GAAI,QACAp/B,EAAO,CACd+zB,IAAS/zB,GAAAA,EAAAA,EAAM,WAANA,YAAAA,EAAgB,OAAhBA,YAAAA,EAAsB,UAAW,0BAA0B,CAAA,QACpE,CACA8Y,EAAW,EAAK,CAClB,CAAA,EAGIsmB,EAAY,IAAM,CACtBL,EAAU,CAAC,EACXE,EAAW,EAAE,EACblL,EAAS,EAAE,EACXoL,EAAW,EAAK,CAAA,EAGZE,EAAc,IAAM,CACdD,IACF/T,GAAA,EAGN,MAAA,CAACD,GAAU,CAACF,EAAc,WAG3BC,GAAM,CAAA,QAASkU,EACd,SAACre,EAAA,KAAA,MAAA,CAAI,UAAU,MACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,6BAA6B,SAAc,iBAAA,EAExD5Z,SAAUg9B,GAAM,CAAA,KAAK,QAAQ,QAASh9B,EAAO,UAAU,OAAO,EAC9Dk/B,SAAYlC,GAAM,CAAA,KAAK,UAAU,QAAQ,iCAAiC,UAAU,OAAO,EAE5Fhc,EAAAA,KAAC,MAAI,CAAA,UAAU,iCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,cAAc,SAAkB,qBAAA,EAC9CoH,EAAAA,KAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,CAAA,YAASjK,EAAAmU,EAAM,MAAN,YAAAnU,EAAW,MAAM,GAAE,EAAE,EACnEiK,EAAAA,KAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,CAAA,cAAW7J,EAAA+T,EAAM,cAAN,YAAA/T,EAAmB,QAAQ,EAAC,EAAE,CAAA,EAChF,EAEA6J,EAAAA,KAAC,OAAK,CAAA,SAAUqF,EACd,SAAA,CAACrF,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,qCAAA,EACCA,EAAA,IAAA,MAAA,CAAI,UAAU,aACZ,SAAC,CAAA,EAAG,EAAG,EAAG,EAAG,CAAC,EAAE,IAAK0lB,GACpB1lB,EAAA,IAAC,SAAA,CAEC,KAAK,SACL,QAAS,IAAMmlB,EAAUO,CAAI,EAC7B,UAAW,oBACTA,GAAQR,EAAS,kBAAoB,eACvC,2CACD,SAAA,GAAA,EANMQ,CASR,CAAA,EACH,EACAte,EAAAA,KAAC,MAAI,CAAA,UAAU,6BACZ,SAAA,CAAA8d,IAAW,GAAK,0BAChBA,IAAW,GAAK,aAChBA,IAAW,GAAK,OAChBA,IAAW,GAAK,UAChBA,IAAW,GAAK,MAChBA,IAAW,GAAK,WAAA,EACnB,CAAA,EACF,EAEA9d,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,wBAAA,EACAA,EAAA,IAAC,WAAA,CACC,MAAOolB,EACP,SAAW1nC,GAAM2nC,EAAW3nC,EAAE,OAAO,KAAK,EAC1C,KAAM,EACN,UAAU,+FACV,YAAY,iCACZ,UAAW,GAAA,CACb,EACA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,6BACZ,SAAA,CAAQge,EAAA,OAAO,iBAAA,EAClB,CAAA,EACF,EAEAhe,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAASgc,EACT,SAAUxmB,EACX,SAAA,UAAA,CAED,EACAe,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,SAAUxK,GAAWimB,IAAW,EAChC,QAAAjmB,EACD,SAAA,kBAAA,CAED,CAAA,EACF,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,ECvGM0mB,GAAe,IAAM,+BACnB,KAAA,CAAE,QAAAhb,GAAYQ,KACd3G,EAAWC,KACX,CAAE,KAAArG,EAAM,gBAAAe,CAAgB,EAAIR,GAAQ,EAEpC,CAAC2S,EAAOsU,CAAQ,EAAI5mB,WAAS,IAAI,EACjC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACgf,EAAUC,CAAW,EAAIjf,WAAS,EAAK,EACxC,CAAC6mB,EAAUC,CAAW,EAAI9mB,WAAS,EAAK,EACxC,CAAC+mB,EAAiBC,CAAkB,EAAIhnB,WAAS,EAAK,EAE5DU,EAAAA,UAAU,IAAM,CACViL,GACesb,GACnB,EACC,CAACtb,CAAO,CAAC,EAEZ,MAAMsb,EAAmB,SAAY,CACnC/mB,EAAW,EAAI,EAEX,GAAA,CACM,QAAA,IAAI,oCAAqCyL,CAAO,EAExD,MAAMvrB,EAAS,MAAMorB,GAAa,SAASG,CAAO,EAIlD,GAFQ,QAAA,IAAI,4BAA6BvrB,CAAM,EAE3CA,EAAO,QAAS,CAClB,MAAMqrB,EAAYrrB,EAAO,KAAK,OAASA,EAAO,KAEtC,QAAA,IAAI,kCAAmCqrB,CAAS,EAExDmb,EAASnb,CAAS,CAAA,MAEZ1M,EAAA,MAAM3e,EAAO,OAAO,EAC1BolB,EAAS,SAAS,QAEbpe,EAAO,CACN,QAAA,MAAM,8BAA+BA,CAAK,EAClD2X,EAAM,MAAM,yBAAyB,EACrCyG,EAAS,SAAS,CACpB,CAEAtF,EAAW,EAAK,CAAA,EAGZgnB,EAAqB,MAAOC,GAAc,CAC9C,GAAK,OAAO,QAAQ,iDAAiDA,CAAS,IAAI,EAIlF,CAAAlI,EAAY,EAAI,EAEZ,GAAA,CAEF,MAAMmI,EAAWC,IAEjB,QAAQ,IAAI,yBAA0B,CACpC,QAAA1b,EACA,UAAAwb,EACA,SAAAC,EACA,cAAehoB,EAAK,IACpB,cAAekT,EAAM,UACrB,aAAcA,EAAM,QAAA,CACrB,EAED,MAAMlyB,EAAS,MAAMorB,GAAa,kBAAkBG,EAASwb,EAAWC,CAAQ,EAE5EhnC,EAAO,SACH2e,EAAA,QAAQ,2BAA2BooB,CAAS,EAAE,EACpD,MAAMF,EAAiB,GAEjBloB,EAAA,MAAM3e,EAAO,OAAO,QAErBgH,EAAO,CACN,QAAA,MAAM,+BAAgCA,CAAK,EACnD2X,EAAM,MAAM,0BAA0B,CACxC,CAEAkgB,EAAY,EAAK,EAAA,EAIboI,EAAc,IAAM,WACpB,MAAA,CAACjoB,GAAQ,CAACkT,EAAc,KAGxBA,EAAM,YAAclT,EAAK,OAAOjB,EAAAmU,EAAM,SAAN,YAAAnU,EAAc,OAAQiB,EAAK,IACtD,SAILkT,EAAM,WAAalT,EAAK,OAAOb,EAAA+T,EAAM,QAAN,YAAA/T,EAAa,OAAQa,EAAK,IACpD,UAILX,EAAA6T,EAAM,cAAN,YAAA7T,EAAmB,aAAcW,EAAK,IACjC,SAILkT,EAAM,aAAelT,EAAK,IACrB,SAGT,QAAQ,KAAK,mDAAmD,EACzD,KAAA,EAIHkoB,EAAe,IAAM,cACrB,GAAA,CAACloB,GAAQ,CAACkT,EAAc,OAAA,KAE5B,MAAM8U,EAAWC,IAEjB,OAAID,IAAa,SAER9U,EAAM,OAASA,EAAM,eAAiB,CAC3C,IAAKA,EAAM,SACX,SAAUA,EAAM,gBAAkB,YAClC,WAAYA,EAAM,YAAc,YAChC,UAAW,GACX,MAAOA,EAAM,aAAe,GAC5B,MAAOA,EAAM,aAAe,EAAA,EAErB8U,IAAa,QAEf9U,EAAM,QAAUA,EAAM,kBAAkBnU,EAAAmU,EAAM,cAAN,YAAAnU,EAAmB,SAAU,CAC1E,IAAKmU,EAAM,aAAa/T,EAAA+T,EAAM,cAAN,YAAA/T,EAAmB,WAC3C,SAAU+T,EAAM,mBAAmB7T,EAAA6T,EAAM,cAAN,YAAA7T,EAAmB,kBAAmB,WACzE,WAAY6T,EAAM,eAAe9T,GAAA8T,EAAM,cAAN,YAAA9T,GAAmB,cAAe,WACnE,UAAW,GACX,MAAO8T,EAAM,cAAgB,GAC7B,MAAOA,EAAM,cAAgB,EAAA,EAI1B,IAAA,EAGHR,EAAkB7lB,IACP,CACb,QAAS,UACT,KAAM,UACN,QAAS,OACT,UAAW,UACX,UAAW,QAAA,GAECA,CAAM,GAAK,YAGrB8lB,EAAiB9lB,GAAW,CAQ1B,MAAA+lB,EAPQ,CACZ,QAAShC,GACT,KAAM0Q,GACN,QAAS6G,GACT,UAAWtX,GACX,UAAWgC,EAAA,EAEMhmB,CAAM,GAAK+jB,GACvB,OAAAhP,EAAA,IAACgR,EAAK,CAAA,UAAU,SAAU,CAAA,CAAA,EAG7BwV,EAAiBv7B,IACP,CACZ,QAAS,WACT,KAAM,OACN,QAAS,UACT,UAAW,WACX,UAAW,WAAA,GAEAA,CAAM,GAAKA,EAIpBw7B,EAAsB,IAAM,CAC5B,GAAA,CAACroB,GAAQ,CAACkT,EAAO,MAAO,GAE5B,MAAM8U,EAAWC,IACXK,EAAU,CAAA,EAQhB,GANA,QAAQ,IAAI,qCAAsC,CAChD,SAAAN,EACA,cAAe9U,EAAM,OACrB,OAAQlT,EAAK,GAAA,CACd,EAEGgoB,IAAa,SAEf,OAAQ9U,EAAM,OAAQ,CACpB,IAAK,UACHoV,EAAQ,KAAK,CACX,OAAQ,OACR,MAAO,sBACP,MAAO,UACP,YAAa,2CAAA,CACd,EACDA,EAAQ,KAAK,CACX,OAAQ,YACR,MAAO,kBACP,MAAO,SACP,YAAa,sBAAA,CACd,EACD,MACF,IAAK,OACHA,EAAQ,KAAK,CACX,OAAQ,UACR,MAAO,sBACP,MAAO,OACP,YAAa,kCAAA,CACd,EACD,MACF,IAAK,UACHA,EAAQ,KAAK,CACX,OAAQ,YACR,MAAO,uBACP,MAAO,UACP,YAAa,4BAAA,CACd,EACD,KACJ,SACSN,IAAa,QAEtB,OAAQ9U,EAAM,OAAQ,CACpB,IAAK,UACHoV,EAAQ,KAAK,CACX,OAAQ,YACR,MAAO,kBACP,MAAO,SACP,YAAa,sBAAA,CACd,EACD,MACF,IAAK,UACHA,EAAQ,KAAK,CACX,OAAQ,YACR,MAAO,wBACP,MAAO,UACP,YAAa,6BAAA,CACd,EACD,KACJ,CAGM,eAAA,IAAI,uBAAwBA,CAAO,EACpCA,CAAA,EAIHC,EAAU,IAAM,CAChB,GAAA,CAACrV,GAAUA,EAAM,SAAW,aAAeA,EAAM,SAAW,aAAgBA,EAAM,iBAC7E,MAAA,GAGT,MAAM8U,EAAWC,IAIjB,OAHID,IAAa,SAAW,CAAC9U,EAAM,eAG/B8U,IAAa,UAAY,CAAC9U,EAAM,YAI7B,EAGHsV,EAAsB,IAAM,CACfX,IACjBloB,EAAM,QAAQ,gCAAgC,CAAA,EAG1C2b,EAAcC,GACX,IAAI,KAAKA,CAAU,EAAE,mBAAmB,QAAS,CACtD,IAAK,UACL,MAAO,UACP,KAAM,UACN,KAAM,UACN,OAAQ,SAAA,CACT,EAGH,GAAI1a,EAEE,OAAAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAIN,GAAI,CAAC4I,EACH,aACK,MAAI,CAAA,UAAU,gDACb,SAAClK,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,wBAAA,QACCyJ,EAAO,CAAA,QAAS,IAAMjF,EAAS,SAAS,EAAG,SAE5C,qBAAA,CAAA,CACF,CAAA,CACF,CAAA,EAIN,MAAM4hB,EAAWC,IACXQ,EAAYP,IACZQ,EAAmBL,IAEzB,eAAQ,IAAI,yBAA0B,CACpC,SAAAL,EACA,UAAAS,EACA,iBAAAC,EACA,YAAaxV,EAAM,MAAA,CACpB,EAGGlK,EAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAAAA,EAAA,KAAC,SAAA,CACG,QAAS,IAAM5C,EAAS,SAAS,EACjC,UAAU,6EAEZ,SAAA,CAACxE,EAAAA,IAAAoc,GAAA,CAAU,UAAU,cAAe,CAAA,EAAE,oBAAA,CAAA,CAExC,EAEAhV,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,wCAAwC,SAAA,CAAA,aAC3CjK,EAAAmU,EAAM,MAAN,YAAAnU,EAAW,MAAM,MAAO,KAAA,EACnC,EACAiK,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAAAA,OAACwG,GAAM,QAASkD,EAAeQ,EAAM,MAAM,EAAG,UAAU,oBACrD,SAAA,CAAAP,EAAcO,EAAM,MAAM,QAC1B,OAAK,CAAA,UAAU,OAAQ,SAAckV,EAAAlV,EAAM,MAAM,EAAE,CAAA,EACtD,QACC,OAAK,CAAA,UAAU,wBACf,SAAWoI,EAAApI,EAAM,UAAU,EAC9B,CAAA,EACA,CAAA,EACF,EAEAlK,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACG,QAASwc,EACT,QAAQ,UACR,KAAK,KACL,SAAUhnB,EAEZ,SAAA,CAAAe,MAAC6Z,IAAU,UAAW,gBAAgB5a,EAAU,eAAiB,EAAE,GAAI,EAAE,WAAA,CAAA,CAE3E,EAEAmI,EAAA,KAACqC,EAAA,CACG,QAAS,IAAMqc,EAAY,CAACD,CAAQ,EACpC,QAAQ,UAEV,SAAA,CAAC7lB,EAAAA,IAAA8O,GAAA,CAAc,UAAU,cAAe,CAAA,EACvC+W,EAAW,cAAgB,YAAA,CAAA,CAC9B,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAGC,GAcDze,EAAAA,KAAC,MAAI,CAAA,UAAU,wCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,0BAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAAkQ,GAAA,CAAQ,UAAU,cAAe,CAAA,EAAE,SAAA,EAEtC,EAEA9I,EAAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,iEACZ,UAAAzC,EAAA+T,EAAM,cAAN,MAAA/T,EAAmB,UAChByC,EAAA,IAAC,MAAA,CACG,IAAKsR,EAAM,YAAY,UACvB,IAAKA,EAAM,YAAY,MACvB,UAAU,4BAAA,CACd,EAECtR,EAAA,IAAA,MAAA,CAAI,UAAU,iDACb,eAACkQ,GAAQ,CAAA,UAAU,uBAAwB,CAAA,CAAA,CAC7C,CAEN,CAAA,EAEA9I,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAAApH,MAAC,MAAG,UAAU,2CACX,WAAMvC,EAAA6T,EAAA,cAAA,YAAA7T,EAAa,QAAS,wBAC/B,EAEA2J,EAAAA,KAAC,MAAI,CAAA,UAAU,iCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAK,QAAA,QACpC,MAAI,CAAA,UAAU,cAAe,WAAMxC,EAAA8T,EAAA,cAAA,YAAA9T,EAAa,YAAa,MAAM,CAAA,EACtE,SACC,MACC,CAAA,SAAA,CAACwC,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAW,cAAA,QAC1C,MAAI,CAAA,UAAU,cAAe,WAAMrC,EAAA2T,EAAA,cAAA,YAAA3T,EAAa,WAAY,MAAM,CAAA,EACrE,SACC,MACC,CAAA,SAAA,CAACqC,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAO,UAAA,QACtC,MAAI,CAAA,UAAU,cAAe,WAAMpC,EAAA0T,EAAA,cAAA,YAAA1T,EAAa,YAAa,MAAM,CAAA,EACtE,SACC,MACC,CAAA,SAAA,CAACoC,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAW,cAAA,QAC1C,MAAI,CAAA,UAAU,cAAe,SAAAsR,EAAM,UAAY,EAAE,CAAA,EACpD,CAAA,EACF,CAAA,EACF,EAEAlK,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCAAoC,SAAA,CAAA,MAC7C,WAAWkK,EAAM,aAAe,CAAC,EAAE,QAAQ,CAAC,CAAA,EAClD,EACCA,EAAM,SAAW,GACblK,EAAA,KAAA,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,MACjC,WAAWkK,EAAM,YAAc,CAAC,EAAE,QAAQ,CAAC,EAAE,OAAA,EACnD,CAAA,EAEN,CAAA,EACF,EAECA,EAAM,OACFtR,EAAAA,IAAA,MAAA,CAAI,UAAU,iCACb,SAAAoH,EAAA,KAAC,IAAE,CAAA,UAAU,wBACX,SAAA,CAAApH,EAAAA,IAAC,UAAO,SAAY,cAAA,CAAA,EAAS,IAAEsR,EAAM,KAAA,CAAA,CACvC,CACF,CAAA,CAAA,EAEN,EAGCA,EAAM,kBACFlK,OAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAAgU,GAAA,CAAO,UAAU,cAAe,CAAA,EAAE,qBAAA,EAErC,EAEA5M,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAA,IAAA,MAAA,CACC,gBAAC,SAAQ,CAAA,SAAA,EAAAlC,EAAAwT,EAAM,UAAN,YAAAxT,EAAe,WAAW,KAAE8D,EAAA0P,EAAM,UAAN,YAAA1P,EAAe,SAAA,CAAA,CAAU,CAChE,CAAA,SACC,MACE,CAAA,SAAA,CAAA0P,EAAM,iBAAiB,OAAO,KAAGA,EAAM,iBAAiB,MAAA,EAC3D,EACCA,EAAM,iBAAiB,kBACnB,MAAK,CAAA,SAAAA,EAAM,iBAAiB,WAAW,SAE3C,MACE,CAAA,SAAA,CAAAA,EAAM,iBAAiB,aAAa,MAAIA,EAAM,iBAAiB,KAAK,IAAEA,EAAM,iBAAiB,KAAA,EAChG,SACC,MAAI,CAAA,SAAA,CAAA,QAAMA,EAAM,iBAAiB,OAAA,EAAQ,IAEzCzP,GAAAyP,EAAM,UAAN,YAAAzP,GAAe,QACXuF,EAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAACpH,EAAAA,IAAA+T,GAAA,CAAM,UAAU,4BAA6B,CAAA,EAC7CzC,EAAM,QAAQ,KAAA,EACjB,IAEHxP,EAAAwP,EAAM,UAAN,YAAAxP,EAAe,QACXsF,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA6M,GAAA,CAAK,UAAU,4BAA6B,CAAA,EAC5CyE,EAAM,QAAQ,KAAA,EACjB,CAAA,EAEN,CAAA,EACF,EAIJlK,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAAgP,GAAA,CAAM,UAAU,cAAe,CAAA,EAAE,qBAAA,EAEpC,EAEChP,EAAA,IAAA,MAAA,CAAI,UAAU,YACZ,WAAM+B,EAAAuP,EAAA,iBAAA,YAAAvP,EAAgB,IAAI,CAAC9W,EAAQvD,IAC/B0f,OAAA,MAAA,CAAgB,UAAU,8BACzB,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAW,wBACZ/U,EAAO,SAAWqmB,EAAM,OAAS,cAAgB,aACrD,EAAI,CAAA,SACH,MACC,CAAA,SAAA,CAAAtR,MAAC,OAAI,UAAU,cAAe,SAAcwmB,EAAAv7B,EAAO,MAAM,EAAE,EAC3Dmc,EAAAA,KAAC,MAAI,CAAA,UAAU,wBACZ,SAAA,CAAAsS,EAAWzuB,EAAO,SAAS,EAC3BA,EAAO,YAAc,UAAUA,EAAO,UAAU,EAAA,EACnD,CAAA,EACF,CAVQ,CAAA,EAAAvD,CAWV,KAECsY,EAAAA,IAAA,MAAA,CAAI,UAAU,wBACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,kCAAmC,CAAA,SACjD,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,MAAA,CAAI,UAAU,cAAc,SAAa,gBAAA,QACzC,MAAI,CAAA,UAAU,wBACZ,SAAW0Z,EAAApI,EAAM,UAAU,EAC9B,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,EAEN,CAAA,EACF,EAGCuU,GACGze,EAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,cAAe,CAAA,EAAE,gBAAA,EAE5C,QACCkS,GAAS,CAAA,QAAArW,EAAkB,QAAS,IAAMmb,EAAY,EAAK,EAAG,CAAA,EACjE,CAAA,EAEN,EAGA1e,EAAAA,KAAC,MAAI,CAAA,UAAU,0BAEZ,SAAA,CACGyf,GAAAzf,EAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAA6H,EAAA,CAAK,UAAU,cAAe,CAAA,EAC9Bue,IAAa,SAAW,YAAc,UAAA,EACzC,EAEAhf,EAAAA,KAAC,MAAI,CAAA,UAAU,mCACb,SAAA,CAAApH,EAAA,IAAC,MAAI,CAAA,UAAU,sEACZ,SAAA6mB,EAAU,YACP7mB,EAAA,IAAC,MAAA,CACG,IAAK6mB,EAAU,YACf,IAAKA,EAAU,SACf,UAAU,qCAAA,CAAA,EAGd7mB,EAAAA,IAAC6H,EAAK,CAAA,UAAU,wBAAwB,CAE9C,CAAA,SACC,MACC,CAAA,SAAA,CAACT,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAUyf,EAAA,WAAW,IAAEA,EAAU,SAAA,EACpC,EACAzf,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,IACnCyf,EAAU,QAAA,EACd,CAAA,EACF,CAAA,EACF,EAEAzf,EAAAA,KAAC,MAAI,CAAA,UAAU,uCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAmJ,GAAA,CAAK,UAAU,8BAA+B,CAAA,EAAE,4BAAA,EAEnD,EACA/B,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAkP,GAAA,CAAS,UAAU,cAAe,CAAA,EAAE,mBAAA,EAEvC,CAAA,EACF,EAEA9H,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAApH,EAAA,IAACqH,EAAA,CACG,GAAI,UAAUwf,EAAU,GAAG,GAC3B,UAAU,2BAEZ,eAACpd,EAAO,CAAA,QAAQ,UAAU,UAAU,SAAS,SAE7C,aAAA,CAAA,CACF,EAEArC,EAAA,KAACqC,EAAA,CACG,UAAU,SACV,QAAS,IAAMqc,EAAY,EAAI,EAEjC,SAAA,CAAC9lB,EAAAA,IAAA8O,GAAA,CAAc,UAAU,cAAe,CAAA,EAAE,iBAAA,CAAA,CAE5C,CAAA,EACF,CAAA,EACF,GAIFgY,EAAiB,OAAS,GAAKH,MAC5Bvf,OAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAEzD,oBAAA,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,YACZ,SAAA,CAAA0f,EAAiB,IAAI,CAACC,EAAYr/B,WAC9B,MACC,CAAA,SAAA,CAAAsY,EAAA,IAACyJ,EAAA,CACG,QAAS,IAAMyc,EAAmBa,EAAW,MAAM,EACnD,SAAU/I,EACV,QAAS+I,EAAW,QAAU,SAAW,SAAW,UACpD,UAAU,SAEX,SAAA/I,EAAW,iBAAmB+I,EAAW,KAAA,CAC5C,EACCA,EAAW,aACR/mB,EAAA,IAAC,KAAE,UAAU,6BACV,WAAW,YACd,CAAA,CAAA,EAZItY,CAcV,CACH,EAGAi/B,KACGvf,EAAAA,KAAC,MACC,CAAA,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACG,QAAS,IAAMuc,EAAmB,EAAI,EACtC,QAAQ,UACR,UAAU,SAEZ,SAAA,CAAChmB,EAAAA,IAAAmJ,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,WACxBkd,EAAkB,IAAA,QAAU,WAAa,WAAA,CAAA,CACpD,EACCrmB,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAE1C,iDAAA,CAAA,EACF,CAAA,EAEN,CAAA,EACF,EAIJoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAEzD,qBAAA,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAa,gBAAA,EAC7CoH,EAAAA,KAAC,OAAK,CAAA,UAAU,YAAY,SAAA,CAAA,KAAEpF,GAAAsP,EAAM,MAAN,YAAAtP,GAAW,MAAM,GAAE,EAAE,CAAA,EACrD,EACAoF,EAAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAe,kBAAA,EAC9CA,EAAA,IAAA,OAAA,CAAM,SAAW0Z,EAAApI,EAAM,UAAU,EAAE,CAAA,EACtC,EACAlK,EAAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAoB,uBAAA,EACnDA,EAAA,IAAA,OAAA,CAAM,SAAMsR,EAAA,gBAAkB,aAAa,CAAA,EAC9C,EACAlK,EAAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAO,UAAA,EACvCA,EAAAA,IAAC4N,EAAM,CAAA,QAASkD,EAAeQ,EAAM,MAAM,EACxC,SAAAkV,EAAclV,EAAM,MAAM,CAC7B,CAAA,CAAA,EACF,QACC,MAAI,CAAA,UAAU,gBACb,SAAClK,EAAA,KAAA,MAAA,CAAI,UAAU,qCACb,SAAA,CAAApH,EAAAA,IAAC,QAAK,SAAM,QAAA,CAAA,EACZoH,EAAAA,KAAC,OAAK,CAAA,UAAU,iBAAiB,SAAA,CAAA,MAC7B,WAAWkK,EAAM,aAAe,CAAC,EAAE,QAAQ,CAAC,CAAA,EAClD,CAAA,CAAA,CACA,CACF,CAAA,CAAA,EACF,CAAA,EACF,EAGAlK,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,2CAA2C,SAEzD,UAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAE1C,6BAAA,SACCyJ,EAAO,CAAA,QAAQ,UAAU,KAAK,KAAK,UAAU,SAC5C,SAAA,CAACzJ,EAAAA,IAAAuc,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,mBAAA,EAEnC,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAGAvc,EAAA,IAACglB,GAAA,CACC,OAAQe,EACR,QAAS,IAAMC,EAAmB,EAAK,EACvC,MAAA1U,EACA,UAAWsV,CAAA,CACb,CACF,CAAA,CAAA,CAEN,EC1sBMI,GAAkB,IAAM,CAC5B,KAAM,CAAC1mB,EAAOC,CAAQ,EAAIvB,EAAA,SAAS,CAAE,CAAA,EAC/B,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACioB,EAAWC,CAAY,EAAIloB,WAAS,EAAK,EAC1C,CAACmoB,EAAWC,CAAY,EAAIpoB,WAAS,QAAQ,EAC7C,CAACqoB,EAAcC,CAAe,EAAItoB,WAAS,IAAI,EAC/C,CAACgG,EAAYC,CAAa,EAAIjG,WAAS,EAAE,EACzC,CAAC6gB,EAAcC,CAAe,EAAI9gB,WAAS,KAAK,EAChD,CAAColB,EAAamD,CAAc,EAAIvoB,WAAS,CAAC,EAC1C,CAACqlB,EAAYmD,CAAa,EAAIxoB,WAAS,CAAC,EAExCxC,EAAMwH,KAEZtE,EAAAA,UAAU,IAAM,CACJ+nB,GACT,EAAA,CAACrD,EAAapf,EAAY6a,CAAY,CAAC,EAE1C,MAAM4H,EAAY,SAAY,OAC5BvoB,EAAW,EAAI,EACX,GAAA,CACF,MAAMhZ,EAAW,MAAMsW,EAAI,IAAI,QAAQ,EAEnCtW,EAAS,WAAWiX,EAAAjX,EAAS,OAAT,MAAAiX,EAAe,OAC5BoD,EAAAra,EAAS,KAAK,KAAK,EAE5Bqa,EAAS,CAAE,CAAA,QAENna,EAAO,CACN,QAAA,MAAM,0BAA2BA,CAAK,EAC9Cma,EAAS,CAAE,CAAA,CAAA,QACX,CACArB,EAAW,EAAK,CAClB,CAAA,EAGIwoB,EAAmB,IAAM,CAC7BN,EAAa,QAAQ,EACrBE,EAAgB,IAAI,EACpBJ,EAAa,EAAI,CAAA,EAGbS,EAAkBpgB,GAAS,CAC/B6f,EAAa,MAAM,EACnBE,EAAgB/f,CAAI,EACpB2f,EAAa,EAAI,CAAA,EAGbU,EAAmB,MAAO1nB,GAAW,CACrC,GAAA,OAAO,QAAQ,2CAA2C,EACxD,GAAA,CACF,MAAM1D,EAAI,OAAO,UAAU0D,CAAM,EAAE,EACnC,MAAMunB,EAAU,QACTrhC,EAAO,CACN,QAAA,MAAM,wBAAyBA,CAAK,CAC9C,CACF,EAGIyhC,EAAuB,MAAO3nB,EAAQ4nB,IAAkB,CACxD,GAAA,CACF,MAAMtrB,EAAI,IAAI,UAAU0D,CAAM,GAAI,CAChC,YAAa,CAAC4nB,CAAA,CACf,EACD,MAAML,EAAU,QACTrhC,EAAO,CACN,QAAA,MAAM,4BAA6BA,CAAK,CAClD,CAAA,EAGI2hC,EAAqB,MAAO7nB,EAAQ4nB,IAAkB,CACtD,GAAA,CACF,MAAMtrB,EAAI,IAAI,UAAU0D,CAAM,GAAI,CAChC,UAAW,CAAC4nB,CAAA,CACb,EACD,MAAML,EAAU,QACTrhC,EAAO,CACN,QAAA,MAAM,0BAA2BA,CAAK,CAChD,CAAA,EAGI6jB,EAAgB3J,EAAM,OAAeiH,GAAA,CACnC,MAAAygB,EAAgBzgB,EAAK,KAAK,cAAc,SAASvC,EAAW,aAAa,EACzEijB,EAAgBpI,IAAiB,OACpCA,IAAiB,UAAYtY,EAAK,WAClCsY,IAAiB,YAAc,CAACtY,EAAK,WACrCsY,IAAiB,YAActY,EAAK,YAEvC,OAAOygB,GAAiBC,CAAA,CACzB,EAED,OAAIhpB,QACMyJ,EAAe,CAAA,CAAA,EAIvBtB,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAAe,kBAAA,EAClEA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAsC,yCAAA,CAAA,EACrE,EACAoH,EAAA,KAACqC,EAAA,CACC,QAASie,EACT,UAAU,0BAEV,SAAA,CAAC1nB,EAAAA,IAAAyH,GAAA,CAAK,UAAU,SAAU,CAAA,EAAE,gBAAA,CAAA,CAE9B,CAAA,EACF,QAGCkc,GAAK,CAAA,UAAU,MACd,SAACvc,EAAA,KAAA,MAAA,CAAI,UAAU,kCACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,SACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAsH,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FtH,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,kBACZ,MAAOgF,EACP,SAAWtnB,GAAMunB,EAAcvnB,EAAE,OAAO,KAAK,EAC7C,UAAU,iHAAA,CACZ,CAAA,CAAA,CACF,CACF,CAAA,EACAsiB,EAAAA,IAAC,MAAI,CAAA,UAAU,aACb,SAAAoH,EAAA,KAAC,SAAA,CACC,MAAOyY,EACP,SAAWniC,GAAMoiC,EAAgBpiC,EAAE,OAAO,KAAK,EAC/C,UAAU,qGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAK,QAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAM,SAAA,EAC5BA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAQ,WAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAW,cAAA,CAAA,CAAA,CAAA,EAExC,CAAA,CAAA,CACF,CACF,CAAA,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAApH,EAAA,IAACkoB,GAAA,CACC,MAAM,iBACN,MAAO5nB,EAAM,OACb,KAAM6nB,GACN,MAAM,MAAA,CACR,EACAnoB,EAAA,IAACkoB,GAAA,CACC,MAAM,eACN,MAAO5nB,EAAM,OAAY/iB,GAAAA,EAAE,SAAS,EAAE,OACtC,KAAM6qC,GACN,MAAM,OAAA,CACR,EACApoB,EAAA,IAACkoB,GAAA,CACC,MAAM,cACN,MAAO5nB,EAAM,OAAY/iB,GAAAA,EAAE,WAAW,EAAE,OACxC,KAAM4rB,GACN,MAAM,QAAA,CACR,EACAnJ,EAAA,IAACkoB,GAAA,CACC,MAAM,eACN,MAAO5nB,EAAM,OAAO,CAAC5P,EAAO6W,IAAS7W,GAAS6W,EAAK,WAAa,GAAI,CAAC,EACrE,KAAM8B,GACN,MAAM,QAAA,CACR,CAAA,EACF,EAGCY,EAAc,SAAW,EACvB7C,EAAA,KAAAuc,GAAA,CAAK,UAAU,kBACd,SAAA,CAAC3jB,EAAAA,IAAAmoB,GAAA,CAAM,UAAU,sCAAuC,CAAA,EACvDnoB,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAAsB,yBAAA,EAC5EA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAA+C,kDAAA,EAChFA,EAAA,IAAAyJ,EAAA,CAAO,QAASie,EAAkB,SAEnC,0BAAA,CACF,CAAA,CAAA,QAEC,MAAI,CAAA,UAAU,sEACZ,SAAczd,EAAA,IAAK1C,GAClBvH,EAAA,IAACqoB,GAAA,CAEC,KAAA9gB,EACA,OAAQogB,EACR,SAAUC,EACV,iBAAkBC,EAClB,eAAgBE,CAAA,EALXxgB,EAAK,GAOb,CAAA,EACH,EAID8c,EAAa,GACZrkB,EAAA,IAACmkB,GAAA,CACC,YAAAC,EACA,WAAAC,EACA,aAAckD,CAAA,CAChB,EAIDN,GACCjnB,EAAA,IAACsoB,GAAA,CACC,KAAMnB,EACN,KAAME,EACN,QAAS,IAAMH,EAAa,EAAK,EACjC,OAAQO,CAAA,CACV,CAEJ,CAAA,CAAA,CAEJ,EAGMY,GAAW,CAAC,CAAE,KAAA9gB,EAAM,OAAAghB,EAAQ,SAAAC,EAAU,iBAAAC,EAAkB,eAAAC,KAAqB,CACjF,KAAM,CAACC,EAAUC,CAAW,EAAI5pB,WAAS,EAAK,EAG5C,OAAAoI,EAAA,KAACuc,GAAK,CAAA,UAAU,oDACd,SAAA,CAACvc,EAAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAAApH,EAAA,IAAC,MAAA,CACC,IAAKuH,EAAK,WAAa,wBACvB,IAAKA,EAAK,KACV,UAAU,0BAAA,CACZ,EAGAH,EAAAA,KAAC,MAAI,CAAA,UAAU,mCACZ,SAAA,CAAKG,EAAA,oBACHqG,EAAM,CAAA,QAAQ,UAAU,KAAK,KAAK,UAAU,0BAC3C,SAAA,CAAC5N,EAAAA,IAAAmJ,GAAA,CAAK,UAAU,SAAU,CAAA,EAAE,UAAA,EAE9B,EAED,CAAC5B,EAAK,WACLvH,EAAA,IAAC4N,GAAM,QAAQ,SAAS,KAAK,KAAK,SAElC,SAAA,CAAA,CAAA,EAEJ,QAGC,MAAI,CAAA,UAAU,yBACb,SAACxG,EAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,QAAQ,QACR,KAAK,KACL,QAAS,IAAMmf,EAAY,CAACD,CAAQ,EACpC,UAAU,6BAEV,SAAA3oB,EAAAA,IAAC6oB,GAAa,CAAA,UAAU,SAAU,CAAA,CAAA,CACpC,EAECF,GACCvhB,EAAA,KAAC,MAAI,CAAA,UAAU,4FACb,SAAA,CAAAA,EAAA,KAAC,SAAA,CACC,QAAS,IAAMmhB,EAAOhhB,CAAI,EAC1B,UAAU,+EAEV,SAAA,CAACvH,EAAAA,IAAA8oB,GAAA,CAAM,UAAU,SAAU,CAAA,EAAE,QAAA,CAAA,CAE/B,EACA1hB,EAAA,KAAC,SAAA,CACC,QAAS,IAAMqhB,EAAiBlhB,EAAK,IAAKA,EAAK,WAAW,EAC1D,UAAU,+EAEV,SAAA,CAACvH,EAAAA,IAAAmJ,GAAA,CAAK,UAAU,SAAU,CAAA,EACzB5B,EAAK,YAAc,mBAAqB,UAAA,CAAA,CAC3C,EACAH,EAAA,KAAC,SAAA,CACC,QAAS,IAAMshB,EAAenhB,EAAK,IAAKA,EAAK,SAAS,EACtD,UAAU,+EAEV,SAAA,CAACvH,EAAAA,IAAAooB,GAAA,CAAI,UAAU,SAAU,CAAA,EACxB7gB,EAAK,UAAY,YAAc,QAAA,CAAA,CAClC,EACAvH,EAAAA,IAAC,KAAG,CAAA,UAAU,MAAO,CAAA,EACrBoH,EAAA,KAAC,SAAA,CACC,QAAS,IAAMohB,EAASjhB,EAAK,GAAG,EAChC,UAAU,0FAEV,SAAA,CAACvH,EAAAA,IAAAoR,GAAA,CAAO,UAAU,SAAU,CAAA,EAAE,SAAA,CAAA,CAEhC,CAAA,EACF,CAAA,CAAA,CAEJ,CACF,CAAA,CAAA,EACF,EAEAhK,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,mCAAoC,SAAAuH,EAAK,KAAK,EAC3DvH,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA8B,WAAK,SAAS,EACxDuH,EAAK,aACJvH,EAAA,IAAC,KAAE,UAAU,qCAAsC,WAAK,YAAY,EAGtEoH,EAAAA,KAAC,MAAI,CAAA,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,OAAA,CAAK,UAAU,wBAAwB,SAAA,CAAA,aAC3B,IAAI,KAAKG,EAAK,UAAU,EAAE,mBAAmB,CAAA,EAC1D,EACAH,EAAAA,KAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAACpH,EAAAA,IAAAoQ,GAAA,CAAM,UAAU,uBAAwB,CAAA,EACzChJ,EAAAA,KAAC,OAAK,CAAA,UAAU,wBAAyB,SAAA,CAAAG,EAAK,WAAa,EAAE,MAAA,EAAI,CAAA,EACnE,CAAA,EACF,CAAA,EACF,CACF,CAAA,CAAA,CAEJ,EAGM+gB,GAAY,CAAC,CAAE,KAAA3pC,EAAM,KAAA4oB,EAAM,QAAAkK,EAAS,OAAAsX,KAAa,CACrD,KAAM,CAAC/hC,EAAUgiC,CAAW,EAAIhqB,WAAS,CACvC,KAAM,GACN,YAAa,GACb,UAAW,GACX,SAAU,KACV,SAAU,GACV,YAAa,GACb,UAAW,EAAA,CACZ,EACK,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAK,EACtC,CAAC5Y,EAAO+zB,CAAQ,EAAInb,WAAS,EAAE,EAE/BxC,EAAMwH,KAEZtE,EAAAA,UAAU,IAAM,CACV6H,GACFyhB,EAAYzhB,CAAI,CAClB,EACC,CAACA,CAAI,CAAC,EAEH,MAAAkF,EAAe,MAAO/uB,GAAM,SAChCA,EAAE,eAAe,EACjBwhB,EAAW,EAAI,EACfib,EAAS,EAAE,EAEP,GAAA,CACEx7B,IAAS,SACL,MAAA6d,EAAI,KAAK,SAAUxV,CAAQ,EAEjC,MAAMwV,EAAI,IAAI,UAAU+K,EAAK,GAAG,GAAIvgB,CAAQ,EAEvC+hC,IACCtX,UACDrrB,EAAO,CACd+zB,IAAS/zB,GAAAA,EAAAA,EAAM,WAANA,YAAAA,EAAgB,OAAhBA,YAAAA,EAAsB,UAAW,qBAAqB,CAAA,QAC/D,CACA8Y,EAAW,EAAK,CAClB,CAAA,EAIA,OAAAc,EAAAA,IAACuR,GAAM,CAAA,QAAAE,EAAkB,KAAK,KAC5B,gBAAC,OAAK,CAAA,SAAUhF,EAAc,UAAU,MACtC,SAAA,CAAAzM,MAAC,MAAG,UAAU,6BACX,SAASrhB,IAAA,SAAW,sBAAwB,cAC/C,EAECyH,SAAUg9B,GAAM,CAAA,KAAK,QAAQ,QAASh9B,EAAO,UAAU,OAAO,EAE/DghB,EAAAA,KAAC,MAAI,CAAA,UAAU,wCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,iBAAA,EACAA,EAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOhZ,EAAS,KAChB,SAAWtJ,GAAMsrC,EAAY,CAAE,GAAGhiC,EAAU,KAAMtJ,EAAE,OAAO,MAAO,EAClE,UAAU,4GACV,SAAQ,EAAA,CACV,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACsiB,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,aAAA,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOpgB,EAAS,SAChB,SAAWtJ,GAAMsrC,EAAY,CAAE,GAAGhiC,EAAU,SAAUtJ,EAAE,OAAO,MAAO,EACtE,UAAU,4GAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,KAAK,SAAE,KAAA,EACpBA,EAAA,IAAA,SAAA,CAAO,MAAM,cAAc,SAAW,cAAA,EACtCA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAI,OAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAQ,WAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAM,SAAA,CAAA,CAAA,CAC/B,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,YAAA,EACAA,EAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOhZ,EAAS,SAChB,SAAWtJ,GAAMsrC,EAAY,CAAE,GAAGhiC,EAAU,SAAUtJ,EAAE,OAAO,MAAO,EACtE,YAAY,iCACZ,UAAU,2GAAA,CACZ,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACsiB,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,gBAAA,EACAA,EAAA,IAAC,QAAA,CACC,KAAK,MACL,MAAOhZ,EAAS,UAChB,SAAWtJ,GAAMsrC,EAAY,CAAE,GAAGhiC,EAAU,UAAWtJ,EAAE,OAAO,MAAO,EACvE,YAAY,iCACZ,UAAU,2GAAA,CACZ,CAAA,EACF,CAAA,EACF,EAGA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,YAAA,EACAA,EAAA,IAAC,WAAA,CACC,MAAOhZ,EAAS,YAChB,SAAWtJ,GAAMsrC,EAAY,CAAE,GAAGhiC,EAAU,YAAatJ,EAAE,OAAO,MAAO,EACzE,KAAM,EACN,UAAU,4GACV,YAAY,sBAAA,CACd,CAAA,EACF,EAGCsJ,EAAS,WACRogB,EAAAA,KAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,UAAA,EACAA,EAAA,IAAC,MAAA,CACC,IAAKhZ,EAAS,UACd,IAAI,UACJ,UAAU,6CACV,QAAUtJ,GAAM,CACZA,EAAA,OAAO,MAAM,QAAU,MAC3B,CAAA,CACF,CAAA,EACF,EAIF0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAACA,EAAAA,KAAA,QAAA,CAAM,UAAU,oBACf,SAAA,CAAApH,EAAA,IAAC,QAAA,CACC,KAAK,WACL,QAAShZ,EAAS,YAClB,SAAWtJ,GAAMsrC,EAAY,CAAE,GAAGhiC,EAAU,YAAatJ,EAAE,OAAO,QAAS,EAC3E,UAAU,4HAAA,CACZ,EACCsiB,EAAA,IAAA,OAAA,CAAK,UAAU,6BAA6B,SAAgB,mBAAA,CAAA,EAC/D,EAEAoH,EAAAA,KAAC,QAAM,CAAA,UAAU,oBACf,SAAA,CAAApH,EAAA,IAAC,QAAA,CACC,KAAK,WACL,QAAShZ,EAAS,UAClB,SAAWtJ,GAAMsrC,EAAY,CAAE,GAAGhiC,EAAU,UAAWtJ,EAAE,OAAO,QAAS,EACzE,UAAU,4HAAA,CACZ,EACCsiB,EAAA,IAAA,OAAA,CAAK,UAAU,6BAA6B,SAAU,aAAA,CAAA,EACzD,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,4CACb,SAAA,CAAApH,EAAAA,IAACyJ,GAAO,KAAK,SAAS,QAAQ,UAAU,QAASgI,EAAS,SAE1D,UAAA,CAAA,EACAzR,EAAAA,IAACyJ,EAAO,CAAA,KAAK,SAAS,SAAUxK,EAC7B,SAAAA,EAAU,cAAgBtgB,IAAS,SAAW,aAAe,mBAChE,CAAA,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EAGMupC,GAAW,CAAC,CAAE,MAAAxW,EAAO,MAAAxtB,EAAO,KAAM8sB,EAAM,MAAAiY,KAAY,CACxD,MAAMC,EAAe,CACnB,KAAM,4BACN,MAAO,8BACP,OAAQ,gCACR,OAAQ,+BAAA,EAGV,aACGvF,GAAK,CAAA,UAAU,MACd,SAACvc,EAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAyB,SAAM0R,EAAA,EAC3C1R,EAAA,IAAA,IAAA,CAAE,UAAU,mCAAoC,SAAM9b,EAAA,CAAA,EACzD,EACC8b,EAAA,IAAA,MAAA,CAAI,UAAW,wBAAwBkpB,EAAaD,CAAK,CAAC,oCACzD,SAACjpB,EAAAA,IAAAgR,EAAA,CAAK,UAAU,SAAU,CAAA,EAC5B,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EC7gBMmY,GAAoB,IAAM,CAC9B,KAAM,CAACC,EAASC,CAAU,EAAIrqB,EAAA,SAAS,CAAE,CAAA,EACnC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACgG,EAAYC,CAAa,EAAIjG,WAAS,EAAE,EACzC,CAAC6gB,EAAcC,CAAe,EAAI9gB,WAAS,KAAK,EAChD,CAACsqB,EAAgBC,CAAiB,EAAIvqB,WAAS,IAAI,EACnD,CAACioB,EAAWC,CAAY,EAAIloB,WAAS,EAAK,EAE1CxC,EAAMwH,KAEZtE,EAAAA,UAAU,IAAM,CACF8pB,GAAA,EACX,CAAC3J,CAAY,CAAC,EAEjB,MAAM2J,EAAc,SAAY,CAC9BtqB,EAAW,EAAI,EACX,GAAA,CACF,MAAMhZ,EAAW,MAAMsW,EAAI,IAAI,yBAA0B,CACvD,OAAQ,CACN,OAAQqjB,IAAiB,MAAQA,EAAe,MAClD,CAAA,CACD,EACDwJ,EAAWnjC,EAAS,KAAK,SAAW,CAAE,CAAA,QAC/BE,EAAO,CACN,QAAA,MAAM,4BAA6BA,CAAK,EAChDijC,EAAW,CAAE,CAAA,CAAA,QACb,CACAnqB,EAAW,EAAK,CAClB,CAAA,EAGIuqB,EAAwBC,GAAW,CACvCH,EAAkBG,CAAM,EACxBxC,EAAa,EAAI,CAAA,EAGbyC,EAAkB1+B,GAAW,CACjC,MAAM6e,EAAW,CACf,KAAM,SACN,YAAa,UACb,SAAU,UACV,OAAQ,WAAA,EAEV,aAAQ8D,EAAM,CAAA,QAAS9D,EAAS7e,CAAM,EAAI,SAAOA,CAAA,CAAA,CAAA,EAGnD,OAAIgU,QACMyJ,EAAe,CAAA,CAAA,EAIvBtB,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,qEACb,SAAAoH,EAAA,KAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAAkB,qBAAA,EACrEA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAwC,2CAAA,CAAA,CAAA,CACvE,CACF,CAAA,QAGC2jB,GAAK,CAAA,UAAU,MACd,SAACvc,EAAA,KAAA,MAAA,CAAI,UAAU,kCACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,SACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAsH,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FtH,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,oBACZ,MAAOgF,EACP,SAAWtnB,GAAMunB,EAAcvnB,EAAE,OAAO,KAAK,EAC7C,UAAU,iHAAA,CACZ,CAAA,CAAA,CACF,CACF,CAAA,EACA0pB,EAAA,KAAC,SAAA,CACC,MAAOyY,EACP,SAAWniC,GAAMoiC,EAAgBpiC,EAAE,OAAO,KAAK,EAC/C,UAAU,qGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAe,kBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAO,UAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,cAAc,SAAY,eAAA,EACvCA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAU,aAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAQ,WAAA,CAAA,CAAA,CACjC,CAAA,CAAA,CACF,CACF,CAAA,EAGCopB,EAAQ,SAAW,EACjBhiB,EAAA,KAAAuc,GAAA,CAAK,UAAU,kBACd,SAAA,CAAC3jB,EAAAA,IAAA4pB,GAAA,CAAc,UAAU,sCAAuC,CAAA,EAC/D5pB,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAAwB,2BAAA,EAC9EA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAoC,uCAAA,CAAA,EACnE,EAECA,MAAA,MAAA,CAAI,UAAU,YACZ,WAAQ,IAAK0pB,GACZ,SAAA1pB,OAAAA,EAAA,IAAC2jB,IAAsB,UAAU,MAC/B,SAACvc,OAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,+BACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,wBAAyB,SAAA0pB,EAAO,QAAQ,EACrDC,EAAeD,EAAO,MAAM,EAC5B1pB,EAAA,IAAA4N,EAAA,CAAM,QAAQ,YAAa,WAAO,SAAS,CAAA,EAC9C,EAEC5N,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAsB,WAAO,QAAQ,EAElDoH,EAAAA,KAAC,MAAI,CAAA,UAAU,gDACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,0BACZ,SAAA,EAAAjK,EAAAusB,EAAO,OAAP,MAAAvsB,EAAa,YACZ6C,EAAA,IAACiY,GAAA,CACC,IAAKyR,EAAO,KAAK,YACjB,IAAKA,EAAO,KAAK,SACjB,KAAK,OACL,KAAK,YACL,UAAU,oCACV,aAAc1pB,EAAAA,IAAC6H,EAAK,CAAA,UAAU,SAAU,CAAA,CAAA,CAG1C,EAAA7H,EAAA,IAAC6H,EAAK,CAAA,UAAU,SAAU,CAAA,IAE3BtK,EAAAmsB,EAAO,OAAP,YAAAnsB,EAAa,WAAY,SAAA,EAC5B,EACA6J,EAAAA,KAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAACpH,EAAAA,IAAAgP,GAAA,CAAM,UAAU,SAAU,CAAA,EAC1B,IAAI,KAAK0a,EAAO,UAAU,EAAE,eAAe,CAAA,EAC9C,SACC,MAAI,CAAA,SAAA,CAAA,cAAYA,EAAO,QAAA,EAAS,CAAA,EACnC,EAECA,EAAO,gBACLtiB,OAAA,MAAA,CAAI,UAAU,iCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAoB,uBAAA,EAClEA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAyB,WAAO,eAAe,CAAA,EAC9D,CAAA,EAEJ,EAEAA,EAAAA,IAAC,MAAI,CAAA,UAAU,OACb,SAAAA,EAAA,IAACyJ,EAAA,CACC,QAAS,IAAMggB,EAAqBC,CAAM,EAC1C,KAAK,KACL,QAASA,EAAO,SAAW,OAAS,UAAY,UAE/C,SAAAA,EAAO,eAAiB,YAAc,WAAA,CAAA,EAE3C,CAAA,CAAA,CACF,CAnDS,EAAAA,EAAO,GAoDlB,EACD,CACH,CAAA,EAIDzC,GAAaqC,GACZtpB,EAAA,IAAC6pB,GAAA,CACC,OAAQP,EACR,QAAS,IAAMpC,EAAa,EAAK,EACjC,OAAQsC,CAAA,CACV,CAEJ,CAAA,CAAA,CAEJ,EAEMK,GAAsB,CAAC,CAAE,OAAAH,EAAQ,QAAAjY,EAAS,OAAAsX,KAAa,CAC3D,KAAM,CAAC/hC,EAAUgiC,CAAW,EAAIhqB,WAAS,CACvC,OAAQ0qB,EAAO,QAAU,OACzB,eAAgBA,EAAO,gBAAkB,GACzC,SAAUA,EAAO,UAAY,QAAA,CAC9B,EACK,CAACzqB,EAASC,CAAU,EAAIF,WAAS,EAAK,EACtC,CAAC5Y,EAAO+zB,CAAQ,EAAInb,WAAS,EAAE,EAE/BxC,EAAMwH,KAENyI,EAAe,MAAO/uB,GAAM,SAChCA,EAAE,eAAe,EACjBwhB,EAAW,EAAI,EACfib,EAAS,EAAE,EAEP,GAAA,CACF,MAAM3d,EAAI,IAAI,0BAA0BktB,EAAO,GAAG,GAAI1iC,CAAQ,EACvD+hC,IACCtX,UACDrrB,EAAO,CACd+zB,IAAS/zB,GAAAA,EAAAA,EAAM,WAANA,YAAAA,EAAgB,OAAhBA,YAAAA,EAAsB,UAAW,0BAA0B,CAAA,QACpE,CACA8Y,EAAW,EAAK,CAClB,CAAA,EAIA,OAAAc,EAAA,IAACuR,GAAA,CACC,OAAQ,GACR,QAAAE,EACA,MAAM,mBACN,KAAK,KAEL,SAACrK,EAAAA,KAAA,OAAA,CAAK,SAAUqF,EAAc,UAAU,YACrC,SAAA,CAAArmB,SAAUg9B,GAAM,CAAA,KAAK,QAAQ,QAASh9B,EAAO,UAAU,OAAO,EAE/DghB,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,SAAA,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOpgB,EAAS,OAChB,SAAWtJ,GAAMsrC,EAAY,CAAE,GAAGhiC,EAAU,OAAQtJ,EAAE,OAAO,MAAO,EACpE,UAAU,4GAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAM,SAAA,EAC1BA,EAAA,IAAA,SAAA,CAAO,MAAM,cAAc,SAAY,eAAA,EACvCA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAS,YAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAO,UAAA,CAAA,CAAA,CAChC,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,aAAA,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOpgB,EAAS,SAChB,SAAWtJ,GAAMsrC,EAAY,CAAE,GAAGhiC,EAAU,SAAUtJ,EAAE,OAAO,MAAO,EACtE,UAAU,4GAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAK,QAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAK,QAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAI,OAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAO,UAAA,CAAA,CAAA,CAChC,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,WAAA,EACAA,EAAA,IAAC,WAAA,CACC,MAAOhZ,EAAS,eAChB,SAAWtJ,GAAMsrC,EAAY,CAAE,GAAGhiC,EAAU,eAAgBtJ,EAAE,OAAO,MAAO,EAC5E,KAAM,EACN,UAAU,4GACV,YAAY,oCACZ,SAAQ,EAAA,CACV,CAAA,EACF,CAAA,EACF,EAEA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,4CACb,SAAA,CAAApH,EAAAA,IAACyJ,GAAO,KAAK,SAAS,QAAQ,UAAU,QAASgI,EAAS,SAE1D,UAAA,CAAA,EACAzR,EAAAA,IAACyJ,GAAO,KAAK,SAAS,SAAUxK,EAC7B,SAAAA,EAAU,cAAgB,iBAC7B,CAAA,CAAA,EACF,CAAA,EACF,CAAA,CAAA,CAGN,ECjRM6qB,GAAgB,CAAC,CAAE,OAAAtY,EAAQ,QAAAC,EAAS,KAAArT,EAAM,cAAA2rB,KAAoB,CAClE,KAAM,CAAC/iC,EAAUgiC,CAAW,EAAIhqB,WAAS,CACvC,SAAU,GACV,MAAO,GACP,WAAY,GACZ,UAAW,GACX,IAAK,GACL,KAAM,OACN,UAAW,GACX,YAAa,GACb,YAAa,EAAA,CACd,EAGDU,EAAAA,UAAU,IAAM,CACVtB,IACU4qB,EAAA,CACV,SAAU5qB,EAAK,UAAY,GAC3B,MAAOA,EAAK,OAAS,GACrB,WAAYA,EAAK,YAAc,GAC/B,UAAWA,EAAK,WAAa,GAC7B,IAAKA,EAAK,KAAO,GACjB,KAAMA,EAAK,MAAQ,OACnB,UAAWA,EAAK,YAAc,GAC9B,YAAaA,EAAK,aAAe,GACjC,YAAaA,EAAK,aAAe,EAAA,CAClC,EACD4rB,EAAU,CAAE,CAAA,EACd,EACC,CAAC5rB,CAAI,CAAC,EAET,KAAM,CAACa,EAASC,CAAU,EAAIF,WAAS,EAAK,EACtC,CAACiM,EAAQ+e,CAAS,EAAIhrB,EAAA,SAAS,CAAE,CAAA,EAEjCxC,EAAMwH,KAENimB,EAAoB,CAACC,EAAOhmC,IAAU,CAC1C8kC,EAAqB5lB,IAAA,CACnB,GAAGA,EACH,CAAC8mB,CAAK,EAAGhmC,CACT,EAAA,EAGE+mB,EAAOif,CAAK,GACdF,EAAmB5mB,IAAA,CACjB,GAAGA,EACH,CAAC8mB,CAAK,EAAG,IACT,EAAA,CACJ,EAGIC,EAAe,IAAM,CACzB,MAAMC,EAAY,CAAA,EAElB,OAAKpjC,EAAS,SAAS,OAEZA,EAAS,SAAS,OAAS,IACpCojC,EAAU,SAAW,6CAFrBA,EAAU,SAAW,yBAKlBpjC,EAAS,MAAM,OAER,6BAA6B,KAAKA,EAAS,KAAK,IAC1DojC,EAAU,MAAQ,kBAFlBA,EAAU,MAAQ,sBAKhBpjC,EAAS,YAAcA,EAAS,WAAW,OAAS,IACtDojC,EAAU,WAAa,yCAGrBpjC,EAAS,WAAaA,EAAS,UAAU,OAAS,IACpDojC,EAAU,UAAY,8CAGpBpjC,EAAS,KAAOA,EAAS,IAAI,OAAS,MACxCojC,EAAU,IAAM,2CAGXA,CAAA,EAGH3d,EAAe,MAAO/uB,GAAM,SAChCA,EAAE,eAAe,EAEjB,MAAM0sC,EAAYD,IAClB,GAAI,OAAO,KAAKC,CAAS,EAAE,OAAS,EAAG,CACrCJ,EAAUI,CAAS,EACnB,MACF,CAEAlrB,EAAW,EAAI,EACX,GAAA,CAEF,MAAM6W,EAAa,CAAA,EAOnB,GANA,OAAO,KAAK/uB,CAAQ,EAAE,QAAelG,GAAA,CAC/BkG,EAASlG,CAAG,IAAMsd,EAAKtd,CAAG,IACjBi1B,EAAAj1B,CAAG,EAAIkG,EAASlG,CAAG,EAChC,CACD,EAEG,OAAO,KAAKi1B,CAAU,EAAE,SAAW,EAAG,CAChCtE,IACR,MACF,CAEM,MAAAvrB,EAAW,MAAMsW,EAAI,IAAI,wBAAwB4B,EAAK,GAAG,GAAI2X,CAAU,EAEzE7vB,EAAS,UACX6jC,EAAc7jC,EAAS,IAAI,EACnBurB,WAEHrrB,EAAO,CACN,QAAA,MAAM,6BAA8BA,CAAK,GAC7CmX,GAAAJ,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,OAAhB,MAAAI,EAAsB,QACxBysB,EAAU,CAAE,OAAQ5jC,EAAM,SAAS,KAAK,QAAS,EAEvC4jC,EAAA,CAAE,OAAQ,2BAAA,CAA6B,CACnD,QACA,CACA9qB,EAAW,EAAK,CAClB,CAAA,EAOF,OAAKd,EAGH4B,EAAA,IAACuR,GAAA,CACC,OAAAC,EACA,QAAAC,EACA,MAAO,mBAAmBrT,EAAK,QAAQ,GACvC,KAAK,KAEL,SAACgJ,EAAAA,KAAA,OAAA,CAAK,SAAUqF,EAAc,UAAU,YAEtC,SAAA,CAAAzM,EAAAA,IAAC,OAAI,UAAU,sBACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,uCACb,SAAA,CAAApH,EAAA,IAAC,MAAI,CAAA,UAAU,sFACZ,SAAAhZ,EAAS,YACRgZ,EAAA,IAAC,MAAA,CACC,IAAKhZ,EAAS,YACd,IAAI,UACJ,UAAU,4BAAA,CAAA,EAGZgZ,EAAAA,IAAC6H,EAAK,CAAA,UAAU,0BAA0B,CAE9C,CAAA,EACA7H,EAAA,IAAC,QAAA,CACC,KAAK,MACL,YAAY,0BACZ,MAAOhZ,EAAS,YAChB,SAAWtJ,GAAMusC,EAAkB,cAAevsC,EAAE,OAAO,KAAK,EAChE,UAAU,yGAAA,CACZ,CAAA,CAAA,CACF,CACF,CAAA,EAGA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACA,EAAAA,KAAA,QAAA,CAAM,UAAU,+CACf,SAAA,CAACpH,EAAAA,IAAA6H,EAAA,CAAK,UAAU,qBAAsB,CAAA,EAAE,YAAA,EAE1C,EACA7H,EAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOhZ,EAAS,SAChB,SAAWtJ,GAAMusC,EAAkB,WAAYvsC,EAAE,OAAO,KAAK,EAC7D,UAAW,0FACTutB,EAAO,SAAW,iBAAmB,iBACvC,GACA,YAAY,UAAA,CACd,EACCA,EAAO,UACL7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAA8Z,GAAA,CAAY,UAAU,cAAe,CAAA,EACrC7O,EAAO,QAAA,EACV,CAAA,EAEJ,SAEC,MACC,CAAA,SAAA,CAAC7D,EAAAA,KAAA,QAAA,CAAM,UAAU,+CACf,SAAA,CAACpH,EAAAA,IAAA6M,GAAA,CAAK,UAAU,qBAAsB,CAAA,EAAE,SAAA,EAE1C,EACA7M,EAAA,IAAC,QAAA,CACC,KAAK,QACL,MAAOhZ,EAAS,MAChB,SAAWtJ,GAAMusC,EAAkB,QAASvsC,EAAE,OAAO,KAAK,EAC1D,UAAW,0FACTutB,EAAO,MAAQ,iBAAmB,iBACpC,GACA,YAAY,mBAAA,CACd,EACCA,EAAO,OACL7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAA8Z,GAAA,CAAY,UAAU,cAAe,CAAA,EACrC7O,EAAO,KAAA,EACV,CAAA,EAEJ,CAAA,EACF,EAGA7D,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,gBAAA,EACAA,EAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOhZ,EAAS,WAChB,SAAWtJ,GAAMusC,EAAkB,aAAcvsC,EAAE,OAAO,KAAK,EAC/D,UAAW,0FACTutB,EAAO,WAAa,iBAAmB,iBACzC,GACA,YAAY,eAAA,CACd,EACCA,EAAO,YACL7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAA8Z,GAAA,CAAY,UAAU,cAAe,CAAA,EACrC7O,EAAO,UAAA,EACV,CAAA,EAEJ,SAEC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,YAAA,EACAA,EAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOhZ,EAAS,UAChB,SAAWtJ,GAAMusC,EAAkB,YAAavsC,EAAE,OAAO,KAAK,EAC9D,UAAW,0FACTutB,EAAO,UAAY,iBAAmB,iBACxC,GACA,YAAY,WAAA,CACd,EACCA,EAAO,WACL7D,OAAA,IAAA,CAAE,UAAU,8CACX,SAAA,CAACpH,EAAAA,IAAA8Z,GAAA,CAAY,UAAU,cAAe,CAAA,EACrC7O,EAAO,SAAA,EACV,CAAA,EAEJ,CAAA,EACF,SAGC,MACC,CAAA,SAAA,CAACjL,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,MAAA,EACAA,EAAA,IAAC,WAAA,CACC,MAAOhZ,EAAS,IAChB,SAAWtJ,GAAMusC,EAAkB,MAAOvsC,EAAE,OAAO,KAAK,EACxD,KAAM,EACN,UAAW,0FACTutB,EAAO,IAAM,iBAAmB,iBAClC,GACA,YAAY,yBAAA,CACd,EACA7D,EAAAA,KAAC,MAAI,CAAA,UAAU,kDACb,SAAA,CAAAA,OAAC,OAAM,CAAA,SAAA,CAAApgB,EAAS,IAAI,OAAO,iBAAA,EAAe,EACzCikB,EAAO,KACL7D,OAAA,OAAA,CAAK,UAAU,iCACd,SAAA,CAACpH,EAAAA,IAAA8Z,GAAA,CAAY,UAAU,cAAe,CAAA,EACrC7O,EAAO,GAAA,EACV,CAAA,EAEJ,CAAA,EACF,EAGA7D,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACA,EAAAA,KAAA,QAAA,CAAM,UAAU,+CACf,SAAA,CAACpH,EAAAA,IAAA2f,GAAA,CAAO,UAAU,qBAAsB,CAAA,EAAE,QAAA,EAE5C,EACAvY,EAAA,KAAC,SAAA,CACC,MAAOpgB,EAAS,KAChB,SAAWtJ,GAAMusC,EAAkB,OAAQvsC,EAAE,OAAO,KAAK,EACzD,UAAU,yGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAO,UAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAa,gBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAO,UAAA,CAAA,CAAA,CACjC,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACoH,EAAAA,KAAA,QAAA,CAAM,UAAU,+CACf,SAAA,CAACpH,EAAAA,IAAAqqB,GAAA,CAAU,UAAU,qBAAsB,CAAA,EAAE,QAAA,EAE/C,EACAjjB,EAAA,KAAC,SAAA,CACC,MAAOpgB,EAAS,UAChB,SAAWtJ,GAAMusC,EAAkB,YAAavsC,EAAE,OAAO,QAAU,MAAM,EACzE,UAAU,yGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAO,GAAM,SAAK,QAAA,EACzBA,EAAA,IAAA,SAAA,CAAO,MAAO,GAAO,SAAO,UAAA,CAAA,CAAA,CAC/B,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,aAAA,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOpgB,EAAS,YAChB,SAAWtJ,GAAMusC,EAAkB,cAAevsC,EAAE,OAAO,QAAU,MAAM,EAC3E,UAAU,yGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAO,GAAM,SAAU,aAAA,EAC9BA,EAAA,IAAA,SAAA,CAAO,MAAO,GAAO,SAAc,iBAAA,CAAA,CAAA,CACtC,CAAA,EACF,CAAA,EACF,EAGCiL,EAAO,QACLjL,EAAAA,IAAA,MAAA,CAAI,UAAU,iDACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA8Z,GAAA,CAAY,UAAU,2BAA4B,CAAA,EAClD9Z,EAAA,IAAA,OAAA,CAAK,UAAU,eAAgB,WAAO,OAAO,CAAA,CAAA,CAChD,CACF,CAAA,EAIFoH,EAAAA,KAAC,MAAI,CAAA,UAAU,uCACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAASgI,EACT,SAAUxS,EAEV,SAAA,CAACe,EAAAA,IAAAoI,GAAA,CAAE,UAAU,cAAe,CAAA,EAAE,UAAA,CAAA,CAEhC,EACAhB,EAAA,KAACqC,EAAA,CACC,KAAK,SACL,SAAUxK,EAEV,SAAA,CAACe,EAAAA,IAAA8T,GAAA,CAAK,UAAU,cAAe,CAAA,EAC9B7U,EAAU,cAAgB,mBAAA,CAAA,CAC7B,CAAA,EACF,CAAA,EACF,CAAA,CAAA,EApOc,IAuOpB,EChWMqrB,GAAkB,IAAM,CAC5B,KAAM,CAACC,EAAOC,CAAQ,EAAIxrB,EAAA,SAAS,CAAE,CAAA,EAC/B,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACgG,EAAYC,CAAa,EAAIjG,WAAS,EAAE,EACzC,CAACyrB,EAAYC,CAAa,EAAI1rB,WAAS,KAAK,EAC5C,CAAC6gB,EAAcC,CAAe,EAAI9gB,WAAS,KAAK,EAChD,CAAColB,EAAamD,CAAc,EAAIvoB,WAAS,CAAC,EAC1C,CAACqlB,EAAYmD,CAAa,EAAIxoB,WAAS,CAAC,EACxC,CAAC2rB,EAAcC,CAAe,EAAI5rB,WAAS,IAAI,EAC/C,CAAC6rB,EAAeC,CAAgB,EAAI9rB,WAAS,EAAK,EAElDxC,EAAMwH,KAEZtE,EAAAA,UAAU,IAAM,CACJqrB,KACT,CAAC3G,EAAapf,EAAYylB,EAAY5K,CAAY,CAAC,EAEtD,MAAMkL,EAAY,SAAY,SAC5B7rB,EAAW,EAAI,EACX,GAAA,CACF,MAAMhZ,EAAW,MAAMsW,EAAI,IAAI,uBAAwB,CACrD,OAAQ,CACN,KAAM4nB,EACN,MAAO,GACP,OAAQpf,GAAc,OACtB,KAAMylB,IAAe,MAAQA,EAAa,OAC1C,OAAQ5K,IAAiB,MAAQA,EAAe,MAClD,CAAA,CACD,EAEG35B,EAAS,UACXskC,IAASrtB,EAAAjX,EAAS,OAAT,YAAAiX,EAAe,QAAS,CAAE,CAAA,EACrBqqB,IAAAjqB,EAAArX,EAAS,OAAT,YAAAqX,EAAe,cAAe,CAAC,SAExCnX,EAAO,CACN,QAAA,MAAM,6BAA8BA,CAAK,EACjDokC,EAAS,CAAE,CAAA,CAAA,QACX,CACAtrB,EAAW,EAAK,CAClB,CAAA,EAGI8rB,EAAyB,MAAOxsB,EAAQspB,IAAkB,CAC1D,GAAA,CACF,MAAMtrB,EAAI,IAAI,wBAAwBgC,CAAM,GAAI,CAC9C,UAAW,CAACspB,CAAA,CACb,EACD,MAAMiD,EAAU,QACT3kC,EAAO,CACN,QAAA,MAAM,qCAAsCA,CAAK,CAC3D,CAAA,EAGI6kC,EAAkB7sB,GAAS,CAC/BwsB,EAAgBxsB,CAAI,EACpB0sB,EAAiB,EAAI,CAAA,EAGjBI,EAAqBC,GAAgB,CACzCX,KAAiBpnB,EAAK,IACpBhF,GAAAA,EAAK,MAAQ+sB,EAAY,IAAMA,EAAc/sB,CAAA,CAC9C,CAAA,EAGGgtB,EAAuB,IAAM,CACjCN,EAAiB,EAAK,EACtBF,EAAgB,IAAI,CAAA,EAGhBS,EAAgBd,EAAM,OAAensB,GAAA,OACzC,MAAM4pB,EAAgB5pB,EAAK,SAAS,YAAY,EAAE,SAAS4G,EAAW,YAAA,CAAa,KAC9D7H,EAAAiB,EAAK,QAAL,YAAAjB,EAAY,cAAc,SAAS6H,EAAW,gBAC7DsmB,EAAcb,IAAe,OAASrsB,EAAK,OAASqsB,EACpDxC,EAAgBpI,IAAiB,OACjBA,IAAiB,UAAYzhB,EAAK,WAClCyhB,IAAiB,YAAc,CAACzhB,EAAK,UAE3D,OAAO4pB,GAAiBsD,GAAerD,CAAA,CACxC,EAED,OAAIhpB,QACMyJ,EAAe,CAAA,CAAA,EAIvBtB,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,qEACb,SAAAoH,EAAA,KAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAAkB,qBAAA,EACrEA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAA0C,6CAAA,CAAA,CAAA,CACzE,CACF,CAAA,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAApH,EAAA,IAACkoB,GAAA,CACC,MAAM,oBACN,MAAOqC,EAAM,OACb,KAAMna,GACN,MAAM,MAAA,CACR,EACApQ,EAAA,IAACkoB,GAAA,CACC,MAAM,kBACN,MAAOqC,EAAM,OAAYgB,GAAAA,EAAE,SAAS,EAAE,OACtC,KAAMlB,GACN,MAAM,OAAA,CACR,EACArqB,EAAA,IAACkoB,GAAA,CACC,MAAM,kBACN,MAAOqC,EAAM,UAAYgB,EAAE,OAAS,OAAO,EAAE,OAC7C,KAAM5L,GACN,MAAM,QAAA,CACR,EACA3f,EAAA,IAACkoB,GAAA,CACC,MAAM,gBACN,MAAOqC,EAAM,OAAYgB,GAAA,CACvB,MAAMC,EAAQ,IAAI,KAAK,EAAE,aAAa,EACtC,OAAO,IAAI,KAAKD,EAAE,UAAU,EAAE,aAAmB,IAAAC,CAClD,CAAA,EAAE,OACH,KAAMC,GACN,MAAM,QAAA,CACR,CAAA,EACF,QAGC9H,GAAK,CAAA,UAAU,MACd,SAACvc,EAAA,KAAA,MAAA,CAAI,UAAU,kCACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,SACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAsH,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FtH,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,qBACZ,MAAOgF,EACP,SAAWtnB,GAAMunB,EAAcvnB,EAAE,OAAO,KAAK,EAC7C,UAAU,iHAAA,CACZ,CAAA,CAAA,CACF,CACF,CAAA,EACA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAAAA,EAAA,KAAC,SAAA,CACC,MAAOqjB,EACP,SAAW/sC,GAAMgtC,EAAchtC,EAAE,OAAO,KAAK,EAC7C,UAAU,qGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAgB,mBAAA,EACnCA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAO,UAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAa,gBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAO,UAAA,CAAA,CAAA,CACjC,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOyY,EACP,SAAWniC,GAAMoiC,EAAgBpiC,EAAE,OAAO,KAAK,EAC/C,UAAU,qGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAe,kBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAK,QAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAO,UAAA,CAAA,CAAA,CAClC,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EAGAA,EAAA,IAAC2jB,GAAK,CAAA,UAAU,kBACd,SAAA3jB,EAAA,IAAC,MAAI,CAAA,UAAU,kBACb,SAAAoH,OAAC,QAAM,CAAA,UAAU,SACf,SAAA,CAAApH,MAAC,QAAM,CAAA,UAAU,aACf,SAAAoH,EAAA,KAAC,KACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,UAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,WAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,kFAAkF,SAEhG,QAAA,CAAA,CAAA,CACF,CACF,CAAA,QACC,QAAM,CAAA,UAAU,oCACd,SAAcqrB,EAAA,IAAKjtB,GAClB4B,EAAA,IAAC0rB,GAAA,CAEC,KAAAttB,EACA,eAAgB4sB,EAChB,OAAQC,CAAA,EAHH7sB,EAAK,GAKb,CAAA,EACH,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGCimB,EAAa,GACZrkB,EAAA,IAACmkB,GAAA,CACC,YAAAC,EACA,WAAAC,EACA,aAAckD,CAAA,CAChB,EAIFvnB,EAAA,IAAC8pB,GAAA,CACC,OAAQe,EACR,QAASO,EACT,KAAMT,EACN,cAAeO,CAAA,CACjB,CACF,CAAA,CAAA,CAEJ,EAGMQ,GAAU,CAAC,CAAE,KAAAttB,EAAM,eAAAutB,EAAgB,OAAApD,YAEpC,KACC,CAAA,SAAA,CAAAvoB,EAAAA,IAAC,MAAG,UAAU,8BACZ,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,0BACb,SAAAA,EAAA,IAACiY,GAAA,CACC,IAAK7Z,EAAK,aAAeA,EAAK,cAC9B,IAAKA,EAAK,SACV,KAAK,OACL,KAAK,YACL,UAAU,sCACV,aAAc4B,EAAAA,IAACoQ,GAAM,CAAA,UAAU,uBAAwB,CAAA,CAAA,CAAA,EAE3D,EACAhJ,EAAAA,KAAC,MAAI,CAAA,UAAU,OACb,SAAA,CAAApH,EAAA,IAAC,MAAI,CAAA,UAAU,oCAAqC,SAAA5B,EAAK,SAAS,EAClEgJ,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,OAAKhJ,EAAK,GAAA,EAAI,CAAA,EACvD,CAAA,CAAA,CACF,CACF,CAAA,QACC,KAAG,CAAA,UAAU,8BACZ,SAACgJ,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA6M,GAAA,CAAK,UAAU,4BAA6B,CAAA,QAC5C,OAAK,CAAA,UAAU,wBAAyB,SAAAzO,EAAK,OAAS,MAAM,CAAA,CAAA,CAC/D,CACF,CAAA,EACA4B,EAAAA,IAAC,KAAG,CAAA,UAAU,8BACZ,SAAAA,EAAA,IAAC4N,EAAA,CACC,QAASxP,EAAK,OAAS,QAAU,SAAWA,EAAK,OAAS,UAAY,UAAY,UAEjF,SAAKA,EAAA,IAAA,CAAA,EAEV,EACC4B,MAAA,KAAA,CAAG,UAAU,8BACZ,eAAC4N,EAAM,CAAA,QAASxP,EAAK,UAAY,UAAY,SAC1C,SAAAA,EAAK,UAAY,QAAU,SAC9B,CAAA,EACF,QACC,KAAG,CAAA,UAAU,oDACZ,SAACgJ,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAkP,GAAA,CAAS,UAAU,cAAe,CAAA,EAClC,IAAI,KAAK9Q,EAAK,UAAU,EAAE,mBAAmB,CAAA,CAAA,CAChD,CACF,CAAA,QACC,KAAG,CAAA,UAAU,6DACZ,SAACgJ,EAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,KAAK,KACL,QAAQ,UACR,QAAS,IAAM8e,EAAOnqB,CAAI,EAC1B,MAAM,iBAEN,SAAA4B,EAAAA,IAAC8oB,GAAM,CAAA,UAAU,SAAU,CAAA,CAAA,CAC7B,EACA9oB,EAAA,IAACyJ,EAAA,CACC,KAAK,KACL,QAASrL,EAAK,UAAY,UAAY,UACtC,QAAS,IAAMutB,EAAevtB,EAAK,IAAKA,EAAK,SAAS,EAErD,SAAAA,EAAK,UAAY,YAAc,QAAA,CAClC,CAAA,CAAA,CACF,CACF,CAAA,CACF,CAAA,CAAA,EAKE8pB,GAAW,CAAC,CAAE,MAAAxW,EAAO,MAAAxtB,EAAO,KAAM8sB,EAAM,MAAAiY,KAAY,CACxD,MAAMC,EAAe,CACnB,KAAM,4BACN,MAAO,8BACP,OAAQ,gCACR,OAAQ,+BAAA,EAGV,aACGvF,GAAK,CAAA,UAAU,MACd,SAACvc,EAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAyB,SAAM0R,EAAA,EAC3C1R,EAAA,IAAA,IAAA,CAAE,UAAU,mCAAoC,SAAM9b,EAAA,CAAA,EACzD,EACC8b,EAAA,IAAA,MAAA,CAAI,UAAW,wBAAwBkpB,EAAaD,CAAK,CAAC,oCACzD,SAACjpB,EAAAA,IAAAgR,EAAA,CAAK,UAAU,SAAU,CAAA,EAC5B,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EC3TM4a,GAAmB,IAAM,CAC7B,KAAM,CAACjc,EAAQC,CAAS,EAAI5Q,EAAA,SAAS,CAAE,CAAA,EACjC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACgG,EAAYC,CAAa,EAAIjG,WAAS,EAAE,EACzC,CAAC6gB,EAAcC,CAAe,EAAI9gB,WAAS,KAAK,EAChD,CAAColB,EAAamD,CAAc,EAAIvoB,WAAS,CAAC,EAC1C,CAACqlB,EAAYmD,CAAa,EAAIxoB,WAAS,CAAC,EACxC,CAAC6sB,EAAeC,CAAgB,EAAI9sB,WAAS,IAAI,EACjD,CAAC+sB,EAAgBC,CAAiB,EAAIhtB,WAAS,EAAK,EAEpDxC,EAAMwH,KACKS,GAAY,EAE7B/E,EAAAA,UAAU,IAAM,CACHusB,GACV,EAAA,CAAC7H,EAAapf,EAAY6a,CAAY,CAAC,EAE1C,MAAMoM,EAAa,SAAY,SAC7B/sB,EAAW,EAAI,EACX,GAAA,CACF,MAAMhZ,EAAW,MAAMsW,EAAI,IAAI,wBAAyB,CACtD,OAAQ,CACN,KAAM4nB,EACN,MAAO,GACP,OAAQpf,GAAc,OACtB,OAAQ6a,IAAiB,MAAQA,EAAe,MAClD,CAAA,CACD,EAEG35B,EAAS,UACX0pB,IAAUzS,EAAAjX,EAAS,OAAT,YAAAiX,EAAe,SAAU,CAAE,CAAA,EACvBqqB,IAAAjqB,EAAArX,EAAS,OAAT,YAAAqX,EAAe,cAAe,CAAC,SAExCnX,EAAO,CACN,QAAA,MAAM,4BAA6BA,CAAK,EAChDwpB,EAAU,CAAE,CAAA,CAAA,QACZ,CACA1Q,EAAW,EAAK,CAClB,CAAA,EAGIgtB,EAA0B,MAAOvhB,EAASwb,IAAc,CACxD,GAAA,CACF,MAAM3pB,EAAI,IAAI,yBAAyBmO,CAAO,GAAI,CAChD,OAAQwb,CAAA,CACT,EACD,MAAM8F,EAAW,QACV7lC,EAAO,CACN,QAAA,MAAM,sCAAuCA,CAAK,CAC5D,CAAA,EAGI+lC,EAAyB,MAAOxhB,GAAY,CAC5C,GAAA,CACF,MAAMzkB,EAAW,MAAMsW,EAAI,IAAI,iBAAiBmO,CAAO,EAAE,EACrDzkB,EAAS,UACX4lC,EAAiB5lC,EAAS,IAAI,EAC9B8lC,EAAkB,EAAI,SAEjB5lC,EAAO,CACN,QAAA,MAAM,uCAAwCA,CAAK,CAC7D,CAAA,EAGI85B,EAAiBvQ,EAAO,OAAgB2B,GAAA,SACtC,MAAA0W,EAAgB1W,EAAM,IAAI,SAAStM,CAAU,KAC9B7H,EAAAmU,EAAM,aAAN,YAAAnU,EAAkB,cAAc,SAAS6H,EAAW,YAAY,OAChEzH,EAAA+T,EAAM,cAAN,YAAA/T,EAAmB,cAAc,SAASyH,EAAW,YAAA,IACpEijB,EAAgBpI,IAAiB,OAASvO,EAAM,SAAWuO,EAEjE,OAAOmI,GAAiBC,CAAA,CACzB,EAEKmE,EAAezc,EAAO,OAAO,CAAC7M,EAAKwO,IACvCA,EAAM,SAAW,YAAcxO,GAAOwO,EAAM,aAAe,GAAKxO,EAAK,CAAA,EAGvE,OAAI7D,QACMyJ,EAAe,CAAA,CAAA,EAIvBtB,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,qEACb,SAAAoH,EAAA,KAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAAiB,oBAAA,EACpEA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAyC,4CAAA,CAAA,CAAA,CACxE,CACF,CAAA,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAApH,EAAA,IAACkoB,GAAA,CACC,MAAM,mBACN,MAAOvY,EAAO,OACd,KAAM3H,GACN,MAAM,MAAA,CACR,EACAhI,EAAA,IAACkoB,GAAA,CACC,MAAM,oBACN,MAAOvY,EAAO,UAAYpG,EAAE,SAAW,WAAW,EAAE,OACpD,KAAM0F,GACN,MAAM,OAAA,CACR,EACAjP,EAAA,IAACkoB,GAAA,CACC,MAAM,YACN,MAAOvY,EAAO,UAAYpG,EAAE,SAAW,SAAS,EAAE,OAClD,KAAMyF,GACN,MAAM,QAAA,CACR,EACAhP,EAAA,IAACkoB,GAAA,CACC,MAAM,gBACN,MAAO,MAAMkE,EAAa,QAAQ,CAAC,CAAC,GACpC,KAAM/iB,GACN,MAAM,QAAA,CACR,CAAA,EACF,QAGCsa,GAAK,CAAA,UAAU,MACd,SAACvc,EAAA,KAAA,MAAA,CAAI,UAAU,kCACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,SACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAsH,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FtH,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,oBACZ,MAAOgF,EACP,SAAWtnB,GAAMunB,EAAcvnB,EAAE,OAAO,KAAK,EAC7C,UAAU,iHAAA,CACZ,CAAA,CAAA,CACF,CACF,CAAA,EACAsiB,EAAAA,IAAC,MAAI,CAAA,UAAU,aACb,SAAAoH,EAAA,KAAC,SAAA,CACC,MAAOyY,EACP,SAAWniC,GAAMoiC,EAAgBpiC,EAAE,OAAO,KAAK,EAC/C,UAAU,qGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAe,kBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAQ,WAAA,EAC/BA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAU,aAAA,EACnCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAO,UAAA,EAC9BA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAQ,WAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAQ,WAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAS,YAAA,CAAA,CAAA,CAAA,EAEvC,CAAA,CAAA,CACF,CACF,CAAA,EAGAA,EAAA,IAAC2jB,GAAK,CAAA,UAAU,kBACd,SAAA3jB,EAAA,IAAC,MAAI,CAAA,UAAU,kBACb,SAAAoH,OAAC,QAAM,CAAA,UAAU,SACf,SAAA,CAAApH,MAAC,QAAM,CAAA,UAAU,aACf,SAAAoH,EAAA,KAAC,KACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,YAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,WAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,OAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,kFAAkF,SAEhG,QAAA,CAAA,CAAA,CACF,CACF,CAAA,QACC,QAAM,CAAA,UAAU,oCACd,SAAekgB,EAAA,IAAK5O,GACnBtR,EAAA,IAACqsB,GAAA,CAEC,MAAA/a,EACA,eAAgB4a,EAChB,cAAeC,CAAA,EAHV7a,EAAM,GAKd,CAAA,EACH,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGC+S,EAAa,GACZrkB,EAAA,IAACmkB,GAAA,CACC,YAAAC,EACA,WAAAC,EACA,aAAckD,CAAA,CAChB,EAIFvnB,EAAA,IAACuR,GAAA,CACC,OAAQwa,EACR,QAAS,IAAMC,EAAkB,EAAK,EACtC,MAAM,qBACN,KAAK,KAEJ,SACCH,GAAA7rB,EAAA,IAACssB,GAAA,CACC,MAAOT,EACP,QAAS,IAAMG,EAAkB,EAAK,CAAA,CACxC,CAAA,CAEJ,CACF,CAAA,CAAA,CAEJ,EAGMK,GAAW,CAAC,CAAE,MAAA/a,EAAO,eAAAib,EAAgB,cAAAC,KAAoB,CACvD1b,MAAAA,EAAkB7lB,IACP,CACb,QAAS,UACT,UAAW,OACX,QAAS,UACT,UAAW,UACX,UAAW,UACX,UAAW,QAAA,GAECA,CAAM,GAAK,UAGrBu7B,EAAiBv7B,IACP,CACZ,QAAS,WACT,UAAW,aACX,QAAS,UACT,UAAW,WACX,UAAW,WACX,UAAW,WAAA,GAEAA,CAAM,GAAKA,EAG1B,cACG,KACC,CAAA,SAAA,CAAA+U,MAAC,KAAG,CAAA,UAAU,8BACZ,SAAAoH,EAAA,KAAC,MACC,CAAA,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCAAoC,SAAA,CAAA,IAAEkK,EAAM,IAAI,MAAM,EAAE,CAAA,EAAE,QACxE,MAAI,CAAA,UAAU,wBAAyB,SAAAA,EAAM,UAAY,MAAM,CAAA,CAAA,CAClE,CACF,CAAA,QACC,KAAG,CAAA,UAAU,8BACZ,SAAClK,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA6H,EAAA,CAAK,UAAU,4BAA6B,CAAA,QAC5C,OAAK,CAAA,UAAU,wBAAyB,SAAAyJ,EAAM,YAAc,MAAM,CAAA,CAAA,CACrE,CACF,CAAA,QACC,KAAG,CAAA,UAAU,8BACZ,SAAClK,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA6H,EAAA,CAAK,UAAU,4BAA6B,CAAA,QAC5C,OAAK,CAAA,UAAU,wBAAyB,SAAAyJ,EAAM,aAAe,MAAM,CAAA,CAAA,CACtE,CACF,CAAA,QACC,KAAG,CAAA,UAAU,8BACZ,SAAClK,EAAA,KAAA,OAAA,CAAK,UAAU,oCAAoC,SAAA,CAAA,OAC7CkK,EAAM,aAAe,GAAG,QAAQ,CAAC,CAAA,CAAA,CACxC,CACF,CAAA,QACC,KAAG,CAAA,UAAU,8BACZ,SAAAtR,EAAA,IAAC4N,GAAM,QAASkD,EAAeQ,EAAM,MAAM,EACxC,SAAAkV,EAAclV,EAAM,MAAM,CAC7B,CAAA,EACF,QACC,KAAG,CAAA,UAAU,oDACZ,SAAClK,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAkP,GAAA,CAAS,UAAU,cAAe,CAAA,EAClC,IAAI,KAAKoC,EAAM,UAAU,EAAE,mBAAmB,CAAA,CAAA,CACjD,CACF,CAAA,QACC,KAAG,CAAA,UAAU,6DACZ,SAAClK,EAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,KAAK,KACL,QAAQ,UACR,QAAS,IAAM+iB,EAAclb,EAAM,GAAG,EACtC,MAAM,yBAEN,SAAAtR,EAAAA,IAACgN,GAAI,CAAA,UAAU,SAAU,CAAA,CAAA,CAC3B,EACCsE,EAAM,SAAW,aAAeA,EAAM,SAAW,aAChDlK,EAAA,KAAC,SAAA,CACC,MAAOkK,EAAM,OACb,SAAW5zB,GAAM6uC,EAAejb,EAAM,IAAK5zB,EAAE,OAAO,KAAK,EACzD,UAAU,mDAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAQ,WAAA,EAC/BA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAU,aAAA,EACnCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAO,UAAA,EAC9BA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAQ,WAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAQ,WAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAS,YAAA,CAAA,CAAA,CACrC,CAAA,CAAA,CAEJ,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,EAGMkoB,GAAW,CAAC,CAAE,MAAAxW,EAAO,MAAAxtB,EAAO,KAAM8sB,EAAM,MAAAiY,KAAY,CACxD,MAAMC,EAAe,CACnB,KAAM,4BACN,MAAO,8BACP,OAAQ,gCACR,OAAQ,+BAAA,EAGV,aACGvF,GAAK,CAAA,UAAU,MACd,SAACvc,EAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAyB,SAAM0R,EAAA,EAC3C1R,EAAA,IAAA,IAAA,CAAE,UAAU,mCAAoC,SAAM9b,EAAA,CAAA,EACzD,EACC8b,EAAA,IAAA,MAAA,CAAI,UAAW,wBAAwBkpB,EAAaD,CAAK,CAAC,oCACzD,SAACjpB,EAAAA,IAAAgR,EAAA,CAAK,UAAU,SAAU,CAAA,EAC5B,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EAGMsb,GAAoB,CAAC,CAAE,MAAAhb,EAAO,QAAAG,KAAc,qCAE1C,MAAAiI,EAAcC,GAAe,CAC7B,GAAA,CACF,OAAKA,EACQ,IAAI,KAAKA,CAAU,EACpB,eAAe,OAAO,EAFV,2BAGV,CACP,MAAA,eACT,CAAA,EAII8S,EAAsBruB,GACrBA,EACDA,EAAK,YAAcA,EAAK,UACnB,GAAGA,EAAK,UAAU,IAAIA,EAAK,SAAS,GAEtCA,EAAK,UAAY,MAJN,MAQlB,OAAAgJ,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,gBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,wBAAwB,SAAA,CAAA,YAASjK,EAAAmU,EAAM,MAAN,YAAAnU,EAAW,MAAM,GAAE,EAAE,EACpE6C,EAAAA,IAAC4N,EAAM,CAAA,QAASkD,GAAeQ,EAAM,MAAM,EACxC,SAAAkV,GAAclV,EAAM,MAAM,CAC7B,CAAA,CAAA,EACF,EACAlK,EAAAA,KAAC,IAAE,CAAA,UAAU,gBAAgB,SAAA,CAAA,aAChBsS,EAAWpI,EAAM,UAAU,CAAA,EACxC,CAAA,EACF,EAGAlK,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAwB,2BAAA,EACvEoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAAA,OAAC,IAAE,CAAA,SAAA,CAAApH,EAAAA,IAAC,UAAO,SAAK,OAAA,CAAA,EAAS,IAAEysB,EAAmBnb,EAAM,KAAK,CAAA,EAAE,SAC1D,IAAE,CAAA,SAAA,CAAAtR,EAAAA,IAAC,UAAO,SAAM,QAAA,CAAA,EAAS,MAAEzC,EAAA+T,EAAM,QAAN,YAAA/T,EAAa,QAAS,KAAA,EAAM,SACvD,IAAE,CAAA,SAAA,CAAAyC,EAAAA,IAAC,UAAO,SAAS,WAAA,CAAA,EAAS,MAAEvC,EAAA6T,EAAM,QAAN,YAAA7T,EAAa,WAAY,KAAA,EAAM,SAC7D,IAAE,CAAA,SAAA,CAAAuC,EAAAA,IAAC,UAAO,SAAG,KAAA,CAAA,EAAS,IAAEsR,EAAM,QAAA,EAAS,CAAA,EAC1C,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACtR,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAuB,0BAAA,EACtEoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAAA,OAAC,IAAE,CAAA,SAAA,CAAApH,EAAAA,IAAC,UAAO,SAAK,OAAA,CAAA,EAAS,IAAEysB,EAAmBnb,EAAM,MAAM,CAAA,EAAE,SAC3D,IAAE,CAAA,SAAA,CAAAtR,EAAAA,IAAC,UAAO,SAAM,QAAA,CAAA,EAAS,MAAExC,EAAA8T,EAAM,SAAN,YAAA9T,EAAc,QAAS,KAAA,EAAM,SACxD,IAAE,CAAA,SAAA,CAAAwC,EAAAA,IAAC,UAAO,SAAS,WAAA,CAAA,EAAS,MAAErC,EAAA2T,EAAM,SAAN,YAAA3T,EAAc,WAAY,KAAA,EAAM,SAC9D,IAAE,CAAA,SAAA,CAAAqC,EAAAA,IAAC,UAAO,SAAG,KAAA,CAAA,EAAS,IAAEsR,EAAM,SAAA,EAAU,CAAA,EAC3C,CAAA,EACF,CAAA,EACF,SAGC,MACC,CAAA,SAAA,CAACtR,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAO,UAAA,QACrD,MAAI,CAAA,UAAU,4BACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,0BACX,SAAA,IAAAxJ,EAAA0T,EAAM,KAAN,YAAA1T,EAAU,cAAagE,GAAA9D,EAAAwT,EAAM,KAAN,YAAAxT,EAAU,SAAV,YAAA8D,EAAmB,MAC1C5B,EAAA,IAAC,MAAA,CACC,MAAK6B,EAAAyP,EAAM,KAAN,YAAAzP,EAAU,cAAaE,GAAAD,EAAAwP,EAAM,KAAN,YAAAxP,EAAU,SAAV,YAAAC,EAAmB,IAC/C,MAAKC,EAAAsP,EAAM,KAAN,YAAAtP,EAAU,QAAS,UACxB,UAAU,gCAAA,CACZ,EAEFoF,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACpH,EAAAA,IAAA,KAAA,CAAG,UAAU,cAAe,WAAAkC,EAAAoP,EAAM,KAAN,YAAApP,EAAU,QAASoP,EAAM,UAAY,0BAA2B,CAAA,EAC7FtR,EAAAA,IAAC,KAAE,UAAU,wBAAyB,eAAM,mBAAI,cAAesR,EAAM,gBAAkB,eAAgB,CAAA,EACvGlK,EAAAA,KAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,CAAA,WAAO/E,GAAAF,EAAAmP,EAAM,KAAN,YAAAnP,EAAU,OAAV,YAAAE,EAAgB,OAAQ,KAAA,EAAM,EAC1E+E,EAAAA,KAAC,IAAE,CAAA,UAAU,wCAAwC,SAAA,CAAA,OAC9CkK,EAAM,aAAeA,EAAM,OAAS,GAAG,QAAQ,CAAC,CAAA,EACvD,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,EAGCA,EAAM,gBAAkBA,EAAM,eAAe,OAAS,UACpD,MACC,CAAA,SAAA,CAACtR,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAmB,sBAAA,EACjEA,EAAA,IAAA,MAAA,CAAI,UAAU,YACZ,SAAMsR,EAAA,eAAe,IAAI,CAACob,EAAShlC,IACjC0f,OAAA,MAAA,CAAgB,UAAU,kCACzB,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAU,kCAAmC,CAAA,EAClDoH,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAAApH,MAAC,KAAE,UAAU,cAAe,SAAcwmB,GAAAkG,EAAQ,MAAM,EAAE,EAC1D1sB,EAAAA,IAAC,IAAE,CAAA,UAAU,gBACV,SAAA,IAAI,KAAK0sB,EAAQ,SAAS,EAAE,eAC/B,CAAA,CAAA,CAAA,EACF,CAAA,GAPQhlC,CAQV,CACD,EACH,CAAA,EACF,EAIFsY,EAAA,IAAC,MAAI,CAAA,UAAU,iCACb,SAAAA,EAAAA,IAACyJ,EAAO,CAAA,QAASgI,EAAS,QAAQ,UAAU,SAAA,QAE5C,CAAA,EACF,CACF,CAAA,CAAA,CAEJ,EAGMX,GAAkB7lB,IACP,CACb,QAAS,UACT,UAAW,OACX,QAAS,UACT,UAAW,UACX,UAAW,UACX,UAAW,QAAA,GAECA,CAAM,GAAK,UAGrBu7B,GAAiBv7B,IACP,CACZ,QAAS,WACT,UAAW,aACX,QAAS,UACT,UAAW,WACX,UAAW,WACX,UAAW,WAAA,GAEAA,CAAM,GAAKA,ECxdpB0hC,GAAgB,IAAM,OAC1B,KAAM,CAACthB,EAAKC,CAAM,EAAItM,EAAA,SAAS,CAAE,CAAA,EAC3B,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACgG,EAAYC,CAAa,EAAIjG,WAAS,EAAE,EACzC,CAAC6gB,EAAcC,CAAe,EAAI9gB,WAAS,KAAK,EAChD,CAAColB,EAAamD,CAAc,EAAIvoB,WAAS,CAAC,EAC1C,CAACqlB,EAAYmD,CAAa,EAAIxoB,WAAS,CAAC,EACxC,CAAC4tB,EAAYC,CAAa,EAAI7tB,WAAS,IAAI,EAC3C,CAAC8tB,EAAiBC,CAAkB,EAAI/tB,WAAS,EAAK,EACtD,CAACguB,EAAaC,CAAc,EAAIjuB,WAAS,EAAK,EAC9C,CAACkuB,EAAeC,CAAgB,EAAInuB,WAAS,EAAK,EAElDxC,EAAMwH,KAEZtE,EAAAA,UAAU,IAAM,CACN0tB,GACP,EAAA,CAAChJ,EAAapf,EAAY6a,CAAY,CAAC,EAE1C,MAAMuN,EAAU,SAAY,OAC1BluB,EAAW,EAAI,EACX,GAAA,CACI,MAAAjX,EAAS,IAAI,gBAAgB,CACjC,KAAMm8B,EACN,MAAO,GACP,OAAQpf,EACR,OAAQ6a,CAAA,CACT,EAEK35B,EAAW,MAAMsW,EAAI,IAAI,cAAcvU,CAAM,EAAE,EACjD/B,EAAS,UACXolB,EAAOplB,EAAS,KAAK,KAAO,CAAE,CAAA,EAChBshC,IAAArqB,EAAAjX,EAAS,OAAT,YAAAiX,EAAe,cAAe,CAAC,SAExC/W,EAAO,CACN,QAAA,MAAM,6BAA8BA,CAAK,EACjDklB,EAAO,CAAE,CAAA,CAAA,QACT,CACApM,EAAW,EAAK,CAClB,CAAA,EAGI2R,EAAiB,SAAY,CACjC,GAAK+b,EAEL,CAAAO,EAAiB,EAAI,EACjB,GAAA,EACe,MAAM3wB,EAAI,OAAO,cAAcowB,EAAW,GAAG,EAAE,GACnD,UACX,MAAMQ,EAAQ,EACdL,EAAmB,EAAK,EACxBF,EAAc,IAAI,SAEbzmC,EAAO,CACN,QAAA,MAAM,2BAA4BA,CAAK,CAAA,QAC/C,CACA+mC,EAAiB,EAAK,CACxB,EAAA,EAGIE,EAAqB,MAAOxsB,EAAMslB,IAAc,CAChD,GAAA,CACF,MAAM3pB,EAAI,IAAI,cAAcqE,CAAI,UAAW,CACzC,OAAQslB,CAAA,CACT,EACD,MAAMiH,EAAQ,QACPhnC,EAAO,CACN,QAAA,MAAM,uCAAwCA,CAAK,CAC7D,CAAA,EAGIknC,EAAgBnqB,GAAO,CAE3B0pB,EAAc1pB,CAAE,EAChB8pB,EAAe,EAAI,CAAA,EAGfM,EAAcliB,EAAI,OAAalI,GAAA,eACnC,MAAM6kB,IAAgB7qB,EAAAgG,EAAG,QAAH,YAAAhG,EAAU,cAAc,SAAS6H,EAAW,YAAA,OAC7CvH,GAAAF,EAAA4F,EAAG,SAAH,YAAA5F,EAAW,WAAX,YAAAE,EAAqB,cAAc,SAASuH,EAAW,mBACvDrH,GAAAH,EAAA2F,EAAG,OAAH,YAAA3F,EAAS,OAAT,YAAAG,EAAe,cAAc,SAASqH,EAAW,YAAa,IAC7EijB,EAAgBpI,IAAiB,OAAS1c,EAAG,SAAW0c,EAE9D,OAAOmI,GAAiBC,CAAA,CACzB,EAEKuF,EAAaniB,EAAI,OAAO,CAACvI,EAAKK,IAAOL,GAAOK,EAAG,OAAS,GAAI,CAAC,EAEnE,OAAIlE,QACMyJ,EAAe,CAAA,CAAA,EAIvBtB,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,qEACb,SAAAoH,EAAA,KAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAAkB,qBAAA,EACrEA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAA0C,6CAAA,CAAA,CAAA,CACzE,CACF,CAAA,EAGAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAApH,EAAA,IAACkoB,GAAA,CACC,MAAM,oBACN,MAAO7c,EAAI,OACX,KAAMoiB,GACN,MAAM,MAAA,CACR,EACAztB,EAAA,IAACkoB,GAAA,CACC,MAAM,kBACN,MAAO7c,EAAI,UAAY/tB,EAAE,SAAW,QAAQ,EAAE,OAC9C,KAAM2xB,GACN,MAAM,OAAA,CACR,EACAjP,EAAA,IAACkoB,GAAA,CACC,MAAM,YACN,MAAO7c,EAAI,UAAY/tB,EAAE,SAAW,SAAS,EAAE,OAC/C,KAAM0xB,GACN,MAAM,QAAA,CACR,EACAhP,EAAA,IAACkoB,GAAA,CACC,MAAM,cACN,MAAO,MAAMsF,EAAW,QAAQ,CAAC,CAAC,GAClC,KAAMnkB,GACN,MAAM,QAAA,CACR,CAAA,EACF,QAGCsa,GAAK,CAAA,UAAU,MACd,SAACvc,EAAA,KAAA,MAAA,CAAI,UAAU,kCACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,SACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,WACb,SAAA,CAACpH,EAAAA,IAAAsH,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FtH,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,0CACZ,MAAOgF,EACP,SAAWtnB,GAAMunB,EAAcvnB,EAAE,OAAO,KAAK,EAC7C,UAAU,8GAAA,CACZ,CAAA,CAAA,CACF,CACF,CAAA,EACAsiB,EAAAA,IAAC,MAAI,CAAA,UAAU,aACb,SAAAoH,EAAA,KAAC,SAAA,CACC,MAAOyY,EACP,SAAWniC,GAAMoiC,EAAgBpiC,EAAE,OAAO,KAAK,EAC/C,UAAU,kGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAe,kBAAA,EAClCA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAK,QAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAO,UAAA,EAC/BA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAQ,WAAA,EAC/BA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAM,SAAA,CAAA,CAAA,CAAA,EAEjC,CAAA,CAAA,CACF,CACF,CAAA,EAGAA,EAAA,IAAC2jB,GAAK,CAAA,UAAU,kBACd,SAAA3jB,EAAA,IAAC,MAAI,CAAA,UAAU,kBACb,SAAAoH,OAAC,QAAM,CAAA,UAAU,sCACf,SAAA,CAAApH,MAAC,QAAM,CAAA,UAAU,aACf,SAAAoH,EAAA,KAAC,KACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,UAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,WAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,OAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,OAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,kFAAkF,SAEhG,QAAA,CAAA,CAAA,CACF,CACF,CAAA,QACC,QAAM,CAAA,UAAU,oCACd,SAAYutB,EAAA,IAAKpqB,GAChBnD,EAAA,IAAC0tB,GAAA,CAEC,GAAAvqB,EACA,SAAWA,GAAO,CAChB0pB,EAAc1pB,CAAE,EAChB4pB,EAAmB,EAAI,CACzB,EACA,OAAQ,IAAMO,EAAanqB,CAAE,EAC7B,eAAgBkqB,CAAA,EAPXlqB,EAAG,GASX,CAAA,EACH,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGCkhB,EAAa,GACZrkB,EAAA,IAACmkB,GAAA,CACC,YAAAC,EACA,WAAAC,EACA,aAAckD,CAAA,CAChB,EAIFvnB,EAAA,IAACuR,GAAA,CACC,OAAQub,EACR,QAAS,IAAMC,EAAmB,EAAK,EACvC,MAAM,qBAEN,SAAA3lB,EAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,0BACb,SAAA,CAACpH,EAAAA,IAAAyf,GAAA,CAAc,UAAU,sBAAuB,CAAA,SAC/C,MACC,CAAA,SAAA,CAACzf,EAAA,IAAA,IAAA,CAAE,UAAU,cAAc,SAA4C,+CAAA,EACtEA,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAErC,mCAAA,CAAA,EACF,CAAA,EACF,EACC4sB,GACCxlB,EAAA,KAAC,MAAI,CAAA,UAAU,4BACb,SAAA,CAAApH,EAAA,IAAC,IAAE,CAAA,UAAU,cAAe,SAAA4sB,EAAW,MAAM,EAC7CxlB,EAAAA,KAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,CAAA,eACxBjK,EAAAyvB,EAAW,SAAX,YAAAzvB,EAAmB,WAAY,KAAA,EAC5C,CAAA,EACF,EAEFiK,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,QAAQ,UACR,QAAS,IAAMsjB,EAAmB,EAAK,EACvC,SAAUG,EACX,SAAA,UAAA,CAED,EACAltB,EAAA,IAACyJ,EAAA,CACC,QAAQ,SACR,QAASoH,EACT,SAAUqc,EAET,WAAgB,eAAiB,SAAA,CACpC,CAAA,EACF,CAAA,EACF,CAAA,CACF,EAGAltB,EAAA,IAACuR,GAAA,CACC,OAAQyb,EACR,QAAS,IAAMC,EAAe,EAAK,EACnC,MAAM,sBACN,KAAK,KAEJ,SACCL,GAAA5sB,EAAA,IAAC2tB,GAAA,CACC,GAAIf,EACJ,QAAS,IAAMK,EAAe,EAAK,CAAA,CACrC,CAAA,CAEJ,CACF,CAAA,CAAA,CAEJ,EAGMS,GAAQ,CAAC,CAAE,GAAAvqB,EAAI,SAAAqlB,EAAU,OAAAoF,EAAQ,eAAArB,KAAqB,SACpDzb,MAAAA,EAAkB7lB,IACP,CACb,OAAQ,UACR,SAAU,UACV,QAAS,UACT,OAAQ,QAAA,GAEIA,CAAM,GAAK,UAGrBu7B,EAAiBv7B,IACP,CACZ,OAAQ,QACR,SAAU,UACV,QAAS,WACT,OAAQ,QAAA,GAEGA,CAAM,GAAKA,EAG1B,cACG,KACC,CAAA,SAAA,CAAA+U,EAAAA,IAAC,MAAG,UAAU,8BACZ,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oBACZ,SAAA,CAAAjE,EAAG,QAAUA,EAAG,OAAO,OAAS,GAC/BnD,EAAA,IAAC,MAAA,CACC,IAAKmD,EAAG,OAAO,CAAC,EAChB,IAAKA,EAAG,MACR,UAAU,qCAAA,CACZ,SAED,MACC,CAAA,SAAA,CAAAnD,EAAA,IAAC,MAAI,CAAA,UAAU,oCAAqC,SAAAmD,EAAG,MAAM,EAC7DnD,EAAAA,IAAC,OAAI,UAAU,wBAAyB,WAAG,IAAI,MAAM,EAAE,CAAE,CAAA,CAAA,EAC3D,CAAA,CAAA,CACF,CACF,CAAA,QACC,KAAG,CAAA,UAAU,8BACZ,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA6H,EAAA,CAAK,UAAU,4BAA6B,CAAA,QAC5C,OAAK,CAAA,UAAU,wBAAyB,WAAG1K,EAAAgG,EAAA,SAAA,YAAAhG,EAAQ,WAAY,MAAM,CAAA,CAAA,CACxE,CACF,CAAA,EACC6C,EAAA,IAAA,KAAA,CAAG,UAAU,8BACZ,SAACA,EAAA,IAAA,OAAA,CAAK,UAAU,wBAAyB,WAAGzC,EAAA4F,EAAA,OAAA,YAAA5F,EAAM,OAAQ,KAAM,CAAA,EAClE,QACC,KAAG,CAAA,UAAU,8BACZ,SAAC6J,EAAA,KAAA,OAAA,CAAK,UAAU,oCAAoC,SAAA,CAAA,OAC7CjE,EAAG,OAASA,EAAG,gBAAkB,GAAG,QAAQ,CAAC,CAAA,CAAA,CACpD,CACF,CAAA,QACC,KAAG,CAAA,UAAU,8BACZ,SAAAnD,EAAA,IAAC4N,GAAM,QAASkD,EAAe3N,EAAG,MAAM,EACrC,SAAAqjB,EAAcrjB,EAAG,MAAM,CAC1B,CAAA,EACF,QACC,KAAG,CAAA,UAAU,oDACZ,SAACiE,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAkP,GAAA,CAAS,UAAU,cAAe,CAAA,EAClC,IAAI,KAAK/L,EAAG,UAAU,EAAE,mBAAmB,CAAA,CAAA,CAC9C,CACF,CAAA,QACC,KAAG,CAAA,UAAU,6DACZ,SAACiE,EAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,KAAK,KACL,QAAQ,UACR,QAASmkB,EACT,MAAM,eAEN,SAAA5tB,EAAAA,IAACgN,GAAI,CAAA,UAAU,SAAU,CAAA,CAAA,CAC3B,EACC7J,EAAG,SAAW,UACbiE,EAAA,KAAC,SAAA,CACC,MAAOjE,EAAG,OACV,SAAWzlB,GAAM6uC,EAAeppB,EAAG,IAAKzlB,EAAE,OAAO,KAAK,EACtD,UAAU,mDAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAK,QAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAO,UAAA,EAC/BA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAQ,WAAA,EAC/BA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAK,QAAA,CAAA,CAAA,CAC9B,EAEFA,EAAA,IAACyJ,EAAA,CACC,KAAK,KACL,QAAQ,SACR,QAAS,IAAM+e,EAASrlB,CAAE,EAC1B,MAAM,kBAEN,SAAAnD,EAAAA,IAACoR,GAAO,CAAA,UAAU,SAAU,CAAA,CAAA,CAC9B,CAAA,CAAA,CACF,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,EAGM8W,GAAW,CAAC,CAAE,MAAAxW,EAAO,MAAAxtB,EAAO,KAAM8sB,EAAM,MAAAiY,KAAY,CACxD,MAAMC,EAAe,CACnB,KAAM,yBACN,MAAO,0BACP,OAAQ,2BACR,OAAQ,0BAAA,EAGV,aACGvF,GAAK,CAAA,UAAU,MACd,SAACvc,EAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAqC,SAAM0R,EAAA,EACvD1R,EAAA,IAAA,IAAA,CAAE,UAAU,wCAAyC,SAAM9b,EAAA,CAAA,EAC9D,EACC8b,EAAA,IAAA,MAAA,CAAI,UAAW,wBAAwBkpB,EAAaD,CAAK,CAAC,oCACzD,SAACjpB,EAAAA,IAAAgR,EAAA,CAAK,UAAU,SAAU,CAAA,EAC5B,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EAGM2c,GAAiB,CAAC,CAAE,GAAAxqB,EAAI,QAAAsO,KAAc,WAEpC,MAAAiI,EAAcC,GAAe,CAC7B,GAAA,CACF,OAAKA,EACQ,IAAI,KAAKA,CAAU,EACpB,eAAe,OAAO,EAFV,2BAGV,CACP,MAAA,eACT,CAAA,EAIIkU,EAAY1qB,GACTA,EAAG,OAASA,EAAG,gBAAkB,EAIxC,OAAAiE,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,gBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAAApH,MAAC,KAAG,CAAA,UAAU,wBAAyB,SAAAmD,EAAG,OAAS,wBAAwB,EAC3EnD,EAAAA,IAAC4N,EAAM,CAAA,QAASkD,GAAe3N,EAAG,MAAM,EACrC,SAAAqjB,GAAcrjB,EAAG,MAAM,CAC1B,CAAA,CAAA,EACF,EACAiE,EAAAA,KAAC,IAAE,CAAA,UAAU,gBAAgB,SAAA,CAAA,aAChBsS,EAAWvW,EAAG,UAAU,CAAA,EACrC,CAAA,EACF,EAGAiE,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAsB,yBAAA,EACrEoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAAA,OAAC,IAAE,CAAA,SAAA,CAAApH,EAAAA,IAAC,UAAO,SAAM,QAAA,CAAA,EAAS,OAAK6tB,EAAS1qB,CAAE,EAAE,QAAQ,CAAC,CAAA,EAAE,SACtD,IAAE,CAAA,SAAA,CAAAnD,EAAAA,IAAC,UAAO,SAAK,OAAA,CAAA,EAAS,MAAE7C,EAAAgG,EAAG,OAAH,YAAAhG,EAAS,OAAQ,KAAA,EAAM,SACjD,IAAE,CAAA,SAAA,CAAA6C,EAAAA,IAAC,UAAO,SAAW,aAAA,CAAA,EAAS,IAAEmD,EAAG,UAAY,KAAA,EAAM,SACrD,IAAE,CAAA,SAAA,CAAAnD,EAAAA,IAAC,UAAO,SAAK,OAAA,CAAA,EAAS,IAAEmD,EAAG,SAAW,KAAA,EAAM,SAC9C,IAAE,CAAA,SAAA,CAAAnD,EAAAA,IAAC,UAAO,SAAS,WAAA,CAAA,EAAS,IAAEmD,EAAG,WAAa,KAAA,EAAM,SACpD,IAAE,CAAA,SAAA,CAAAnD,EAAAA,IAAC,UAAO,SAAG,KAAA,CAAA,EAAS,IAAEmD,EAAG,GAAA,EAAI,CAAA,EAClC,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACnD,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAQ,WAAA,EACvDoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAAAA,OAAC,IAAE,CAAA,SAAA,CAAApH,EAAAA,IAAC,UAAO,SAAS,WAAA,CAAA,EAAS,MAAEzC,EAAA4F,EAAG,SAAH,YAAA5F,EAAW,WAAY,KAAA,EAAM,SAC3D,IAAE,CAAA,SAAA,CAAAyC,EAAAA,IAAC,UAAO,SAAM,QAAA,CAAA,EAAS,MAAEvC,EAAA0F,EAAG,SAAH,YAAA1F,EAAW,QAAS,KAAA,EAAM,SACrD,IAAE,CAAA,SAAA,CAAAuC,EAAAA,IAAC,UAAO,SAAG,KAAA,CAAA,EAAS,IAAEmD,EAAG,SAAA,EAAU,CAAA,EACxC,CAAA,EACF,CAAA,EACF,SAGC,MACC,CAAA,SAAA,CAACnD,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAS,YAAA,EACxDA,EAAA,IAAC,MAAI,CAAA,UAAU,4BACb,SAAAA,EAAAA,IAAC,IAAE,CAAA,UAAU,UAAW,SAAAmD,EAAG,aAAe,eAAgB,CAAA,EAC5D,CAAA,EACF,EAGCA,EAAG,QAAUA,EAAG,OAAO,OAAS,UAC9B,MACC,CAAA,SAAA,CAACnD,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAO,UAAA,EACtDA,EAAAA,IAAC,OAAI,UAAU,wCACZ,WAAG,OAAO,IAAI,CAAC8tB,EAAOpmC,IACrBsY,EAAA,IAAC,MAAA,CAEC,IAAK8tB,EACL,IAAK,GAAG3qB,EAAG,KAAK,IAAIzb,EAAQ,CAAC,GAC7B,UAAU,qCAAA,EAHLA,CAKR,CAAA,EACH,CAAA,EACF,EAIFsY,EAAA,IAAC,MAAI,CAAA,UAAU,iCACb,SAAAA,EAAAA,IAACyJ,EAAO,CAAA,QAASgI,EAAS,QAAQ,UAAU,SAAA,QAE5C,CAAA,EACF,CACF,CAAA,CAAA,CAEJ,EAGMX,GAAkB7lB,IACP,CACb,OAAQ,UACR,SAAU,UACV,QAAS,UACT,OAAQ,QAAA,GAEIA,CAAM,GAAK,UAGrBu7B,GAAiBv7B,IACP,CACZ,OAAQ,QACR,SAAU,UACV,QAAS,WACT,OAAQ,QAAA,GAEGA,CAAM,GAAKA,EC/gBpB8iC,GAAY,IAAM,CACtB,KAAM,CAACC,EAAMC,CAAO,EAAIjvB,EAAA,SAAS,CAAE,CAAA,EAC7B,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAAColB,EAAamD,CAAc,EAAIvoB,WAAS,CAAC,EAC1C,CAACqlB,EAAYmD,CAAa,EAAIxoB,WAAS,CAAC,EAExCxC,EAAMwH,KAEZtE,EAAAA,UAAU,IAAM,CACAwuB,GAAA,EACb,CAAC9J,CAAW,CAAC,EAEhB,MAAM8J,EAAgB,SAAY,CAChChvB,EAAW,EAAI,EACX,GAAA,CACF,MAAMhZ,EAAW,MAAMsW,EAAI,IAAI,4BAA6B,CAC1D,OAAQ,CACN,KAAM4nB,EACN,MAAO,EACT,CAAA,CACD,EACD6J,EAAQ/nC,EAAS,KAAK,MAAQ,CAAE,CAAA,EAChCshC,EAAc,KAAK,MAAMthC,EAAS,KAAK,OAAS,GAAK,EAAE,CAAC,QACjDE,EAAO,CACN,QAAA,MAAM,yBAA0BA,CAAK,EAC7C6nC,EAAQ,CAAE,CAAA,CAAA,QACV,CACA/uB,EAAW,EAAK,CAClB,CAAA,EAGIivB,EAAiBC,GAAW,CAO1B,MAAApd,EANQ,CACZ,OAAQhE,GACR,OAAQ2S,GACR,OAAQF,GACR,KAAMgM,EAAA,EAEW2C,CAAM,GAAK3C,GACvB,OAAAzrB,EAAA,IAACgR,EAAK,CAAA,UAAU,SAAU,CAAA,CAAA,EAG7Bqd,EAAkBD,IACP,CACb,OAAQ,UACR,OAAQ,UACR,OAAQ,SACR,KAAM,SAAA,GAEMA,CAAM,GAAK,YAG3B,OAAInvB,QACMyJ,EAAe,CAAA,CAAA,EAIvBtB,EAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAU,qEACb,SAAAoH,EAAA,KAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAAiB,oBAAA,EACpEA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAqD,wDAAA,CAAA,CAAA,CACpF,CACF,CAAA,EAECguB,EAAK,SAAW,EACd5mB,EAAA,KAAAuc,GAAA,CAAK,UAAU,kBACd,SAAA,CAAC3jB,EAAAA,IAAAyrB,GAAA,CAAS,UAAU,sCAAuC,CAAA,EAC1DzrB,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAAqB,wBAAA,EAC3EA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAAmC,sCAAA,CAAA,CAClE,CAAA,EAEAA,EAAAA,IAAC2jB,GAAK,CAAA,UAAU,kBACd,SAAA3jB,MAAC,MAAI,CAAA,UAAU,kBACb,SAAAoH,EAAA,KAAC,QAAM,CAAA,UAAU,sCACf,SAAA,CAAApH,MAAC,QAAM,CAAA,UAAU,aACf,SAAAoH,EAAA,KAAC,KACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,OAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,UAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,YAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,CAAA,CAAA,CACF,CACF,CAAA,EACAA,EAAA,IAAC,QAAM,CAAA,UAAU,oCACd,SAAAguB,EAAK,IAAKM,GACTlnB,EAAA,KAAC,KAAiB,CAAA,UAAU,mBAC1B,SAAA,CAAApH,EAAAA,IAAC,MAAG,UAAU,8BACZ,eAAC,MAAI,CAAA,UAAU,oBACb,SAACA,EAAA,IAAA,MAAA,CAAI,UAAU,gBACb,SAAAoH,OAACwG,GAAM,QAASygB,EAAeC,EAAI,MAAM,EAAG,UAAU,0BACnD,SAAA,CAAAH,EAAcG,EAAI,MAAM,EACxBA,EAAI,MAAA,EACP,CAAA,CACF,CACF,CAAA,EACF,EACAlnB,EAAAA,KAAC,KAAG,CAAA,UAAU,8BACZ,SAAA,CAAApH,EAAA,IAAC,MAAI,CAAA,UAAU,wBAAyB,SAAAsuB,EAAI,cAAc,EACzDA,EAAI,aACFlnB,OAAA,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,OAAKknB,EAAI,YAAY,MAAM,EAAE,CAAA,EAAE,CAAA,EAE1E,QACC,KAAG,CAAA,UAAU,8BACZ,SAAClnB,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA6H,EAAA,CAAK,UAAU,4BAA6B,CAAA,QAC5C,MAAI,CAAA,UAAU,wBAAyB,SAAAymB,EAAI,gBAAkB,UAAU,CAAA,CAAA,CAC1E,CACF,CAAA,QACC,KAAG,CAAA,UAAU,8BACZ,SAAClnB,EAAA,KAAA,MAAA,CAAI,UAAU,0CACb,SAAA,CAACpH,EAAAA,IAAAgP,GAAA,CAAM,UAAU,cAAe,CAAA,EAC/B,IAAI,KAAKsf,EAAI,SAAS,EAAE,eAAe,CAAA,CAAA,CAC1C,CACF,CAAA,EACCtuB,MAAA,KAAA,CAAG,UAAU,8BACZ,eAAC4N,EAAM,CAAA,QAAS0gB,EAAI,QAAU,UAAY,SACvC,SAAAA,EAAI,QAAU,UAAY,OAC7B,CAAA,EACF,CAjCO,CAAA,EAAAA,EAAI,GAkCb,CACD,EACH,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGDjK,EAAa,GACZrkB,EAAA,IAACmkB,GAAA,CACC,YAAAC,EACA,WAAAC,EACA,aAAckD,CAAA,CAChB,CAEJ,CAAA,CAAA,CAEJ,ECjJMgH,GAAoB,IAAM,CAC9B,KAAM,CAACC,EAASC,CAAU,EAAIzvB,EAAA,SAAS,CAAE,CAAA,EACnC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAAC7c,EAAQ8rB,CAAS,EAAIjP,WAAS,KAAK,EACpC,CAAC0vB,EAAgBC,CAAiB,EAAI3vB,WAAS,IAAI,EACnD,CAACioB,EAAWC,CAAY,EAAIloB,WAAS,EAAK,EAC1C,CAAC4vB,EAAeC,CAAgB,EAAI7vB,EAAA,SAAS,CAAE,CAAA,EAErDU,EAAAA,UAAU,IAAM,CACFovB,GAAA,EACX,CAAC3sC,CAAM,CAAC,EAEX,MAAM2sC,EAAc,SAAY,CAC9B5vB,EAAW,EAAI,EAEX,GAAA,CAEF,MAAM6vB,EAAc,CAClB,CACE,IAAK,IACL,SAAU,CACR,SAAU,UACV,WAAY,OACZ,UAAW,OACb,EACA,iBAAkB,SAClB,mBAAoB,KACpB,OAAQ,OACR,QAAS,qEACT,OAAQ,UACR,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAc,EAAE,YAAY,EAC9D,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAc,EAAE,YAAY,CAChE,EACA,CACE,IAAK,IACL,SAAU,CACR,SAAU,WACV,WAAY,QACZ,UAAW,QACb,EACA,iBAAkB,SAClB,mBAAoB,KACpB,OAAQ,OACR,QAAS,uDACT,OAAQ,WACR,YAAa,qCACb,YAAa,QACb,YAAa,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAc,EAAE,YAAY,EAC/D,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAe,EAAE,YAAY,EAC/D,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAc,EAAE,YAAY,CAChE,EACA,CACE,IAAK,IACL,SAAU,CACR,SAAU,WACV,WAAY,QACZ,UAAW,OACb,EACA,iBAAkB,WAClB,mBAAoB,OACpB,OAAQ,gBACR,QAAS,4CACT,OAAQ,WACR,YAAa,qDACb,YAAa,QACb,YAAa,IAAI,KAAK,KAAK,IAAQ,EAAA,IAAU,EAAE,YAAY,EAC3D,WAAY,IAAI,KAAK,KAAK,IAAA,EAAQ,MAAe,EAAE,YAAY,EAC/D,WAAY,IAAI,KAAK,KAAK,IAAQ,EAAA,IAAU,EAAE,YAAY,CAC5D,CAAA,EAGFN,EAAWM,CAAW,QACf3oC,EAAO,CACN,QAAA,MAAM,4BAA6BA,CAAK,EAChD2X,EAAM,MAAM,0BAA0B,CACxC,CAEAmB,EAAW,EAAK,CAAA,EAGZwP,EAAc5e,GACL,IAAI,KAAKA,CAAS,EACnB,eAAe,OAAO,EAG9Bk/B,EAAkBl6B,IACN,CACd,KAAM,OACN,KAAM,gBACN,cAAe,wBACf,KAAM,qBACN,eAAgB,sBAChB,MAAO,cAAA,GAEMA,CAAM,GAAKA,EAGtBgc,EAAkB7lB,GAAW,CACjC,OAAQA,EAAQ,CACd,IAAK,UAAkB,MAAA,UACvB,IAAK,WAAmB,MAAA,UACxB,IAAK,WAAmB,MAAA,UACxB,IAAK,YAAoB,MAAA,YACzB,QAAgB,MAAA,SAClB,CAAA,EAGIk1B,EAAkBl1B,GAAW,CACjC,OAAQA,EAAQ,CACd,IAAK,UAAkB,MAAA,WACvB,IAAK,WAAmB,MAAA,YACxB,IAAK,WAAmB,MAAA,YACxB,IAAK,YAAoB,MAAA,aACzB,QAAgB,OAAAA,CAClB,CAAA,EAGIgkC,EAAqB,MAAOC,EAAU/I,EAAWgJ,EAAa,KAAO,CACxDN,EAAAzrB,IAAS,CAAE,GAAGA,EAAM,CAAC8rB,CAAQ,EAAG,EAAO,EAAA,EAEpD,GAAA,CAEF,MAAM,IAAI,QAAQvgC,GAAW,WAAWA,EAAS,GAAI,CAAC,EAEtD8/B,KACErrB,EAAK,IAAIgsB,GACPA,EAAO,MAAQF,EACX,CACE,GAAGE,EACH,OAAQjJ,EACR,YAAagJ,EACb,YAAa,QACb,YAAa,IAAI,KAAK,EAAE,YAAY,EACpC,WAAY,IAAI,KAAK,EAAE,YAAY,CAAA,EAErCC,CACN,CAAA,EAGFrxB,EAAM,QAAQ,UAAUoiB,EAAegG,CAAS,EAAE,aAAa,EAAE,EACjEe,EAAa,EAAK,EAClByH,EAAkB,IAAI,OACR,CACd5wB,EAAM,MAAM,oCAAoC,CAClD,CAEiB8wB,EAAAzrB,IAAS,CAAE,GAAGA,EAAM,CAAC8rB,CAAQ,EAAG,EAAQ,EAAA,CAAA,EAGrDG,EAAmBD,GAAW,CAClCT,EAAkBS,CAAM,EACxBlI,EAAa,EAAI,CAAA,EAGboI,EAAkBd,EAAQ,OAAiBY,GAC3CjtC,IAAW,MAAc,GACtBitC,EAAO,SAAWjtC,CAC1B,EAYK0sB,GAVkB,KACf,CACL,IAAK2f,EAAQ,OACb,QAASA,EAAQ,UAAYllB,EAAE,SAAW,SAAS,EAAE,OACrD,SAAUklB,EAAQ,UAAYllB,EAAE,SAAW,UAAU,EAAE,OACvD,SAAUklB,EAAQ,UAAYllB,EAAE,SAAW,UAAU,EAAE,OACvD,UAAWklB,EAAQ,UAAYllB,EAAE,SAAW,WAAW,EAAE,MAAA,MAM7D,OAAIrK,EAEAe,EAAA,IAAC,OAAI,UAAU,yCACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAKFtB,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,oCACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACpH,EAAAA,IAAAuc,GAAA,CAAK,UAAU,sBAAuB,CAAA,SACtC,MACC,CAAA,SAAA,CAACvc,EAAA,IAAA,KAAA,CAAG,UAAU,mCAAmC,SAEjD,oBAAA,EACAoH,EAAAA,KAAC,IAAE,CAAA,UAAU,gBACV,SAAA,CAAOyH,EAAA,QAAQ,YAAUA,EAAO,UAAY,EAAI,IAAM,GAAG,OAAKA,EAAO,IAAI,QAAA,EAC5E,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EAGA7O,EAAAA,IAAC,MAAI,CAAA,UAAU,uBACZ,SAAA,CACC,CAAE,IAAK,MAAO,MAAO,QAAS,MAAO6O,EAAO,GAAI,EAChD,CAAE,IAAK,UAAW,MAAO,YAAa,MAAOA,EAAO,OAAQ,EAC5D,CAAE,IAAK,WAAY,MAAO,aAAc,MAAOA,EAAO,QAAS,EAC/D,CAAE,IAAK,WAAY,MAAO,aAAc,MAAOA,EAAO,QAAS,EAC/D,CAAE,IAAK,YAAa,MAAO,cAAe,MAAOA,EAAO,SAAU,CAAA,EAClE,IACAE,GAAA3H,EAAA,KAAC,SAAA,CAEC,QAAS,IAAM6G,EAAUc,EAAa,GAAG,EACzC,UAAW,8DACT5sB,IAAW4sB,EAAa,IACpB,yBACA,gEACN,GAEC,SAAA,CAAaA,EAAA,MAAM,KAAGA,EAAa,MAAM,GAAA,CAAA,EARrCA,EAAa,GAUrB,CAAA,EACH,EAGC/O,MAAA,MAAA,CAAI,UAAU,6CACZ,WAAgB,OAAS,EACvBA,EAAA,IAAA,MAAA,CAAI,UAAU,kBACb,SAACoH,EAAAA,KAAA,QAAA,CAAM,UAAU,sCACf,SAAA,CAAApH,MAAC,QAAM,CAAA,UAAU,aACf,SAAAoH,EAAA,KAAC,KACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,WAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,iBAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,SAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,OAAA,EACCA,EAAA,IAAA,KAAA,CAAG,UAAU,iFAAiF,SAE/F,QAAA,CAAA,CAAA,CACF,CACF,CAAA,EACAA,EAAA,IAAC,QAAM,CAAA,UAAU,oCACd,SAAAsvB,EAAgB,IAAKF,GACpBhoB,EAAA,KAAC,KAAoB,CAAA,UAAU,mBAC7B,SAAA,CAAApH,MAAC,KAAG,CAAA,UAAU,8BACZ,SAAAoH,EAAA,KAAC,MACC,CAAA,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACZ,SAAA,CAAAgoB,EAAO,SAAS,WAAW,IAAEA,EAAO,SAAS,SAAA,EAChD,EACAhoB,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,IACnCgoB,EAAO,SAAS,QAAA,EACpB,CAAA,CAAA,CACF,CACF,CAAA,EACAhoB,EAAAA,KAAC,KAAG,CAAA,UAAU,8BACZ,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,wBACZ,WAAO,qBAAuB,KAAO,UAAY,SACpD,CAAA,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,OAChCgoB,EAAO,gBAAA,EACd,CAAA,EACF,EACCpvB,EAAA,IAAA,KAAA,CAAG,UAAU,8BACZ,SAACA,EAAAA,IAAA,MAAA,CAAI,UAAU,wBACZ,SAAegvB,EAAAI,EAAO,MAAM,CAC/B,CAAA,EACF,EACCpvB,MAAA,KAAA,CAAG,UAAU,8BACZ,eAAC4N,EAAM,CAAA,QAASkD,EAAese,EAAO,MAAM,EACzC,SAAAjP,EAAeiP,EAAO,MAAM,CAC/B,CAAA,EACF,QACC,KAAG,CAAA,UAAU,oDACX,SAAW1gB,EAAA0gB,EAAO,UAAU,EAC/B,EACAhoB,EAAAA,KAAC,KAAG,CAAA,UAAU,kDACZ,SAAA,CAAApH,EAAA,IAAC,SAAA,CACC,QAAS,IAAMqvB,EAAgBD,CAAM,EACrC,UAAU,yCAEV,SAAApvB,EAAAA,IAACgN,GAAI,CAAA,UAAU,SAAU,CAAA,CAAA,CAC3B,EACCoiB,EAAO,SAAW,WAChBhoB,EAAA,KAAA,MAAA,CAAI,UAAU,iBACb,SAAA,CAAApH,EAAA,IAAC,SAAA,CACC,QAAS,IAAMivB,EAAmBG,EAAO,IAAK,UAAU,EACxD,SAAUR,EAAcQ,EAAO,GAAG,EAClC,UAAU,sCACV,MAAM,WAEN,SAAApvB,EAAAA,IAACgX,GAAM,CAAA,UAAU,SAAU,CAAA,CAAA,CAC7B,EACAhX,EAAA,IAAC,SAAA,CACC,QAAS,IAAMivB,EAAmBG,EAAO,IAAK,WAAW,EACzD,SAAUR,EAAcQ,EAAO,GAAG,EAClC,UAAU,kCACV,MAAM,YAEN,SAAApvB,EAAAA,IAACoI,GAAE,CAAA,UAAU,SAAU,CAAA,CAAA,CACzB,CAAA,EACF,CAAA,EAEJ,CA3DO,CAAA,EAAAgnB,EAAO,GA4DhB,CACD,EACH,CAAA,CACF,CAAA,CACF,CAAA,EAEChoB,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAuc,GAAA,CAAK,UAAU,sCAAuC,CAAA,EACtDvc,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,2BAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBACV,SAAW7d,IAAA,MACR,oCACA,iBAAiBg+B,EAAeh+B,CAAM,EAAE,YAAA,CAAa,GAE3D,CAAA,CAAA,CACF,CAEJ,CAAA,EAGC8kC,GAAayH,GACX1uB,EAAAA,IAAA,MAAA,CAAI,UAAU,iFACb,SAACA,MAAA,MAAA,CAAI,UAAU,oEACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,MACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAEpD,qBAAA,EACAA,EAAA,IAAC,SAAA,CACC,QAAS,IAAMknB,EAAa,EAAK,EACjC,UAAU,sDACX,SAAA,GAAA,CAED,CAAA,EACF,EAEA9f,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,WAAA,EACAoH,EAAAA,KAAC,IAAE,CAAA,UAAU,gBACV,SAAA,CAAAsnB,EAAe,SAAS,WAAW,IAAEA,EAAe,SAAS,SAAA,EAChE,EACAtnB,EAAAA,KAAC,IAAE,CAAA,UAAU,wBAAwB,SAAA,CAAA,IACjCsnB,EAAe,SAAS,QAAA,EAC5B,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAAC1uB,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,SAAA,EACAA,EAAAA,IAAC4N,EAAM,CAAA,QAASkD,EAAe4d,EAAe,MAAM,EACjD,SAAAvO,EAAeuO,EAAe,MAAM,CACvC,CAAA,CAAA,EACF,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAAC1uB,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,iBAAA,EACAoH,EAAAA,KAAC,IAAE,CAAA,UAAU,gBACV,SAAA,CAAesnB,EAAA,qBAAuB,KAAO,UAAY,UAAU,QAC9DA,EAAe,iBAAiB,GAAA,EACxC,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAAC1uB,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,SAAA,QACC,IAAE,CAAA,UAAU,gBAAiB,SAAegvB,EAAAN,EAAe,MAAM,EAAE,CAAA,EACtE,SAEC,MACC,CAAA,SAAA,CAAC1uB,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,WAAA,QACC,IAAE,CAAA,UAAU,0CACV,SAAA0uB,EAAe,SAAW,2BAC7B,CAAA,EACF,EAECA,EAAe,aACdtnB,EAAAA,KAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,iBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,0CACV,WAAe,YAClB,CAAA,EACF,EAGFoH,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,YAAA,QACC,IAAE,CAAA,UAAU,gBAAiB,SAAW0O,EAAAggB,EAAe,UAAU,EAAE,CAAA,EACtE,EAECA,EAAe,aACdtnB,EAAAA,KAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,cAAA,QACC,IAAE,CAAA,UAAU,gBAAiB,SAAW0O,EAAAggB,EAAe,WAAW,EAAE,CAAA,EACvE,CAAA,EAEJ,CAAA,EACF,EAECA,EAAe,SAAW,WACxBtnB,EAAA,KAAA,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACC,QAAS,IAAMwlB,EAAmBP,EAAe,IAAK,WAAY,qCAAqC,EACvG,SAAUE,EAAcF,EAAe,GAAG,EAC1C,UAAU,SAEV,SAAA,CAAC1uB,EAAAA,IAAAgX,GAAA,CAAM,UAAU,cAAe,CAAA,EAAE,UAAA,CAAA,CAEpC,EACA5P,EAAA,KAACqC,EAAA,CACC,QAAQ,UACR,QAAS,IAAMwlB,EAAmBP,EAAe,IAAK,YAAa,6CAA6C,EAChH,SAAUE,EAAcF,EAAe,GAAG,EAC1C,UAAU,SAEV,SAAA,CAAC1uB,EAAAA,IAAAoI,GAAA,CAAE,UAAU,cAAe,CAAA,EAAE,WAAA,CAAA,CAEhC,CAAA,EACF,CAAA,CAEJ,CAAA,CACF,CAAA,EACF,CAEJ,CAAA,CAAA,CAEJ,EChaMmnB,GAAiB,IAAM,SAC3B,KAAM,CAAClgB,EAAWC,CAAY,EAAItQ,WAAS,WAAW,EAChD,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAAC+gB,EAAOC,CAAQ,EAAIhhB,EAAA,SAAS,CAAE,CAAA,EAE/BxC,EAAMwH,KAEZtE,EAAAA,UAAU,IAAM,CACI8vB,GACpB,EAAG,CAAE,CAAA,EAEL,MAAMA,EAAoB,SAAY,CACpCtwB,EAAW,EAAI,EACX,GAAA,CACF,MAAMhZ,EAAW,MAAMsW,EAAI,IAAI,sBAAsB,EACrDwjB,EAAS95B,EAAS,IAAI,QACfE,EAAO,CACN,QAAA,MAAM,0BAA2BA,CAAK,CAAA,QAC9C,CACA8Y,EAAW,EAAK,CAClB,CAAA,EAGI+Q,EAAO,CACX,CACE,GAAI,YACJ,MAAO,YACP,KAAMlI,GACN,YAAa,wBACf,EACA,CACE,GAAI,UACJ,MAAO,UACP,KAAM6hB,GACN,YAAa,qBACb,QAAOzsB,EAAA4iB,EAAM,UAAN,YAAA5iB,EAAe,OAAQ,CAChC,EACA,CACE,GAAI,QACJ,MAAO,QACP,KAAM+K,GACN,YAAa,iBACf,EACA,CACE,GAAI,QACJ,MAAO,WACP,KAAMkI,GACN,YAAa,oBACf,EACA,CACE,GAAI,MACJ,MAAO,WACP,KAAMqd,GACN,YAAa,oBACf,EACA,CACE,GAAI,SACJ,MAAO,UACP,KAAMzlB,GACN,YAAa,mBACf,EACA,CACE,GAAI,QACJ,MAAO,YACP,KAAMyjB,GACN,YAAa,iBACf,EACA,CACE,GAAI,UACJ,MAAO,UACP,KAAMhM,GACN,YAAa,gCACb,QAAOliB,EAAAwiB,EAAM,UAAN,YAAAxiB,EAAe,UAAW,CACnC,CAAA,EAGF,OAAI0B,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,EAKFtB,EAAA,KAAC,MAAI,CAAA,UAAU,0BAEb,SAAA,CAACpH,EAAA,IAAA,MAAA,CAAI,UAAU,8BACb,SAACA,EAAA,IAAA,MAAA,CAAI,UAAU,YACb,SAAAoH,OAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,mCAAmC,SAEjD,wBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAElC,kCAAA,CAAA,EACF,EACAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACC,QAAS+lB,EACT,QAAQ,UACR,KAAK,KACL,UAAU,0BAEV,SAAA,CAACxvB,EAAAA,IAAA6Z,GAAA,CAAU,UAAU,SAAU,CAAA,EAAE,WAAA,CAAA,CAEnC,QACCjM,EAAM,CAAA,QAAQ,UAAU,UAAU,YAAY,SAE/C,iBAAA,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,EACF,EAGC5N,MAAA,MAAA,CAAI,UAAU,oBACb,eAAC,MAAI,CAAA,UAAU,OACb,SAAAA,EAAA,IAAC,OAAI,UAAU,iCACZ,SAAKiQ,EAAA,IAAKI,GAAQ,CACjB,MAAMW,EAAOX,EAAI,KAEf,OAAAjJ,EAAA,KAAC,SAAA,CAEC,QAAS,IAAMkI,EAAae,EAAI,EAAE,EAClC,UAAW,qGACThB,IAAcgB,EAAI,GACd,2CACA,4EACN,GAEA,SAAA,CAACrQ,EAAAA,IAAAgR,EAAA,CAAK,UAAU,SAAU,CAAA,EACzBhR,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAiB,WAAI,MAAM,EAC1CqQ,EAAI,MAAQ,GACVrQ,EAAA,IAAA4N,EAAA,CAAM,QAAQ,SAAS,KAAK,KAC1B,SAAAyC,EAAI,KACP,CAAA,CAAA,CAAA,EAbGA,EAAI,EAAA,CAeX,CAEH,CACH,CAAA,CACF,CAAA,EACF,EAGAjJ,EAAAA,KAAC,MAAI,CAAA,UAAU,MACZ,SAAA,CAAAiI,IAAc,aAAerP,EAAA,IAACyvB,GAAa,CAAA,MAAA1P,EAAc,aAAAzQ,EAA4B,EACrFD,IAAc,WAAarP,MAAC0vB,GAAW,CAAA,CAAA,EACvCrgB,IAAc,SAAWrP,MAAC2vB,GAAS,CAAA,CAAA,EACnCtgB,IAAc,SAAWrP,MAAC4vB,GAAS,CAAA,CAAA,EACnCvgB,IAAc,OAASrP,MAAC6vB,GAAO,CAAA,CAAA,EAC/BxgB,IAAc,UAAYrP,MAAC8vB,GAAU,CAAA,CAAA,EACrCzgB,IAAc,SAAWrP,MAAC+vB,GAAS,CAAA,CAAA,EACnC1gB,IAAc,WAAarP,MAACgwB,GAAW,CAAA,CAAA,CAAA,EAC1C,CACF,CAAA,CAAA,CAEJ,EAGMP,GAAe,CAAC,CAAE,MAAA1P,EAAO,aAAAzQ,KAAmB,yBAE9C,OAAAlI,EAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,uDACb,SAAA,CAAApH,EAAA,IAACkoB,GAAA,CACC,MAAM,oBACN,QAAO/qB,EAAA4iB,EAAM,QAAN,YAAA5iB,EAAa,QAAS,EAC7B,KAAMiT,GACN,MAAM,OACN,SAAU,KAAG7S,EAAAwiB,EAAM,QAAN,YAAAxiB,EAAa,SAAU,CAAC,SAAA,CACvC,EACAyC,EAAA,IAACkoB,GAAA,CACC,MAAM,kBACN,QAAOzqB,EAAAsiB,EAAM,UAAN,YAAAtiB,EAAe,OAAQ,EAC9B,KAAMgiB,GACN,MAAM,MACN,SAAU,KAAGjiB,EAAAuiB,EAAM,UAAN,YAAAviB,EAAe,QAAS,CAAC,QAAA,CACxC,EACAwC,EAAA,IAACkoB,GAAA,CACC,MAAM,mBACN,QAAOvqB,EAAAoiB,EAAM,SAAN,YAAApiB,EAAc,QAAS,EAC9B,KAAMqK,GACN,MAAM,QACN,SAAU,KAAGpK,EAAAmiB,EAAM,SAAN,YAAAniB,EAAc,YAAa,CAAC,YAAA,CAC3C,EACAoC,EAAA,IAACkoB,GAAA,CACC,MAAM,gBACN,MAAO,SAAOpqB,EAAAiiB,EAAM,UAAN,YAAAjiB,EAAe,QAAS,GAAG,QAAQ,CAAC,CAAC,GACnD,KAAMuL,GACN,MAAM,SACN,SAAU,KAAGzH,EAAAme,EAAM,SAAN,YAAAne,EAAc,YAAa,CAAC,SAAA,CAC3C,CAAA,EACF,EAGAwF,EAAAA,KAACuc,GAAK,CAAA,UAAU,MACd,SAAA,CAAC3jB,EAAA,IAAA,KAAA,CAAG,UAAU,6BAA6B,SAAa,gBAAA,EACxDoH,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAAApH,EAAA,IAACiwB,GAAA,CACC,MAAM,YACN,YAAY,8BACZ,KAAMxoB,GACN,MAAM,OACN,QAAS,IAAM6H,EAAa,OAAO,CAAA,CACrC,EACAtP,EAAA,IAACiwB,GAAA,CACC,MAAM,oBACN,YAAY,8BACZ,KAAMrG,GACN,MAAM,SACN,QAAS,IAAM,OAAO,SAAS,KAAO,gBAAA,CACxC,EACA5pB,EAAA,IAACiwB,GAAA,CACC,MAAM,cACN,YAAY,6BACZ,KAAMloB,GACN,MAAM,QACN,QAAS,IAAMuH,EAAa,QAAQ,CAAA,CACtC,CAAA,EACF,CAAA,EACF,EAGAlI,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAACA,EAAAA,KAAAuc,GAAA,CAAK,UAAU,MACd,SAAA,CAAC3jB,EAAA,IAAA,KAAA,CAAG,UAAU,6BAA6B,SAAiB,oBAAA,EAC3DA,EAAA,IAAA,MAAA,CAAI,UAAU,YACZ,iBAAM,wBAAS,uBAAQ,IAAI,CAAC0pB,EAAQhiC,IAClC0f,EAAA,KAAA,MAAA,CAAgB,UAAU,oDACzB,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,oEACb,eAAC4pB,GAAc,CAAA,UAAU,wBAAwB,CACnD,CAAA,EACAxiB,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAAApH,EAAA,IAAC,IAAE,CAAA,UAAU,sBAAuB,SAAA0pB,EAAO,QAAQ,EACnD1pB,EAAAA,IAAC,IAAE,CAAA,UAAU,wBACV,SAAA,IAAI,KAAK0pB,EAAO,UAAU,EAAE,eAC/B,CAAA,CAAA,CAAA,EACF,EACA1pB,EAAAA,IAAC4N,GAAM,QAAS8b,EAAO,SAAW,OAAS,SAAW,UACnD,SAAAA,EAAO,MACV,CAAA,CAAA,GAZQhiC,CAaV,GAEJ,CAAA,EACF,EAEA0f,EAAAA,KAACuc,GAAK,CAAA,UAAU,MACd,SAAA,CAAC3jB,EAAA,IAAA,KAAA,CAAG,UAAU,6BAA6B,SAAiB,oBAAA,EAC5DoH,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAApH,EAAA,IAACkwB,GAAa,CAAA,MAAM,cAAc,OAAO,SAAS,EACjDlwB,EAAA,IAAAkwB,GAAA,CAAa,MAAM,gBAAgB,OAAO,SAAS,EACnDlwB,EAAA,IAAAkwB,GAAA,CAAa,MAAM,UAAU,OAAO,SAAS,EAC7ClwB,EAAA,IAAAkwB,GAAA,CAAa,MAAM,QAAQ,OAAO,UAAU,CAAA,EAC/C,CAAA,EACF,CAAA,EACF,CACF,CAAA,CAAA,CAEJ,EAGMhI,GAAW,CAAC,CAAE,MAAAxW,EAAO,MAAAxtB,EAAO,KAAM8sB,EAAM,MAAAiY,EAAO,MAAAkH,EAAO,SAAAC,KAAe,CACzE,MAAMlH,EAAe,CACnB,KAAM,yBACN,IAAK,wBACL,MAAO,0BACP,OAAQ,0BAAA,EAGV,aACGvF,GAAK,CAAA,UAAU,MACd,SAACvc,EAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,IAAA,CAAE,UAAU,oCAAqC,SAAM0R,EAAA,EACvD1R,EAAA,IAAA,IAAA,CAAE,UAAU,wCAAyC,SAAM9b,EAAA,EAC3DksC,GACCpwB,EAAA,IAAC,IAAE,CAAA,UAAU,6BACV,SACHowB,EAAA,EAEDD,GACE/oB,EAAAA,KAAA,IAAA,CAAE,UAAW,gBAAgB+oB,EAAM,WAAW,GAAG,EAAI,iBAAmB,cAAc,GACpF,SAAA,CAAAA,EAAM,kBAAA,EACT,CAAA,EAEJ,EACCnwB,EAAA,IAAA,MAAA,CAAI,UAAW,wBAAwBkpB,EAAaD,CAAK,CAAC,oCACzD,SAACjpB,EAAAA,IAAAgR,EAAA,CAAK,UAAU,SAAU,CAAA,EAC5B,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EAEMif,GAAkB,CAAC,CAAE,MAAAve,EAAO,YAAAkL,EAAa,KAAM5L,EAAM,MAAAiY,EAAO,QAAAoH,KAAc,CAC9E,MAAMnH,EAAe,CACnB,KAAM,4BACN,OAAQ,gCACR,MAAO,6BAAA,EAIP,OAAAlpB,EAAA,IAAC2jB,IAAK,UAAU,uDAAuD,QAAA0M,EACrE,SAACjpB,EAAAA,KAAA,MAAA,CAAI,UAAU,0BACb,SAAA,CAACpH,EAAA,IAAA,MAAA,CAAI,UAAW,wBAAwBkpB,EAAaD,CAAK,CAAC,oCACzD,SAACjpB,EAAAA,IAAAgR,EAAA,CAAK,UAAU,SAAU,CAAA,EAC5B,SACC,MACC,CAAA,SAAA,CAAChR,EAAA,IAAA,KAAA,CAAG,UAAU,8BAA+B,SAAM0R,EAAA,EAClD1R,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAyB,SAAY4c,EAAA,CAAA,EACpD,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EAEMsT,GAAe,CAAC,CAAE,MAAAI,EAAO,OAAArlC,KAAa,CAOpC,MAAAjF,EANe,CACnB,OAAQ,CAAE,MAAO,eAAgB,KAAM,QAAS,EAChD,QAAS,CAAE,MAAO,gBAAiB,KAAM,SAAU,EACnD,QAAS,CAAE,MAAO,aAAc,KAAM,SAAU,CAAA,EAGtBiF,CAAM,EAGhC,OAAAmc,EAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,4BAA6B,SAAMswB,EAAA,EACnDlpB,EAAAA,KAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAAApH,MAAC,MAAI,CAAA,UAAW,wBAAwBha,EAAO,KAAK,GAAI,EACvDga,EAAA,IAAA,OAAA,CAAK,UAAU,wBAAyB,WAAO,KAAK,CAAA,EACvD,CACF,CAAA,CAAA,CAEJ,EAGM0vB,GAAa,IAAM1vB,EAAAA,IAACmpB,GAAkB,CAAA,CAAA,EACtCwG,GAAW,IAAM3vB,EAAAA,IAACgnB,GAAgB,CAAA,CAAA,EAClC4I,GAAW,IAAM5vB,EAAAA,IAACsqB,GAAgB,CAAA,CAAA,EAClCuF,GAAS,IAAM7vB,EAAAA,IAAC2sB,GAAc,CAAA,CAAA,EAC9BmD,GAAY,IAAM9vB,EAAAA,IAAC4rB,GAAiB,CAAA,CAAA,EACpCmE,GAAW,IAAM/vB,EAAAA,IAAC+tB,GAAU,CAAA,CAAA,EAC5BiC,GAAa,IAAMhwB,EAAAA,IAACuuB,GAAkB,EAAA,ECtWtCgC,GAAe,IAAM,eACR9rB,GAAY,EAC7B,KAAM,CAAC2kB,EAASC,CAAU,EAAIrqB,EAAA,SAAS,CAAE,CAAA,EACnC,CAAC+gB,EAAOC,CAAQ,EAAIhhB,EAAA,SAAS,CAAE,CAAA,EAC/B,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACgf,EAAUC,CAAW,EAAIjf,WAAS,EAAK,EACxC,CAACsqB,EAAgBC,CAAiB,EAAIvqB,WAAS,IAAI,EACnD,CAACwxB,EAAiBC,CAAkB,EAAIzxB,WAAS,EAAK,EACtD,CAAC0xB,EAAiBC,CAAkB,EAAI3xB,EAAAA,SAAS,IAAI,GAAK,EAC1D,CAAColB,EAAamD,CAAc,EAAIvoB,WAAS,CAAC,EAC1C,CAACqlB,EAAYmD,CAAa,EAAIxoB,WAAS,CAAC,EACxC,CAAC4xB,EAASC,CAAU,EAAI7xB,WAAS,CACrC,OAAQ,GACR,SAAU,GACV,SAAU,GACV,OAAQ,EAAA,CACT,EACK,CAAChY,EAAUgiC,CAAW,EAAIhqB,WAAS,CACvC,OAAQ,GACR,SAAU,GACV,eAAgB,EAAA,CACjB,EAEDU,EAAAA,UAAU,IAAM,CACLoxB,GAAA,EACR,CAAC1M,EAAawM,CAAO,CAAC,EAEzB,MAAME,EAAW,SAAY,CAC3B5xB,EAAW,EAAI,EACX,GAAA,CACF,MAAM,QAAQ,IAAI,CAChBsqB,EAAY,EACZuH,EAAU,CAAA,CACX,QACM3qC,EAAO,CACN,QAAA,MAAM,0BAA2BA,CAAK,EAC9C2X,EAAM,MAAM,kCAAkC,CAAA,QAC9C,CACAmB,EAAW,EAAK,CAClB,CAAA,EAGIsqB,EAAc,SAAY,OAC1B,GAAA,CACF,MAAMvhC,EAAS,CACb,KAAMm8B,EACN,MAAO,GACP,GAAG,OAAO,YAAY,OAAO,QAAQwM,CAAO,EAAE,OAAO,CAAC,CAACh6B,EAAGo6B,EAAC,IAAMA,EAAC,CAAC,CAAA,EAG7D,QAAA,IAAI,0CAA2C/oC,CAAM,EAC7D,MAAM7I,EAAS,MAAMyrB,GAAe,cAAc5iB,CAAM,EAIpD,GAFI,QAAA,IAAI,6BAA8B7I,CAAM,EAE5CA,GAAUA,EAAO,KAAM,CACzB,MAAMwY,EAAexY,EAAO,KAAK,MAAQA,EAAO,KACrCiqC,EAAAzxB,EAAa,SAAW,CAAA,CAAE,EACvB4vB,EAAA5vB,EAAa,aAAe,CAAC,EAC3C,QAAQ,IAAI,0BAAyBuF,EAAAvF,EAAa,UAAb,YAAAuF,EAAsB,SAAU,CAAC,CAAA,MAE9D,QAAA,MAAM,sCAAuC/d,CAAM,EAC3DiqC,EAAW,CAAE,CAAA,QAERjjC,EAAO,CACN,QAAA,MAAM,8BAA+BA,CAAK,EAClD2X,EAAM,MAAM,0BAA0B,EACtCsrB,EAAW,CAAE,CAAA,CACf,CAAA,EAGI0H,EAAY,SAAY,CACxB,GAAA,CACF,QAAQ,IAAI,+BAA+B,EACrC,MAAA3xC,EAAS,MAAMyrB,GAAe,gBAIhC,GAFI,QAAA,IAAI,6BAA8BzrB,CAAM,EAE5CA,GAAUA,EAAO,KAAM,CACzB,MAAM6xC,EAAY7xC,EAAO,KAAK,MAAQA,EAAO,KAC7C4gC,EAASiR,CAAS,EACV,QAAA,IAAI,sBAAuBA,CAAS,CAC9C,QACO7qC,EAAO,CACN,QAAA,MAAM,4BAA6BA,CAAK,CAElD,CAAA,EAGI8qC,EAAqB,MAAOnmB,EAAUgL,IAAe,SACzDkI,EAAY,EAAI,EACZ,GAAA,CACM,QAAA,IAAI,yBAA0BlT,EAAUgL,CAAU,EAE1D,MAAM32B,GAAS,MAAMyrB,GAAe,aAAaE,EAAUgL,CAAU,EAE7D,QAAA,IAAI,8BAA+B32B,EAAM,EAE7CA,IAAUA,GAAO,MACnB2e,EAAM,QAAQ,+BAA+B,EAC7C0yB,EAAmB,EAAK,EACxBlH,EAAkB,IAAI,EACtB,MAAMC,EAAY,GAElBzrB,EAAM,MAAM,0BAA0B,QAEjC3X,GAAO,CACN,QAAA,MAAM,8BAA+BA,EAAK,EAClD2X,EAAM,QAAMR,GAAAJ,EAAA/W,GAAM,WAAN,YAAA+W,EAAgB,OAAhB,YAAAI,EAAsB,UAAW,0BAA0B,CAAA,QACvE,CACA0gB,EAAY,EAAK,CACnB,CAAA,EAGIkT,EAAoBzH,GAAW,CACnCH,EAAkBG,CAAM,EACZV,EAAA,CACV,OAAQU,EAAO,QAAU,GACzB,SAAUA,EAAO,UAAY,GAC7B,eAAgBA,EAAO,gBAAkB,EAAA,CAC1C,EACD+G,EAAmB,EAAI,CAAA,EAGnBW,EAAsBrmB,GAAa,CACjC,MAAAsmB,EAAc,IAAI,IAAIX,CAAe,EACvCW,EAAY,IAAItmB,CAAQ,EAC1BsmB,EAAY,OAAOtmB,CAAQ,EAE3BsmB,EAAY,IAAItmB,CAAQ,EAE1B4lB,EAAmBU,CAAW,CAAA,EAG1B3iB,EAAc5e,GAAc,CAChC,GAAI,CAACA,EAAkB,MAAA,iBAEnB,GAAA,CAEK,OADM,IAAI,KAAKA,CAAS,EACnB,eAAe,QAAS,CAClC,KAAM,UACN,MAAO,UACP,IAAK,UACL,KAAM,UACN,OAAQ,SAAA,CACT,OACa,CACP,MAAA,eACT,CAAA,EAGIwhC,EAAsBxhC,GAAc,CACxC,GAAI,CAACA,EAAkB,MAAA,GAEnB,GAAA,CACI,MAAA6e,EAAO,IAAI,KAAK7e,CAAS,EAEzByhC,MADU,KACK5iB,EACf6iB,GAAY,KAAK,MAAMD,GAAU,IAAO,GAAK,GAAG,EAChDE,GAAW,KAAK,MAAMD,GAAY,EAAE,EAE1C,GAAIC,GAAW,EACb,MAAO,MAAMA,EAAQ,UACvB,GAAWD,GAAY,EACrB,MAAO,MAAMA,EAAS,WACjB,CACL,MAAME,GAAc,KAAK,MAAMH,EAAU,GAAU,EACnD,MAAO,MAAM,KAAK,IAAI,EAAGG,EAAW,CAAC,YACvC,OACc,CACP,MAAA,EACT,CAAA,EAGI5gB,EAAkB7lB,GAAW,CACjC,OAAQA,EAAQ,CACd,IAAK,OAAe,MAAA,UACpB,IAAK,cAAsB,MAAA,UAC3B,IAAK,WAAmB,MAAA,UACxB,IAAK,SAAiB,MAAA,YACtB,QAAgB,MAAA,SAClB,CAAA,EAGIk1B,EAAkBl1B,GAAW,CACjC,OAAQA,EAAQ,CACd,IAAK,OAAe,MAAA,SACpB,IAAK,cAAsB,MAAA,eAC3B,IAAK,WAAmB,MAAA,YACxB,IAAK,SAAiB,MAAA,UACtB,QAAS,OAAOA,GAAU,cAC5B,CAAA,EAGI8lB,EAAiB9lB,GAAW,CAChC,OAAQA,EAAQ,CACd,IAAK,OAAe,OAAA+U,EAAA,IAACgP,GAAM,CAAA,UAAU,SAAU,CAAA,EAC/C,IAAK,cAAsB,OAAAhP,EAAA,IAAC2xB,GAAM,CAAA,UAAU,SAAU,CAAA,EACtD,IAAK,WAAmB,OAAA3xB,EAAA,IAACiP,GAAY,CAAA,UAAU,SAAU,CAAA,EACzD,IAAK,SAAiB,OAAAjP,EAAA,IAACiR,GAAQ,CAAA,UAAU,SAAU,CAAA,EACnD,QAAgB,OAAAjR,EAAA,IAAC8Z,GAAY,CAAA,UAAU,SAAU,CAAA,CACnD,CAAA,EAGI8X,EAAoBC,GAAa,CACrC,OAAQA,EAAU,CAChB,IAAK,MAAc,MAAA,YACnB,IAAK,SAAiB,MAAA,UACtB,IAAK,OAAe,MAAA,UACpB,IAAK,SAAiB,MAAA,SACtB,QAAgB,MAAA,SAClB,CAAA,EAGIC,EAAoBD,GAAa,CACrC,OAAQA,EAAU,CAChB,IAAK,MAAc,MAAA,QACnB,IAAK,SAAiB,MAAA,QACtB,IAAK,OAAe,MAAA,OACpB,IAAK,SAAiB,MAAA,UACtB,QAAS,OAAOA,GAAY,cAC9B,CAAA,EAGIE,EAAoB5d,GAAa,CACrC,OAAQA,EAAU,CAChB,IAAK,UAAkB,MAAA,QACvB,IAAK,YAAoB,MAAA,UACzB,IAAK,UAAkB,MAAA,YACvB,IAAK,UAAkB,MAAA,QACvB,QAAS,OAAOA,GAAY,kBAC9B,CAAA,EAQF,OAAIlV,QAEC,MAAI,CAAA,UAAU,2DACb,SAACmI,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAAA,IAAA0I,EAAA,CAAe,KAAK,IAAK,CAAA,EACzB1I,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAAmC,sCAAA,CAAA,CACvE,CAAA,CACF,CAAA,QAKD,MAAI,CAAA,UAAU,+BACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,mCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACpH,EAAAA,IAAA2f,GAAA,CAAO,UAAU,uBAAwB,CAAA,SACzC,MACC,CAAA,SAAA,CAAC3f,EAAA,IAAA,KAAA,CAAG,UAAU,mCAAmC,SAEjD,oBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,2CAAA,CAAA,EACF,CAAA,EACF,EAEAoH,EAAA,KAACqC,EAAA,CACC,QAASqnB,EACT,QAAQ,UACR,SAAU7xB,EAEV,SAAA,CAAAe,MAAC6Z,IAAU,UAAW,gBAAgB5a,EAAU,eAAiB,EAAE,GAAI,EAAE,WAAA,CAAA,CAE3E,CAAA,EACF,EAGAmI,EAAAA,KAAC,MAAI,CAAA,UAAU,6CACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,oCACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,oEACb,eAAC8O,GAAc,CAAA,UAAU,wBAAwB,CACnD,CAAA,SACC,MACC,CAAA,SAAA,CAAC9O,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAAgB,mBAAA,QACpD,IAAE,CAAA,UAAU,mCAAoC,WAAM7C,GAAA4iB,EAAA,UAAA,YAAA5iB,GAAS,QAAS,EAAE,CAAA,EAC7E,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,oCACb,SAACiK,EAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,sEACb,eAACgP,GAAM,CAAA,UAAU,0BAA0B,CAC7C,CAAA,SACC,MACC,CAAA,SAAA,CAAChP,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAAe,kBAAA,QACnD,IAAE,CAAA,UAAU,qCAAsC,WAAMzC,EAAAwiB,EAAA,UAAA,YAAAxiB,EAAS,OAAQ,EAAE,CAAA,EAC9E,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,oCACb,SAAC6J,EAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,oEACb,eAAC2xB,GAAM,CAAA,UAAU,wBAAwB,CAC3C,CAAA,SACC,MACC,CAAA,SAAA,CAAC3xB,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAAY,eAAA,QAChD,IAAE,CAAA,UAAU,mCAAoC,WAAMvC,EAAAsiB,EAAA,UAAA,YAAAtiB,EAAS,cAAe,EAAE,CAAA,EACnF,CAAA,CAAA,CACF,CACF,CAAA,QAEC,MAAI,CAAA,UAAU,oCACb,SAAC2J,EAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,qEACb,eAACiP,GAAY,CAAA,UAAU,yBAAyB,CAClD,CAAA,SACC,MACC,CAAA,SAAA,CAACjP,EAAA,IAAA,IAAA,CAAE,UAAU,wBAAwB,SAAU,aAAA,EAC/CA,EAAAA,IAAC,IAAE,CAAA,UAAU,oCACV,SAAAopB,EAAQ,OAAO9Y,GAAKA,EAAE,SAAW,UAAU,EAAE,MAChD,CAAA,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,CAAA,EACF,QAGC,MAAI,CAAA,UAAU,yCACb,SAAClJ,EAAA,KAAA,MAAA,CAAI,UAAU,sBAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,2BACb,SAAA,CAACpH,EAAAA,IAAAsH,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FtH,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,oBACZ,MAAO4wB,EAAQ,OACf,SAAWlzC,GAAMmzC,EAAW,CAAE,GAAGD,EAAS,OAAQlzC,EAAE,OAAO,MAAO,EAClE,UAAU,iHAAA,CACZ,CAAA,EACF,EAGA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAAAA,EAAA,KAAC,SAAA,CACC,MAAOwpB,EAAQ,OACf,SAAWlzC,GAAMmzC,EAAW,CAAE,GAAGD,EAAS,OAAQlzC,EAAE,OAAO,MAAO,EAClE,UAAU,qGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAe,kBAAA,EAC/BA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAM,SAAA,EAC1BA,EAAA,IAAA,SAAA,CAAO,MAAM,cAAc,SAAY,eAAA,EACvCA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAS,YAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAO,UAAA,CAAA,CAAA,CAChC,EAEAoH,EAAA,KAAC,SAAA,CACC,MAAOwpB,EAAQ,SACf,SAAWlzC,GAAMmzC,EAAW,CAAE,GAAGD,EAAS,SAAUlzC,EAAE,OAAO,MAAO,EACpE,UAAU,qGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAoB,uBAAA,EACpCA,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAK,QAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAK,QAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAI,OAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAO,UAAA,CAAA,CAAA,CAChC,EAEAoH,EAAA,KAAC,SAAA,CACC,MAAOwpB,EAAQ,SACf,SAAWlzC,GAAMmzC,EAAW,CAAE,GAAGD,EAAS,SAAUlzC,EAAE,OAAO,MAAO,EACpE,UAAU,qGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,GAAG,SAAmB,sBAAA,EACnCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAK,QAAA,EAC5BA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAO,UAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAS,YAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAK,QAAA,CAAA,CAAA,CAC/B,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EAGCA,EAAA,IAAA,MAAA,CAAI,UAAU,YACZ,eAAM,QAAQopB,CAAO,GAAKA,EAAQ,OAAS,EAC1CA,EAAQ,IAAKM,UACXtiB,OAAAA,EAAA,KAAC,MAAA,CAEC,UAAU,sEAGV,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAAApH,MAAC,KAAG,CAAA,UAAU,sCACX,SAAA0pB,EAAO,SAAW,cACrB,EACAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACZ,SAAA,CAAA2J,EAAc2Y,EAAO,MAAM,EAC3B1pB,EAAAA,IAAA4N,EAAA,CAAM,QAASkD,EAAe4Y,EAAO,QAAU,MAAM,EACnD,SAAevJ,EAAAuJ,EAAO,QAAU,MAAM,CACzC,CAAA,CAAA,EACF,EACAtiB,EAAAA,KAACwG,GAAM,QAASgkB,EAAiBlI,EAAO,UAAY,QAAQ,EAAG,KAAK,KAClE,SAAA,CAAC1pB,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCqS,EAAiBpI,EAAO,UAAY,QAAQ,CAAA,EAC/C,CAAA,EACF,EAEAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,yDACb,SAAA,CAACA,EAAAA,KAAA,OAAA,CAAK,UAAU,oBACd,SAAA,CAACpH,EAAAA,IAAA6H,EAAA,CAAK,UAAU,cAAe,CAAA,IAC9B1K,EAAAusB,EAAO,OAAP,YAAAvsB,EAAa,WAAYusB,EAAO,WAAa,sBAAA,EAChD,EACAtiB,EAAAA,KAAC,OAAK,CAAA,UAAU,oBACd,SAAA,CAACpH,EAAAA,IAAAkP,GAAA,CAAS,UAAU,cAAe,CAAA,EAClCR,EAAWgb,EAAO,UAAU,EAC5BA,EAAO,YACLtiB,OAAA,OAAA,CAAK,UAAU,qBAAqB,SAAA,CAAA,IACjCkqB,EAAmB5H,EAAO,UAAU,EAAE,GAAA,EAC1C,CAAA,EAEJ,EACCA,EAAO,iBACLtiB,OAAA,OAAA,CAAK,UAAU,4CACd,SAAA,CAACpH,EAAAA,IAAAgyB,GAAA,CAAK,UAAU,cAAe,CAAA,EAC9BtI,EAAO,eAAA,EACV,EAEFtiB,EAAAA,KAAC,OAAK,CAAA,UAAU,oBACd,SAAA,CAACpH,EAAAA,IAAAiyB,GAAA,CAAS,UAAU,cAAe,CAAA,EAClCF,EAAiBrI,EAAO,UAAY,SAAS,CAAA,EAChD,CAAA,EACF,CAAA,EACF,EAEAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAM2nB,EAAmB1H,EAAO,GAAG,EAE3C,SAAgBgH,EAAA,IAAIhH,EAAO,GAAG,EAC7B1pB,EAAAA,IAAC8H,GAAY,CAAA,UAAU,SAAU,CAAA,EAEhC9H,EAAA,IAAA+kB,GAAA,CAAa,UAAU,UAAU,CAAA,CAEtC,EACA3d,EAAA,KAACqC,EAAA,CACC,KAAK,KACL,QAAS,IAAM0nB,EAAiBzH,CAAM,EAEtC,SAAA,CAAC1pB,EAAAA,IAAAgN,GAAA,CAAI,UAAU,cAAe,CAAA,EAAE,WAAA,CAAA,CAElC,CAAA,EACF,CAAA,EACF,EAGAhN,EAAA,IAAC,MAAI,CAAA,UAAU,uCACb,SAAAA,EAAAA,IAAC,IAAE,CAAA,UAAU,6BACV,SAAA0pB,EAAO,SAAW,cACrB,CAAA,EACF,EAGCgH,EAAgB,IAAIhH,EAAO,GAAG,GAC5BtiB,OAAA,MAAA,CAAI,UAAU,0BAEb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAmB,sBAAA,EAClEA,EAAA,IAAC,MAAI,CAAA,UAAU,4BACb,SAAAA,EAAAA,IAAC,IAAE,CAAA,UAAU,oCACV,SAAA0pB,EAAO,SAAW,cACrB,CAAA,EACF,CAAA,EACF,EAGCA,EAAO,gBACNtiB,EAAAA,KAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAAmB,sBAAA,EAClEoH,EAAAA,KAAC,MAAI,CAAA,UAAU,mDACb,SAAA,CAAApH,EAAA,IAAC,IAAE,CAAA,UAAU,gBAAiB,SAAA0pB,EAAO,eAAe,EACnDA,EAAO,aACLtiB,OAAA,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,iBACzBsH,EAAWgb,EAAO,WAAW,CAAA,EAC9C,CAAA,EAEJ,CAAA,EACF,EAIDA,EAAO,iBAAmBA,EAAO,gBAAgB,OAAS,UACxD,MACC,CAAA,SAAA,CAAC1pB,EAAA,IAAA,KAAA,CAAG,UAAU,iCAAiC,SAE/C,qCAAA,EACCA,EAAA,IAAA,MAAA,CAAI,UAAU,YACZ,SAAO0pB,EAAA,gBAAgB,IAAI,CAACwI,EAAMxqC,IAChC0f,OAAA,MAAA,CAAgB,UAAU,qDACzB,SAAA,CAAApH,EAAA,IAAC,IAAE,CAAA,UAAU,gBAAiB,SAAAkyB,EAAK,QAAQ,QAC1C,IAAE,CAAA,UAAU,8BACV,SAAWxjB,EAAAwjB,EAAK,UAAU,EAC7B,CAAA,GAJQxqC,CAKV,CACD,EACH,CAAA,EACF,CAAA,EAEJ,CAAA,CAAA,EA5HGgiC,EAAO,GAAA,EA+Hf,EAEAtiB,EAAA,KAAA,MAAA,CAAI,UAAU,kDACb,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,sCAAuC,CAAA,EAC/D9O,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,2BAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,4DAAA,CAAA,CAAA,CACF,CAEJ,CAAA,EAGCqkB,EAAa,GACZrkB,MAAC,MAAI,CAAA,UAAU,2BACb,SAACA,EAAAA,IAAA,MAAA,CAAI,UAAU,iBACZ,SAAM,MAAA,KAAK,CAAE,OAAQqkB,CAAA,EAAc,CAACztB,EAAGjW,IAAMA,EAAI,CAAC,EAAE,IAAKmkC,GACxD9kB,EAAA,IAAC,SAAA,CAEC,QAAS,IAAMunB,EAAezC,CAAI,EAClC,UAAW,wBACTV,IAAgBU,EACZ,yBACA,yCACN,GAEC,SAAAA,CAAA,EARIA,CAAA,CAUR,EACH,CACF,CAAA,EAID0L,GAAmBlH,GACjBtpB,EAAAA,IAAA,MAAA,CAAI,UAAU,iFACb,SAACA,MAAA,MAAA,CAAI,UAAU,oEACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,MACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAEpD,mBAAA,EACAA,EAAA,IAAC,SAAA,CACC,QAAS,IAAMywB,EAAmB,EAAK,EACvC,UAAU,sDAEV,SAAAzwB,EAAAA,IAACiR,GAAQ,CAAA,UAAU,SAAU,CAAA,CAAA,CAC/B,CAAA,EACF,EAGA7J,EAAAA,KAAC,MAAI,CAAA,UAAU,iCACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,iCAAkC,SAAAspB,EAAe,QAAQ,EACvEliB,EAAAA,KAAC,MAAI,CAAA,UAAU,iCACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAQ,WAAA,EACxCA,EAAAA,IAAC,QAAK,UAAU,mBACb,gBAAe,sBAAM,WAAYspB,EAAe,WAAa,KAChE,CAAA,CAAA,EACF,SACC,MACC,CAAA,SAAA,CAACtpB,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAU,aAAA,QACzC,OAAK,CAAA,UAAU,6BACb,SAAAspB,EAAe,iBAAmB,MACrC,CAAA,EACF,SACC,MACC,CAAA,SAAA,CAACtpB,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAU,aAAA,QACzC,OAAK,CAAA,UAAU,OAAQ,SAAW0O,EAAA4a,EAAe,UAAU,EAAE,CAAA,EAChE,SACC,MACC,CAAA,SAAA,CAACtpB,EAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAU,aAAA,QACzC,OAAK,CAAA,UAAU,OAAQ,SAAiB+xB,EAAAzI,EAAe,QAAQ,EAAE,CAAA,EACpE,CAAA,EACF,CAAA,EACF,EAGCliB,EAAAA,KAAA,OAAA,CAAK,SAAW1pB,GAAM,CACrBA,EAAE,eAAe,EACEwzC,EAAA5H,EAAe,IAAKtiC,CAAQ,CAAA,EAC9C,UAAU,YACX,SAAA,CAACogB,EAAAA,KAAA,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,SAAA,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOpgB,EAAS,OAChB,SAAWtJ,GAAMsrC,EAAqB5lB,IAAA,CAAE,GAAGA,EAAM,OAAQ1lB,EAAE,OAAO,KAAQ,EAAA,EAC1E,UAAU,sGACV,SAAQ,GAER,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAM,SAAA,EAC1BA,EAAA,IAAA,SAAA,CAAO,MAAM,cAAc,SAAY,eAAA,EACvCA,EAAA,IAAA,SAAA,CAAO,MAAM,WAAW,SAAS,YAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAO,UAAA,CAAA,CAAA,CAChC,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,aAAA,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOpgB,EAAS,SAChB,SAAWtJ,GAAMsrC,EAAqB5lB,IAAA,CAAE,GAAGA,EAAM,SAAU1lB,EAAE,OAAO,KAAQ,EAAA,EAC5E,UAAU,sGACV,SAAQ,GAER,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAK,QAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAK,QAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAI,OAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAO,UAAA,CAAA,CAAA,CAChC,CAAA,EACF,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,gCAAA,EACAA,EAAA,IAAC,WAAA,CACC,MAAOhZ,EAAS,eAChB,SAAWtJ,GAAMsrC,EAAqB5lB,IAAA,CAAE,GAAGA,EAAM,eAAgB1lB,EAAE,OAAO,KAAQ,EAAA,EAClF,YAAY,wCACZ,UAAU,sGACV,KAAK,IACL,UAAU,MAAA,CACZ,EACA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACZ,SAAA,CAAApgB,EAAS,eAAe,OAAO,kBAAA,EAClC,CAAA,EACF,EAEAogB,EAAAA,KAAC,MAAI,CAAA,UAAU,sBACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAAS,IAAMgnB,EAAmB,EAAK,EACvC,UAAU,SACV,SAAUzS,EACX,SAAA,UAAA,CAED,EACA5W,EAAA,KAACqC,EAAA,CACC,KAAK,SACL,UAAU,SACV,SAAUuU,EAEV,SAAA,CAAChe,EAAAA,IAAAmP,GAAA,CAAK,UAAU,cAAe,CAAA,EAC9B6O,EAAW,iBAAmB,kBAAA,CAAA,CACjC,CAAA,EACF,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAAA,CAEJ,CAAA,CACF,CAAA,CAEJ,ECjrBMmU,GAAU,IAAM,CACHxzB,GAAQ,EACzB,MAAM6F,EAAWC,KACX,CAAC2kB,EAASC,CAAU,EAAIrqB,EAAA,SAAS,CAAE,CAAA,EACnC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAAC7c,EAAQ8rB,CAAS,EAAIjP,WAAS,KAAK,EACpC,CAACozB,EAAgBC,CAAiB,EAAIrzB,WAAS,EAAK,EACpD,CAACszB,EAAYC,CAAa,EAAIvzB,WAAS,EAAK,EAC5C,CAACgG,EAAYC,CAAa,EAAIjG,WAAS,EAAE,EACzC,CAACwzB,EAAgBC,CAAiB,EAAIzzB,WAAS,EAAE,EACjD,CAAChY,EAAUgiC,CAAW,EAAIhqB,WAAS,CACvC,QAAS,GACT,QAAS,GACT,SAAU,UACV,SAAU,QAAA,CACX,EAEDU,EAAAA,UAAU,IAAM,CACF8pB,GACd,EAAG,CAAE,CAAA,EAEL9pB,EAAAA,UAAU,IAAM,CACF8pB,GAAA,EACX,CAACrnC,CAAM,CAAC,EAEX,MAAMqnC,EAAc,SAAY,CAC9BtqB,EAAW,EAAI,EAEX,GAAA,CACI,MAAA9f,EAAS,MAAMyrB,GAAe,eAAe,CACjD,MAAO,GACP,KAAM,EACN,OAAQ1oB,IAAW,MAAQ,OAAYA,CAAA,CACxC,EAED,GAAI/C,EAAO,QAAS,CAClB,MAAMszC,EAActzC,EAAO,KAAK,SAAWA,EAAO,MAAQ,GAC1DiqC,EAAW,MAAM,QAAQqJ,CAAW,EAAIA,EAAc,CAAA,CAAE,CAAA,MAElD30B,EAAA,MAAM3e,EAAO,OAAO,EAC1BiqC,EAAW,CAAE,CAAA,QAERjjC,EAAO,CACN,QAAA,MAAM,4BAA6BA,CAAK,EAChD2X,EAAM,MAAM,qCAAqC,EACjDsrB,EAAW,CAAE,CAAA,CACf,CAEAnqB,EAAW,EAAK,CAAA,EAGZyzB,EAAqB,MAAOj1C,GAAM,CACtCA,EAAE,eAAe,EAGX,MAAAqhC,EAAalU,GAAe,mBAAmB7jB,CAAQ,EACzD,GAAA,CAAC+3B,EAAW,QAAS,CACvBhhB,EAAM,MAAMghB,EAAW,OAAO,CAAC,CAAC,EAChC,MACF,CAEAwT,EAAc,EAAI,EAEd,GAAA,CACF,MAAMnzC,EAAS,MAAMyrB,GAAe,aAAakU,EAAW,IAAI,EAEhE,GAAI3/B,EAAO,QAAS,CAElB,MAAMwzC,EAAYxzC,EAAO,KAAK,QAAUA,EAAO,KAE3CwzC,GAAaA,EAAU,IACzBvJ,EAAmBjmB,GAAA,MAAM,QAAQA,CAAI,EAAI,CAACwvB,EAAW,GAAGxvB,CAAI,EAAI,CAACwvB,CAAS,CAAC,GAEnE,QAAA,MAAM,4BAA6BA,CAAS,EACpD70B,EAAM,MAAM,oCAAoC,GAItCirB,EAAA,CACV,QAAS,GACT,QAAS,GACT,SAAU,UACV,SAAU,QAAA,CACX,EACDqJ,EAAkB,EAAK,EAEjB,MAAAQ,GAAeD,EAAU,gBAAkB,cAAcA,EAAU,eAAe,GAAK,OAAOA,EAAU,GAAG,GAC3G70B,EAAA,QAAQ,8BAA8B80B,EAAY,EAAE,CAAA,MAEpD90B,EAAA,MAAM3e,EAAO,OAAO,QAErBgH,EAAO,CACN,QAAA,MAAM,wBAAyBA,CAAK,EAC5C2X,EAAM,MAAM,sBAAsB,CACpC,CAEAw0B,EAAc,EAAK,CAAA,EAGfO,EAAuB,SAAY,CACnC,GAAA,CAACN,EAAe,OAAQ,CAC1Bz0B,EAAM,MAAM,+BAA+B,EAC3C,MACF,CAEAmB,EAAW,EAAI,EACX,GAAA,CACF,MAAM9f,EAAS,MAAMyrB,GAAe,oBAAoB2nB,EAAe,MAAM,EAE7E,GAAIpzC,EAAO,QAAS,CAClB,MAAMsqC,EAAStqC,EAAO,KAAK,QAAUA,EAAO,KAC5CiqC,EAAWK,EAAS,CAACA,CAAM,EAAI,CAAE,CAAA,EACjCzb,EAAU,KAAK,EACfhJ,EAAc,EAAE,EAChBlH,EAAM,QAAQ,oBAAoB,CAAA,MAE5BA,EAAA,MAAM3e,EAAO,OAAO,EAC1BiqC,EAAW,CAAE,CAAA,OAED,CACdtrB,EAAM,MAAM,uBAAuB,EACnCsrB,EAAW,CAAE,CAAA,CACf,CACAnqB,EAAW,EAAK,CAAA,EAGZ6zB,EAAc,IAAM,CACxBN,EAAkB,EAAE,EACpBxtB,EAAc,EAAE,EACJukB,GAAA,EAGRwJ,EAAqBtJ,GAAW,CAC9B,MAAA3e,EAAW2e,EAAO,iBAAmBA,EAAO,IACzCllB,EAAA,mBAAmBuG,CAAQ,EAAE,CAAA,EAGlCkoB,EAAiBvJ,GAAW,CAChCllB,EAAS,mBAAmBklB,EAAO,iBAAmBA,EAAO,GAAG,EAAE,CAAA,EAG9Dhb,EAAc5e,GACL,IAAI,KAAKA,CAAS,EACnB,eAAe,OAAO,EAG9BghB,EAAkB7lB,GAAW,CACjC,OAAQA,EAAQ,CACd,IAAK,OAAe,MAAA,UACpB,IAAK,cAAsB,MAAA,UAC3B,IAAK,WAAmB,MAAA,UACxB,IAAK,SAAiB,MAAA,YACtB,QAAgB,MAAA,SAClB,CAAA,EAGIk1B,EAAkBl1B,GAAW,CACjC,OAAQA,EAAQ,CACd,IAAK,OAAe,MAAA,SACpB,IAAK,cAAsB,MAAA,eAC3B,IAAK,WAAmB,MAAA,YACxB,IAAK,SAAiB,MAAA,UACtB,QAAgB,OAAAA,CAClB,CAAA,EAGI2mC,EAAoBC,GAAa,CACrC,OAAQA,EAAU,CAChB,IAAK,MAAc,MAAA,YACnB,IAAK,SAAiB,MAAA,UACtB,IAAK,OAAe,MAAA,UACpB,IAAK,SAAiB,MAAA,SACtB,QAAgB,MAAA,SAClB,CAAA,EAGIC,EAAoBD,GAAa,CACrC,OAAQA,EAAU,CAChB,IAAK,MAAc,MAAA,QACnB,IAAK,SAAiB,MAAA,QACtB,IAAK,OAAe,MAAA,OACpB,IAAK,SAAiB,MAAA,UACtB,QAAgB,OAAAA,CAClB,CAAA,EAGIE,EAAoB5d,GAAa,CACrC,OAAQA,EAAU,CAChB,IAAK,UAAkB,MAAA,QACvB,IAAK,YAAoB,MAAA,UACzB,IAAK,UAAkB,MAAA,YACvB,IAAK,UAAkB,MAAA,QACvB,QAAgB,OAAAA,CAClB,CAAA,EAGI+e,EAAkB,MAAM,QAAQ9J,CAAO,EAAIA,EAAQ,OAAiBM,GAAA,CACxE,MAAMyJ,EAAgBhxC,IAAW,OAASunC,EAAO,SAAWvnC,EACtD6lC,EAAgB,CAAChjB,GACrB0kB,EAAO,QAAQ,YAAA,EAAc,SAAS1kB,EAAW,aAAa,GAC9D0kB,EAAO,QAAQ,YAAA,EAAc,SAAS1kB,EAAW,aAAa,EAEhE,OAAOmuB,GAAiBnL,CACzB,CAAA,EAAI,CAAA,EAeCnZ,GAbkB,IACjB,MAAM,QAAQua,CAAO,EAInB,CACL,IAAKA,EAAQ,OACb,KAAMA,EAAQ,UAAY9Y,EAAE,SAAW,MAAM,EAAE,OAC/C,YAAa8Y,EAAQ,UAAY9Y,EAAE,SAAW,aAAa,EAAE,OAC7D,SAAU8Y,EAAQ,UAAY9Y,EAAE,SAAW,UAAU,EAAE,MAAA,EAPhD,CAAE,IAAK,EAAG,KAAM,EAAG,YAAa,EAAG,SAAU,MAaxD,OAAIrR,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,QAKD,MAAI,CAAA,UAAU,+BACb,SAACtB,EAAA,KAAA,MAAA,CAAI,UAAU,mCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACpH,EAAAA,IAAAozB,GAAA,CAAW,UAAU,uBAAwB,CAAA,SAC7C,MACC,CAAA,SAAA,CAACpzB,EAAA,IAAA,KAAA,CAAG,UAAU,mCAAmC,SAEjD,mBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,iCAAA,CAAA,EACF,CAAA,EACF,EAEAoH,EAAA,KAACqC,EAAA,CACC,QAAS,IAAM4oB,EAAkB,EAAI,EACrC,UAAU,oBAEV,SAAA,CAACryB,EAAAA,IAAAyH,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,aAAA,CAAA,CAEnC,CAAA,EACF,EAGAL,EAAAA,KAAC,MAAI,CAAA,UAAU,6CACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,sEACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAACpH,EAAAA,IAAAiyB,GAAA,CAAS,UAAU,uBAAwB,CAAA,EAC3CjyB,EAAA,IAAA,KAAA,CAAG,UAAU,8BAA8B,SAAG,MAAA,CAAA,EACjD,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAE1C,mDAAA,QACCyJ,EAAO,CAAA,QAAQ,UAAU,KAAK,KAAK,SAEpC,UAAA,CAAA,EACF,EAEArC,EAAAA,KAAC,MAAI,CAAA,UAAU,sEACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAACpH,EAAAA,IAAA6M,GAAA,CAAK,UAAU,wBAAyB,CAAA,EACxC7M,EAAA,IAAA,KAAA,CAAG,UAAU,8BAA8B,SAAK,QAAA,CAAA,EACnD,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAE1C,yCAAA,EACAA,EAAA,IAACyJ,EAAO,CAAA,QAAQ,UAAU,KAAK,KAC7B,SAAAzJ,EAAA,IAAC,IAAE,CAAA,KAAK,+BAA+B,SAAA,cAAY,CAAA,EACrD,CAAA,EACF,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,sEACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAACpH,EAAAA,IAAA+T,GAAA,CAAM,UAAU,yBAA0B,CAAA,EAC1C/T,EAAA,IAAA,KAAA,CAAG,UAAU,8BAA8B,SAAQ,WAAA,CAAA,EACtD,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAE1C,8BAAA,EACCA,MAAAyJ,EAAA,CAAO,QAAQ,UAAU,KAAK,KAC7B,SAAAzJ,EAAAA,IAAC,IAAE,CAAA,KAAK,8BAA8B,OAAO,SAAS,IAAI,sBAAsB,qBAEhF,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAAA,EACF,QAGC,MAAI,CAAA,UAAU,yCACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,sBAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,kCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,2BACb,SAAA,CAACpH,EAAAA,IAAAgyB,GAAA,CAAK,UAAU,0EAA2E,CAAA,EAC3FhyB,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,6CACZ,MAAOwyB,EACP,SAAW90C,GAAM+0C,EAAkB/0C,EAAE,OAAO,KAAK,EACjD,UAAU,iHAAA,CACZ,CAAA,EACF,EACA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACC,QAASqpB,EACT,SAAU,CAACN,EAAe,KAAA,GAAUvzB,EACpC,KAAK,KAEL,SAAA,CAACe,EAAAA,IAAAsH,GAAA,CAAO,UAAU,cAAe,CAAA,EAAE,QAAA,CAAA,CAErC,EACAtH,EAAA,IAACyJ,EAAA,CACC,QAAQ,UACR,QAASspB,EACT,KAAK,KACN,SAAA,QAAA,CAED,CAAA,EACF,CAAA,EACF,EAGA3rB,EAAAA,KAAC,MAAI,CAAA,UAAU,qEACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,2BACb,SAAA,CAACpH,EAAAA,IAAAsH,GAAA,CAAO,UAAU,0EAA2E,CAAA,EAC7FtH,EAAA,IAAC,QAAA,CACC,KAAK,OACL,YAAY,oBACZ,MAAOgF,EACP,SAAWtnB,GAAMunB,EAAcvnB,EAAE,OAAO,KAAK,EAC7C,UAAU,iHAAA,CACZ,CAAA,EACF,EAGAsiB,EAAAA,IAAC,MAAI,CAAA,UAAU,uBACZ,SAAA,CACC,CAAE,IAAK,MAAO,MAAO,QAAS,MAAO6O,EAAO,GAAI,EAChD,CAAE,IAAK,OAAQ,MAAO,UAAW,MAAOA,EAAO,IAAK,EACpD,CAAE,IAAK,cAAe,MAAO,eAAgB,MAAOA,EAAO,WAAY,EACvE,CAAE,IAAK,WAAY,MAAO,aAAc,MAAOA,EAAO,QAAS,CAAA,EAC/D,IACAE,GAAA3H,EAAA,KAAC,SAAA,CAEC,QAAS,IAAM6G,EAAUc,EAAa,GAAG,EACzC,UAAW,8DACT5sB,IAAW4sB,EAAa,IACpB,yBACA,6CACN,GAEC,SAAA,CAAaA,EAAA,MAAM,KAAGA,EAAa,MAAM,GAAA,CAAA,EARrCA,EAAa,GAUrB,CAAA,EACH,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EAGA/O,EAAAA,IAAC,MAAI,CAAA,UAAU,YACZ,SAAAkzB,EAAgB,OAAS,EACxBA,EAAgB,IAAKxJ,GACnBtiB,EAAA,KAAC,MAAA,CAEC,UAAU,sEAGV,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,wCACb,SAACoH,EAAA,KAAA,MAAA,CAAI,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAAApH,MAAC,KAAG,CAAA,UAAU,sCACX,SAAA0pB,EAAO,SAAW,cACrB,EACC1pB,EAAAA,IAAA4N,EAAA,CAAM,QAASkD,EAAe4Y,EAAO,QAAU,MAAM,EACnD,SAAevJ,EAAAuJ,EAAO,QAAU,MAAM,CACzC,CAAA,EACC1pB,EAAA,IAAA4N,EAAA,CAAM,QAASgkB,EAAiBlI,EAAO,UAAY,QAAQ,EAAG,KAAK,KACjE,SAAAoI,EAAiBpI,EAAO,UAAY,QAAQ,EAC/C,CAAA,EACF,EAEAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,oDACb,SAAA,CAACA,EAAAA,KAAA,OAAA,CAAK,UAAU,oBACd,SAAA,CAACpH,EAAAA,IAAAkP,GAAA,CAAS,UAAU,cAAe,CAAA,EAClCwa,EAAO,WAAahb,EAAWgb,EAAO,UAAU,EAAI,qBAAA,EACvD,EACCA,EAAO,iBACLtiB,OAAA,OAAA,CAAK,UAAU,8BACd,SAAA,CAACpH,EAAAA,IAAAgyB,GAAA,CAAK,UAAU,cAAe,CAAA,EAC9BtI,EAAO,eAAA,EACV,SAED,OAAK,CAAA,SAAA,CAAA,IAAEA,EAAO,IAAMA,EAAO,IAAI,MAAM,EAAE,EAAI,KAAA,EAAM,QACjD,OAAM,CAAA,SAAAqI,EAAiBrI,EAAO,UAAY,SAAS,EAAE,CAAA,EACxD,CAAA,CAAA,CACF,CACF,CAAA,EAGA1pB,EAAA,IAAC,MAAI,CAAA,UAAU,OACb,SAAAA,EAAAA,IAAC,IAAE,CAAA,UAAU,oCACV,SAAA0pB,EAAO,SAAW,cACrB,CAAA,EACF,EAGCA,EAAO,gBACL1pB,EAAAA,IAAA,MAAA,CAAI,UAAU,mDACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,kFACb,eAAC6H,EAAK,CAAA,UAAU,qBAAqB,CACvC,CAAA,EACAT,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCAAyC,SAAA,CAAA,sBAErDsiB,EAAO,aACLtiB,OAAA,OAAA,CAAK,UAAU,eAAe,SAAA,CAAA,KAC1BsH,EAAWgb,EAAO,WAAW,CAAA,EAClC,CAAA,EAEJ,EACC1pB,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAiB,WAAO,eAAe,CAAA,EACtD,CAAA,CAAA,CACF,CACF,CAAA,EAIFoH,EAAAA,KAAC,MAAI,CAAA,UAAU,kEACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAAsiB,EAAO,SAAW,QAChBtiB,EAAA,KAAA,OAAA,CAAK,UAAU,4CACd,SAAA,CAACpH,EAAAA,IAAAgP,GAAA,CAAM,UAAU,cAAe,CAAA,EAAE,qBAAA,EAEpC,EAED0a,EAAO,SAAW,eAChBtiB,EAAA,KAAA,OAAA,CAAK,UAAU,0CACd,SAAA,CAACpH,EAAAA,IAAA8Z,GAAA,CAAY,UAAU,cAAe,CAAA,EAAE,YAAA,EAE1C,EAED4P,EAAO,SAAW,YAChBtiB,EAAA,KAAA,OAAA,CAAK,UAAU,2CACd,SAAA,CAACpH,EAAAA,IAAAiP,GAAA,CAAY,UAAU,cAAe,CAAA,EAAE,WAAA,EAE1C,CAAA,EAEJ,EAEA7H,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAAS,IAAMupB,EAAkBtJ,CAAM,EACxC,SAAA,cAAA,CAED,EACCA,EAAO,SAAW,QACjB1pB,EAAA,IAACyJ,EAAA,CACC,KAAK,KACL,QAAS,IAAMwpB,EAAcvJ,CAAM,EACpC,SAAA,sBAAA,CAED,CAAA,EAEJ,CAAA,EACF,CAAA,CAAA,EAxGKA,EAAO,GAAA,CA0Gf,EAEAtiB,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,sCAAuC,CAAA,QAC/D,KAAG,CAAA,UAAU,yCACX,SAAA9J,EAAa,2BAA6B,sBAC7C,QACC,IAAE,CAAA,UAAU,qBACV,SAAAA,EACG,qCACA,sCAEN,EACC,CAACA,GACCoC,EAAA,KAAAqC,EAAA,CAAO,QAAS,IAAM4oB,EAAkB,EAAI,EAC3C,SAAA,CAACryB,EAAAA,IAAAyH,GAAA,CAAK,UAAU,cAAe,CAAA,EAAE,cAAA,EAEnC,CAAA,CAAA,CAEJ,CAEJ,CAAA,EAGC2qB,GACCpyB,EAAA,IAAC,MAAI,CAAA,UAAU,iFACb,SAAAA,EAAAA,IAAC,MAAI,CAAA,UAAU,oEACb,SAAAoH,EAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAEpD,oBAAA,EACAA,EAAA,IAAC,SAAA,CACC,QAAS,IAAMqyB,EAAkB,EAAK,EACtC,UAAU,sDAEV,SAAAryB,EAAAA,IAACoI,GAAE,CAAA,UAAU,SAAU,CAAA,CAAA,CACzB,CAAA,EACF,EAEChB,EAAA,KAAA,OAAA,CAAK,SAAUurB,EAAoB,UAAU,YAC5C,SAAA,CAAAvrB,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,YAAA,EACAA,EAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOhZ,EAAS,QAChB,SAAWtJ,GAAMsrC,EAAqB5lB,IAAA,CAAE,GAAGA,EAAM,QAAS1lB,EAAE,OAAO,KAAQ,EAAA,EAC3E,YAAY,iCACZ,UAAU,sGACV,SAAQ,EAAA,CACV,CAAA,EACF,EAEA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,yBACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,YAAA,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOpgB,EAAS,SAChB,SAAWtJ,GAAMsrC,EAAqB5lB,IAAA,CAAE,GAAGA,EAAM,SAAU1lB,EAAE,OAAO,KAAQ,EAAA,EAC5E,UAAU,sGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAK,QAAA,EAC5BA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAO,UAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAS,YAAA,EAChCA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAK,QAAA,CAAA,CAAA,CAC/B,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,aAAA,EACAoH,EAAA,KAAC,SAAA,CACC,MAAOpgB,EAAS,SAChB,SAAWtJ,GAAMsrC,EAAqB5lB,IAAA,CAAE,GAAGA,EAAM,SAAU1lB,EAAE,OAAO,KAAQ,EAAA,EAC5E,UAAU,sGAEV,SAAA,CAACsiB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAK,QAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAK,QAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAI,OAAA,EACxBA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAO,UAAA,CAAA,CAAA,CAChC,CAAA,EACF,CAAA,EACF,SAEC,MACC,CAAA,SAAA,CAACA,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,cAAA,EACAA,EAAA,IAAC,WAAA,CACC,MAAOhZ,EAAS,QAChB,SAAWtJ,GAAMsrC,EAAqB5lB,IAAA,CAAE,GAAGA,EAAM,QAAS1lB,EAAE,OAAO,KAAQ,EAAA,EAC3E,YAAY,sCACZ,UAAU,sGACV,KAAK,IACL,SAAQ,EAAA,CACV,CAAA,EACF,EAEA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,sBACb,SAAA,CAAApH,EAAA,IAACyJ,EAAA,CACC,KAAK,SACL,QAAQ,UACR,QAAS,IAAM4oB,EAAkB,EAAK,EACtC,UAAU,SACV,SAAUC,EACX,SAAA,UAAA,CAED,EACAlrB,EAAA,KAACqC,EAAA,CACC,KAAK,SACL,UAAU,SACV,SAAU6oB,EAEV,SAAA,CAACtyB,EAAAA,IAAAmP,GAAA,CAAK,UAAU,cAAe,CAAA,EAC9BmjB,EAAa,aAAe,cAAA,CAAA,CAC/B,CAAA,EACF,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAAA,CAEJ,CAAA,CACF,CAAA,CAEJ,ECnmBMe,GAAgB,IAAM,CACpB,KAAA,CAAE,SAAAtoB,GAAaI,KACf3G,EAAWC,KACA9F,GAAQ,EACzB,KAAM,CAAC+qB,EAAQ4J,CAAS,EAAIt0B,WAAS,IAAI,EACnC,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAACgf,EAAUC,CAAW,EAAIjf,WAAS,EAAK,EACxC,CAACu0B,EAAWC,CAAY,EAAIx0B,WAAS,EAAE,EACvC,CAACy0B,EAAeC,CAAgB,EAAI10B,WAAS,EAAK,EAExDU,EAAAA,UAAU,IAAM,CACIi0B,GAAA,EACjB,CAAC5oB,CAAQ,CAAC,EAEb,MAAM4oB,EAAoB,SAAY,SACpCz0B,EAAW,EAAI,EACX,GAAA,CACE,IAAA9f,EAeJ,GAbQ,QAAA,IAAI,wBAAyB2rB,CAAQ,EAGzCA,EAAS,WAAW,MAAM,GAC5B,QAAQ,IAAI,2BAA2B,EAC9B3rB,EAAA,MAAMyrB,GAAe,oBAAoBE,CAAQ,IAE1D,QAAQ,IAAI,oBAAoB,EACvB3rB,EAAA,MAAMyrB,GAAe,cAAcE,CAAQ,GAG9C,QAAA,IAAI,yBAA0B3rB,CAAM,EAExCA,EAAO,QAAS,CAClB,MAAMw0C,EAAax0C,EAAO,KAAK,QAAUA,EAAO,KACxC,QAAA,IAAI,uBAAwBw0C,CAAU,EAC9CN,EAAUM,CAAU,CAAA,MAEZ,QAAA,MAAM,6BAA8Bx0C,EAAO,OAAO,EACpD2e,EAAA,MAAM3e,EAAO,SAAW,uBAAuB,EACrDolB,EAAS,UAAU,QAEdpe,EAAO,CACN,QAAA,MAAM,0BAA2BA,CAAK,IAG1C+W,EAAA/W,EAAM,WAAN,YAAA+W,EAAgB,UAAW,IAC7BY,EAAM,MAAM,2DAA2D,IAC9DR,EAAAnX,EAAM,WAAN,YAAAmX,EAAgB,UAAW,IACpCQ,EAAM,MAAM,uBAAuB,EAEnCA,EAAM,MAAM,qCAAqC,EAEnDyG,EAAS,UAAU,CACrB,CACAtF,EAAW,EAAK,CAAA,EAGZwP,EAAc5e,GAAc,CAChC,GAAI,CAACA,EAAkB,MAAA,iBAEnB,GAAA,CAEK,OADM,IAAI,KAAKA,CAAS,EACnB,eAAe,QAAS,CAClC,KAAM,UACN,MAAO,UACP,IAAK,UACL,KAAM,UACN,OAAQ,UACR,OAAQ,SAAA,CACT,OACa,CACP,MAAA,eACT,CAAA,EAGIwhC,EAAsBxhC,GAAc,CACxC,GAAI,CAACA,EAAkB,MAAA,GAEnB,GAAA,CACI,MAAA6e,EAAO,IAAI,KAAK7e,CAAS,EAEzByhC,MADU,KACK5iB,EACf6iB,EAAY,KAAK,MAAMD,GAAU,IAAO,GAAK,GAAG,EAChDE,EAAW,KAAK,MAAMD,EAAY,EAAE,EAE1C,GAAIC,EAAW,EACb,MAAO,MAAMA,CAAQ,UACvB,GAAWD,EAAY,EACrB,MAAO,MAAMA,CAAS,WACjB,CACL,MAAME,EAAc,KAAK,MAAMH,EAAU,GAAU,EACnD,MAAO,MAAM,KAAK,IAAI,EAAGG,CAAW,CAAC,YACvC,OACc,CACP,MAAA,EACT,CAAA,EAGI5gB,EAAkB7lB,GAAW,CACjC,OAAQA,EAAQ,CACd,IAAK,OAAe,MAAA,UACpB,IAAK,cAAsB,MAAA,UAC3B,IAAK,WAAmB,MAAA,UACxB,IAAK,SAAiB,MAAA,YACtB,QAAgB,MAAA,SAClB,CAAA,EAGIk1B,EAAkBl1B,GAAW,CACjC,OAAQA,EAAQ,CACd,IAAK,OAAe,MAAA,SACpB,IAAK,cAAsB,MAAA,eAC3B,IAAK,WAAmB,MAAA,YACxB,IAAK,SAAiB,MAAA,UACtB,QAAS,OAAOA,GAAU,cAC5B,CAAA,EAGI8lB,EAAiB9lB,GAAW,CAChC,OAAQA,EAAQ,CACd,IAAK,OAAe,OAAA+U,EAAA,IAACgP,GAAM,CAAA,UAAU,SAAU,CAAA,EAC/C,IAAK,cAAsB,OAAAhP,EAAA,IAAC2xB,GAAM,CAAA,UAAU,SAAU,CAAA,EACtD,IAAK,WAAmB,OAAA3xB,EAAA,IAACmjB,GAAa,CAAA,UAAU,SAAU,CAAA,EAC1D,IAAK,SAAiB,OAAAnjB,EAAA,IAACiR,GAAQ,CAAA,UAAU,SAAU,CAAA,EACnD,QAAgB,OAAAjR,EAAA,IAAC8Z,GAAY,CAAA,UAAU,SAAU,CAAA,CACnD,CAAA,EAGI8X,EAAoBC,GAAa,CACrC,OAAQA,EAAU,CAChB,IAAK,MAAc,MAAA,YACnB,IAAK,SAAiB,MAAA,UACtB,IAAK,OAAe,MAAA,UACpB,IAAK,SAAiB,MAAA,SACtB,QAAgB,MAAA,SAClB,CAAA,EAGIC,EAAoBD,GAAa,CACrC,OAAQA,EAAU,CAChB,IAAK,MAAc,MAAA,QACnB,IAAK,SAAiB,MAAA,QACtB,IAAK,OAAe,MAAA,OACpB,IAAK,SAAiB,MAAA,UACtB,QAAS,OAAOA,GAAY,cAC9B,CAAA,EAGIE,EAAoB5d,GAAa,CACrC,OAAQA,EAAU,CAChB,IAAK,UAAkB,MAAA,QACvB,IAAK,YAAoB,MAAA,UACzB,IAAK,UAAkB,MAAA,YACvB,IAAK,UAAkB,MAAA,QACvB,QAAS,OAAOA,GAAY,kBAC9B,CAAA,EAGI0f,EAAmB1f,GAAa,CACpC,OAAQA,EAAU,CAChB,IAAK,UAAkB,OAAAnU,EAAA,IAACwjB,GAAK,CAAA,UAAU,SAAU,CAAA,EACjD,IAAK,YAAoB,OAAAxjB,EAAA,IAAC2f,GAAO,CAAA,UAAU,SAAU,CAAA,EACrD,IAAK,UAAkB,OAAA3f,EAAA,IAACiyB,GAAS,CAAA,UAAU,SAAU,CAAA,EACrD,IAAK,UAAkB,OAAAjyB,EAAA,IAAC6H,EAAK,CAAA,UAAU,SAAU,CAAA,EACjD,QAAgB,OAAA7H,EAAA,IAAC8O,GAAc,CAAA,UAAU,SAAU,CAAA,CACrD,CAAA,EAGIglB,EAAiB,SAAY,CAC7B,GAAA,CAACP,EAAU,OAAQ,CACrBx1B,EAAM,MAAM,qBAAqB,EACjC,MACF,CAEA,GAAIw1B,EAAU,OAAO,OAAS,EAAG,CAC/Bx1B,EAAM,MAAM,6CAA6C,EACzD,MACF,CAEAkgB,EAAY,EAAI,EACZ,GAAA,CACM,QAAA,IAAI,oCAAqCyL,EAAO,GAAG,EACrD,MAAAtqC,EAAS,MAAMyrB,GAAe,eAAe6e,EAAO,IAAK6J,EAAU,MAAM,EAEvE,QAAA,IAAI,yBAA0Bn0C,CAAM,EAExCA,EAAO,SACT2e,EAAM,QAAQ,mCAAmC,EACjDy1B,EAAa,EAAE,EACfE,EAAiB,EAAK,EAGtB,MAAMC,EAAkB,GAElB51B,EAAA,MAAM3e,EAAO,SAAW,8BAA8B,QAEvDgH,EAAO,CACN,QAAA,MAAM,gCAAiCA,CAAK,EACpD2X,EAAM,MAAM,8BAA8B,CAC5C,CACAkgB,EAAY,EAAK,CAAA,EAGb8V,EAAgB,IAAM,CAC1Bh2B,EAAM,KAAK,uBAAuB,EAChB41B,GAAA,EAGpB,GAAI10B,EACF,aACG,MAAI,CAAA,UAAU,2DACb,SAACmI,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAAA,IAAA0I,EAAA,CAAe,KAAK,IAAK,CAAA,EACzB1I,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAAgC,mCAAA,CAAA,CACpE,CAAA,CACF,CAAA,EAIJ,GAAI,CAAC0pB,EACH,aACG,MAAI,CAAA,UAAU,2DACb,SAACtiB,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,sCAAuC,CAAA,EAC/D9O,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,wBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAElC,8EAAA,QACCyJ,EAAO,CAAA,QAAS,IAAMjF,EAAS,UAAU,EAAG,SAE7C,oBAAA,CAAA,CACF,CAAA,CACF,CAAA,EAIJ,MAAMwvB,EAActK,EAAO,SAAW,QAAUA,EAAO,SAAW,cAC/C,OAAAA,EAAO,SAAW,YAAcA,EAAO,aAGvD,MAAI,CAAA,UAAU,+BACb,SAACtiB,EAAA,KAAA,MAAA,CAAI,UAAU,mCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACC,QAAQ,UACR,QAAS,IAAMjF,EAAS,UAAU,EAElC,SAAA,CAACxE,EAAAA,IAAAoc,GAAA,CAAU,UAAU,cAAe,CAAA,EAAE,mBAAA,CAAA,CAExC,EAEAhV,EAAA,KAACqC,EAAA,CACC,QAAQ,UACR,KAAK,KACL,QAASsqB,EACT,SAAU90B,EAEV,SAAA,CAAAe,MAAC6Z,IAAU,UAAW,gBAAgB5a,EAAU,eAAiB,EAAE,GAAI,EAAE,WAAA,CAAA,CAE3E,CAAA,EACF,QAGC,MAAI,CAAA,UAAU,oCACb,SAACmI,EAAA,KAAA,MAAA,CAAI,UAAU,wCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,SACb,SAAA,CAAApH,MAAC,KAAG,CAAA,UAAU,wCACX,SAAA0pB,EAAO,SAAW,cACrB,EAGAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACZ,SAAA,CAAA2J,EAAc2Y,EAAO,MAAM,EAC3B1pB,EAAAA,IAAA4N,EAAA,CAAM,QAASkD,EAAe4Y,EAAO,QAAU,MAAM,EACnD,SAAevJ,EAAAuJ,EAAO,QAAU,MAAM,CACzC,CAAA,CAAA,EACF,EAEAtiB,EAAAA,KAACwG,GAAM,QAASgkB,EAAiBlI,EAAO,UAAY,QAAQ,EAAG,KAAK,KAClE,SAAA,CAAC1pB,EAAAA,IAAAyf,GAAA,CAAc,UAAU,cAAe,CAAA,EACvCqS,EAAiBpI,EAAO,UAAY,QAAQ,CAAA,EAC/C,EAEAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,0CACZ,SAAA,CAAAysB,EAAgBnK,EAAO,QAAQ,EAChC1pB,EAAAA,IAAC,QAAK,UAAU,OAAQ,WAAiB0pB,EAAO,UAAY,SAAS,EAAE,CAAA,EACzE,CAAA,EACF,EAGAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,8DACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAkP,GAAA,CAAS,UAAU,cAAe,CAAA,SAClC,OAAK,CAAA,SAAA,CAAA,aACOR,EAAWgb,EAAO,UAAU,EACtCA,EAAO,YACLtiB,OAAA,OAAA,CAAK,UAAU,qBAAqB,SAAA,CAAA,IACjCkqB,EAAmB5H,EAAO,UAAU,EAAE,GAAA,EAC1C,CAAA,EAEJ,CAAA,EACF,EAECA,EAAO,iBACLtiB,OAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACpH,EAAAA,IAAAgyB,GAAA,CAAK,UAAU,cAAe,CAAA,EAC9BhyB,EAAA,IAAA,OAAA,CAAK,UAAU,cAAe,WAAO,gBAAgB,CAAA,EACxD,EAGFoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAAiyB,GAAA,CAAS,UAAU,cAAe,CAAA,SAClC,OAAK,CAAA,SAAA,CAAA,QAAMvI,EAAO,IAAMA,EAAO,IAAI,MAAM,EAAE,EAAI,KAAA,EAAM,CAAA,EACxD,EAECA,EAAO,YACLtiB,OAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA6Z,GAAA,CAAU,UAAU,cAAe,CAAA,SACnC,OAAK,CAAA,SAAA,CAAA,cACQyX,EAAmB5H,EAAO,UAAU,CAAA,EAClD,CAAA,EACF,CAAA,EAEJ,CAAA,EACF,EAGC1pB,EAAA,IAAA,MAAA,CAAI,UAAU,+BACZ,SACCg0B,GAAA5sB,EAAA,KAACqC,EAAA,CACC,KAAK,KACL,QAAS,IAAMiqB,EAAiB,CAACD,CAAa,EAC9C,UAAWA,EAAgB,cAAgB,GAE3C,SAAA,CAACzzB,EAAAA,IAAAmR,GAAA,CAAK,UAAU,cAAe,CAAA,EAC9BsiB,EAAgB,WAAa,gBAAA,CAAA,CAAA,EAGpC,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,EAGArsB,EAAAA,KAAC,MAAI,CAAA,UAAU,YAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAA8O,GAAA,CAAc,UAAU,4BAA6B,CAAA,EAAE,uBAAA,EAE1D,EACA9O,EAAA,IAAC,MAAI,CAAA,UAAU,yDACb,SAAAA,EAAAA,IAAC,IAAE,CAAA,UAAU,oDACV,SAAA0pB,EAAO,SAAW,8BACrB,CAAA,EACF,CAAA,EACF,EAGCA,EAAO,gBACLtiB,OAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAA2f,GAAA,CAAO,UAAU,4BAA6B,CAAA,EAAE,+BAAA,EAEnD,QACC,MAAI,CAAA,UAAU,yDACb,SAACvY,EAAA,KAAA,MAAA,CAAI,UAAU,6BACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,oFACb,eAAC2f,GAAO,CAAA,UAAU,qBAAqB,CACzC,CAAA,EACAvY,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCAAyC,SAAA,CAAA,oBAErDsiB,EAAO,aACLtiB,OAAA,OAAA,CAAK,UAAU,6CAA6C,SAAA,CAAA,iBAC5CsH,EAAWgb,EAAO,WAAW,CAAA,EAC9C,CAAA,EAEJ,EACC1pB,EAAA,IAAA,IAAA,CAAE,UAAU,gCAAiC,WAAO,eAAe,CAAA,EACtE,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,EAID0pB,EAAO,iBAAmBA,EAAO,gBAAgB,OAAS,GACzDtiB,EAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAAmR,GAAA,CAAK,UAAU,6BAA8B,CAAA,EAAE,yBAEhD/J,EAAAA,KAAC,OAAK,CAAA,UAAU,6DACb,SAAA,CAAAsiB,EAAO,gBAAgB,OAAO,eAAA,EACjC,CAAA,EACF,QACC,MAAI,CAAA,UAAU,YACZ,SAAAA,EAAO,gBAAgB,IAAI,CAACwI,EAAMxqC,UAChC,MAAgB,CAAA,UAAU,2DACzB,SAAC0f,OAAA,MAAA,CAAI,UAAU,6BACb,SAAA,CAAApH,EAAAA,IAAC,OAAI,UAAU,mFACb,eAAC6H,EAAK,CAAA,UAAU,qBAAqB,CACvC,CAAA,EACAT,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,0CAA0C,SAAA,CAAA,UAC/CsH,EAAWwjB,EAAK,UAAU,EAClC9qB,EAAAA,KAAC,OAAK,CAAA,UAAU,sBAAsB,SAAA,CAAA,IAClCkqB,EAAmBY,EAAK,UAAU,EAAE,GAAA,EACxC,CAAA,EACF,EACClyB,EAAA,IAAA,IAAA,CAAE,UAAU,gCAAiC,WAAK,QAAQ,CAAA,EAC7D,CACF,CAAA,CAAA,CAAA,EAdQtY,CAeV,CACD,EACH,CAAA,EACF,EAID+rC,GAAiBO,GACf5sB,OAAA,MAAA,CAAI,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAAmP,GAAA,CAAK,UAAU,4BAA6B,CAAA,EAAE,sBAAA,EAEjD,EACA/H,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAAAA,OAAC,MACC,CAAA,SAAA,CAACpH,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,sDAAA,EACAA,EAAA,IAAC,WAAA,CACC,MAAOuzB,EACP,SAAW71C,GAAM81C,EAAa91C,EAAE,OAAO,KAAK,EAC5C,YAAY,gGACZ,UAAU,sHACV,KAAK,IACL,UAAU,MAAA,CACZ,EACA0pB,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACZ,SAAA,CAAUmsB,EAAA,OAAO,kBAAA,EACpB,CAAA,EACF,EAEAnsB,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAAA,EAAA,KAACqC,EAAA,CACC,QAASqqB,EACT,SAAU9V,GAAY,CAACuV,EAAU,KAAU,GAAAA,EAAU,OAAO,OAAS,EAErE,SAAA,CAACvzB,EAAAA,IAAAmP,GAAA,CAAK,UAAU,cAAe,CAAA,EAC9B6O,EAAW,cAAgB,mBAAA,CAAA,CAC9B,EACAhe,EAAA,IAACyJ,EAAA,CACC,QAAQ,UACR,QAAS,IAAM,CACbiqB,EAAiB,EAAK,EACtBF,EAAa,EAAE,CACjB,EACA,SAAUxV,EACX,SAAA,UAAA,CAED,CAAA,EACF,CAAA,EACF,CAAA,EACF,EAIF5W,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,6DACZ,SAAA,CAACpH,EAAAA,IAAAwjB,GAAA,CAAK,UAAU,8BAA+B,CAAA,EAAE,uBAAA,EAEnD,EAEApc,EAAAA,KAAC,MAAI,CAAA,UAAU,wCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,YACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8DACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,4BAA4B,SAAa,gBAAA,EACzDoH,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACZ,SAAA,CAAA2J,EAAc2Y,EAAO,MAAM,EAC5B1pB,EAAAA,IAAC,QAAK,UAAW,eACf0pB,EAAO,SAAW,OAAS,kBAC3BA,EAAO,SAAW,cAAgB,gBAClCA,EAAO,SAAW,WAAa,iBAAmB,eACpD,GACG,SAAAvJ,EAAeuJ,EAAO,MAAM,CAC/B,CAAA,CAAA,EACF,CAAA,EACF,EAEAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,8DACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,4BAA4B,SAAW,cAAA,EACvDA,EAAAA,IAAC4N,EAAM,CAAA,QAASgkB,EAAiBlI,EAAO,QAAQ,EAC7C,SAAAoI,EAAiBpI,EAAO,QAAQ,CACnC,CAAA,CAAA,EACF,EAEAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,8DACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,4BAA4B,SAAU,aAAA,EACtDoH,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACZ,SAAA,CAAAysB,EAAgBnK,EAAO,QAAQ,QAC/B,OAAK,CAAA,UAAU,gBAAiB,SAAiBqI,EAAArI,EAAO,QAAQ,EAAE,CAAA,EACrE,CAAA,EACF,CAAA,EACF,EAGAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,YACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8DACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,4BAA4B,SAAU,aAAA,QACrD,OAAK,CAAA,UAAU,wBACb,SAAW0O,EAAAgb,EAAO,UAAU,EAC/B,CAAA,EACF,EAEAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,8DACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,4BAA4B,SAAmB,sBAAA,QAC9D,OAAK,CAAA,UAAU,wBACb,SAAW0O,EAAAgb,EAAO,UAAU,EAC/B,CAAA,EACF,EAECA,EAAO,aACLtiB,OAAA,MAAA,CAAI,UAAU,+DACb,SAAA,CAACpH,EAAA,IAAA,OAAA,CAAK,UAAU,6BAA6B,SAAa,gBAAA,QACzD,OAAK,CAAA,UAAU,yBACb,SAAW0O,EAAAgb,EAAO,WAAW,EAChC,CAAA,EACF,CAAA,EAEJ,CAAA,EACF,EAGA1pB,EAAAA,IAAC,OAAI,UAAW,kCACd0pB,EAAO,SAAW,OAAS,iCAC3BA,EAAO,SAAW,cAAgB,6BAClCA,EAAO,SAAW,WAAa,+BAAiC,4BAClE,GACE,SAAAtiB,EAAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAACpH,EAAAA,IAAA,MAAA,CAAI,UAAW,yDACd0pB,EAAO,SAAW,OAAS,gBAC3BA,EAAO,SAAW,cAAgB,cAClCA,EAAO,SAAW,WAAa,eAAiB,aAClD,GACG,SAAc3Y,EAAA2Y,EAAO,MAAM,CAC9B,CAAA,EACA1pB,EAAAA,IAAC,OAAI,UAAU,SACb,gBAAC,IAAE,CAAA,UAAW,WACZ0pB,EAAO,SAAW,OAAS,kBAC3BA,EAAO,SAAW,cAAgB,gBAClCA,EAAO,SAAW,WAAa,iBAAmB,eACpD,GACG,SAAA,CAAAA,EAAO,SAAW,QACjB,iIAEDA,EAAO,SAAW,eACjB,gHAEDA,EAAO,SAAW,YACjB,qIAEDA,EAAO,SAAW,UACjB,0FAAA,CAAA,CAEJ,CACF,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EC1lBMuK,GAAgB,IAAM,CAC1B,KAAM,CAAE,KAAA71B,EAAM,gBAAAe,CAAgB,EAAIR,GAAQ,EACpC,CAAC6G,EAAeC,CAAgB,EAAIzG,EAAA,SAAS,CAAE,CAAA,EAC/C,CAACC,EAASC,CAAU,EAAIF,WAAS,EAAI,EACrC,CAAC7c,EAAQ8rB,CAAS,EAAIjP,WAAS,KAAK,EACpC,CAAC4vB,EAAeC,CAAgB,EAAI7vB,EAAA,SAAS,CAAE,CAAA,EAErDU,EAAAA,UAAU,IAAM,CACVP,GACgB+G,GACpB,EACC,CAAC/G,CAAe,CAAC,EAEpB,MAAM+G,EAAoB,SAAY,CACpChH,EAAW,EAAI,EAEX,GAAA,CAEF,MAAMwH,EAAoB,CACxB,CACE,GAAI,EACJ,KAAM,WACN,MAAO,+BACP,QAAS,2DACT,UAAW,IAAI,KAAK,KAAK,IAAI,EAAI,GAAS,EAC1C,KAAM,GACN,KAAM,CACJ,MAAO,MACP,SAAU,mBACV,UAAW,MACb,CACF,EACA,CACE,GAAI,EACJ,KAAM,QACN,MAAO,kBACP,QAAS,kDACT,UAAW,IAAI,KAAK,KAAK,MAAQ,IAAc,EAC/C,KAAM,GACN,KAAM,CACJ,SAAU,MACV,cAAe,UACjB,CACF,EACA,CACE,GAAI,EACJ,KAAM,WACN,MAAO,qBACP,QAAS,kDACT,UAAW,IAAI,KAAK,KAAK,MAAQ,KAAe,EAChD,KAAM,GACN,KAAM,CACJ,MAAO,MACP,SAAU,oBACV,UAAW,OACb,CACF,EACA,CACE,GAAI,EACJ,KAAM,SACN,MAAO,mBACP,QAAS,sDACT,UAAW,IAAI,KAAK,KAAK,MAAQ,MAAe,EAChD,KAAM,GACN,KAAM,CACJ,MAAO,MACP,SAAU,WACZ,CACF,CAAA,EAGFjB,EAAiBiB,CAAiB,QAC3BtgB,EAAO,CACN,QAAA,MAAM,iCAAkCA,CAAK,EACrD2X,EAAM,MAAM,+BAA+B,CAC7C,CAEAmB,EAAW,EAAK,CAAA,EAGZwP,EAAc5e,GAAc,CAEhC,MAAMiX,MADU,KACGjX,EACbkX,EAAU,KAAK,MAAMD,EAAO,GAAK,EACjCE,EAAQ,KAAK,MAAMD,EAAU,EAAE,EAC/BE,EAAO,KAAK,MAAMD,EAAQ,EAAE,EAElC,OAAIC,EAAO,EAAU,GAAGA,CAAI,OAAOA,EAAO,EAAI,IAAM,EAAE,SAClDD,EAAQ,EAAU,GAAGA,CAAK,QAAQA,EAAQ,EAAI,IAAM,EAAE,SACtDD,EAAU,EAAU,GAAGA,CAAO,UAAUA,EAAU,EAAI,IAAM,EAAE,SAC3D,aAAA,EAGHktB,EAAuBv1C,GAAS,CACpC,OAAQA,EAAM,CACZ,IAAK,WAAmB,MAAA,KACxB,IAAK,QAAgB,MAAA,KACrB,IAAK,WAAmB,MAAA,KACxB,IAAK,SAAiB,MAAA,KACtB,QAAgB,MAAA,IAClB,CAAA,EAGIw1C,EAAwBx1C,GAAS,CACrC,OAAQA,EAAM,CACZ,IAAK,WAAmB,MAAA,4BACxB,IAAK,QAAgB,MAAA,8BACrB,IAAK,WAAmB,MAAA,0BACxB,IAAK,SAAiB,MAAA,4BACtB,QAAgB,MAAA,2BAClB,CAAA,EAGIgoB,EAAa,MAAOC,GAAmB,CAC1BioB,EAAAzrB,IAAS,CAAE,GAAGA,EAAM,CAACwD,CAAc,EAAG,EAAO,EAAA,EAE1D,GAAA,CAEF,MAAM,IAAI,QAAQjY,GAAW,WAAWA,EAAS,GAAG,CAAC,EAErD8W,KACErC,EAAK,IAAIlmB,GACPA,EAAE,KAAO0pB,EAAiB,CAAE,GAAG1pB,EAAG,KAAM,EAAA,EAASA,CACnD,CAAA,EAGF6gB,EAAM,QAAQ,+BAA+B,OAC/B,CACdA,EAAM,MAAM,0BAA0B,CACxC,CAEiB8wB,EAAAzrB,IAAS,CAAE,GAAGA,EAAM,CAACwD,CAAc,EAAG,EAAQ,EAAA,CAAA,EAG3DC,EAAgB,SAAY,CAChC3H,EAAW,EAAI,EAEX,GAAA,CAEF,MAAM,IAAI,QAAQvQ,GAAW,WAAWA,EAAS,GAAI,CAAC,EAErC8W,EAAArC,GAAQA,EAAK,IAAUlmB,IAAA,CAAE,GAAGA,EAAG,KAAM,EAAK,EAAE,CAAC,EAC9D6gB,EAAM,QAAQ,iDAAiD,OACjD,CACdA,EAAM,MAAM,iCAAiC,CAC/C,CAEAmB,EAAW,EAAK,CAAA,EAGZk1B,EAAqB,MAAOxtB,GAAmB,CAClCioB,EAAAzrB,IAAS,CAAE,GAAGA,EAAM,CAACwD,CAAc,EAAG,EAAO,EAAA,EAE1D,GAAA,CAEF,MAAM,IAAI,QAAQjY,GAAW,WAAWA,EAAS,GAAG,CAAC,EAErD8W,KAAyBrC,EAAK,UAAYlmB,EAAE,KAAO0pB,CAAc,CAAC,EAClE7I,EAAM,QAAQ,sBAAsB,OACtB,CACdA,EAAM,MAAM,6BAA6B,CAC3C,CAEiB8wB,EAAAzrB,IAAS,CAAE,GAAGA,EAAM,CAACwD,CAAc,EAAG,EAAQ,EAAA,CAAA,EAG3DytB,EAAwB7uB,EAAc,OAAuBoC,GAC7DzlB,IAAW,SAAiB,CAACylB,EAAa,KAC1CzlB,IAAW,OAAeylB,EAAa,KACpC,EACR,EAEKlC,EAAcF,EAAc,UAAY,CAACtoB,EAAE,IAAI,EAAE,OAEvD,OAAKiiB,EAeDF,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC0I,EAAe,CAAA,KAAK,IAAK,CAAA,CAC5B,CAAA,QAKD,MAAI,CAAA,UAAU,+BACb,SAACtB,EAAA,KAAA,MAAA,CAAI,UAAU,mCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,OACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACb,SAAA,CAACpH,EAAAA,IAAA2H,GAAA,CAAK,UAAU,uBAAwB,CAAA,SACvC,MACC,CAAA,SAAA,CAAC3H,EAAA,IAAA,KAAA,CAAG,UAAU,mCAAmC,SAEjD,eAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBACV,WAAc,EAAI,GAAG0F,CAAW,YAAYA,EAAc,EAAI,IAAM,EAAE,GAAK,cAC9E,CAAA,EACF,CAAA,EACF,EAECA,EAAc,GACb0B,EAAA,KAACqC,GAAO,QAAS5C,EAAe,SAAU5H,EACxC,SAAA,CAACe,EAAAA,IAAAs0B,GAAA,CAAW,UAAU,cAAe,CAAA,EAAE,yBAAA,EAEzC,CAAA,EAEJ,EAGAltB,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAAA,EAAA,KAAC,SAAA,CACC,QAAS,IAAM6G,EAAU,KAAK,EAC9B,UAAW,8DACT9rB,IAAW,MACP,yBACA,yCACN,GACD,SAAA,CAAA,UACSqjB,EAAc,OAAO,GAAA,CAAA,CAC/B,EACA4B,EAAA,KAAC,SAAA,CACC,QAAS,IAAM6G,EAAU,QAAQ,EACjC,UAAW,8DACT9rB,IAAW,SACP,yBACA,yCACN,GACD,SAAA,CAAA,cACaujB,EAAY,GAAA,CAAA,CAC1B,EACA0B,EAAA,KAAC,SAAA,CACC,QAAS,IAAM6G,EAAU,MAAM,EAC/B,UAAW,8DACT9rB,IAAW,OACP,yBACA,yCACN,GACD,SAAA,CAAA,UACSqjB,EAAc,OAASE,EAAY,GAAA,CAAA,CAC7C,CAAA,EACF,CAAA,EACF,EAGA1F,EAAAA,IAAC,MAAI,CAAA,UAAU,YACZ,SAAAq0B,EAAsB,OAAS,EAC9BA,EAAsB,IAAKzsB,GACzB5H,EAAA,IAAC,MAAA,CAEC,UAAW,oEACR4H,EAAa,KAAsC,GAA/B,4BACvB,GAEA,SAAAR,EAAA,KAAC,MAAI,CAAA,UAAU,6BACb,SAAA,CAAApH,MAAC,OAAI,UAAW,oBAAoBm0B,EAAqBvsB,EAAa,IAAI,CAAC,GACzE,SAAC5H,EAAAA,IAAA,OAAA,CAAK,UAAU,UACb,SAAAk0B,EAAoBtsB,EAAa,IAAI,CACxC,CAAA,EACF,EAEAR,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAAApH,EAAA,IAAC,KAAG,CAAA,UAAU,8BACX,SAAA4H,EAAa,MAChB,EACAR,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACZ,SAAA,CAAA,CAACQ,EAAa,MACb5H,EAAA,IAAC,SAAA,CACC,QAAS,IAAM2G,EAAWiB,EAAa,EAAE,EACzC,SAAUgnB,EAAchnB,EAAa,EAAE,EACvC,UAAU,0DACV,MAAM,mBAEN,SAAA5H,EAAAA,IAACgX,GAAM,CAAA,UAAU,SAAU,CAAA,CAAA,CAC7B,EAEFhX,EAAA,IAAC,SAAA,CACC,QAAS,IAAMo0B,EAAmBxsB,EAAa,EAAE,EACjD,SAAUgnB,EAAchnB,EAAa,EAAE,EACvC,UAAU,wDACV,MAAM,sBAEN,SAAA5H,EAAAA,IAACoR,GAAO,CAAA,UAAU,SAAU,CAAA,CAAA,CAC9B,CAAA,EACF,CAAA,EACF,EAECpR,EAAA,IAAA,IAAA,CAAE,UAAU,qBACV,WAAa,QAChB,EAEAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAAApH,MAAC,QAAK,UAAU,wBACb,SAAW0O,EAAA9G,EAAa,SAAS,EACpC,EAEC,CAACA,EAAa,YACZ,OAAK,CAAA,UAAU,gGAAgG,SAEhH,OAAA,CAAA,EAEJ,CAAA,EACF,CAAA,EACF,CAAA,EAvDKA,EAAa,EAAA,CAyDrB,EAEAR,EAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACpH,EAAAA,IAAA2H,GAAA,CAAK,UAAU,sCAAuC,CAAA,EACvD3H,EAAAA,IAAC,KAAG,CAAA,UAAU,yCACX,SAAA7d,IAAW,SAAW,+BACtBA,IAAW,OAAS,2BACpB,qBACH,CAAA,QACC,IAAE,CAAA,UAAU,gBACV,SAAWA,IAAA,MACR,kCACA,8CAEN,CAAA,CAAA,CAAA,CACF,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,CAAA,QAnKG,MAAI,CAAA,UAAU,gDACb,SAACilB,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,kBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,gBAAgB,SAE7B,wCAAA,CAAA,CACF,CAAA,CACF,CAAA,CA4JN,ECxVMu0B,GAAiB,CAAC,CAAE,SAAAz1B,EAAU,aAAA01B,EAAe,MAAY,CAC7D,KAAM,CAAE,gBAAAr1B,EAAiB,QAAAF,EAAS,KAAAb,GAASO,GAAQ,EAEnD,OAAIM,EAEAe,EAAA,IAAC,OAAI,UAAU,gDACb,eAAC,MAAI,CAAA,UAAU,gEAAiE,CAAA,CAClF,CAAA,EAICb,EAIDq1B,IAAiB,CAACp2B,GAAQ,CAAC,CAAC,QAAS,SAAS,EAAE,SAASA,EAAK,IAAI,SAEjE,MAAI,CAAA,UAAU,gDACb,SAACgJ,EAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,uCAAuC,SAAa,gBAAA,EACjEA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAAgD,mDAAA,EACjFA,EAAA,IAAAy0B,GAAA,CAAS,GAAG,IAAI,QAAO,GAAC,CAAA,CAC3B,CAAA,CACF,CAAA,EAIG31B,EAfGkB,EAAAA,IAAAy0B,GAAA,CAAS,GAAG,SAAS,QAAO,EAAC,CAAA,CAgBzC,ECSA,SAASC,IAAM,CACb,OACK10B,MAAAnB,GAAA,CACC,SAACmB,EAAA,IAAAK,GAAA,CACC,gBAACY,GAAa,CAAA,SAAA,CAAA,IACXjB,MAAA20B,GAAA,CACC,SAACvtB,EAAAA,KAAA,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,OAACwtB,GAEC,CAAA,SAAA,CAAC50B,EAAAA,IAAA60B,GAAA,CAAM,KAAK,IAAI,cAAUtsB,GAAO,CAAA,SAAAvI,EAAAA,IAAC6I,GAAK,CAAA,CAAA,CAAA,CAAE,CAAW,CAAA,EACpD7I,EAAAA,IAAC60B,GAAM,CAAA,KAAK,SAAS,cAAUtsB,GAAO,CAAA,SAAAvI,EAAAA,IAACgK,GAAM,CAAA,CAAA,CAAA,CAAE,CAAW,CAAA,EAC1DhK,EAAAA,IAAC60B,GAAM,CAAA,KAAK,iBAAiB,cAAUtsB,GAAO,CAAA,SAAAvI,EAAAA,IAACkL,GAAY,CAAA,CAAA,CAAA,CAAE,CAAW,CAAA,EACxElL,EAAAA,IAAC60B,GAAM,CAAA,KAAK,aAAa,cAAUtsB,GAAO,CAAA,SAAAvI,EAAAA,IAAC+Z,GAAU,CAAA,CAAA,CAAA,CAAE,CAAW,CAAA,EAClE/Z,EAAAA,IAAC60B,GAAM,CAAA,KAAK,iBAAiB,cAAUtsB,GAAO,CAAA,SAAAvI,EAAAA,IAACwc,GAAY,CAAA,CAAA,CAAA,CAAE,CAAW,CAAA,QAGvEqY,GAAM,CAAA,KAAK,SAAS,QAAS70B,MAACgM,IAAM,CAAA,EAAI,QACxC6oB,GAAM,CAAA,KAAK,YAAY,QAAS70B,MAACiN,IAAS,CAAA,EAAI,EAG/CjN,EAAA,IAAC60B,GAAA,CACG,KAAK,aACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAAoP,GAAA,CAAA,CAAU,EAAE,CACvB,CAAA,CAAA,CAEN,EACApP,EAAA,IAAC60B,GAAA,CACG,KAAK,WACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAA4S,GAAA,CAAA,CAAQ,EAAE,CACrB,CAAA,CAAA,CAEN,EACA5S,EAAA,IAAC60B,GAAA,CACG,KAAK,aACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAA+c,GAAA,CAAA,CAAU,EAAE,CACvB,CAAA,CAAA,CAEN,EACA/c,EAAA,IAAC60B,GAAA,CACG,KAAK,QACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAA+d,GAAA,CAAA,CAAK,EAAE,CAClB,CAAA,CAAA,CAEN,EACA/d,EAAA,IAAC60B,GAAA,CACG,KAAK,YACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAAye,GAAA,CAAA,CAAS,EAAE,CACtB,CAAA,CAAA,CAEN,EACAze,EAAA,IAAC60B,GAAA,CACG,KAAK,UACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAA4f,GAAA,CAAA,CAAO,EAAE,CACpB,CAAA,CAAA,CAEN,EACA5f,EAAA,IAAC60B,GAAA,CACG,KAAK,mBACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAA2lB,GAAA,CAAA,CAAa,EAAE,CAC1B,CAAA,CAAA,CAEN,EACA3lB,EAAA,IAAC60B,GAAA,CACG,KAAK,aACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAAoV,GAAA,CAAA,CAAS,EAAE,CACtB,CAAA,CAAA,CAEN,EACApV,EAAA,IAAC60B,GAAA,CACG,KAAK,kBACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAAyV,GAAA,CAAA,CAAO,EAAE,CACpB,CAAA,CAAA,CAEN,EACAzV,EAAA,IAAC60B,GAAA,CACG,KAAK,WACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAAmyB,GAAA,CAAA,CAAQ,EAAE,CACrB,CAAA,CAAA,CAEN,EACAnyB,EAAA,IAAC60B,GAAA,CACG,KAAK,4BACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAAqzB,GAAA,CAAA,CAAc,EAAE,CAC3B,CAAA,CAAA,CAEN,EACArzB,EAAA,IAAC60B,GAAA,CACG,KAAK,iBACL,cACGN,GACC,CAAA,SAAAv0B,EAAAA,IAACuI,IAAO,SAACvI,EAAAA,IAAAi0B,GAAA,CAAA,CAAc,EAAE,CAC3B,CAAA,CAAA,CAEN,EACAj0B,EAAA,IAAC60B,GAAA,CACG,KAAK,SACL,QACG70B,EAAA,IAAAu0B,GAAA,CAAe,aAAc,GAC5B,eAAChsB,GAAO,CAAA,SAAAvI,EAAA,IAACuvB,GAAe,CAAA,CAAA,CAAE,CAAA,EAC5B,CAAA,CAEN,EACAvvB,EAAA,IAAC60B,GAAA,CACG,KAAK,iBACL,QACG70B,EAAA,IAAAu0B,GAAA,CAAe,aAAc,GAC5B,eAAChsB,GAAO,CAAA,SAAAvI,EAAA,IAACuwB,GAAa,CAAA,CAAA,CAAE,CAAA,EAC1B,CAAA,CAEN,EAGAvwB,EAAA,IAAC60B,GAAA,CACG,KAAK,IACL,QACG70B,EAAA,IAAAuI,GAAA,CACC,SAACvI,EAAAA,IAAA,MAAA,CAAI,UAAU,gDACb,SAAAoH,EAAAA,KAAC,MAAI,CAAA,UAAU,cACb,SAAA,CAACpH,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAAG,MAAA,EACxDA,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAAqB,wBAAA,QACtD,IAAE,CAAA,KAAK,IAAI,UAAU,oCAAoC,SAE1D,uBAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAAA,CAEN,CAAA,EACF,EAGAA,EAAA,IAAC80B,GAAA,CACG,SAAS,YACT,UAAW,IACX,gBAAiB,GACjB,YAAa,GACb,aAAY,GACZ,IAAK,GACL,iBAAgB,GAChB,UAAS,GACT,aAAY,EAAA,CAChB,CAAA,CAAA,CACF,CACF,CAAA,CAAA,EACF,EACF,CACF,CAAA,CAEN,CC9MAC,GAAS,WAAW,SAAS,eAAe,MAAM,CAAC,EAAE,aAChDL,GAAI,EAAA,CACT","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,69]}